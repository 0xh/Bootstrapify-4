(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
var Bsify=require("./bsify.js"),CartJS=require("./../../bower_components/shopify-cartjs/dist/cart.js"),Lookbook=require("./bsify.lookbook_gallery.js"),Phd=require("./phd.js"),App=function(){if(CartJS.init(Bsify.cart,Bsify.money_formats),Bsify.product&&(Bsify.ImageSwitcher.preload_product_thumbs(),Bsify.ImageSwitcher.image_swticher(),Bsify.VariantOptionSwitcher.image_variant_switcher(),Bsify.linked_product_options&&Bsify.product.available&&Bsify.product.options.length>1&&Bsify.LinkedProductOptions.linkOptionSelectors(Bsify.product)),Bsify.ajax_add_to_cart&&Bsify.Cart.init(),Bsify.Thumbnails.init(),Bsify.Banner.init(),$(".collection-lookbook").length>0){var o=new Lookbook({gallery_wrapper:".collection-lookbook .products.group",item_wrapper:".group-item-wrap",controls_wrapper:".lookbook-controls"});o.on_loaded=function(){var o=$(".group-item-image").height();$(".lookbook-controls").height(o),Bsify.Thumbnails.orderly()}}Bsify.SocialFeeds.init(),new Phd},app=new App;module.exports=app;


},{"./../../bower_components/shopify-cartjs/dist/cart.js":2,"./bsify.js":13,"./bsify.lookbook_gallery.js":15,"./phd.js":31}],2:[function(require,module,exports){
(function(){var t,e,r,n,a,u,i=function(t,e){return function(){return t.apply(e,arguments)}};e=function(){function t(){this.update=i(this.update,this)}return t.prototype.update=function(t){var e,r,a;for(r in t)a=t[r],"items"!==r&&(this[r]=a);return this.items=function(){var r,a,u,i;for(u=t.items,i=[],r=0,a=u.length;a>r;r++)e=u[r],i.push(new n(e));return i}()},t}(),n=function(){function t(t){this.propertyArray=i(this.propertyArray,this),this.update=i(this.update,this),this.update(t)}return t.prototype.update=function(t){var e,n;for(e in t)n=t[e],"properties"!==e&&(this[e]=n);return this.properties=r.Utils.extend({},t.properties)},t.prototype.propertyArray=function(){var t,e,r,n;r=this.properties,n=[];for(t in r)e=r[t],n.push({name:t,value:e});return n},t}(),r={settings:{dataAPI:!0,requestBodyClass:null,rivetsModels:{},moneyFormat:null,moneyWithCurrencyFormat:null},cart:new e},r.init=function(t,e){return null==e&&(e={}),r.configure(e),r.cart.update(t),r.settings.dataAPI&&r.Data.init(),r.settings.requestBodyClass&&($(document).on("cart.requestStarted",function(){return $("body").addClass(r.settings.requestBodyClass)}),$(document).on("cart.requestComplete",function(){return $("body").removeClass(r.settings.requestBodyClass)})),r.Rivets.init()},r.configure=function(t){return null==t&&(t={}),r.Utils.extend(r.settings,t)},r.Utils={wrapKeys:function(t,e,r){var n,a,u;null==e&&(e="properties"),u={};for(n in t)a=t[n],u[""+e+"["+n+"]"]=null!=r?r:a;return u},unwrapKeys:function(t,e,r){var n,a,u,i;null==e&&(e="properties"),a={};for(n in t)i=t[n],u=n.replace(""+e+"[","").replace("]",""),a[u]=null!=r?r:i;return a},extend:function(t,e){var r,n;for(r in e)n=e[r],t[r]=n;return t},clone:function(t){var e,r;if(null==t||"object"!=typeof t)return t;r=new t.constructor;for(e in t)r[e]=clone(t[e]);return r},isArray:Array.isArray||function(t){return"[object Array]"==={}.toString.call(t)},ensureArray:function(t){return r.Utils.isArray(t)?t:null!=t?[t]:[]},formatMoney:function(t,e){var r;return null!=(null!=(r=window.Shopify)?r.formatMoney:void 0)?Shopify.formatMoney(t,e):t},getSizedImageUrl:function(t,e){var r,n;return null!=(null!=(r=window.Shopify)&&null!=(n=r.Image)?n.getSizedImageUrl:void 0)?Shopify.Image.getSizedImageUrl(t,e):t}},u=[],a=!1,r.Queue={add:function(t,e,n){var i;return null==n&&(n={}),i={url:t,data:e,type:n.type||"POST",dataType:n.dataType||"json",success:r.Utils.ensureArray(n.success),error:r.Utils.ensureArray(n.error),complete:r.Utils.ensureArray(n.complete)},n.updateCart&&i.success.push(r.cart.update),u.push(i),a?void 0:(jQuery(document).trigger("cart.requestStarted",[r.cart]),r.Queue.process())},process:function(){var t;return u.length?(a=!0,t=u.shift(),t.complete=r.Queue.process,jQuery.ajax(t)):(a=!1,void jQuery(document).trigger("cart.requestComplete",[r.cart]))}},r.Core={getCart:function(t){return null==t&&(t={}),t.type="GET",t.updateCart=!0,r.Queue.add("/cart.js",{},t)},addItem:function(t,e,n,a){var u;return null==e&&(e=1),null==n&&(n={}),null==a&&(a={}),u=r.Utils.wrapKeys(n),u.id=t,u.quantity=e,r.Queue.add("/cart/add.js",u,a),r.Core.getCart()},updateItem:function(t,e,n,a){var u;return null==n&&(n={}),null==a&&(a={}),u=r.Utils.wrapKeys(n),u.line=t,null!=e&&(u.quantity=e),a.updateCart=!0,r.Queue.add("/cart/change.js",u,a)},removeItem:function(t,e){return null==e&&(e={}),r.Core.updateItem(t,0,{},e)},updateItemById:function(t,e,n,a){var u;return null==n&&(n={}),null==a&&(a={}),u=r.Utils.wrapKeys(n),u.id=t,null!=e&&(u.quantity=e),a.updateCart=!0,r.Queue.add("/cart/change.js",u,a)},updateItemQuantitiesById:function(t,e){return null==t&&(t={}),null==e&&(e={}),e.updateCart=!0,r.Queue.add("/cart/update.js",{updates:t},e)},removeItemById:function(t,e){var n;return null==e&&(e={}),n={id:t,quantity:0},e.updateCart=!0,r.Queue.add("/cart/change.js",n,e)},clear:function(t){return null==t&&(t={}),t.updateCart=!0,r.Queue.add("/cart/clear.js",{},t)},getAttribute:function(t,e){return t in r.cart.attributes?r.cart.attributes[t]:e},setAttribute:function(t,e,n){var a;return null==n&&(n={}),a={},a[t]=e,r.Core.setAttributes(a,n)},getAttributes:function(){return r.cart.attributes},setAttributes:function(t,e){return null==t&&(t={}),null==e&&(e={}),e.updateCart=!0,r.Queue.add("/cart/update.js",r.Utils.wrapKeys(t,"attributes"),e)},clearAttributes:function(t){return null==t&&(t={}),t.updateCart=!0,r.Queue.add("/cart/update.js",r.Utils.wrapKeys(r.Core.getAttributes(),"attributes",""),t)},getNote:function(){return r.cart.note},setNote:function(t,e){return null==e&&(e={}),e.updateCart=!0,r.Queue.add("/cart/update.js",{note:t},e)}},t=jQuery(document),r.Data={init:function(){return r.Data.setEventListeners("on"),r.Data.render(null,r.cart)},destroy:function(){return r.Data.setEventListeners("off")},setEventListeners:function(e){return t[e]("click","[data-cart-add]",r.Data.add),t[e]("click","[data-cart-remove]",r.Data.remove),t[e]("click","[data-cart-remove-id]",r.Data.removeById),t[e]("click","[data-cart-update]",r.Data.update),t[e]("click","[data-cart-update-id]",r.Data.updateById),t[e]("click","[data-cart-clear]",r.Data.clear),t[e]("change","[data-cart-toggle]",r.Data.toggle),t[e]("change","[data-cart-toggle-attribute]",r.Data.toggleAttribute),t[e]("submit","[data-cart-submit]",r.Data.submit),t[e]("cart.requestComplete",r.Data.render)},add:function(t){var e;return t.preventDefault(),e=jQuery(this),r.Core.addItem(e.attr("data-cart-add"),e.attr("data-cart-quantity"))},remove:function(t){var e;return t.preventDefault(),e=jQuery(this),r.Core.removeItem(e.attr("data-cart-remove"))},removeById:function(t){var e;return t.preventDefault(),e=jQuery(this),r.Core.removeItemById(e.attr("data-cart-remove-id"))},update:function(t){var e;return t.preventDefault(),e=jQuery(this),r.Core.updateItem(e.attr("data-cart-update"),e.attr("data-cart-quantity"))},updateById:function(t){var e;return t.preventDefault(),e=jQuery(this),r.Core.updateItemById(e.attr("data-cart-update-id"),e.attr("data-cart-quantity"))},clear:function(t){return t.preventDefault(),r.Core.clear()},toggle:function(t){var e,n;return e=jQuery(this),n=e.attr("data-cart-toggle"),e.is(":checked")?r.Core.addItem(n):r.Core.removeItemById(n)},toggleAttribute:function(t){var e,n;return e=jQuery(this),n=e.attr("data-cart-toggle-attribute"),r.Core.setAttribute(n,e.is(":checked")?"Yes":"")},submit:function(t){var e,n,a,u;return t.preventDefault(),e=jQuery(this).serializeArray(),n=void 0,u=void 0,a={},jQuery.each(e,function(t,e){return"id"===e.name?n=e.value:"quantity"===e.name?u=e.value:a[e.name]=e.value}),r.Core.addItem(n,u,r.Utils.unwrapKeys(a))},render:function(t,e){var n;return n={item_count:e.item_count,total_price:e.total_price,total_price_money:r.Utils.formatMoney(e.total_price,r.settings.moneyFormat),total_price_money_with_currency:r.Utils.formatMoney(e.total_price,r.settings.moneyWithCurrencyFormat)},jQuery("[data-cart-render]").each(function(){var t;return t=jQuery(this),t.text(n[t.attr("data-cart-render")])})}},"rivets"in window?(r.Rivets={views:[],init:function(){return r.Rivets.bindViews()},destroy:function(){return r.Rivets.unbindViews()},bindViews:function(){var t;return r.Rivets.unbindViews(),t=r.Utils.extend({cart:r.cart},r.settings.rivetsModels),jQuery("[data-cart-view]").each(function(){return r.Rivets.views.push(rivets.bind(this,t))})},unbindViews:function(){var t,e,n,a;for(a=r.Rivets.views,e=0,n=a.length;n>e;e++)t=a[e],t.unbind();return r.Rivets.views=[]}},rivets.formatters.eq=function(t,e){return t===e},rivets.formatters.lt=function(t,e){return e>t},rivets.formatters.gt=function(t,e){return t>e},rivets.formatters.not=function(t){return!t},rivets.formatters.empty=function(t){return!t.length},rivets.formatters.plus=function(t,e){return parseInt(t)+parseInt(e)},rivets.formatters.minus=function(t,e){return parseInt(t)-parseInt(e)},rivets.formatters.prepend=function(t,e){return e+t},rivets.formatters.append=function(t,e){return t+e},rivets.formatters.money=function(t){return r.Utils.formatMoney(t,r.settings.moneyFormat)},rivets.formatters.money_with_currency=function(t){return r.Utils.formatMoney(t,r.settings.moneyWithCurrencyFormat)},rivets.formatters.productImageSize=function(t,e){return r.Utils.getSizedImageUrl(t,e)}):r.Rivets={init:function(){},destroy:function(){}},r.factory=function(t){return t.init=r.init,t.configure=r.configure,t.cart=r.cart,t.settings=r.settings,t.addItem=r.Core.addItem,t.updateItem=r.Core.updateItem,t.updateItemById=r.Core.updateItemById,t.updateItemQuantitiesById=r.Core.updateItemQuantitiesById,t.removeItem=r.Core.removeItem,t.clear=r.Core.clear,t.getAttribute=r.Core.getAttribute,t.setAttribute=r.Core.setAttribute,t.getAttributes=r.Core.getAttributes,t.setAttributes=r.Core.setAttributes,t.clearAttributes=r.Core.clearAttributes,t.getNote=r.Core.getNote,t.setNote=r.Core.setNote},"object"==typeof exports?r.factory(exports):"function"==typeof define&&define.amd?define(["exports"],function(t){return r.factory(this.CartJS=t),t}):r.factory(this.CartJS={})}).call(this);


},{}],3:[function(require,module,exports){
!function(e,t){"use strict";"function"==typeof define&&define.amd?define(["eventEmitter/EventEmitter","eventie/eventie"],function(i,n){return t(e,i,n)}):"object"==typeof exports?module.exports=t(e,require("wolfy87-eventemitter"),require("eventie")):e.imagesLoaded=t(e,e.EventEmitter,e.eventie)}(window,function(e,t,i){"use strict";function n(e,t){for(var i in t)e[i]=t[i];return e}function o(e){return"[object Array]"===d.call(e)}function r(e){var t=[];if(o(e))t=e;else if("number"==typeof e.length)for(var i=0,n=e.length;n>i;i++)t.push(e[i]);else t.push(e);return t}function s(e,t,i){if(!(this instanceof s))return new s(e,t);"string"==typeof e&&(e=document.querySelectorAll(e)),this.elements=r(e),this.options=n({},this.options),"function"==typeof t?i=t:n(this.options,t),i&&this.on("always",i),this.getImages(),c&&(this.jqDeferred=new c.Deferred);var o=this;setTimeout(function(){o.check()})}function h(e){this.img=e}function f(e){this.src=e,p[e]=this}var c=e.jQuery,a=e.console,u="undefined"!=typeof a,d=Object.prototype.toString;s.prototype=new t,s.prototype.options={},s.prototype.getImages=function(){this.images=[];for(var e=0,t=this.elements.length;t>e;e++){var i=this.elements[e];"IMG"===i.nodeName&&this.addImage(i);var n=i.nodeType;if(n&&(1===n||9===n||11===n))for(var o=i.querySelectorAll("img"),r=0,s=o.length;s>r;r++){var h=o[r];this.addImage(h)}}},s.prototype.addImage=function(e){var t=new h(e);this.images.push(t)},s.prototype.check=function(){function e(e,o){return t.options.debug&&u&&a.log("confirm",e,o),t.progress(e),i++,i===n&&t.complete(),!0}var t=this,i=0,n=this.images.length;if(this.hasAnyBroken=!1,!n)return void this.complete();for(var o=0;n>o;o++){var r=this.images[o];r.on("confirm",e),r.check()}},s.prototype.progress=function(e){this.hasAnyBroken=this.hasAnyBroken||!e.isLoaded;var t=this;setTimeout(function(){t.emit("progress",t,e),t.jqDeferred&&t.jqDeferred.notify&&t.jqDeferred.notify(t,e)})},s.prototype.complete=function(){var e=this.hasAnyBroken?"fail":"done";this.isComplete=!0;var t=this;setTimeout(function(){if(t.emit(e,t),t.emit("always",t),t.jqDeferred){var i=t.hasAnyBroken?"reject":"resolve";t.jqDeferred[i](t)}})},c&&(c.fn.imagesLoaded=function(e,t){var i=new s(this,e,t);return i.jqDeferred.promise(c(this))}),h.prototype=new t,h.prototype.check=function(){var e=p[this.img.src]||new f(this.img.src);if(e.isConfirmed)return void this.confirm(e.isLoaded,"cached was confirmed");if(this.img.complete&&void 0!==this.img.naturalWidth)return void this.confirm(0!==this.img.naturalWidth,"naturalWidth");var t=this;e.on("confirm",function(e,i){return t.confirm(e.isLoaded,i),!0}),e.check()},h.prototype.confirm=function(e,t){this.isLoaded=e,this.emit("confirm",this,t)};var p={};return f.prototype=new t,f.prototype.check=function(){if(!this.isChecked){var e=new Image;i.bind(e,"load",this),i.bind(e,"error",this),e.src=this.src,this.isChecked=!0}},f.prototype.handleEvent=function(e){var t="on"+e.type;this[t]&&this[t](e)},f.prototype.onload=function(e){this.confirm(!0,"onload"),this.unbindProxyEvents(e)},f.prototype.onerror=function(e){this.confirm(!1,"onerror"),this.unbindProxyEvents(e)},f.prototype.confirm=function(e,t){this.isConfirmed=!0,this.isLoaded=e,this.emit("confirm",this,t)},f.prototype.unbindProxyEvents=function(e){i.unbind(e.target,"load",this),i.unbind(e.target,"error",this)},s});


},{"eventie":4,"wolfy87-eventemitter":5}],4:[function(require,module,exports){
!function(e){"use strict";function n(n){var t=e.event;return t.target=t.target||t.srcElement||n,t}var t=document.documentElement,o=function(){};t.addEventListener?o=function(e,n,t){e.addEventListener(n,t,!1)}:t.attachEvent&&(o=function(e,t,o){e[t+o]=o.handleEvent?function(){var t=n(e);o.handleEvent.call(o,t)}:function(){var t=n(e);o.call(e,t)},e.attachEvent("on"+t,e[t+o])});var c=function(){};t.removeEventListener?c=function(e,n,t){e.removeEventListener(n,t,!1)}:t.detachEvent&&(c=function(e,n,t){e.detachEvent("on"+n,e[n+t]);try{delete e[n+t]}catch(o){e[n+t]=void 0}});var i={bind:o,unbind:c};"function"==typeof define&&define.amd?define(i):"object"==typeof exports?module.exports=i:e.eventie=i}(window);


},{}],5:[function(require,module,exports){
(function(){"use strict";function e(){}function t(e,t){for(var n=e.length;n--;)if(e[n].listener===t)return n;return-1}function n(e){return function(){return this[e].apply(this,arguments)}}var r=e.prototype,i=this,s=i.EventEmitter;r.getListeners=function(e){var t,n,r=this._getEvents();if(e instanceof RegExp){t={};for(n in r)r.hasOwnProperty(n)&&e.test(n)&&(t[n]=r[n])}else t=r[e]||(r[e]=[]);return t},r.flattenListeners=function(e){var t,n=[];for(t=0;t<e.length;t+=1)n.push(e[t].listener);return n},r.getListenersAsObject=function(e){var t,n=this.getListeners(e);return n instanceof Array&&(t={},t[e]=n),t||n},r.addListener=function(e,n){var r,i=this.getListenersAsObject(e),s="object"==typeof n;for(r in i)i.hasOwnProperty(r)&&-1===t(i[r],n)&&i[r].push(s?n:{listener:n,once:!1});return this},r.on=n("addListener"),r.addOnceListener=function(e,t){return this.addListener(e,{listener:t,once:!0})},r.once=n("addOnceListener"),r.defineEvent=function(e){return this.getListeners(e),this},r.defineEvents=function(e){for(var t=0;t<e.length;t+=1)this.defineEvent(e[t]);return this},r.removeListener=function(e,n){var r,i,s=this.getListenersAsObject(e);for(i in s)s.hasOwnProperty(i)&&(r=t(s[i],n),-1!==r&&s[i].splice(r,1));return this},r.off=n("removeListener"),r.addListeners=function(e,t){return this.manipulateListeners(!1,e,t)},r.removeListeners=function(e,t){return this.manipulateListeners(!0,e,t)},r.manipulateListeners=function(e,t,n){var r,i,s=e?this.removeListener:this.addListener,o=e?this.removeListeners:this.addListeners;if("object"!=typeof t||t instanceof RegExp)for(r=n.length;r--;)s.call(this,t,n[r]);else for(r in t)t.hasOwnProperty(r)&&(i=t[r])&&("function"==typeof i?s.call(this,r,i):o.call(this,r,i));return this},r.removeEvent=function(e){var t,n=typeof e,r=this._getEvents();if("string"===n)delete r[e];else if(e instanceof RegExp)for(t in r)r.hasOwnProperty(t)&&e.test(t)&&delete r[t];else delete this._events;return this},r.removeAllListeners=n("removeEvent"),r.emitEvent=function(e,t){var n,r,i,s,o=this.getListenersAsObject(e);for(i in o)if(o.hasOwnProperty(i))for(r=o[i].length;r--;)n=o[i][r],n.once===!0&&this.removeListener(e,n.listener),s=n.listener.apply(this,t||[]),s===this._getOnceReturnValue()&&this.removeListener(e,n.listener);return this},r.trigger=n("emitEvent"),r.emit=function(e){var t=Array.prototype.slice.call(arguments,1);return this.emitEvent(e,t)},r.setOnceReturnValue=function(e){return this._onceReturnValue=e,this},r._getOnceReturnValue=function(){return this.hasOwnProperty("_onceReturnValue")?this._onceReturnValue:!0},r._getEvents=function(){return this._events||(this._events={})},e.noConflict=function(){return i.EventEmitter=s,e},"function"==typeof define&&define.amd?define(function(){return e}):"object"==typeof module&&module.exports?module.exports=e:i.EventEmitter=e}).call(this);


},{}],6:[function(require,module,exports){
!function(t){var e=function(t,e){this.__init(t,e)},n=e,i=n.prototype;n.counter=0,i.__init=function(e,n){this.$elements=e,this.options=t.extend({},this.defaults,n)},i.defaults={resetHeight:""},i.attach=function(){void 0===this.attached&&(t(window).on("resize",this.handlers().resize),this.attached=!0)},i.handlers=function(){var t=this;return{resize:function(e){t._eachRow(function(e){t._resizeElements(e)})}}},i._columnCount=function(){var e=0,n=0,i=0;return this.$elements.each(function(){return n=t(this).offset().left,i+=1,e>=n&&0!==e?(i-=1,!1):void(e=n)}),i},i._eachRow=function(t){for(var e,n,i=this._dimensions(),r=0;r<i.r;r++)e=i.c*r,n=this.$elements.slice(e,e+i.c),t(n,r)},i._dimensions=function(){var t=this._columnCount(),e=Math.ceil(this.$elements.length/t);return{c:t,r:e}},i._resizeElements=function(e){var n=this._maxHeight(e),i=this.options;e.each(function(r,s){t(s).css("height",n),t(s).trigger("orderly.resize",[s,n,r,e.length,i])})},i._maxHeight=function(e){var n,i,r,s=0,h=this.options;return e.each(function(n,o){t(o).trigger("orderly.reset",[o,h.resetHeight,n,e.length,h]),t(o).css("height",h.resetHeight),r=o.getBoundingClientRect(),i=r.bottom-r.top,i>s&&(s=i)}),n=Math.round(s).toString(),n+="px"};var r={};r._delegate=function(t){var e="_"+(t&&t.method||"register"),n=r[e];n.call(this,t)},r._register=function(t){var n=new e(this,t);n.attach(),n.handlers().resize()},r._children=function(t){var e=this[0].children.length,i=n.counter++;r._childrenData.call(this,i),r._registerChildren(e,i,t),r._register.call(this,t)},r._childrenData=function(e){this.each(function(n,i){t(i.children).each(function(n,i){t(i).attr("data-orderly",e+":"+n)})})},r._registerChildren=function(t,e,n){for(var i=0;t>i;i++)r._register.call(r._find(e,i),n)},r._find=function(e,n){return t('[data-orderly="'+e+":"+n+'"]')},t.fn.orderly=function(t){return this.length>0&&r._delegate.call(this,t),this}}(jQuery);


},{}],7:[function(require,module,exports){
var imagesLoaded=require("imagesloaded");!function(t){var i=function(t,i){this.$ele=t,this.settings=i,this.formater=new e(this.$ele,this.settings),this.fitter=new a(this.$ele,this.settings),this.imageLoaded=imagesLoaded(this.$ele),this.addEventHandlers(),this.hideImages()};i.prototype.addEventHandlers=function(){var i=this;this.imageLoaded.on("done",function(){i.formater.setImageFormat(),i.fitter.setImageFit(),i.showImages(),i.$ele.trigger("ut_imageLoaded")});var e;t(window).resize(function(){e&&clearTimeout(e),e=setTimeout(function(){i.formater.setImageFormat(),i.fitter.setImageFit()},100)})},i.prototype.hideImages=function(){this.$ele.css({opacity:0,overflow:"hidden"})},i.prototype.showImages=function(){this.$ele.fadeTo(900,1)};var e=function(t,i){this.$wrapper=t,this.settings=i,this.ratio=this.getRatio()};e.prototype.setImageFormat=function(){var t=this.$wrapper.width()/this.ratio.width,i=t*this.ratio.height;this.$wrapper.height(i)},e.prototype.getRatio=function(){var t=this._getRatioString();return this._getRatioFromString(t)},e.prototype._getRatioString=function(){switch(this.settings.format){case"square":return"1:1";case"landscape":return this.settings.landscapeRatio;case"portrait":return this.settings.portraitRatio;default:return this.settings.ratio}},e.prototype._getRatioFromString=function(t){var i=t.split(":");return{width:i[0],height:i[1]}};var a=function(t,i){this.$wrapper=t,this.$image=this.$wrapper.find("img"),this.settings=i,this.wrapperRatio,this.imageRatio,this.imageNaturalWidth,this.imageNaturalHeight};a.prototype.setImageFit=function(){switch(this._resetImageCSS(),this.settings.fit){case"crop":this._cropImage();break;case"scale":this._scaleImage()}this._alignImage()},a.prototype._cropImage=function(){this._imageRatio()>this._wrapperRatio()?this._fitHorizontal():this._fitVertical()},a.prototype._scaleImage=function(){this._imageRatio()>this._wrapperRatio()?this._fitVertical():this._fitHorizontal()},a.prototype._fitHorizontal=function(){this._getNaturalHeight(this.$image)>=this.$wrapper.height()&&this.$image.height(this.$wrapper.height())},a.prototype._fitVertical=function(){this._getNaturalWidth(this.$image)>=this.$wrapper.width()&&this.$image.width(this.$wrapper.width())},a.prototype._imageRatio=function(){return this.imageRatio=this.imageRatio||this._getNaturalWidth(this.$image)/this._getNaturalHeight(this.$image),this.imageRatio},a.prototype._wrapperRatio=function(){return this.wrapperRatio=this.wrapperRatio||this.$wrapper.width()/this.$wrapper.height(),this.wrapperRatio},a.prototype._alignImage=function(){var t={};switch(t.marginLeft=(this.$wrapper.width()-this.$image.width())/2,this.settings.align){case"top":break;case"middle":t.marginTop=(this.$wrapper.height()-this.$image.height())/2;break;case"bottom":t.marginTop=this.$wrapper.height()-this.$image.height()}this.$image.css(t)},a.prototype._getNaturalHeight=function(t){return this.imageNaturalHeight||(t.prop("naturalHeight")?this.imageNaturalHeight=t.prop("naturalHeight"):this.imageNaturalHeight=this._getNaturalSize(t).height),this.imageNaturalHeight},a.prototype._getNaturalWidth=function(t){return this.imageNaturalWidth||(t.prop("naturalWidth")?this.imageNaturalWidth=t.prop("naturalWidth"):this.imageNaturalWidth=this._getNaturalSize(t).width),this.imageNaturalWidth},a.prototype._getNaturalSize=function(t){if(t.prop("src")){var i=new Image;return i.src=t.prop("src"),{width:i.width,height:i.height}}return!1},a.prototype._resetImageCSS=function(){this.$image.css({maxWidth:"none",width:"auto",height:"auto"})};var r=0,h=function(i){r++,r===i.length&&t(i).last().trigger("ut_complete")};t.fn.uniform_thumbnails=function(e){var a=t.extend({},t.fn.uniform_thumbnails.defaults,e),r=this;return r.each(function(){var e=t(this);e.data("_uniform_thumbnails",new i(e,a)),e.on("ut_imageLoaded",function(){h(r)})})},t.fn.uniform_thumbnails.defaults={fit:"crop",ratio:"1:1",format:"ratio",align:"middle",landscapeRatio:"4:3",portraitRatio:"3:4"}}(jQuery);


},{"imagesloaded":3}],8:[function(require,module,exports){
var DataModel=function(e,t){this.obj=e,this._build_properties(t)};DataModel.prototype._build_properties=function(e){var t=this;for(var o in e)e.hasOwnProperty(o)&&t._build_property_methods(o,e[o])},DataModel.prototype._build_property_methods=function(e,t){var o=e+"_selector";Object.defineProperty(this.obj,o,{value:t});var r,a=this;Object.defineProperty(this.obj,e,{enumerable:!0,configurable:!0,get:function(){return r},set:function(e){r!==e&&(r=e,a._update_elements(t,r))}})},DataModel.prototype._update_elements=function(e,t){var o=this;$(e).each(function(e,r){o._set_element_value(r,t)})},DataModel.prototype._set_element_value=function(e,t){var o=$(e);this._is_input(e)?o.val(t):o.html(t)},DataModel.prototype._is_input=function(e){var t=e.tagName.toLowerCase();return"input"===t||"select"===t||"textarea"===t},module.exports=DataModel;


},{}],9:[function(require,module,exports){
var Eventer=function(t){this.caller=t,this.caller._events={},this.caller.on=this.on,this.caller.off=this.off,this.caller.trigger=this.trigger};Eventer.prototype.on=function(t,e){return this._events[t]||(this._events[t]=[]),this._events[t].push(e),this._events[t].length-1},Eventer.prototype.off=function(t,e){t&&e?this._events[t][e]&&(this._events[t][e]=null):t?this._events[t]&&(this._events[t]=null):this._events={}},Eventer.prototype.trigger=function(t,e){"object"!=typeof e&&(e=[e]);for(var n in this._events[t]){var s=this._events[t][n];this._events[t].hasOwnProperty(n)&&"function"==typeof s&&s.apply(this,e)}},module.exports=Eventer;


},{}],10:[function(require,module,exports){
Banner={};var $banner=$("[data-banner]");Banner.init=function(){$banner.length>0&&Banner.add_event_handlers()},Banner.add_event_handlers=function(){$banner.on("slide.bs.carousel",function(n){var a=$(n.relatedTarget);$banner.attr("data-banner",a.data("slide"))}),$banner.on("slid.bs.carousel",function(){})},module.exports=Banner;


},{}],11:[function(require,module,exports){
var CartJS=require("./../../bower_components/shopify-cartjs/dist/cart.js"),Cart={},message_count=0,$cart_display_ele=$("[data-cart-display]"),$cart_total_ele=$("[data-cart-total]"),$cart_form_ele=$(Bsify.selectors.cart.form_selector),$cart_message_ele=$(Bsify.selectors.cart.message_selector);if(Bsify.product)var $product_form_ele=$(Bsify.selectors.product.form_selector),$product_form_button=$product_form_ele.find("input[type=submit]"),$product_form_message_ele=$(Bsify.selectors.product.form_message_selector);Cart.init=function(){$(document).on("cart.requestComplete",function(t,e){Cart.update_cart_display(),Cart.update_cart_table()}),Bsify.product&&$(document).on("submit",Bsify.selectors.product.form_selector,function(t){t.preventDefault();var e=$(t.currentTarget);Cart.add_item_to_cart(e)}),$(document).on("click","[data-remove-item]",function(t){t.preventDefault();var e=$(t.currentTarget);Cart.remove_item_from_cart(e)})},Cart.add_item_to_cart=function(t){var e=Cart.form_values(t.serializeArray()),r={},a=Bsify.get_variant_by_id(e.id),s=Bsify.product.title+Bsify.translations.product.item_title_seperator+a.title;$product_form_button.val(Bsify.translations.product.adding_to_cart_button_text),CartJS.addItem(e.id,e.quantity,r,{success:function(t,e,r){var a=Bsify.translations.product.after_product_added_message_html.replace("[item_title]",s);Cart.show_message($product_form_message_ele,"success",a),$product_form_button.val(Bsify.translations.product.added_to_cart_button_text)},error:function(t,e,r){console.log("[ERROR] - Add to cart:",t,e,r);var a=Bsify.translations.product.after_product_added_error_message_html.replace("[item_title]",s).replace("[error_message]",r);Cart.show_message($product_form_message_ele,"error",a),$product_form_button.val(Bsify.translations.product.unavailable_button_text)}})},Cart.remove_item_from_cart=function(t){var e=t.closest(Bsify.selectors.cart.item_selector),r=Cart.get_item_by_id(e.data("cart-item")),a=r.product_title+Bsify.translations.product.item_title_seperator+r.variant_title;CartJS.removeItem(t.data("remove-item"),{success:function(t,r,s){e.hide();var o=Bsify.translations.cart.remove_item_message.replace("[item_title]",a);Cart.show_message($cart_message_ele,"success",o)},error:function(t,e,r){console.log("[ERROR] - Remove item from cart:",t,e,r);var s=Bsify.translations.cart.remove_item_error_message.replace("[item_title]",a).replace("[error_message]",r);Cart.show_message($cart_message_ele,"success",s)}})},Cart.update_cart_display=function(){var t=Shopify.formatMoney(CartJS.cart.total_price,Bsify.money_formats.moneyFormat),e=Shopify.formatMoney(CartJS.cart.total_price,Bsify.money_formats.moneyWithCurrencyFormat),r=Bsify.translations.cart.cart_display_text.replace("[item_count]",CartJS.cart.item_count).replace("[cart_total_price]",t).replace("[cart_total_price_with_currency]",e);$cart_display_ele.html(r);var a=Bsify.translations.cart.cart_total.replace("[cart_total_price]",t).replace("[cart_total_price_with_currency]",e);$cart_total_ele.html(a)},Cart.update_cart_table=function(){0===CartJS.cart.item_count&&($cart_form_ele.hide(),$cart_message_ele.removeClass("hidden").html(Bsify.translations.cart.empty_cart_text))},Cart.show_message=function(t,e,r){message_count++,t.removeClass("hidden").html('<div class="note '+e+" message"+message_count+'">'+r+"</div>"),Cart.remove_message(message_count)},Cart.remove_message=function(t){setTimeout(function(){$(".message"+t).fadeOut(function(){$(this).remove()})},Bsify.message_timeout)},Cart.form_values=function(t){for(var e={},r=0;r<t.length;r++){var a=t[r];e[a.name]=a.value}return e},Cart.get_item_by_id=function(t){"string"==typeof t&&(t=parseInt(t));var e;if(CartJS)for(var r=0;r<CartJS.cart.items.length;r++){var a=CartJS.cart.items[r];a.variant_id===t&&(e=a)}return e},Cart.has_variant=function(t){"string"==typeof t&&(t=parseInt(t));var e=!1;if(CartJS)for(var r=0;r<CartJS.cart.items.length;r++){var a=CartJS.cart.items[r];a.variant_id===t&&(e=!0)}return e},module.exports=Cart;


},{"./../../bower_components/shopify-cartjs/dist/cart.js":2}],12:[function(require,module,exports){
var ImageSwitcher={};ImageSwitcher.preload_product_thumbs=function(){var e=$("[data-gallery-main]");if(e.length>0){var a=$(e.data("gallery-main"))[0],i=Shopify.Image.imageSize(a.src);e.length>0&&e.each(function(){var e=new Image,a=$(this).attr("href"),r=Shopify.Image.getSizedImageUrl(a,i);e.src=r})}},ImageSwitcher.image_swticher=function(){$(document).on("click","[data-gallery-main]",function(e){e.preventDefault();var a=$(e.currentTarget),i=$(a.data("gallery-main"))[0],r=a.attr("href");ImageSwitcher.switch_image(i,r)})},ImageSwitcher.switch_image=function(e,a){if(e&&a){var i=Shopify.Image.imageSize(e.src),r=Shopify.Image.getSizedImageUrl(a,i);e.src!==r&&(e.src=r)}},module.exports=ImageSwitcher;


},{}],13:[function(require,module,exports){
var Bsify=window.Bsify||{};Bsify.get_variant_by_id=function(i){var r;"string"==typeof i&&(i=parseInt(i));for(var s=0;s<Bsify.product.variants.length;s++){var e=Bsify.product.variants[s];e.id===i&&(r=e)}return r},Bsify.Cart=require("./bsify.cart.js"),Bsify.ImageSwitcher=require("./bsify.image_switcher.js"),Bsify.VariantOptionSwitcher=require("./bsify.variant_option_switcher.js"),Bsify.LinkedProductOptions=require("./bsify.linked_product_options.js"),Bsify.Banner=require("./bsify.banner.js"),Bsify.Thumbnails=require("./bsify.thumbnails.js"),Bsify.SocialFeeds=require("./bsify.social_feeds.js"),module.exports=Bsify;


},{"./bsify.banner.js":10,"./bsify.cart.js":11,"./bsify.image_switcher.js":12,"./bsify.linked_product_options.js":14,"./bsify.social_feeds.js":18,"./bsify.thumbnails.js":19,"./bsify.variant_option_switcher.js":21}],14:[function(require,module,exports){
var LinkedProductOptions={};LinkedProductOptions.optionsMap={},LinkedProductOptions.updateOptionsInSelector=function(o){var t,n;switch(o){case 0:t="root",n=jQuery(".single-option-selector:eq(0)");break;case 1:t=jQuery(".single-option-selector:eq(0)").val(),n=jQuery(".single-option-selector:eq(1)");break;case 2:t=jQuery(".single-option-selector:eq(0)").val(),t+=" / "+jQuery(".single-option-selector:eq(1)").val(),n=jQuery(".single-option-selector:eq(2)")}var i=n.val();n.empty();var e=LinkedProductOptions.optionsMap[t];if(void 0!==e){for(var p=0;p<e.length;p++){var s=e[p],r=jQuery("<option></option>").val(s).html(s);n.append(r)}jQuery('.swatch[data-option-index="'+o+'"] .swatch-element').each(function(){-1!==jQuery.inArray($(this).attr("data-value"),e)?$(this).removeClass("soldout").show().find(":radio").removeAttr("disabled","disabled").removeAttr("checked"):$(this).addClass("soldout").hide().find(":radio").removeAttr("checked").attr("disabled","disabled")}),-1!==jQuery.inArray(i,e)&&n.val(i),n.trigger("change")}},LinkedProductOptions.linkOptionSelectors=function(o){for(var t=0;t<o.variants.length;t++){var n=o.variants[t];if(n.available){var i;LinkedProductOptions.optionsMap.root=LinkedProductOptions.optionsMap.root||[],LinkedProductOptions.optionsMap.root.push(n.option1),LinkedProductOptions.optionsMap.root=Shopify.uniq(LinkedProductOptions.optionsMap.root),o.options.length>1&&(i=n.option1,LinkedProductOptions.optionsMap[i]=LinkedProductOptions.optionsMap[i]||[],LinkedProductOptions.optionsMap[i].push(n.option2),LinkedProductOptions.optionsMap[i]=Shopify.uniq(LinkedProductOptions.optionsMap[i])),3===o.options.length&&(i=n.option1+" / "+n.option2,LinkedProductOptions.optionsMap[i]=LinkedProductOptions.optionsMap[i]||[],LinkedProductOptions.optionsMap[i].push(n.option3),LinkedProductOptions.optionsMap[i]=Shopify.uniq(LinkedProductOptions.optionsMap[i]))}}LinkedProductOptions.updateOptionsInSelector(0),o.options.length>1&&LinkedProductOptions.updateOptionsInSelector(1),3===o.options.length&&LinkedProductOptions.updateOptionsInSelector(2),jQuery(".single-option-selector:eq(0)").change(function(){return LinkedProductOptions.updateOptionsInSelector(1),3===o.options.length&&LinkedProductOptions.updateOptionsInSelector(2),!0}),jQuery(".single-option-selector:eq(1)").change(function(){return 3===o.options.length&&LinkedProductOptions.updateOptionsInSelector(2),!0})},module.exports=LinkedProductOptions;


},{}],15:[function(require,module,exports){
var imgl=require("imagesloaded"),mq=require("./bsify.media_queries.js");require("./bsify.touch.js");var GalleryLoader=function(e,t){this.ele=e,this.parent_ele=t,this.onLoaded=function(){}};GalleryLoader.prototype.init=function(){this.$ele=$(this.ele),this.carousel_width=0,this.imgLoad=new imgl(this.ele);var e=this;this.imgLoad.on("progress",function(t,i){e._collect_image_width(i)}).on("done",function(){e._set_carousel_width(),e.onLoaded.apply(e)})},GalleryLoader.prototype._collect_image_width=function(e){if(e.isLoaded){var t=$(e.img),i=t.closest(this.parent_ele);this.carousel_width+=this._image_parents_width(i)}else $(e.img).hide()},GalleryLoader.prototype._image_parents_width=function(e){return e.width()+this._padding_to_num(e,"paddingLeft")+this._padding_to_num(e,"paddingRight")+1},GalleryLoader.prototype._padding_to_num=function(e,t){return parseInt(e.css(t).replace("px",""))},GalleryLoader.prototype._set_carousel_width=function(){this.$ele.width(this.carousel_width)};var Gallery=function(e){this.options=e,this.ele=this.options.gallery_wrapper,this.item_wrapper=this.options.item_wrapper,this.controls_wrapper=this.options.controls_wrapper,this.loader=new GalleryLoader(this.ele,this.options.item_wrapper),this.on_loaded=!1,this._init()};Gallery.prototype.update=function(){this.$ele.parent().animate({opacity:0},"slow"),this._remove_event_handlers(),this._init()},Gallery.prototype._init=function(){this.$ele=$(this.ele),this.$ele.length>0&&(this._add_event_handlers(),this.loader.init(),this._set_current_image())},Gallery.prototype._add_event_handlers=function(){var e=this;this.loader.onLoaded=function(){e.$ele.parent().animate({opacity:1},"slow"),e.on_loaded&&e.on_loaded.apply(e)},$(document).on("swipeLeft",this.controls_wrapper,function(t){e._next_img()}),$(document).on("swipeRight",this.controls_wrapper,function(t){e._prev_img()}),$(document).on("click","[data-gallery-direction]",function(t){t.preventDefault();var i=$(t.currentTarget);"left"===i.data("gallery-direction")?e._prev_img():e._next_img()})},Gallery.prototype._remove_event_handlers=function(){this.loader.onLoaded=!1,$(document).off("swipeLeft",this.controls_wrapper),$(document).off("swipeRight",this.controls_wrapper),$(document).off("click","[data-gallery-direction]")},Gallery.prototype._set_current_image=function(){var e=this.$ele.find(this.item_wrapper+".is_current");e.length>0?this.$current_image=e.first():this.$current_image=this.$ele.find(this.item_wrapper).first(),this.$current_image.addClass("is_current"),this._check_for_end()},Gallery.prototype._prev_img=function(){var e=this.$current_image.prev();e.length>0&&(e.css({marginLeft:"0"}).addClass("is_current"),this.$current_image.removeClass("is_current"),this.$current_image=e,this._check_for_end())},Gallery.prototype._next_img=function(){var e=this.$current_image.next();if(e.length>0){var t=this.loader._image_parents_width(this.$current_image);this.$current_image.css({marginLeft:-1*t}).removeClass("is_current"),e.addClass("is_current"),this.$current_image=e,this._check_for_end()}},Gallery.prototype._check_for_end=function(){$("[data-gallery-direction]").removeClass("disabled"),0===this.$current_image.prev().length?$('[data-gallery-direction="left"]').addClass("disabled"):0===this.$current_image.next().length&&$('[data-gallery-direction="right"]').addClass("disabled")},module.exports=Gallery;


},{"./bsify.media_queries.js":16,"./bsify.touch.js":20,"imagesloaded":3}],16:[function(require,module,exports){
window.getComputedStyle||(window.getComputedStyle=function(t,e){return this.el=t,this.getPropertyValue=function(e){var n=/(\-([a-z]){1})/g;return"float"==e&&(e="styleFloat"),n.test(e)&&(e=e.replace(n,function(){return arguments[2].toUpperCase()})),t.currentStyle[e]?t.currentStyle[e]:null},this}),module.exports.size=function(){return window.getComputedStyle(document.body,":after").getPropertyValue("content")};


},{}],17:[function(require,module,exports){
var InstagramFeed=function(t){this.ele=t,this.$ele=$(this.ele),this.api_url="https://api.instagram.com/v1",this.request_queue=[],this.requesting=!1,this.image_count_default=12,this.image_count_buffer=10,this._get_data(),this._load_feed()};InstagramFeed.prototype._get_data=function(){this.client_id=this.$ele.data("client-id"),this.image_count=this.$ele.data("image-count")||this.image_count_default,this.image_total=this.image_count+this.image_count_buffer,this.hashtag=this.$ele.data("hashtag"),this.user=this.$ele.data("user"),this._get_user_id()},InstagramFeed.prototype._get_user_id=function(){this.user&&(this.request_queue.push("user_id"),this._start_requests())},InstagramFeed.prototype._load_feed=function(){var t;void 0!==this.hashtag?t="hashtag":void 0!==this.user&&(t="user"),this.request_queue.push(t),this._start_requests()},InstagramFeed.prototype._build_request=function(t){if(null===this.client_id)throw"[ERROR] Instagram: You must provide a client id";var e={};switch(e.data={client_id:this.client_id},t){case"user_id":e.url=this.api_url+"/users/search?q="+this.user,e.callback=function(t){this.user_id=t.data[0].id};break;case"user":e.url=this.api_url+"/users/"+this.user_id+"/media/recent",e.data=$.extend(e.data,{count:this.image_total}),e.callback=function(t){this._build_feed(t.data)};break;case"hashtag":e.url=this.api_url+"/tags/"+this.hashtag+"/media/recent",e.data=$.extend(e.data,{count:this.image_total}),e.callback=function(t){this._build_feed(t.data)}}return e},InstagramFeed.prototype._start_requests=function(){this.requesting||(this.requesting=!0,this._request())},InstagramFeed.prototype._request=function(){if(this.request_queue.length>0){var t=this,e=this.request_queue.shift(),a=this._build_request(e);$.ajax({dataType:"jsonp",url:a.url,data:a.data}).done(function(e){a.callback.apply(t,[e]),t._request()}).fail(function(t,e,a){console.log("fail",t,e,a)})}else this.requesting=!1},InstagramFeed.prototype._build_feed=function(t){var e,a=this._filter_data(t);a.length>0?(e=this._build_feed_markup(a),this.$ele.addClass("group").attr("data-group-size",a.length)):e=this._build_error_markup(),this.$ele.append(e)},InstagramFeed.prototype._filter_data=function(t){return t},InstagramFeed.prototype._build_feed_markup=function(t){for(var e="",a=t.length<this.image_count?t.length:this.image_count,i=0;a>i;i++){var s=t[i];s&&(e+=this._build_item_markup(s))}return e},InstagramFeed.prototype._build_item_markup=function(t){return'<div class="group-item-wrap">    <figure class="group-item thumbnail">      <a href="'+t.link+'">        <div class="group-item-image">          <img src="'+t.images.standard_resolution.url+'" alt="'+t.caption.text+'">        </div>        <figcaption class="group-item-details caption">          <p><span class="user">'+t.caption.from.username+"</span> "+t.caption.text+"</p>        </figcaption>      </a>    </figure>  </div>"},InstagramFeed.prototype._build_error_markup=function(t){return"<p>"+this.$ele.data("empty-message")+"</p>"},module.exports=InstagramFeed;


},{}],18:[function(require,module,exports){
var Instagram=require("./bsify.social_feed_instagram.js"),SocialFeeds={};SocialFeeds.init=function(){SocialFeeds.instagram()},SocialFeeds.instagram=function(){var e=SocialFeeds._get_elements("instagram");e.length>0&&e.each(function(){new Instagram(this)})},SocialFeeds._get_elements=function(e){var a='[data-social-feed="'+e+'"]';return $(a)},module.exports=SocialFeeds;


},{"./bsify.social_feed_instagram.js":17}],19:[function(require,module,exports){
require("uniformThumbnails"),require("jquery-orderly");var Thumbnails={};Thumbnails.init=function(){if(Bsify.thumbnail_settings.constrain_images){var i={};i.fit=Bsify.thumbnail_settings.crop_images?"crop":"scale",i.align=Bsify.thumbnail_settings.image_alignment.toLowerCase();var e=Bsify.thumbnail_settings.image_ratio.toLowerCase();"square"===e||"landscape"===e||"portrait"===e?i.format=e:i.ratio=e,$(Bsify.thumbnail_selectors.image_wrapper).uniform_thumbnails(i).on("ut_complete",function(){Thumbnails.orderly()})}else Thumbnails.orderly()},Thumbnails.orderly=function(){$(Bsify.thumbnail_selectors.details_wrapper).orderly({method:"children"})},module.exports=Thumbnails;


},{"jquery-orderly":6,"uniformThumbnails":7}],20:[function(require,module,exports){
var Swipe=function(){this.threshold=5,this.xDown=null,this.yDown=null,this.add_event_listeners()};Swipe.prototype.add_event_listeners=function(){var t=this;Element.prototype.addEventListener&&(document.addEventListener("touchstart",function(e){t.handleTouchStart(e)},!1),document.addEventListener("touchmove",function(e){t.handleTouchMove(e)},!1))},Swipe.prototype.handleTouchStart=function(t){this.xDown=t.touches[0].clientX,this.yDown=t.touches[0].clientY},Swipe.prototype.handleTouchMove=function(t){if(this.xDown&&this.yDown){var e=t.targetTouches[0].target,n=t.touches[0].clientX,i=t.touches[0].clientY,o=this.xDown-n,h=this.yDown-i;Math.abs(o)>Math.abs(h)?o>0?o>this.threshold&&$(e).trigger("swipeLeft"):-1*o>this.threshold&&$(e).trigger("swipeRight"):h>0?h>this.threshold&&$(e).trigger("swipeUp"):-1*h>this.threshold&&$(e).trigger("swipeDown"),this.xDown=null,this.yDown=null}},new Swipe;


},{}],21:[function(require,module,exports){
var VariantOptionSwitcher={};VariantOptionSwitcher.image_variant_switcher=function(){var t=$(Bsify.selectors.product.select_selector);$(document).on("click","[data-variant-id]",function(i){i.preventDefault();var r=$(i.currentTarget);t.val(r.data("variant-id")),VariantOptionSwitcher.update_product_selector_options(t)})},VariantOptionSwitcher.update_product_selector_options=function(t){var i=t.val(),r=Bsify.get_variant_by_id(i);if(r)for(var a=0;a<Bsify.product.options.length;a++){var e="option"+(a+1),n=r[e];$(".single-option-selector:eq("+a+")").val(n).trigger("change")}},module.exports=VariantOptionSwitcher;


},{}],22:[function(require,module,exports){
var SixPackBuilder=require("./phd.cart.sixpack.js"),MultiStepBuilder=require("./phd.cart.multistep.js"),StandardCart=require("./phd.cart.standard.js"),PhdCart=function(){var r=new StandardCart;new SixPackBuilder(r),new MultiStepBuilder(r)};module.exports=PhdCart;


},{"./phd.cart.multistep.js":23,"./phd.cart.sixpack.js":29,"./phd.cart.standard.js":30}],23:[function(require,module,exports){
var MultiStepBuilder=function(t){this.standard_cart=t};module.exports=MultiStepBuilder;


},{}],24:[function(require,module,exports){
var Eventer=require("./_eventer.js"),ItemsHolder=require("./phd.cart.sixpack.holder_items.js"),ItemsDisplay=require("./phd.cart.sixpack.holder_display.js"),ItemSubmitter=require("./phd.cart.sixpack.holder_submitter.js"),SixPackHolder=function(e){this.$ele=e,new Eventer(this);var t=this.$ele.data("phd-holding-limit-multiple")||6,i=this.$ele.find("[data-phd-holding-items]"),s=this.$ele.find("form");this.items=new ItemsHolder(t),this.items_display=new ItemsDisplay(i,t,this.items),this.submitter=new ItemSubmitter(s,this.items),this._add_event_listeners()};SixPackHolder.prototype.add_to_holding=function(e){return this.items.add_item(e),this.items.item_count(e.id)},SixPackHolder.prototype.remove_from_holding=function(e){return this.items.remove_item(e),this.items.item_count(e)},SixPackHolder.prototype.update_item_in_holding=function(e,t){return this.items.update_item(e,t),this.items.item_count(e.id)},SixPackHolder.prototype._add_event_listeners=function(){var e=this;e.items_display.on("RemoveDisplayItem",function(t){e.items.remove_item(t);var i=[t,this.items.item_count(t)];e.trigger("RemoveItem",i)})},module.exports=SixPackHolder;


},{"./_eventer.js":9,"./phd.cart.sixpack.holder_display.js":25,"./phd.cart.sixpack.holder_items.js":26,"./phd.cart.sixpack.holder_submitter.js":27}],25:[function(require,module,exports){
var Eventer=require("./_eventer.js"),SixPackHolderItemsDisplay=function(t,i,e){this.$ele=t,this.items=e,this.limit_multiple=i,this.tooltip_selector='[data-toggle="tooltip"]',this.default_color="#E0F0D9",new Eventer(this),this._add_event_listeners(),this._build_empty_display_items(),this._add_tooltips()};SixPackHolderItemsDisplay.prototype.update=function(){this._clear_display_items(),this._redraw_display_items(),this._update_display_items(),this._add_tooltips()},SixPackHolderItemsDisplay.prototype.reset=function(){this._clear_display_items(),this._build_empty_display_items(),this._add_tooltips()},SixPackHolderItemsDisplay.prototype._add_event_listeners=function(){var t=this;t.items.on("ItemsUpdated",function(){t.update()}),t.$ele.on("click",".holding-item",function(i){i.preventDefault(),t._remove_item(i)})},SixPackHolderItemsDisplay.prototype._redraw_display_items=function(){for(var t=this.items.total_count(),i=Math.floor(t/this.limit_multiple)+1,e=0;i>e;e++)this._build_empty_display_items()},SixPackHolderItemsDisplay.prototype._clear_display_items=function(){this._remove_tooltips(),this.$ele.html("")},SixPackHolderItemsDisplay.prototype._build_empty_display_items=function(){for(var t="",i=0;i<this.limit_multiple;i++)t+=this._empty_display_item_markup();this.$ele.append('<div class="holding-item-group">'+t+"</div>")},SixPackHolderItemsDisplay.prototype._empty_display_item_markup=function(){return'<a class="holding-item holding-item-disabled" data-toggle="tooltip" data-placement="right" data-phd-item-id title="Empty item slot">    <span class="fa fa-times-circle"></span>    <svg version="1.2" baseprofile="tiny" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewbox="0 0 150 400" xml:space="preserve"> <path d="M64.2,9.6c-4.7,0.3-9.3,0.6-13.9,1.9c-3.6,1.1-5.6,3.7-6,7c-0.9,7.5-1.8,15-1.3,22.5c0.2,2.2,1.7,4.1,1.7,6.5,c0,2.5,0.4,4.9,0.7,7.4c0.1,1.2-0.6,1.6-1.6,1.8c-1.3,0.3-2.4,0.9-2.8,2.4c-0.7,2.9-0.4,3.4,2.6,3.9c1.2,0.2,1.8,0.7,1.8,2,c-0.1,2.7,0,5.3,0,8c0,0.8-0.1,1.5-0.9,2c-8.4,3.8-18.1,15.8-18.1,15.8c-5.8,7.6-9.3,16.1-11.6,25.4c-1.1,4.4-1,8.7-1.1,13.1,l-0.2,211.4c-0.2,11.5-0.4,22.9,0.2,34.4c0.4,8,4.8,12.5,13.5,14.1c5.5,1,11,1.3,16.5,1.6c8.1,0.3,18.1,0.1,26.2,0.2h10.2,c8.1,0,18.1,0.2,26.2-0.2c5.5-0.2,11-0.5,16.5-1.6c8.7-1.6,13.1-6.1,13.5-14.1c0.6-11.5,0.3-22.9,0.2-34.4l-0.2-211.4,c0-4.4,0.1-8.7-1.1-13.1c-2.3-9.2-5.9-17.7-11.6-25.4c0,0-8-11.3-18.1-15.8c-0.8-0.5-0.9-1.2-0.9-2c0-2.7,0-5.3,0-8,c0-1.3,0.6-1.8,1.8-2c2.9-0.5,3.2-1,2.6-3.9c-0.4-1.5-1.5-2.1-2.8-2.4c-1-0.2-1.7-0.7-1.6-1.8c0.2-2.5,0.6-4.9,0.7-7.4,c0-2.3,1.6-4.2,1.7-6.5c0.5-7.6-0.3-15.1-1.3-22.5c-0.4-3.3-2.4-5.9-6-7c-4.6-1.3-9.2-1.6-13.9-1.9C75.3,8.5,64.2,9.6,64.2,9.6,c-4.7,0.3-9.3,0.6-13.9,1.9c-3.6,1.1-5.6,3.7-6,7c-0.9,7.5-1.8,15-1.3,22.5c0.2,2.2,1.7,4.1,1.7,6.5c0,2.5,0.4,4.9,0.7,7.4,c0.1,1.2-0.6,1.6-1.6,1.8c-1.3,0.3-2.4,0.9-2.8,2.4c-0.7,2.9-0.4,3.4,2.6,3.9c1.2,0.2,1.8,0.7,1.8,2c-0.1,2.7,0,5.3,0,8,c0,0.8-0.1,1.5-0.9,2"></path> </svg>  </a>'},SixPackHolderItemsDisplay.prototype._update_display_items=function(){for(var t=this.items.total_count(),i=0;t>i;i++){var e=this.items.product_by_index(i),s=this.$ele.find(".holding-item").eq(i);s.removeClass("holding-item-disabled").attr("title","Remove "+e.title).attr("data-phd-item-id",e.id).data("phd-item-id",e.id),e.color&&s.find("path").css({fill:("#"!==e.color[0]?"#":"")+e.color})}},SixPackHolderItemsDisplay.prototype._add_tooltips=function(){$(this.tooltip_selector).tooltip()},SixPackHolderItemsDisplay.prototype._remove_tooltips=function(){$(this.tooltip_selector).tooltip("destroy")},SixPackHolderItemsDisplay.prototype._remove_item=function(t){var i=$(t.currentTarget);if(!i.hasClass("holding-item-disabled")){var e=[i.data("phd-item-id")];this.trigger("RemoveDisplayItem",e)}},module.exports=SixPackHolderItemsDisplay;


},{"./_eventer.js":9}],26:[function(require,module,exports){
var Eventer=require("./_eventer.js"),SixPackHolderItems=function(t){new Eventer(this),this.products=[],this.products_are_addable=!1,this.limit_multiple=t};SixPackHolderItems.prototype.add_item=function(t){this.products.push(t),this._update_is_addable_and_trigger("ItemAdded")},SixPackHolderItems.prototype.remove_item=function(t){for(var e=this.total_count(),r=e-1;r>-1;r--){var o=this._remove_product_from_stack(t,r);if(o)break}this._update_is_addable_and_trigger("ItemRemoved")},SixPackHolderItems.prototype.update_item=function(t,e){for(var r=this.total_count(),o=r-1;o>-1;o--)this._remove_product_from_stack(t.id,o);if(e>0)for(var i=0;e>i;i++)this.products.push(t);this._update_is_addable_and_trigger("ItemUpdated")},SixPackHolderItems.prototype.item_count=function(t){for(var e=0,r=0;r<this.products.length;r++)this.products[r].id===t&&e++;return e},SixPackHolderItems.prototype.total_count=function(){return this.products.length},SixPackHolderItems.prototype.product_by_index=function(t){return this.products[t]},SixPackHolderItems.prototype._remove_product_from_stack=function(t,e){var r=[];return this.products[e].id===t&&(r=this.products.splice(e,1)),r.length>0},SixPackHolderItems.prototype._update_is_addable_and_trigger=function(t){this.products_are_addable=this._is_addable(),this.trigger(t),this.trigger("ItemsUpdated")},SixPackHolderItems.prototype._is_addable=function(){var t=this.total_count(),e=t%this.limit_multiple;return t>0&&0===e},module.exports=SixPackHolderItems;


},{"./_eventer.js":9}],27:[function(require,module,exports){
var Eventer=require("./_eventer.js"),Modal=require("./phd.modal.js"),SixPackHolderItemSubmitter=function(t,e){new Eventer(this),this.$ele=t,this.items=e,this.$submit=t.find('[type="submit"]'),this.modal=new Modal({on_open:function(){console.log("submitter modal open")},on_close:function(){console.log("submitter modal close")}}),this._add_event_listeners()};SixPackHolderItemSubmitter.prototype._add_event_listeners=function(){var t=this;t.$ele.on("submit",function(e){e.preventDefault(),t._open_modal()}),t.items.on("ItemsUpdated",function(){t._toggle_submitablity()})},SixPackHolderItemSubmitter.prototype._toggle_submitablity=function(){this.items.products_are_addable?this.$submit.prop("disabled",!1):this.$submit.prop("disabled",!0)},SixPackHolderItemSubmitter.prototype._open_modal=function(){this.modal.content=this._modal_markup(),this.modal.open()},SixPackHolderItemSubmitter.prototype._modal_markup=function(){return'<div class="modal-header">    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span class="fa fa-times" aria-hidden="true"></span></button>    <h1>How do you want to get your order?</h1>  </div>  <div class="modal-body">    <button type="button" class="btn btn-default btn-lg" data-dismiss="modal"><strong>Add to cart</strong> as a one off purcahse</button>    <button type="button" class="btn btn-primary btn-lg" data-dismiss="modal">Get $10 off your order if you <strong>Subscribe now!</strong></button>  </div>'},module.exports=SixPackHolderItemSubmitter;


},{"./_eventer.js":9,"./phd.modal.js":32}],28:[function(require,module,exports){
var Eventer=require("./_eventer.js"),DataModel=require("./_data_model.js"),Modal=require("./phd.modal.js"),SixPackItem=function(t,e){this.$ele=t,this.id=e,new Eventer(this),new DataModel(this,{holding_count:"[data-phd-item-"+this.id+"-count]"}),this.modal=new Modal,this.variant_id=this.$ele.data("phd-variant-id"),this.product_title=this.$ele.data("phd-product-title"),this.product_color=this.$ele.data("phd-product-color"),this.product={id:this.variant_id,title:this.product_title,color:this.product_color},this._add_event_listeners()};SixPackItem.prototype._add_event_listeners=function(){var t=this;t.$ele.on("click","[data-phd-add-item]",function(e){e.preventDefault(),e.currentTarget.blur(),t._trigger_add_to()}),t.$ele.on("click","[data-phd-remove-item]",function(e){e.preventDefault(),e.currentTarget.blur(),t._trigger_remove_from()}),t.$ele.on("blur","[data-phd-edit-item]",function(e){var r=parseInt(e.currentTarget.value);t._trigger_update_holding(r)}),t.$ele.on("click","[data-phd-modal]",function(e){e.preventDefault();var r=$(e.currentTarget),i=r.attr("href");t.modal.open(),$.ajax(i).done(function(e){t.modal.content=e})})},SixPackItem.prototype._trigger_add_to=function(){var t=[this.product];this.trigger("AddToHolding",t)},SixPackItem.prototype._trigger_remove_from=function(){var t=[this.variant_id];this.trigger("RemoveFromHolding",t)},SixPackItem.prototype._trigger_update_holding=function(t){var e=[this.product,t];this.trigger("UpdateHolding",e)},module.exports=SixPackItem;


},{"./_data_model.js":8,"./_eventer.js":9,"./phd.modal.js":32}],29:[function(require,module,exports){
var ProductItem=require("./phd.cart.sixpack.item.js"),ProductHolder=require("./phd.cart.sixpack.holder.js"),SixPackBuilder=function(o){this.cart=o,this.holding_ele_selector='[data-phd-six-pack="holding"]',this.item_ele_selector='[data-phd-six-pack="item"]',this.items={},this._init_holder(),this._init_items()};SixPackBuilder.prototype._init_holder=function(){var o=this,t=$(this.holding_ele_selector);o.product_holder=new ProductHolder(t),o.product_holder.on("AddToCart",function(o){}),o.product_holder.on("RemoveItem",function(t,i){o.items[t].holding_count=i})},SixPackBuilder.prototype._init_items=function(){var o=this,t=$(this.item_ele_selector);t.each(function(t,i){var e=$(i),d=new ProductItem(e,t);o.items[d.variant_id]=d,d.on("AddToHolding",function(t){var i=o.product_holder.add_to_holding(t);d.holding_count=i}),d.on("RemoveFromHolding",function(t){var i=o.product_holder.remove_from_holding(t);d.holding_count=i>0?i:""}),d.on("UpdateHolding",function(t,i){var e=o.product_holder.update_item_in_holding(t,i);d.holding_count=e>0?e:""})})},module.exports=SixPackBuilder;


},{"./phd.cart.sixpack.holder.js":24,"./phd.cart.sixpack.item.js":28}],30:[function(require,module,exports){
var StandardCart=function(){};StandardCart.prototype.add_products=function(a){console.log("StandardCart:add_products",a)},module.exports=StandardCart;


},{}],31:[function(require,module,exports){
var PhdSticky=require("./phd.sticky.js"),PhdCart=require("./phd.cart.js"),Phd=function(){new PhdSticky,new PhdCart};module.exports=Phd;


},{"./phd.cart.js":22,"./phd.sticky.js":33}],32:[function(require,module,exports){
var DataModel=require("./_data_model.js"),PhdModal=function(t,e){this.callback_events=["on_open","on_close"],this.selector=e||"[data-bsify-modal]",this.$ele=$(this.selector),this.id=this._id(),new DataModel(this,{content:this.selector+" .modal-content"}),this._set_callbacks(t),this._add_event_listeners()};PhdModal.prototype.open=function(){this.$ele.modal(),this.$ele.data("modal_id",this.id),this.on_open&&this.on_open()},PhdModal.prototype.close=function(){this.$ele.modal("hide"),this.on_close&&this.on_close(),this.destroy()},PhdModal.prototype.destroy=function(){this.content="",this.$ele.data("bs.modal",null),this.$ele.data("modal_id",null)},PhdModal.prototype._add_event_listeners=function(){var t=this;this.$ele.on("hidden.bs.modal",function(){t.$ele.data("modal_id")===t.id&&t.close()})},PhdModal.prototype._set_callbacks=function(t){if(t)for(var e in this.callback_events){var o=this.callback_events[e];t[o]&&(this[o]=t[o])}},PhdModal.prototype._id=function(){return"_"+Math.random().toString(36).substr(2,9)},module.exports=PhdModal;


},{"./_data_model.js":8}],33:[function(require,module,exports){
var PhdSticky=function(){var t=$('[data-phd="sticky"]'),o=t.parent(),i=($(window),parseInt(o.css("margin-bottom"))),f=function(o){t.parent().css({"margin-bottom":o})};t.length>0&&t.affix({offset:{top:t.offset().top,bottom:30}}).on("affixed.bs.affix",function(){var o="relative"!==t.css("position")?i+t.height():i;f(o)}).on("affixed-top.bs.affix",function(){f(i)})};module.exports=PhdSticky;


},{}]},{},[1])
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyaWZ5L25vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCIvVXNlcnMvc3Rld2FydGtuYXBtYW4vRGV2ZWxvcG1lbnQvU2hvcGlmeS9DbGllbnRzL3BoZC9zcmMvanMvYXBwLmpzIiwiL1VzZXJzL3N0ZXdhcnRrbmFwbWFuL0RldmVsb3BtZW50L1Nob3BpZnkvQ2xpZW50cy9waGQvYm93ZXJfY29tcG9uZW50cy9zaG9waWZ5LWNhcnRqcy9kaXN0L2NhcnQuanMiLCIvVXNlcnMvc3Rld2FydGtuYXBtYW4vRGV2ZWxvcG1lbnQvU2hvcGlmeS9DbGllbnRzL3BoZC9ub2RlX21vZHVsZXMvaW1hZ2VzbG9hZGVkL2ltYWdlc2xvYWRlZC5qcyIsIi9Vc2Vycy9zdGV3YXJ0a25hcG1hbi9EZXZlbG9wbWVudC9TaG9waWZ5L0NsaWVudHMvcGhkL25vZGVfbW9kdWxlcy9pbWFnZXNsb2FkZWQvbm9kZV9tb2R1bGVzL2V2ZW50aWUvZXZlbnRpZS5qcyIsIi9Vc2Vycy9zdGV3YXJ0a25hcG1hbi9EZXZlbG9wbWVudC9TaG9waWZ5L0NsaWVudHMvcGhkL25vZGVfbW9kdWxlcy9pbWFnZXNsb2FkZWQvbm9kZV9tb2R1bGVzL3dvbGZ5ODctZXZlbnRlbWl0dGVyL0V2ZW50RW1pdHRlci5qcyIsIi9Vc2Vycy9zdGV3YXJ0a25hcG1hbi9EZXZlbG9wbWVudC9TaG9waWZ5L0NsaWVudHMvcGhkL25vZGVfbW9kdWxlcy9qcXVlcnktb3JkZXJseS9zcmMvanF1ZXJ5Lm9yZGVybHkuanMiLCIvVXNlcnMvc3Rld2FydGtuYXBtYW4vRGV2ZWxvcG1lbnQvU2hvcGlmeS9DbGllbnRzL3BoZC9ub2RlX21vZHVsZXMvdW5pZm9ybVRodW1ibmFpbHMvc3JjL2pxdWVyeS51bmlmb3JtX3RodW1ibmFpbHMuanMiLCIvVXNlcnMvc3Rld2FydGtuYXBtYW4vRGV2ZWxvcG1lbnQvU2hvcGlmeS9DbGllbnRzL3BoZC9zcmMvanMvX2RhdGFfbW9kZWwuanMiLCIvVXNlcnMvc3Rld2FydGtuYXBtYW4vRGV2ZWxvcG1lbnQvU2hvcGlmeS9DbGllbnRzL3BoZC9zcmMvanMvX2V2ZW50ZXIuanMiLCIvVXNlcnMvc3Rld2FydGtuYXBtYW4vRGV2ZWxvcG1lbnQvU2hvcGlmeS9DbGllbnRzL3BoZC9zcmMvanMvYnNpZnkuYmFubmVyLmpzIiwiL1VzZXJzL3N0ZXdhcnRrbmFwbWFuL0RldmVsb3BtZW50L1Nob3BpZnkvQ2xpZW50cy9waGQvc3JjL2pzL2JzaWZ5LmNhcnQuanMiLCIvVXNlcnMvc3Rld2FydGtuYXBtYW4vRGV2ZWxvcG1lbnQvU2hvcGlmeS9DbGllbnRzL3BoZC9zcmMvanMvYnNpZnkuaW1hZ2Vfc3dpdGNoZXIuanMiLCIvVXNlcnMvc3Rld2FydGtuYXBtYW4vRGV2ZWxvcG1lbnQvU2hvcGlmeS9DbGllbnRzL3BoZC9zcmMvanMvYnNpZnkuanMiLCIvVXNlcnMvc3Rld2FydGtuYXBtYW4vRGV2ZWxvcG1lbnQvU2hvcGlmeS9DbGllbnRzL3BoZC9zcmMvanMvYnNpZnkubGlua2VkX3Byb2R1Y3Rfb3B0aW9ucy5qcyIsIi9Vc2Vycy9zdGV3YXJ0a25hcG1hbi9EZXZlbG9wbWVudC9TaG9waWZ5L0NsaWVudHMvcGhkL3NyYy9qcy9ic2lmeS5sb29rYm9va19nYWxsZXJ5LmpzIiwiL1VzZXJzL3N0ZXdhcnRrbmFwbWFuL0RldmVsb3BtZW50L1Nob3BpZnkvQ2xpZW50cy9waGQvc3JjL2pzL2JzaWZ5Lm1lZGlhX3F1ZXJpZXMuanMiLCIvVXNlcnMvc3Rld2FydGtuYXBtYW4vRGV2ZWxvcG1lbnQvU2hvcGlmeS9DbGllbnRzL3BoZC9zcmMvanMvYnNpZnkuc29jaWFsX2ZlZWRfaW5zdGFncmFtLmpzIiwiL1VzZXJzL3N0ZXdhcnRrbmFwbWFuL0RldmVsb3BtZW50L1Nob3BpZnkvQ2xpZW50cy9waGQvc3JjL2pzL2JzaWZ5LnNvY2lhbF9mZWVkcy5qcyIsIi9Vc2Vycy9zdGV3YXJ0a25hcG1hbi9EZXZlbG9wbWVudC9TaG9waWZ5L0NsaWVudHMvcGhkL3NyYy9qcy9ic2lmeS50aHVtYm5haWxzLmpzIiwiL1VzZXJzL3N0ZXdhcnRrbmFwbWFuL0RldmVsb3BtZW50L1Nob3BpZnkvQ2xpZW50cy9waGQvc3JjL2pzL2JzaWZ5LnRvdWNoLmpzIiwiL1VzZXJzL3N0ZXdhcnRrbmFwbWFuL0RldmVsb3BtZW50L1Nob3BpZnkvQ2xpZW50cy9waGQvc3JjL2pzL2JzaWZ5LnZhcmlhbnRfb3B0aW9uX3N3aXRjaGVyLmpzIiwiL1VzZXJzL3N0ZXdhcnRrbmFwbWFuL0RldmVsb3BtZW50L1Nob3BpZnkvQ2xpZW50cy9waGQvc3JjL2pzL3BoZC5jYXJ0LmpzIiwiL1VzZXJzL3N0ZXdhcnRrbmFwbWFuL0RldmVsb3BtZW50L1Nob3BpZnkvQ2xpZW50cy9waGQvc3JjL2pzL3BoZC5jYXJ0Lm11bHRpc3RlcC5qcyIsIi9Vc2Vycy9zdGV3YXJ0a25hcG1hbi9EZXZlbG9wbWVudC9TaG9waWZ5L0NsaWVudHMvcGhkL3NyYy9qcy9waGQuY2FydC5zaXhwYWNrLmhvbGRlci5qcyIsIi9Vc2Vycy9zdGV3YXJ0a25hcG1hbi9EZXZlbG9wbWVudC9TaG9waWZ5L0NsaWVudHMvcGhkL3NyYy9qcy9waGQuY2FydC5zaXhwYWNrLmhvbGRlcl9kaXNwbGF5LmpzIiwiL1VzZXJzL3N0ZXdhcnRrbmFwbWFuL0RldmVsb3BtZW50L1Nob3BpZnkvQ2xpZW50cy9waGQvc3JjL2pzL3BoZC5jYXJ0LnNpeHBhY2suaG9sZGVyX2l0ZW1zLmpzIiwiL1VzZXJzL3N0ZXdhcnRrbmFwbWFuL0RldmVsb3BtZW50L1Nob3BpZnkvQ2xpZW50cy9waGQvc3JjL2pzL3BoZC5jYXJ0LnNpeHBhY2suaG9sZGVyX3N1Ym1pdHRlci5qcyIsIi9Vc2Vycy9zdGV3YXJ0a25hcG1hbi9EZXZlbG9wbWVudC9TaG9waWZ5L0NsaWVudHMvcGhkL3NyYy9qcy9waGQuY2FydC5zaXhwYWNrLml0ZW0uanMiLCIvVXNlcnMvc3Rld2FydGtuYXBtYW4vRGV2ZWxvcG1lbnQvU2hvcGlmeS9DbGllbnRzL3BoZC9zcmMvanMvcGhkLmNhcnQuc2l4cGFjay5qcyIsIi9Vc2Vycy9zdGV3YXJ0a25hcG1hbi9EZXZlbG9wbWVudC9TaG9waWZ5L0NsaWVudHMvcGhkL3NyYy9qcy9waGQuY2FydC5zdGFuZGFyZC5qcyIsIi9Vc2Vycy9zdGV3YXJ0a25hcG1hbi9EZXZlbG9wbWVudC9TaG9waWZ5L0NsaWVudHMvcGhkL3NyYy9qcy9waGQuanMiLCIvVXNlcnMvc3Rld2FydGtuYXBtYW4vRGV2ZWxvcG1lbnQvU2hvcGlmeS9DbGllbnRzL3BoZC9zcmMvanMvcGhkLm1vZGFsLmpzIiwiL1VzZXJzL3N0ZXdhcnRrbmFwbWFuL0RldmVsb3BtZW50L1Nob3BpZnkvQ2xpZW50cy9waGQvc3JjL2pzL3BoZC5zdGlja3kuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUNJQSxHQUFJLE9BQVEsUUFBUSxjQUNoQixPQUFTLFFBQVEsd0RBQ2pCLFNBQVcsUUFBUSwrQkFDbkIsSUFBTSxRQUFRLFlBRWQsSUFBTSxXQWtDUixHQWhDQSxPQUFPLEtBQUssTUFBTSxLQUFNLE1BQU0sZUFHMUIsTUFBTSxVQUVSLE1BQU0sY0FBYyx5QkFDcEIsTUFBTSxjQUFjLGlCQUVwQixNQUFNLHNCQUFzQix5QkFJeEIsTUFBTSx3QkFFSixNQUFNLFFBQVEsV0FBYSxNQUFNLFFBQVEsUUFBUSxPQUFTLEdBQzVELE1BQU0scUJBQXFCLG9CQUFvQixNQUFNLFVBTXZELE1BQU0sa0JBQ1IsTUFBTSxLQUFLLE9BSWIsTUFBTSxXQUFXLE9BR2pCLE1BQU0sT0FBTyxPQUdULEVBQUUsd0JBQXdCLE9BQVMsRUFBRyxDQUN4QyxHQUFJLEdBQVcsR0FBSSxXQUNqQixnQkFBaUIsdUNBQ2pCLGFBQWMsbUJBQ2QsaUJBQWtCLHNCQUdwQixHQUFTLFVBQVksV0FDbkIsR0FBSSxHQUFjLEVBQUUscUJBQXFCLFFBQ3pDLEdBQUUsc0JBQXNCLE9BQU8sR0FFL0IsTUFBTSxXQUFXLFdBS3JCLE1BQU0sWUFBWSxPQUdsQixHQUFJLE1BSUYsSUFBTSxHQUFJLElBQ2QsUUFBTyxRQUFVOzs7O0NDbkVqQixXQUNFLEdBQUksR0FBVyxFQUFNLEVBQVEsRUFBTSxFQUFZLEVBQzdDLEVBQVMsU0FBUyxFQUFJLEdBQUssTUFBTyxZQUFZLE1BQU8sR0FBRyxNQUFNLEVBQUksWUFFcEUsR0FBTyxXQUNMLFFBQVMsS0FDUCxLQUFLLE9BQVMsRUFBTyxLQUFLLE9BQVEsTUF1QnBDLE1BcEJBLEdBQUssVUFBVSxPQUFTLFNBQVMsR0FDL0IsR0FBSSxHQUFNLEVBQUssQ0FDZixLQUFLLElBQU8sR0FDVixFQUFRLEVBQUssR0FDRCxVQUFSLElBQ0YsS0FBSyxHQUFPLEVBR2hCLE9BQU8sTUFBSyxNQUFRLFdBQ2xCLEdBQUksR0FBSSxFQUFNLEVBQU0sQ0FHcEIsS0FGQSxFQUFPLEVBQUssTUFDWixLQUNLLEVBQUssRUFBRyxFQUFPLEVBQUssT0FBYSxFQUFMLEVBQVcsSUFDMUMsRUFBTyxFQUFLLEdBQ1osRUFBUyxLQUFLLEdBQUksR0FBSyxHQUV6QixPQUFPLE9BSUosS0FJVCxFQUFPLFdBQ0wsUUFBUyxHQUFLLEdBQ1osS0FBSyxjQUFnQixFQUFPLEtBQUssY0FBZSxNQUNoRCxLQUFLLE9BQVMsRUFBTyxLQUFLLE9BQVEsTUFDbEMsS0FBSyxPQUFPLEdBNEJkLE1BekJBLEdBQUssVUFBVSxPQUFTLFNBQVMsR0FDL0IsR0FBSSxHQUFLLENBQ1QsS0FBSyxJQUFPLEdBQ1YsRUFBUSxFQUFLLEdBQ0QsZUFBUixJQUNGLEtBQUssR0FBTyxFQUdoQixPQUFPLE1BQUssV0FBYSxFQUFPLE1BQU0sVUFBVyxFQUFLLGFBR3hELEVBQUssVUFBVSxjQUFnQixXQUM3QixHQUFJLEdBQU0sRUFBTyxFQUFNLENBQ3ZCLEdBQU8sS0FBSyxXQUNaLElBQ0EsS0FBSyxJQUFRLEdBQ1gsRUFBUSxFQUFLLEdBQ2IsRUFBUyxNQUNQLEtBQU0sRUFDTixNQUFPLEdBR1gsT0FBTyxJQUdGLEtBSVQsR0FDRSxVQUNFLFNBQVMsRUFDVCxpQkFBa0IsS0FDbEIsZ0JBQ0EsWUFBYSxLQUNiLHdCQUF5QixNQUUzQixLQUFNLEdBQUksSUFHWixFQUFPLEtBQU8sU0FBUyxFQUFNLEdBaUIzQixNQWhCZ0IsT0FBWixJQUNGLE1BRUYsRUFBTyxVQUFVLEdBQ2pCLEVBQU8sS0FBSyxPQUFPLEdBQ2YsRUFBTyxTQUFTLFNBQ2xCLEVBQU8sS0FBSyxPQUVWLEVBQU8sU0FBUyxtQkFDbEIsRUFBRSxVQUFVLEdBQUcsc0JBQXVCLFdBQ3BDLE1BQU8sR0FBRSxRQUFRLFNBQVMsRUFBTyxTQUFTLG9CQUU1QyxFQUFFLFVBQVUsR0FBRyx1QkFBd0IsV0FDckMsTUFBTyxHQUFFLFFBQVEsWUFBWSxFQUFPLFNBQVMscUJBRzFDLEVBQU8sT0FBTyxRQUd2QixFQUFPLFVBQVksU0FBUyxHQUkxQixNQUhnQixPQUFaLElBQ0YsTUFFSyxFQUFPLE1BQU0sT0FBTyxFQUFPLFNBQVUsSUFHOUMsRUFBTyxPQUNMLFNBQVUsU0FBUyxFQUFLLEVBQU0sR0FDNUIsR0FBSSxHQUFLLEVBQU8sQ0FDSixPQUFSLElBQ0YsRUFBTyxjQUVULElBQ0EsS0FBSyxJQUFPLEdBQ1YsRUFBUSxFQUFJLEdBQ1osRUFBUSxHQUFLLEVBQU8sSUFBTSxFQUFNLEtBQW1CLE1BQVosRUFBbUIsRUFBVyxDQUV2RSxPQUFPLElBRVQsV0FBWSxTQUFTLEVBQUssRUFBTSxHQUM5QixHQUFJLEdBQUssRUFBVyxFQUFjLENBQ3RCLE9BQVIsSUFDRixFQUFPLGNBRVQsSUFDQSxLQUFLLElBQU8sR0FDVixFQUFRLEVBQUksR0FDWixFQUFlLEVBQUksUUFBUSxHQUFLLEVBQU8sSUFBSyxJQUFJLFFBQVEsSUFBSyxJQUM3RCxFQUFVLEdBQTRCLE1BQVosRUFBbUIsRUFBVyxDQUUxRCxPQUFPLElBRVQsT0FBUSxTQUFTLEVBQVEsR0FDdkIsR0FBSSxHQUFLLENBQ1QsS0FBSyxJQUFPLEdBQ1YsRUFBTSxFQUFXLEdBQ2pCLEVBQU8sR0FBTyxDQUVoQixPQUFPLElBRVQsTUFBTyxTQUFTLEdBQ2QsR0FBSSxHQUFLLENBQ1QsSUFBZSxNQUFWLEdBQXFDLGdCQUFYLEdBQzdCLE1BQU8sRUFFVCxHQUFjLEdBQUksR0FBTyxXQUN6QixLQUFLLElBQU8sR0FDVixFQUFZLEdBQU8sTUFBTSxFQUFPLEdBRWxDLE9BQU8sSUFFVCxRQUFTLE1BQU0sU0FBVyxTQUFTLEdBQ2pDLE1BQW1DLHNCQUF6QixTQUFTLEtBQUssSUFFMUIsWUFBYSxTQUFTLEdBQ3BCLE1BQUksR0FBTyxNQUFNLFFBQVEsR0FDaEIsRUFFSSxNQUFULEdBQ00sT0FLWixZQUFhLFNBQVMsRUFBTyxHQUMzQixHQUFJLEVBQ0osT0FBcUUsUUFBckMsT0FBMUIsRUFBTyxPQUFPLFNBQW1CLEVBQUssWUFBYyxRQUNqRCxRQUFRLFlBQVksRUFBTyxHQUUzQixHQUdYLGlCQUFrQixTQUFTLEVBQUssR0FDOUIsR0FBSSxHQUFNLENBQ1YsT0FBbUgsUUFBbkYsT0FBMUIsRUFBTyxPQUFPLFVBQTJDLE9BQXZCLEVBQVEsRUFBSyxPQUFpQixFQUFNLGlCQUE0QixRQUMvRixRQUFRLE1BQU0saUJBQWlCLEVBQUssR0FFcEMsSUFLYixLQUVBLEdBQWEsRUFFYixFQUFPLE9BQ0wsSUFBSyxTQUFTLEVBQUssRUFBTSxHQUN2QixHQUFJLEVBaUJKLE9BaEJlLE9BQVgsSUFDRixNQUVGLEdBQ0UsSUFBSyxFQUNMLEtBQU0sRUFDTixLQUFNLEVBQVEsTUFBUSxPQUN0QixTQUFVLEVBQVEsVUFBWSxPQUM5QixRQUFTLEVBQU8sTUFBTSxZQUFZLEVBQVEsU0FDMUMsTUFBTyxFQUFPLE1BQU0sWUFBWSxFQUFRLE9BQ3hDLFNBQVUsRUFBTyxNQUFNLFlBQVksRUFBUSxXQUV6QyxFQUFRLFlBQ1YsRUFBUSxRQUFRLEtBQUssRUFBTyxLQUFLLFFBRW5DLEVBQU0sS0FBSyxHQUNQLEVBQUosUUFHQSxPQUFPLFVBQVUsUUFBUSx1QkFBd0IsRUFBTyxPQUNqRCxFQUFPLE1BQU0sWUFFdEIsUUFBUyxXQUNQLEdBQUksRUFDSixPQUFLLEdBQU0sUUFLWCxHQUFhLEVBQ2IsRUFBUyxFQUFNLFFBQ2YsRUFBTyxTQUFXLEVBQU8sTUFBTSxRQUN4QixPQUFPLEtBQUssS0FQakIsR0FBYSxNQUNiLFFBQU8sVUFBVSxRQUFRLHdCQUF5QixFQUFPLFVBVS9ELEVBQU8sTUFDTCxRQUFTLFNBQVMsR0FNaEIsTUFMZSxPQUFYLElBQ0YsTUFFRixFQUFRLEtBQU8sTUFDZixFQUFRLFlBQWEsRUFDZCxFQUFPLE1BQU0sSUFBSSxjQUFnQixJQUUxQyxRQUFTLFNBQVMsRUFBSSxFQUFVLEVBQVksR0FDMUMsR0FBSSxFQWNKLE9BYmdCLE9BQVosSUFDRixFQUFXLEdBRUssTUFBZCxJQUNGLE1BRWEsTUFBWCxJQUNGLE1BRUYsRUFBTyxFQUFPLE1BQU0sU0FBUyxHQUM3QixFQUFLLEdBQUssRUFDVixFQUFLLFNBQVcsRUFDaEIsRUFBTyxNQUFNLElBQUksZUFBZ0IsRUFBTSxHQUNoQyxFQUFPLEtBQUssV0FFckIsV0FBWSxTQUFTLEVBQU0sRUFBVSxFQUFZLEdBQy9DLEdBQUksRUFhSixPQVprQixPQUFkLElBQ0YsTUFFYSxNQUFYLElBQ0YsTUFFRixFQUFPLEVBQU8sTUFBTSxTQUFTLEdBQzdCLEVBQUssS0FBTyxFQUNJLE1BQVosSUFDRixFQUFLLFNBQVcsR0FFbEIsRUFBUSxZQUFhLEVBQ2QsRUFBTyxNQUFNLElBQUksa0JBQW1CLEVBQU0sSUFFbkQsV0FBWSxTQUFTLEVBQU0sR0FJekIsTUFIZSxPQUFYLElBQ0YsTUFFSyxFQUFPLEtBQUssV0FBVyxFQUFNLEtBQU8sSUFFN0MsZUFBZ0IsU0FBUyxFQUFJLEVBQVUsRUFBWSxHQUNqRCxHQUFJLEVBYUosT0Faa0IsT0FBZCxJQUNGLE1BRWEsTUFBWCxJQUNGLE1BRUYsRUFBTyxFQUFPLE1BQU0sU0FBUyxHQUM3QixFQUFLLEdBQUssRUFDTSxNQUFaLElBQ0YsRUFBSyxTQUFXLEdBRWxCLEVBQVEsWUFBYSxFQUNkLEVBQU8sTUFBTSxJQUFJLGtCQUFtQixFQUFNLElBRW5ELHlCQUEwQixTQUFTLEVBQVMsR0FRMUMsTUFQZSxPQUFYLElBQ0YsTUFFYSxNQUFYLElBQ0YsTUFFRixFQUFRLFlBQWEsRUFDZCxFQUFPLE1BQU0sSUFBSSxtQkFDdEIsUUFBUyxHQUNSLElBRUwsZUFBZ0IsU0FBUyxFQUFJLEdBQzNCLEdBQUksRUFTSixPQVJlLE9BQVgsSUFDRixNQUVGLEdBQ0UsR0FBSSxFQUNKLFNBQVUsR0FFWixFQUFRLFlBQWEsRUFDZCxFQUFPLE1BQU0sSUFBSSxrQkFBbUIsRUFBTSxJQUVuRCxNQUFPLFNBQVMsR0FLZCxNQUplLE9BQVgsSUFDRixNQUVGLEVBQVEsWUFBYSxFQUNkLEVBQU8sTUFBTSxJQUFJLG9CQUFzQixJQUVoRCxhQUFjLFNBQVMsRUFBZSxHQUNwQyxNQUFJLEtBQWlCLEdBQU8sS0FBSyxXQUN4QixFQUFPLEtBQUssV0FBVyxHQUV2QixHQUdYLGFBQWMsU0FBUyxFQUFlLEVBQU8sR0FDM0MsR0FBSSxFQU1KLE9BTGUsT0FBWCxJQUNGLE1BRUYsS0FDQSxFQUFXLEdBQWlCLEVBQ3JCLEVBQU8sS0FBSyxjQUFjLEVBQVksSUFFL0MsY0FBZSxXQUNiLE1BQU8sR0FBTyxLQUFLLFlBRXJCLGNBQWUsU0FBUyxFQUFZLEdBUWxDLE1BUGtCLE9BQWQsSUFDRixNQUVhLE1BQVgsSUFDRixNQUVGLEVBQVEsWUFBYSxFQUNkLEVBQU8sTUFBTSxJQUFJLGtCQUFtQixFQUFPLE1BQU0sU0FBUyxFQUFZLGNBQWUsSUFFOUYsZ0JBQWlCLFNBQVMsR0FLeEIsTUFKZSxPQUFYLElBQ0YsTUFFRixFQUFRLFlBQWEsRUFDZCxFQUFPLE1BQU0sSUFBSSxrQkFBbUIsRUFBTyxNQUFNLFNBQVMsRUFBTyxLQUFLLGdCQUFpQixhQUFjLElBQUssSUFFbkgsUUFBUyxXQUNQLE1BQU8sR0FBTyxLQUFLLE1BRXJCLFFBQVMsU0FBUyxFQUFNLEdBS3RCLE1BSmUsT0FBWCxJQUNGLE1BRUYsRUFBUSxZQUFhLEVBQ2QsRUFBTyxNQUFNLElBQUksbUJBQ3RCLEtBQU0sR0FDTCxLQUlQLEVBQVksT0FBTyxVQUVuQixFQUFPLE1BQ0wsS0FBTSxXQUVKLE1BREEsR0FBTyxLQUFLLGtCQUFrQixNQUN2QixFQUFPLEtBQUssT0FBTyxLQUFNLEVBQU8sT0FFekMsUUFBUyxXQUNQLE1BQU8sR0FBTyxLQUFLLGtCQUFrQixRQUV2QyxrQkFBbUIsU0FBUyxHQVUxQixNQVRBLEdBQVUsR0FBUSxRQUFTLGtCQUFtQixFQUFPLEtBQUssS0FDMUQsRUFBVSxHQUFRLFFBQVMscUJBQXNCLEVBQU8sS0FBSyxRQUM3RCxFQUFVLEdBQVEsUUFBUyx3QkFBeUIsRUFBTyxLQUFLLFlBQ2hFLEVBQVUsR0FBUSxRQUFTLHFCQUFzQixFQUFPLEtBQUssUUFDN0QsRUFBVSxHQUFRLFFBQVMsd0JBQXlCLEVBQU8sS0FBSyxZQUNoRSxFQUFVLEdBQVEsUUFBUyxvQkFBcUIsRUFBTyxLQUFLLE9BQzVELEVBQVUsR0FBUSxTQUFVLHFCQUFzQixFQUFPLEtBQUssUUFDOUQsRUFBVSxHQUFRLFNBQVUsK0JBQWdDLEVBQU8sS0FBSyxpQkFDeEUsRUFBVSxHQUFRLFNBQVUscUJBQXNCLEVBQU8sS0FBSyxRQUN2RCxFQUFVLEdBQVEsdUJBQXdCLEVBQU8sS0FBSyxTQUUvRCxJQUFLLFNBQVMsR0FDWixHQUFJLEVBR0osT0FGQSxHQUFFLGlCQUNGLEVBQVEsT0FBTyxNQUNSLEVBQU8sS0FBSyxRQUFRLEVBQU0sS0FBSyxpQkFBa0IsRUFBTSxLQUFLLHdCQUVyRSxPQUFRLFNBQVMsR0FDZixHQUFJLEVBR0osT0FGQSxHQUFFLGlCQUNGLEVBQVEsT0FBTyxNQUNSLEVBQU8sS0FBSyxXQUFXLEVBQU0sS0FBSyxzQkFFM0MsV0FBWSxTQUFTLEdBQ25CLEdBQUksRUFHSixPQUZBLEdBQUUsaUJBQ0YsRUFBUSxPQUFPLE1BQ1IsRUFBTyxLQUFLLGVBQWUsRUFBTSxLQUFLLHlCQUUvQyxPQUFRLFNBQVMsR0FDZixHQUFJLEVBR0osT0FGQSxHQUFFLGlCQUNGLEVBQVEsT0FBTyxNQUNSLEVBQU8sS0FBSyxXQUFXLEVBQU0sS0FBSyxvQkFBcUIsRUFBTSxLQUFLLHdCQUUzRSxXQUFZLFNBQVMsR0FDbkIsR0FBSSxFQUdKLE9BRkEsR0FBRSxpQkFDRixFQUFRLE9BQU8sTUFDUixFQUFPLEtBQUssZUFBZSxFQUFNLEtBQUssdUJBQXdCLEVBQU0sS0FBSyx3QkFFbEYsTUFBTyxTQUFTLEdBRWQsTUFEQSxHQUFFLGlCQUNLLEVBQU8sS0FBSyxTQUVyQixPQUFRLFNBQVMsR0FDZixHQUFJLEdBQVEsQ0FHWixPQUZBLEdBQVMsT0FBTyxNQUNoQixFQUFLLEVBQU8sS0FBSyxvQkFDYixFQUFPLEdBQUcsWUFDTCxFQUFPLEtBQUssUUFBUSxHQUVwQixFQUFPLEtBQUssZUFBZSxJQUd0QyxnQkFBaUIsU0FBUyxHQUN4QixHQUFJLEdBQVEsQ0FHWixPQUZBLEdBQVMsT0FBTyxNQUNoQixFQUFZLEVBQU8sS0FBSyw4QkFDakIsRUFBTyxLQUFLLGFBQWEsRUFBVyxFQUFPLEdBQUcsWUFBYyxNQUFRLEtBRTdFLE9BQVEsU0FBUyxHQUNmLEdBQUksR0FBVyxFQUFJLEVBQVksQ0FlL0IsT0FkQSxHQUFFLGlCQUNGLEVBQVksT0FBTyxNQUFNLGlCQUN6QixFQUFLLE9BQ0wsRUFBVyxPQUNYLEtBQ0EsT0FBTyxLQUFLLEVBQVcsU0FBUyxFQUFHLEdBQ2pDLE1BQWtCLE9BQWQsRUFBSyxLQUNBLEVBQUssRUFBSyxNQUNNLGFBQWQsRUFBSyxLQUNQLEVBQVcsRUFBSyxNQUVoQixFQUFXLEVBQUssTUFBUSxFQUFLLFFBR2pDLEVBQU8sS0FBSyxRQUFRLEVBQUksRUFBVSxFQUFPLE1BQU0sV0FBVyxLQUVuRSxPQUFRLFNBQVMsRUFBRyxHQUNsQixHQUFJLEVBT0osT0FOQSxJQUNFLFdBQWMsRUFBSyxXQUNuQixZQUFlLEVBQUssWUFDcEIsa0JBQXFCLEVBQU8sTUFBTSxZQUFZLEVBQUssWUFBYSxFQUFPLFNBQVMsYUFDaEYsZ0NBQW1DLEVBQU8sTUFBTSxZQUFZLEVBQUssWUFBYSxFQUFPLFNBQVMsMEJBRXpGLE9BQU8sc0JBQXNCLEtBQUssV0FDdkMsR0FBSSxFQUVKLE9BREEsR0FBUSxPQUFPLE1BQ1IsRUFBTSxLQUFLLEVBQVEsRUFBTSxLQUFLLDBCQUt2QyxVQUFZLFNBQ2QsRUFBTyxRQUNMLFNBQ0EsS0FBTSxXQUNKLE1BQU8sR0FBTyxPQUFPLGFBRXZCLFFBQVMsV0FDUCxNQUFPLEdBQU8sT0FBTyxlQUV2QixVQUFXLFdBQ1QsR0FBSSxFQUtKLE9BSkEsR0FBTyxPQUFPLGNBQ2QsRUFBUyxFQUFPLE1BQU0sUUFDcEIsS0FBTSxFQUFPLE1BQ1osRUFBTyxTQUFTLGNBQ1osT0FBTyxvQkFBb0IsS0FBSyxXQUNyQyxNQUFPLEdBQU8sT0FBTyxNQUFNLEtBQUssT0FBTyxLQUFLLEtBQU0sT0FHdEQsWUFBYSxXQUNYLEdBQUksR0FBTSxFQUFJLEVBQU0sQ0FFcEIsS0FEQSxFQUFPLEVBQU8sT0FBTyxNQUNoQixFQUFLLEVBQUcsRUFBTyxFQUFLLE9BQWEsRUFBTCxFQUFXLElBQzFDLEVBQU8sRUFBSyxHQUNaLEVBQUssUUFFUCxPQUFPLEdBQU8sT0FBTyxXQUd6QixPQUFPLFdBQVcsR0FBSyxTQUFTLEVBQUcsR0FDakMsTUFBTyxLQUFNLEdBRWYsT0FBTyxXQUFXLEdBQUssU0FBUyxFQUFHLEdBQ2pDLE1BQVcsR0FBSixHQUVULE9BQU8sV0FBVyxHQUFLLFNBQVMsRUFBRyxHQUNqQyxNQUFPLEdBQUksR0FFYixPQUFPLFdBQVcsSUFBTSxTQUFTLEdBQy9CLE9BQVEsR0FFVixPQUFPLFdBQVcsTUFBUSxTQUFTLEdBQ2pDLE9BQVEsRUFBRSxRQUVaLE9BQU8sV0FBVyxLQUFPLFNBQVMsRUFBRyxHQUNuQyxNQUFPLFVBQVMsR0FBSyxTQUFTLElBRWhDLE9BQU8sV0FBVyxNQUFRLFNBQVMsRUFBRyxHQUNwQyxNQUFPLFVBQVMsR0FBSyxTQUFTLElBRWhDLE9BQU8sV0FBVyxRQUFVLFNBQVMsRUFBRyxHQUN0QyxNQUFPLEdBQUksR0FFYixPQUFPLFdBQVcsT0FBUyxTQUFTLEVBQUcsR0FDckMsTUFBTyxHQUFJLEdBRWIsT0FBTyxXQUFXLE1BQVEsU0FBUyxHQUNqQyxNQUFPLEdBQU8sTUFBTSxZQUFZLEVBQU8sRUFBTyxTQUFTLGNBRXpELE9BQU8sV0FBVyxvQkFBc0IsU0FBUyxHQUMvQyxNQUFPLEdBQU8sTUFBTSxZQUFZLEVBQU8sRUFBTyxTQUFTLDBCQUV6RCxPQUFPLFdBQVcsaUJBQW1CLFNBQVMsRUFBSyxHQUNqRCxNQUFPLEdBQU8sTUFBTSxpQkFBaUIsRUFBSyxLQUc1QyxFQUFPLFFBQ0wsS0FBTSxhQUNOLFFBQVMsY0FJYixFQUFPLFFBQVUsU0FBUyxHQWlCeEIsTUFoQkEsR0FBUSxLQUFPLEVBQU8sS0FDdEIsRUFBUSxVQUFZLEVBQU8sVUFDM0IsRUFBUSxLQUFPLEVBQU8sS0FDdEIsRUFBUSxTQUFXLEVBQU8sU0FDMUIsRUFBUSxRQUFVLEVBQU8sS0FBSyxRQUM5QixFQUFRLFdBQWEsRUFBTyxLQUFLLFdBQ2pDLEVBQVEsZUFBaUIsRUFBTyxLQUFLLGVBQ3JDLEVBQVEseUJBQTJCLEVBQU8sS0FBSyx5QkFDL0MsRUFBUSxXQUFhLEVBQU8sS0FBSyxXQUNqQyxFQUFRLE1BQVEsRUFBTyxLQUFLLE1BQzVCLEVBQVEsYUFBZSxFQUFPLEtBQUssYUFDbkMsRUFBUSxhQUFlLEVBQU8sS0FBSyxhQUNuQyxFQUFRLGNBQWdCLEVBQU8sS0FBSyxjQUNwQyxFQUFRLGNBQWdCLEVBQU8sS0FBSyxjQUNwQyxFQUFRLGdCQUFrQixFQUFPLEtBQUssZ0JBQ3RDLEVBQVEsUUFBVSxFQUFPLEtBQUssUUFDdkIsRUFBUSxRQUFVLEVBQU8sS0FBSyxTQUdoQixnQkFBWixTQUNULEVBQU8sUUFBUSxTQUNZLGtCQUFYLFNBQXlCLE9BQU8sSUFDaEQsUUFBUSxXQUFZLFNBQVMsR0FFM0IsTUFEQSxHQUFPLFFBQVEsS0FBSyxPQUFTLEdBQ3RCLElBR1QsRUFBTyxRQUFRLEtBQUssYUFHckIsS0FBSzs7OztDQzlqQlIsU0FBWSxFQUFRLEdBQVksWUFLUCxtQkFBWCxTQUF5QixPQUFPLElBRTFDLFFBQ0UsNEJBQ0EsbUJBQ0MsU0FBVSxFQUFjLEdBQ3pCLE1BQU8sR0FBUyxFQUFRLEVBQWMsS0FFWCxnQkFBWixTQUVqQixPQUFPLFFBQVUsRUFDZixFQUNBLFFBQVEsd0JBQ1IsUUFBUSxZQUlWLEVBQU8sYUFBZSxFQUNwQixFQUNBLEVBQU8sYUFDUCxFQUFPLFVBSVQsT0FJSixTQUFrQixFQUFRLEVBQWMsR0FFeEMsWUFTQSxTQUFTLEdBQVEsRUFBRyxHQUNsQixJQUFNLEdBQUksS0FBUSxHQUNoQixFQUFHLEdBQVMsRUFBRyxFQUVqQixPQUFPLEdBSVQsUUFBUyxHQUFTLEdBQ2hCLE1BQW1DLG1CQUE1QixFQUFZLEtBQU0sR0FJM0IsUUFBUyxHQUFXLEdBQ2xCLEdBQUksS0FDSixJQUFLLEVBQVMsR0FFWixFQUFNLE1BQ0QsSUFBMkIsZ0JBQWYsR0FBSSxPQUVyQixJQUFNLEdBQUksR0FBRSxFQUFHLEVBQU0sRUFBSSxPQUFZLEVBQUosRUFBUyxJQUN4QyxFQUFJLEtBQU0sRUFBSSxRQUloQixHQUFJLEtBQU0sRUFFWixPQUFPLEdBVVAsUUFBUyxHQUFjLEVBQU0sRUFBUyxHQUVwQyxLQUFRLGVBQWdCLElBQ3RCLE1BQU8sSUFBSSxHQUFjLEVBQU0sRUFHWixpQkFBVCxLQUNWLEVBQU8sU0FBUyxpQkFBa0IsSUFHcEMsS0FBSyxTQUFXLEVBQVcsR0FDM0IsS0FBSyxRQUFVLEtBQVksS0FBSyxTQUVSLGtCQUFaLEdBQ1YsRUFBVyxFQUVYLEVBQVEsS0FBSyxRQUFTLEdBR25CLEdBQ0gsS0FBSyxHQUFJLFNBQVUsR0FHckIsS0FBSyxZQUVBLElBRUgsS0FBSyxXQUFhLEdBQUksR0FBRSxTQUkxQixJQUFJLEdBQVEsSUFDWixZQUFZLFdBQ1YsRUFBTSxVQStHVixRQUFTLEdBQWMsR0FDckIsS0FBSyxJQUFNLEVBMkNiLFFBQVMsR0FBVSxHQUNqQixLQUFLLElBQU0sRUFFWCxFQUFPLEdBQVEsS0EzT25CLEdBQUksR0FBSSxFQUFPLE9BQ1gsRUFBVSxFQUFPLFFBQ2pCLEVBQWdDLG1CQUFaLEdBWXBCLEVBQWMsT0FBTyxVQUFVLFFBbUVqQyxHQUFhLFVBQVksR0FBSSxHQUU3QixFQUFhLFVBQVUsV0FFdkIsRUFBYSxVQUFVLFVBQVksV0FDakMsS0FBSyxTQUdMLEtBQU0sR0FBSSxHQUFFLEVBQUcsRUFBTSxLQUFLLFNBQVMsT0FBWSxFQUFKLEVBQVMsSUFBTSxDQUN4RCxHQUFJLEdBQU8sS0FBSyxTQUFTLEVBRUYsU0FBbEIsRUFBSyxVQUNSLEtBQUssU0FBVSxFQUlqQixJQUFJLEdBQVcsRUFBSyxRQUNwQixJQUFNLElBQTRCLElBQWIsR0FBK0IsSUFBYixHQUErQixLQUFiLEdBS3pELElBQU0sR0FGRixHQUFhLEVBQUssaUJBQWlCLE9BRTdCLEVBQUUsRUFBRyxFQUFPLEVBQVcsT0FBWSxFQUFKLEVBQVUsSUFBTSxDQUN2RCxHQUFJLEdBQU0sRUFBVyxFQUNyQixNQUFLLFNBQVUsTUFRckIsRUFBYSxVQUFVLFNBQVcsU0FBVSxHQUMxQyxHQUFJLEdBQWUsR0FBSSxHQUFjLEVBQ3JDLE1BQUssT0FBTyxLQUFNLElBR3BCLEVBQWEsVUFBVSxNQUFRLFdBVzdCLFFBQVMsR0FBVyxFQUFPLEdBVXpCLE1BVEssR0FBTSxRQUFRLE9BQVMsR0FDMUIsRUFBUSxJQUFLLFVBQVcsRUFBTyxHQUdqQyxFQUFNLFNBQVUsR0FDaEIsSUFDSyxJQUFpQixHQUNwQixFQUFNLFlBRUQsRUFwQlQsR0FBSSxHQUFRLEtBQ1IsRUFBZSxFQUNmLEVBQVMsS0FBSyxPQUFPLE1BR3pCLElBRkEsS0FBSyxjQUFlLEdBRWQsRUFFSixXQURBLE1BQUssVUFpQlAsS0FBTSxHQUFJLEdBQUUsRUFBTyxFQUFKLEVBQVksSUFBTSxDQUMvQixHQUFJLEdBQWUsS0FBSyxPQUFPLEVBQy9CLEdBQWEsR0FBSSxVQUFXLEdBQzVCLEVBQWEsVUFJakIsRUFBYSxVQUFVLFNBQVcsU0FBVSxHQUMxQyxLQUFLLGFBQWUsS0FBSyxlQUFpQixFQUFNLFFBRWhELElBQUksR0FBUSxJQUNaLFlBQVksV0FDVixFQUFNLEtBQU0sV0FBWSxFQUFPLEdBQzFCLEVBQU0sWUFBYyxFQUFNLFdBQVcsUUFDeEMsRUFBTSxXQUFXLE9BQVEsRUFBTyxNQUt0QyxFQUFhLFVBQVUsU0FBVyxXQUNoQyxHQUFJLEdBQVksS0FBSyxhQUFlLE9BQVMsTUFDN0MsTUFBSyxZQUFhLENBQ2xCLElBQUksR0FBUSxJQUVaLFlBQVksV0FHVixHQUZBLEVBQU0sS0FBTSxFQUFXLEdBQ3ZCLEVBQU0sS0FBTSxTQUFVLEdBQ2pCLEVBQU0sV0FBYSxDQUN0QixHQUFJLEdBQVcsRUFBTSxhQUFlLFNBQVcsU0FDL0MsR0FBTSxXQUFZLEdBQVksT0FPL0IsSUFDSCxFQUFFLEdBQUcsYUFBZSxTQUFVLEVBQVMsR0FDckMsR0FBSSxHQUFXLEdBQUksR0FBYyxLQUFNLEVBQVMsRUFDaEQsT0FBTyxHQUFTLFdBQVcsUUFBUyxFQUFFLFNBVzFDLEVBQWEsVUFBWSxHQUFJLEdBRTdCLEVBQWEsVUFBVSxNQUFRLFdBRTdCLEdBQUksR0FBVyxFQUFPLEtBQUssSUFBSSxNQUFTLEdBQUksR0FBVSxLQUFLLElBQUksSUFDL0QsSUFBSyxFQUFTLFlBRVosV0FEQSxNQUFLLFFBQVMsRUFBUyxTQUFVLHVCQU1uQyxJQUFLLEtBQUssSUFBSSxVQUFzQyxTQUExQixLQUFLLElBQUksYUFHakMsV0FEQSxNQUFLLFFBQW1DLElBQTFCLEtBQUssSUFBSSxhQUFvQixlQUs3QyxJQUFJLEdBQVEsSUFDWixHQUFTLEdBQUksVUFBVyxTQUFVLEVBQU8sR0FFdkMsTUFEQSxHQUFNLFFBQVMsRUFBTSxTQUFVLElBQ3hCLElBR1QsRUFBUyxTQUdYLEVBQWEsVUFBVSxRQUFVLFNBQVUsRUFBVSxHQUNuRCxLQUFLLFNBQVcsRUFDaEIsS0FBSyxLQUFNLFVBQVcsS0FBTSxHQVE5QixJQUFJLEtBMkRKLE9BbkRBLEdBQVMsVUFBWSxHQUFJLEdBRXpCLEVBQVMsVUFBVSxNQUFRLFdBRXpCLElBQUssS0FBSyxVQUFWLENBSUEsR0FBSSxHQUFhLEdBQUksTUFDckIsR0FBUSxLQUFNLEVBQVksT0FBUSxNQUNsQyxFQUFRLEtBQU0sRUFBWSxRQUFTLE1BQ25DLEVBQVcsSUFBTSxLQUFLLElBRXRCLEtBQUssV0FBWSxJQU1uQixFQUFTLFVBQVUsWUFBYyxTQUFVLEdBQ3pDLEdBQUksR0FBUyxLQUFPLEVBQU0sSUFDckIsTUFBTSxJQUNULEtBQU0sR0FBVSxJQUlwQixFQUFTLFVBQVUsT0FBUyxTQUFVLEdBQ3BDLEtBQUssU0FBUyxFQUFNLFVBQ3BCLEtBQUssa0JBQW1CLElBRzFCLEVBQVMsVUFBVSxRQUFVLFNBQVUsR0FDckMsS0FBSyxTQUFTLEVBQU8sV0FDckIsS0FBSyxrQkFBbUIsSUFLMUIsRUFBUyxVQUFVLFFBQVUsU0FBVSxFQUFVLEdBQy9DLEtBQUssYUFBYyxFQUNuQixLQUFLLFNBQVcsRUFDaEIsS0FBSyxLQUFNLFVBQVcsS0FBTSxJQUc5QixFQUFTLFVBQVUsa0JBQW9CLFNBQVUsR0FDL0MsRUFBUSxPQUFRLEVBQU0sT0FBUSxPQUFRLE1BQ3RDLEVBQVEsT0FBUSxFQUFNLE9BQVEsUUFBUyxPQUtsQzs7OztDQ2pVVCxTQUFZLEdBRVosWUFNQSxTQUFTLEdBQVksR0FDbkIsR0FBSSxHQUFRLEVBQU8sS0FHbkIsT0FEQSxHQUFNLE9BQVMsRUFBTSxRQUFVLEVBQU0sWUFBYyxFQUM1QyxFQVJULEdBQUksR0FBVSxTQUFTLGdCQUVuQixFQUFPLFlBU04sR0FBUSxpQkFDWCxFQUFPLFNBQVUsRUFBSyxFQUFNLEdBQzFCLEVBQUksaUJBQWtCLEVBQU0sR0FBSSxJQUV4QixFQUFRLGNBQ2xCLEVBQU8sU0FBVSxFQUFLLEVBQU0sR0FDMUIsRUFBSyxFQUFPLEdBQU8sRUFBRyxZQUNwQixXQUNFLEdBQUksR0FBUSxFQUFZLEVBQ3hCLEdBQUcsWUFBWSxLQUFNLEVBQUksSUFFM0IsV0FDRSxHQUFJLEdBQVEsRUFBWSxFQUN4QixHQUFHLEtBQU0sRUFBSyxJQUVsQixFQUFJLFlBQWEsS0FBTyxFQUFNLEVBQUssRUFBTyxLQUk5QyxJQUFJLEdBQVMsWUFFUixHQUFRLG9CQUNYLEVBQVMsU0FBVSxFQUFLLEVBQU0sR0FDNUIsRUFBSSxvQkFBcUIsRUFBTSxHQUFJLElBRTNCLEVBQVEsY0FDbEIsRUFBUyxTQUFVLEVBQUssRUFBTSxHQUM1QixFQUFJLFlBQWEsS0FBTyxFQUFNLEVBQUssRUFBTyxHQUMxQyxXQUNTLEdBQUssRUFBTyxHQUNuQixNQUFRLEdBRVIsRUFBSyxFQUFPLEdBQU8sU0FLekIsSUFBSSxJQUNGLEtBQU0sRUFDTixPQUFRLEVBS2EsbUJBQVgsU0FBeUIsT0FBTyxJQUUxQyxPQUFRLEdBQ3FCLGdCQUFaLFNBRWpCLE9BQU8sUUFBVSxFQUdqQixFQUFPLFFBQVUsR0FHZjs7OztDQzFFRixXQUNFLFlBUUEsU0FBUyxNQWVULFFBQVMsR0FBZ0IsRUFBVyxHQUVoQyxJQURBLEdBQUksR0FBSSxFQUFVLE9BQ1gsS0FDSCxHQUFJLEVBQVUsR0FBRyxXQUFhLEVBQzFCLE1BQU8sRUFJZixPQUFPLEdBVVgsUUFBUyxHQUFNLEdBQ1gsTUFBTyxZQUNILE1BQU8sTUFBSyxHQUFNLE1BQU0sS0FBTSxZQWhDdEMsR0FBSSxHQUFRLEVBQWEsVUFDckIsRUFBVSxLQUNWLEVBQXNCLEVBQVEsWUEyQ2xDLEdBQU0sYUFBZSxTQUFzQixHQUN2QyxHQUNJLEdBQ0EsRUFGQSxFQUFTLEtBQUssWUFNbEIsSUFBSSxZQUFlLFFBQVEsQ0FDdkIsSUFDQSxLQUFLLElBQU8sR0FDSixFQUFPLGVBQWUsSUFBUSxFQUFJLEtBQUssS0FDdkMsRUFBUyxHQUFPLEVBQU8sUUFLL0IsR0FBVyxFQUFPLEtBQVMsRUFBTyxNQUd0QyxPQUFPLElBU1gsRUFBTSxpQkFBbUIsU0FBMEIsR0FDL0MsR0FDSSxHQURBLElBR0osS0FBSyxFQUFJLEVBQUcsRUFBSSxFQUFVLE9BQVEsR0FBSyxFQUNuQyxFQUFjLEtBQUssRUFBVSxHQUFHLFNBR3BDLE9BQU8sSUFTWCxFQUFNLHFCQUF1QixTQUE4QixHQUN2RCxHQUNJLEdBREEsRUFBWSxLQUFLLGFBQWEsRUFRbEMsT0FMSSxhQUFxQixTQUNyQixLQUNBLEVBQVMsR0FBTyxHQUdiLEdBQVksR0FhdkIsRUFBTSxZQUFjLFNBQXFCLEVBQUssR0FDMUMsR0FFSSxHQUZBLEVBQVksS0FBSyxxQkFBcUIsR0FDdEMsRUFBd0MsZ0JBQWIsRUFHL0IsS0FBSyxJQUFPLEdBQ0osRUFBVSxlQUFlLElBQXNELEtBQTlDLEVBQWdCLEVBQVUsR0FBTSxJQUNqRSxFQUFVLEdBQUssS0FBSyxFQUFvQixHQUNwQyxTQUFVLEVBQ1YsTUFBTSxHQUtsQixPQUFPLE9BTVgsRUFBTSxHQUFLLEVBQU0sZUFVakIsRUFBTSxnQkFBa0IsU0FBeUIsRUFBSyxHQUNsRCxNQUFPLE1BQUssWUFBWSxHQUNwQixTQUFVLEVBQ1YsTUFBTSxLQU9kLEVBQU0sS0FBTyxFQUFNLG1CQVNuQixFQUFNLFlBQWMsU0FBcUIsR0FFckMsTUFEQSxNQUFLLGFBQWEsR0FDWCxNQVNYLEVBQU0sYUFBZSxTQUFzQixHQUN2QyxJQUFLLEdBQUksR0FBSSxFQUFHLEVBQUksRUFBSyxPQUFRLEdBQUssRUFDbEMsS0FBSyxZQUFZLEVBQUssR0FFMUIsT0FBTyxPQVdYLEVBQU0sZUFBaUIsU0FBd0IsRUFBSyxHQUNoRCxHQUNJLEdBQ0EsRUFGQSxFQUFZLEtBQUsscUJBQXFCLEVBSTFDLEtBQUssSUFBTyxHQUNKLEVBQVUsZUFBZSxLQUN6QixFQUFRLEVBQWdCLEVBQVUsR0FBTSxHQUUxQixLQUFWLEdBQ0EsRUFBVSxHQUFLLE9BQU8sRUFBTyxHQUt6QyxPQUFPLE9BTVgsRUFBTSxJQUFNLEVBQU0sa0JBWWxCLEVBQU0sYUFBZSxTQUFzQixFQUFLLEdBRTVDLE1BQU8sTUFBSyxxQkFBb0IsRUFBTyxFQUFLLElBYWhELEVBQU0sZ0JBQWtCLFNBQXlCLEVBQUssR0FFbEQsTUFBTyxNQUFLLHFCQUFvQixFQUFNLEVBQUssSUFlL0MsRUFBTSxvQkFBc0IsU0FBNkIsRUFBUSxFQUFLLEdBQ2xFLEdBQUksR0FDQSxFQUNBLEVBQVMsRUFBUyxLQUFLLGVBQWlCLEtBQUssWUFDN0MsRUFBVyxFQUFTLEtBQUssZ0JBQWtCLEtBQUssWUFHcEQsSUFBbUIsZ0JBQVIsSUFBc0IsWUFBZSxRQW1CNUMsSUFEQSxFQUFJLEVBQVUsT0FDUCxLQUNILEVBQU8sS0FBSyxLQUFNLEVBQUssRUFBVSxRQW5CckMsS0FBSyxJQUFLLEdBQ0YsRUFBSSxlQUFlLEtBQU8sRUFBUSxFQUFJLE1BRWpCLGtCQUFWLEdBQ1AsRUFBTyxLQUFLLEtBQU0sRUFBRyxHQUlyQixFQUFTLEtBQUssS0FBTSxFQUFHLEdBZXZDLE9BQU8sT0FZWCxFQUFNLFlBQWMsU0FBcUIsR0FDckMsR0FFSSxHQUZBLFFBQWMsR0FDZCxFQUFTLEtBQUssWUFJbEIsSUFBYSxXQUFULFFBRU8sR0FBTyxPQUViLElBQUksWUFBZSxRQUVwQixJQUFLLElBQU8sR0FDSixFQUFPLGVBQWUsSUFBUSxFQUFJLEtBQUssVUFDaEMsR0FBTyxjQU1mLE1BQUssT0FHaEIsT0FBTyxPQVFYLEVBQU0sbUJBQXFCLEVBQU0sZUFjakMsRUFBTSxVQUFZLFNBQW1CLEVBQUssR0FDdEMsR0FDSSxHQUNBLEVBQ0EsRUFDQSxFQUpBLEVBQVksS0FBSyxxQkFBcUIsRUFNMUMsS0FBSyxJQUFPLEdBQ1IsR0FBSSxFQUFVLGVBQWUsR0FHekIsSUFGQSxFQUFJLEVBQVUsR0FBSyxPQUVaLEtBR0gsRUFBVyxFQUFVLEdBQUssR0FFdEIsRUFBUyxRQUFTLEdBQ2xCLEtBQUssZUFBZSxFQUFLLEVBQVMsVUFHdEMsRUFBVyxFQUFTLFNBQVMsTUFBTSxLQUFNLE9BRXJDLElBQWEsS0FBSyx1QkFDbEIsS0FBSyxlQUFlLEVBQUssRUFBUyxTQU1sRCxPQUFPLE9BTVgsRUFBTSxRQUFVLEVBQU0sYUFVdEIsRUFBTSxLQUFPLFNBQWMsR0FDdkIsR0FBSSxHQUFPLE1BQU0sVUFBVSxNQUFNLEtBQUssVUFBVyxFQUNqRCxPQUFPLE1BQUssVUFBVSxFQUFLLElBVy9CLEVBQU0sbUJBQXFCLFNBQTRCLEdBRW5ELE1BREEsTUFBSyxpQkFBbUIsRUFDakIsTUFXWCxFQUFNLG9CQUFzQixXQUN4QixNQUFJLE1BQUssZUFBZSxvQkFDYixLQUFLLGtCQUdMLEdBVWYsRUFBTSxXQUFhLFdBQ2YsTUFBTyxNQUFLLFVBQVksS0FBSyxhQVFqQyxFQUFhLFdBQWEsV0FFdEIsTUFEQSxHQUFRLGFBQWUsRUFDaEIsR0FJVyxrQkFBWCxTQUF5QixPQUFPLElBQ3ZDLE9BQU8sV0FDSCxNQUFPLEtBR1ksZ0JBQVgsU0FBdUIsT0FBTyxRQUMxQyxPQUFPLFFBQVUsRUFHakIsRUFBUSxhQUFlLElBRTdCLEtBQUs7Ozs7Q0N2ZFAsU0FBWSxHQUVSLEdBQUksR0FBVSxTQUFVLEVBQVcsR0FDL0IsS0FBSyxPQUFRLEVBQVcsSUFHeEIsRUFBSSxFQUFTLEVBQUksRUFBRSxTQUV2QixHQUFFLFFBQVUsRUFJWixFQUFFLE9BQVMsU0FBVSxFQUFXLEdBQzVCLEtBQUssVUFBWSxFQUNqQixLQUFLLFFBQVksRUFBRSxVQUFZLEtBQUssU0FBVSxJQUdsRCxFQUFFLFVBQ0UsWUFBYSxJQUtqQixFQUFFLE9BQVMsV0FDZ0IsU0FBbEIsS0FBSyxXQUNOLEVBQUcsUUFBUyxHQUFJLFNBQVUsS0FBSyxXQUFXLFFBRTFDLEtBQUssVUFBVyxJQUl4QixFQUFFLFNBQVcsV0FDVCxHQUFJLEdBQU8sSUFFWCxRQUFTLE9BQVEsU0FBVSxHQUN2QixFQUFLLFNBQVUsU0FBVSxHQUNyQixFQUFLLGdCQUFpQixRQU9sQyxFQUFFLGFBQWUsV0FDYixHQUFJLEdBQVUsRUFBRyxFQUFNLEVBQUcsRUFBUSxDQVlsQyxPQVZBLE1BQUssVUFBVSxLQUFNLFdBR2pCLE1BRkEsR0FBTSxFQUFHLE1BQU8sU0FBUyxLQUFNLEdBQVMsRUFFNUIsR0FBUCxHQUE4QixJQUFaLEdBQ25CLEdBQVMsR0FBVSxRQUd2QixFQUFVLEtBR1AsR0FHWCxFQUFFLFNBQVcsU0FBVSxHQUduQixJQUFNLEdBQUksR0FBTyxFQUZiLEVBQUksS0FBSyxjQUVVLEVBQUksRUFBRyxFQUFJLEVBQUUsRUFBRyxJQUNuQyxFQUFRLEVBQUUsRUFBSSxFQUNkLEVBQVEsS0FBSyxVQUFVLE1BQU8sRUFBTyxFQUFRLEVBQUUsR0FFL0MsRUFBVSxFQUFNLElBSXhCLEVBQUUsWUFBYyxXQUNaLEdBQUksR0FBVSxLQUFLLGVBQ2YsRUFBVSxLQUFLLEtBQU0sS0FBSyxVQUFVLE9BQVMsRUFFakQsUUFBUyxFQUFHLEVBQVMsRUFBRyxJQUc1QixFQUFFLGdCQUFrQixTQUFVLEdBQzFCLEdBQUksR0FBVSxLQUFLLFdBQVksR0FDM0IsRUFBVSxLQUFLLE9BRW5CLEdBQVUsS0FBTSxTQUFVLEVBQUcsR0FDekIsRUFBRyxHQUFVLElBQUssU0FBVSxHQUM1QixFQUFHLEdBQVUsUUFBUyxrQkFDbEIsRUFDQSxFQUNBLEVBQ0EsRUFBVSxPQUNWLE9BS1osRUFBRSxXQUFhLFNBQVUsR0FDckIsR0FBSSxHQUFPLEVBQTBDLEVBQWpDLEVBQU0sRUFBRyxFQUFVLEtBQUssT0FzQjVDLE9BcEJBLEdBQVUsS0FBTSxTQUFVLEVBQUcsR0FDekIsRUFBRyxHQUFVLFFBQVMsaUJBQ2xCLEVBQ0EsRUFBUSxZQUNSLEVBQ0EsRUFBVSxPQUNWLElBR0osRUFBRyxHQUFVLElBQUssU0FBVSxFQUFRLGFBQ3BDLEVBQVUsRUFBUSx3QkFDbEIsRUFBVSxFQUFJLE9BQVMsRUFBSSxJQUV0QixFQUFVLElBQ1gsRUFBTSxLQUlkLEVBQVEsS0FBSyxNQUFPLEdBQU0sV0FFbkIsR0FBUyxLQUtwQixJQUFJLEtBRUosR0FBRSxVQUFZLFNBQVUsR0FDcEIsR0FBSSxHQUFTLEtBQVEsR0FBVyxFQUFRLFFBQVUsWUFDOUMsRUFBUyxFQUFFLEVBRWYsR0FBRSxLQUFNLEtBQU0sSUFLbEIsRUFBRSxVQUFZLFNBQVUsR0FDcEIsR0FBSSxHQUFJLEdBQUksR0FBUyxLQUFNLEVBRTNCLEdBQUUsU0FDRixFQUFFLFdBQVcsVUFNakIsRUFBRSxVQUFZLFNBQVUsR0FDcEIsR0FBSSxHQUFVLEtBQUssR0FBRyxTQUFTLE9BQzNCLEVBQVUsRUFBRSxTQUVoQixHQUFFLGNBQWMsS0FBTSxLQUFNLEdBQzVCLEVBQUUsa0JBQW1CLEVBQVEsRUFBUyxHQUN0QyxFQUFFLFVBQVUsS0FBTSxLQUFNLElBRzVCLEVBQUUsY0FBZ0IsU0FBVSxHQUN4QixLQUFLLEtBQU0sU0FBVSxFQUFHLEdBQ3BCLEVBQUcsRUFBUSxVQUFXLEtBQU0sU0FBVSxFQUFHLEdBQ3JDLEVBQUcsR0FBUSxLQUFNLGVBQWdCLEVBQVUsSUFBTSxRQUs3RCxFQUFFLGtCQUFvQixTQUFVLEVBQVEsRUFBUyxHQUM3QyxJQUFNLEdBQUksR0FBSSxFQUFPLEVBQUosRUFBWSxJQUN6QixFQUFFLFVBQVUsS0FBTSxFQUFFLE1BQU8sRUFBUyxHQUFLLElBSWpELEVBQUUsTUFBUSxTQUFVLEVBQVMsR0FDekIsTUFBTyxHQUFHLGtCQUFvQixFQUFVLElBQU0sRUFBSSxPQUt0RCxFQUFFLEdBQUcsUUFBVSxTQUFVLEdBS3JCLE1BSkssTUFBSyxPQUFTLEdBQ2YsRUFBRSxVQUFVLEtBQU0sS0FBTSxHQUdyQixPQUdYOzs7O0FDbkxKLEdBQUksY0FBZSxRQUFRLGlCQUUxQixTQUFTLEdBTVIsR0FBSSxHQUFnQixTQUFTLEVBQU0sR0FDakMsS0FBSyxLQUFPLEVBQ1osS0FBSyxTQUFXLEVBRWhCLEtBQUssU0FBVyxHQUFJLEdBQXNCLEtBQUssS0FBTSxLQUFLLFVBQzFELEtBQUssT0FBUyxHQUFJLEdBQW9CLEtBQUssS0FBTSxLQUFLLFVBQ3RELEtBQUssWUFBYyxhQUFhLEtBQUssTUFFckMsS0FBSyxtQkFDTCxLQUFLLGFBR1AsR0FBYyxVQUFVLGlCQUFtQixXQUN6QyxHQUFJLEdBQU8sSUFFWCxNQUFLLFlBQVksR0FBRyxPQUFRLFdBQzFCLEVBQUssU0FBUyxpQkFDZCxFQUFLLE9BQU8sY0FDWixFQUFLLGFBQ0wsRUFBSyxLQUFLLFFBQVEsbUJBSXBCLElBQUksRUFDSixHQUFFLFFBQVEsT0FBTyxXQUNYLEdBQ0YsYUFBYSxHQUVmLEVBQVUsV0FBVyxXQUNuQixFQUFLLFNBQVMsaUJBQ2QsRUFBSyxPQUFPLGVBQ1gsUUFJUCxFQUFjLFVBQVUsV0FBYSxXQUNuQyxLQUFLLEtBQUssS0FDUixRQUFTLEVBQ1QsU0FBVSxZQUlkLEVBQWMsVUFBVSxXQUFhLFdBQ25DLEtBQUssS0FBSyxPQUFPLElBQUssR0FPeEIsSUFBSSxHQUF3QixTQUFTLEVBQVUsR0FDN0MsS0FBSyxTQUFXLEVBQ2hCLEtBQUssU0FBVyxFQUNoQixLQUFLLE1BQVEsS0FBSyxXQUdwQixHQUFzQixVQUFVLGVBQWlCLFdBQy9DLEdBQUksR0FBYSxLQUFLLFNBQVMsUUFBVSxLQUFLLE1BQU0sTUFDaEQsRUFBYyxFQUFhLEtBQUssTUFBTSxNQUMxQyxNQUFLLFNBQVMsT0FBTyxJQUd2QixFQUFzQixVQUFVLFNBQVcsV0FDekMsR0FBSSxHQUFXLEtBQUssaUJBQ3BCLE9BQU8sTUFBSyxvQkFBb0IsSUFHbEMsRUFBc0IsVUFBVSxnQkFBa0IsV0FDaEQsT0FBUSxLQUFLLFNBQVMsUUFDcEIsSUFBSyxTQUNILE1BQU8sS0FDVCxLQUFLLFlBQ0gsTUFBTyxNQUFLLFNBQVMsY0FDdkIsS0FBSyxXQUNILE1BQU8sTUFBSyxTQUFTLGFBQ3ZCLFNBQ0UsTUFBTyxNQUFLLFNBQVMsUUFJM0IsRUFBc0IsVUFBVSxvQkFBc0IsU0FBUyxHQUM3RCxHQUFJLEdBQVcsRUFBUyxNQUFNLElBQzlCLFFBQ0csTUFBTyxFQUFTLEdBQ2pCLE9BQVEsRUFBUyxJQVFyQixJQUFJLEdBQXNCLFNBQVMsRUFBVSxHQUMzQyxLQUFLLFNBQVcsRUFDaEIsS0FBSyxPQUFTLEtBQUssU0FBUyxLQUFLLE9BQ2pDLEtBQUssU0FBVyxFQUNoQixLQUFLLGFBQ0wsS0FBSyxXQUNMLEtBQUssa0JBQ0wsS0FBSyxtQkFHUCxHQUFvQixVQUFVLFlBQWMsV0FFMUMsT0FEQSxLQUFLLGlCQUNHLEtBQUssU0FBUyxLQUNwQixJQUFLLE9BQ0gsS0FBSyxZQUNMLE1BQ0YsS0FBSyxRQUNILEtBQUssY0FHVCxLQUFLLGVBR1AsRUFBb0IsVUFBVSxXQUFhLFdBQ3RDLEtBQUssY0FBZ0IsS0FBSyxnQkFDM0IsS0FBSyxpQkFFTCxLQUFLLGdCQUlULEVBQW9CLFVBQVUsWUFBYyxXQUN2QyxLQUFLLGNBQWdCLEtBQUssZ0JBQzNCLEtBQUssZUFFTCxLQUFLLGtCQUlULEVBQW9CLFVBQVUsZUFBaUIsV0FDekMsS0FBSyxrQkFBa0IsS0FBSyxTQUFXLEtBQUssU0FBUyxVQUN2RCxLQUFLLE9BQU8sT0FBTyxLQUFLLFNBQVMsV0FJckMsRUFBb0IsVUFBVSxhQUFlLFdBQ3ZDLEtBQUssaUJBQWlCLEtBQUssU0FBVyxLQUFLLFNBQVMsU0FDdEQsS0FBSyxPQUFPLE1BQU0sS0FBSyxTQUFTLFVBSXBDLEVBQW9CLFVBQVUsWUFBYyxXQUcxQyxNQURBLE1BQUssV0FBYSxLQUFLLFlBQWMsS0FBSyxpQkFBaUIsS0FBSyxRQUFVLEtBQUssa0JBQWtCLEtBQUssUUFDL0YsS0FBSyxZQUdkLEVBQW9CLFVBQVUsY0FBZ0IsV0FHNUMsTUFEQSxNQUFLLGFBQWUsS0FBSyxjQUFnQixLQUFLLFNBQVMsUUFBVSxLQUFLLFNBQVMsU0FDeEUsS0FBSyxjQUdkLEVBQW9CLFVBQVUsWUFBYyxXQUMxQyxHQUFJLEtBRUosUUFEQSxFQUFNLFlBQWMsS0FBSyxTQUFTLFFBQVUsS0FBSyxPQUFPLFNBQVcsRUFDM0QsS0FBSyxTQUFTLE9BQ3BCLElBQUssTUFDSCxLQUNGLEtBQUssU0FDSCxFQUFNLFdBQWEsS0FBSyxTQUFTLFNBQVcsS0FBSyxPQUFPLFVBQVksQ0FDcEUsTUFDRixLQUFLLFNBQ0gsRUFBTSxVQUFZLEtBQUssU0FBUyxTQUFXLEtBQUssT0FBTyxTQUczRCxLQUFLLE9BQU8sSUFBSSxJQUdsQixFQUFvQixVQUFVLGtCQUFvQixTQUFTLEdBUXpELE1BUEssTUFBSyxxQkFDSixFQUFPLEtBQUssaUJBQ2QsS0FBSyxtQkFBcUIsRUFBTyxLQUFLLGlCQUV0QyxLQUFLLG1CQUFxQixLQUFLLGdCQUFnQixHQUFRLFFBR3BELEtBQUssb0JBR2QsRUFBb0IsVUFBVSxpQkFBbUIsU0FBUyxHQVF4RCxNQVBLLE1BQUssb0JBQ0osRUFBTyxLQUFLLGdCQUNkLEtBQUssa0JBQW9CLEVBQU8sS0FBSyxnQkFFckMsS0FBSyxrQkFBb0IsS0FBSyxnQkFBZ0IsR0FBUSxPQUduRCxLQUFLLG1CQUdkLEVBQW9CLFVBQVUsZ0JBQWtCLFNBQVMsR0FDdkQsR0FBSSxFQUFPLEtBQUssT0FBUSxDQUN0QixHQUFJLEdBQU0sR0FBSSxNQUVkLE9BREEsR0FBSSxJQUFNLEVBQU8sS0FBSyxRQUNiLE1BQU8sRUFBSSxNQUFPLE9BQVEsRUFBSSxRQUV2QyxPQUFPLEdBSVgsRUFBb0IsVUFBVSxlQUFpQixXQUM3QyxLQUFLLE9BQU8sS0FDVixTQUFVLE9BQ1YsTUFBTyxPQUNQLE9BQVEsU0FRWixJQUFJLEdBQXlCLEVBQ3pCLEVBQXFCLFNBQVMsR0FDaEMsSUFDSSxJQUEyQixFQUFLLFFBQ2xDLEVBQUUsR0FBTSxPQUFPLFFBQVEsZUFJM0IsR0FBRSxHQUFHLG1CQUFxQixTQUFVLEdBRWxDLEdBQUksR0FBVyxFQUFFLFVBQVksRUFBRSxHQUFHLG1CQUFtQixTQUFVLEdBRTNELEVBQU8sSUFDWCxPQUFPLEdBQUssS0FBSyxXQUNmLEdBQUksR0FBTyxFQUFFLEtBQ2IsR0FBSyxLQUFLLHNCQUF1QixHQUFJLEdBQWMsRUFBTSxJQUN6RCxFQUFLLEdBQUcsaUJBQWtCLFdBQ3hCLEVBQW1CLFFBTXpCLEVBQUUsR0FBRyxtQkFBbUIsVUFDWCxJQUFLLE9BQ1AsTUFBTyxNQUNSLE9BQVEsUUFDUCxNQUFPLFNBQ2hCLGVBQWdCLE1BQ2YsY0FBZSxRQUdsQjs7OztBQzNQRixHQUFJLFdBQVksU0FBVSxFQUFLLEdBQzdCLEtBQUssSUFBTSxFQUNYLEtBQUssa0JBQWtCLEdBR3pCLFdBQVUsVUFBVSxrQkFBb0IsU0FBVSxHQUNoRCxHQUFJLEdBQVEsSUFFWixLQUFLLEdBQUksS0FBTyxHQUNWLEVBQVcsZUFBZSxJQUM1QixFQUFNLHdCQUF3QixFQUFLLEVBQVcsS0FLcEQsVUFBVSxVQUFVLHdCQUEwQixTQUFVLEVBQUssR0FDM0QsR0FBSSxHQUFlLEVBQUksV0FDdkIsUUFBTyxlQUFlLEtBQUssSUFBSyxHQUM5QixNQUFPLEdBR1QsSUFBSSxHQUNBLEVBQVEsSUFDWixRQUFPLGVBQWUsS0FBSyxJQUFLLEdBQzlCLFlBQVksRUFDWixjQUFjLEVBQ2QsSUFBSyxXQUNILE1BQU8sSUFFVCxJQUFLLFNBQVUsR0FDVCxJQUFVLElBQ1osRUFBUSxFQUNSLEVBQU0saUJBQWlCLEVBQVUsUUFNekMsVUFBVSxVQUFVLGlCQUFtQixTQUFVLEVBQVUsR0FDekQsR0FBSSxHQUFRLElBQ1osR0FBRSxHQUFVLEtBQUssU0FBVSxFQUFHLEdBQzVCLEVBQU0sbUJBQW1CLEVBQVMsTUFJdEMsVUFBVSxVQUFVLG1CQUFxQixTQUFVLEVBQVMsR0FDMUQsR0FBSSxHQUFXLEVBQUUsRUFDYixNQUFLLFVBQVUsR0FDakIsRUFBUyxJQUFJLEdBRWIsRUFBUyxLQUFLLElBSWxCLFVBQVUsVUFBVSxVQUFZLFNBQVUsR0FDeEMsR0FBSSxHQUFXLEVBQVEsUUFBUSxhQUMvQixPQUFvQixVQUFiLEdBQXFDLFdBQWIsR0FBc0MsYUFBYixHQUcxRCxPQUFPLFFBQVU7Ozs7QUMzRGpCLEdBQUksU0FBVSxTQUFVLEdBQ3RCLEtBQUssT0FBUyxFQUNkLEtBQUssT0FBTyxXQUNaLEtBQUssT0FBTyxHQUFLLEtBQUssR0FDdEIsS0FBSyxPQUFPLElBQU0sS0FBSyxJQUN2QixLQUFLLE9BQU8sUUFBVSxLQUFLLFFBSTdCLFNBQVEsVUFBVSxHQUFLLFNBQVUsRUFBTyxHQUd0QyxNQUZLLE1BQUssUUFBUSxLQUFRLEtBQUssUUFBUSxPQUN2QyxLQUFLLFFBQVEsR0FBTyxLQUFLLEdBQ2xCLEtBQUssUUFBUSxHQUFPLE9BQVMsR0FHdEMsUUFBUSxVQUFVLElBQU0sU0FBVSxFQUFPLEdBQ25DLEdBQVMsRUFDUCxLQUFLLFFBQVEsR0FBTyxLQUFLLEtBQUssUUFBUSxHQUFPLEdBQU0sTUFDOUMsRUFDTCxLQUFLLFFBQVEsS0FBUSxLQUFLLFFBQVEsR0FBUyxNQUUvQyxLQUFLLFlBSVQsUUFBUSxVQUFVLFFBQVUsU0FBVSxFQUFPLEdBQ3ZCLGdCQUFULEtBQW1CLEdBQVEsR0FDdEMsS0FBSyxHQUFJLEtBQUssTUFBSyxRQUFRLEdBQVEsQ0FDakMsR0FBSSxHQUFJLEtBQUssUUFBUSxHQUFPLEVBQ3hCLE1BQUssUUFBUSxHQUFPLGVBQWUsSUFBbUIsa0JBQU4sSUFBa0IsRUFBRSxNQUFNLEtBQU0sS0FJeEYsT0FBTyxRQUFVOzs7O0FDckNqQixTQUVBLElBQUksU0FBVSxFQUFFLGdCQUVoQixRQUFPLEtBQU8sV0FDUixRQUFRLE9BQVMsR0FDbkIsT0FBTyxzQkFJWCxPQUFPLG1CQUFxQixXQUUxQixRQUFRLEdBQUcsb0JBQXFCLFNBQVUsR0FDeEMsR0FBSSxHQUFrQixFQUFFLEVBQUUsY0FFMUIsU0FBUSxLQUFLLGNBQWUsRUFBZ0IsS0FBSyxZQUluRCxRQUFRLEdBQUcsbUJBQW9CLGVBSWpDLE9BQU8sUUFBVTs7OztBQ3ZCakIsR0FBSSxRQUFTLFFBQVEsd0RBRWpCLFFBQ0EsY0FBZ0IsRUFHaEIsa0JBQW9CLEVBQUUsdUJBQ3RCLGdCQUFrQixFQUFFLHFCQUNwQixlQUFpQixFQUFFLE1BQU0sVUFBVSxLQUFLLGVBQ3hDLGtCQUFvQixFQUFFLE1BQU0sVUFBVSxLQUFLLGlCQUcvQyxJQUFJLE1BQU0sUUFDUixHQUFJLG1CQUFvQixFQUFFLE1BQU0sVUFBVSxRQUFRLGVBQzlDLHFCQUF1QixrQkFBa0IsS0FBSyxzQkFDOUMsMEJBQTRCLEVBQUUsTUFBTSxVQUFVLFFBQVEsc0JBSTVELE1BQUssS0FBTyxXQUdWLEVBQUUsVUFBVSxHQUFHLHVCQUF3QixTQUFTLEVBQU8sR0FFckQsS0FBSyxzQkFDTCxLQUFLLHNCQUlILE1BQU0sU0FFUixFQUFFLFVBQVUsR0FBRyxTQUFVLE1BQU0sVUFBVSxRQUFRLGNBQWUsU0FBVSxHQUN4RSxFQUFFLGdCQUNGLElBQUksR0FBa0IsRUFBRSxFQUFFLGNBQzFCLE1BQUssaUJBQWlCLEtBSzFCLEVBQUUsVUFBVSxHQUFHLFFBQVMscUJBQXNCLFNBQVUsR0FDdEQsRUFBRSxnQkFDRixJQUFJLEdBQWtCLEVBQUUsRUFBRSxjQUMxQixNQUFLLHNCQUFzQixNQVEvQixLQUFLLGlCQUFtQixTQUFVLEdBQ2hDLEdBQUksR0FBUyxLQUFLLFlBQVksRUFBZ0Isa0JBQzFDLEtBRUEsRUFBVSxNQUFNLGtCQUFrQixFQUFPLElBQ3pDLEVBQWEsTUFBTSxRQUFRLE1BQVEsTUFBTSxhQUFhLFFBQVEscUJBQXVCLEVBQVEsS0FHakcsc0JBQXFCLElBQUksTUFBTSxhQUFhLFFBQVEsNEJBR3BELE9BQU8sUUFBUSxFQUFPLEdBQUksRUFBTyxTQUFVLEdBQ3pDLFFBQVksU0FBVSxFQUFNLEVBQWEsR0FHdkMsR0FBSSxHQUFVLE1BQU0sYUFBYSxRQUFRLGlDQUFpQyxRQUFRLGVBQWdCLEVBQ2xHLE1BQUssYUFBYSwwQkFBMkIsVUFBVyxHQUd4RCxxQkFBcUIsSUFBSSxNQUFNLGFBQWEsUUFBUSw0QkFHdEQsTUFBUyxTQUFTLEVBQU8sRUFBYSxHQUNwQyxRQUFRLElBQUkseUJBQTBCLEVBQU8sRUFBYSxFQUcxRCxJQUFJLEdBQVUsTUFBTSxhQUFhLFFBQVEsdUNBQXVDLFFBQVEsZUFBZ0IsR0FBWSxRQUFRLGtCQUFtQixFQUMvSSxNQUFLLGFBQWEsMEJBQTJCLFFBQVMsR0FHdEQscUJBQXFCLElBQUksTUFBTSxhQUFhLFFBQVEsNkJBSzFELEtBQUssc0JBQXdCLFNBQVUsR0FDckMsR0FBSSxHQUFpQixFQUFnQixRQUFRLE1BQU0sVUFBVSxLQUFLLGVBRTlELEVBQU8sS0FBSyxlQUFlLEVBQWUsS0FBSyxjQUMvQyxFQUFhLEVBQUssY0FBZ0IsTUFBTSxhQUFhLFFBQVEscUJBQXVCLEVBQUssYUFFN0YsUUFBTyxXQUFXLEVBQWdCLEtBQUssZ0JBQ3JDLFFBQVcsU0FBVSxFQUFNLEVBQWEsR0FFdEMsRUFBZSxNQUdmLElBQUksR0FBVSxNQUFNLGFBQWEsS0FBSyxvQkFBb0IsUUFBUSxlQUFnQixFQUNsRixNQUFLLGFBQWEsa0JBQW1CLFVBQVcsSUFHbEQsTUFBUyxTQUFVLEVBQU8sRUFBYSxHQUNyQyxRQUFRLElBQUksbUNBQW9DLEVBQU8sRUFBYSxFQUdwRSxJQUFJLEdBQVUsTUFBTSxhQUFhLEtBQUssMEJBQTBCLFFBQVEsZUFBZ0IsR0FBWSxRQUFRLGtCQUFtQixFQUMvSCxNQUFLLGFBQWEsa0JBQW1CLFVBQVcsT0FVdEQsS0FBSyxvQkFBc0IsV0FDekIsR0FBSSxHQUFtQixRQUFRLFlBQVksT0FBTyxLQUFLLFlBQWEsTUFBTSxjQUFjLGFBQ3BGLEVBQWlDLFFBQVEsWUFBWSxPQUFPLEtBQUssWUFBYSxNQUFNLGNBQWMseUJBRWxHLEVBQW9CLE1BQU0sYUFBYSxLQUFLLGtCQUFrQixRQUFRLGVBQWdCLE9BQU8sS0FBSyxZQUFZLFFBQVEscUJBQXNCLEdBQWtCLFFBQVEsbUNBQW9DLEVBQzlNLG1CQUFrQixLQUFLLEVBRXZCLElBQUksR0FBa0IsTUFBTSxhQUFhLEtBQUssV0FBVyxRQUFRLHFCQUFzQixHQUFrQixRQUFRLG1DQUFvQyxFQUNySixpQkFBZ0IsS0FBSyxJQUl2QixLQUFLLGtCQUFvQixXQUNRLElBQTNCLE9BQU8sS0FBSyxhQUNkLGVBQWUsT0FDZixrQkFBa0IsWUFBWSxVQUFVLEtBQUssTUFBTSxhQUFhLEtBQUssbUJBS3pFLEtBQUssYUFBZSxTQUFVLEVBQWMsRUFBZSxHQUN6RCxnQkFDQSxFQUFhLFlBQVksVUFBVSxLQUFLLG9CQUFvQixFQUFjLFdBQVcsY0FBYyxLQUFLLEVBQVEsVUFDaEgsS0FBSyxlQUFlLGdCQUd0QixLQUFLLGVBQWlCLFNBQVUsR0FDOUIsV0FBVyxXQUNULEVBQUUsV0FBVyxHQUFZLFFBQVEsV0FDL0IsRUFBRSxNQUFNLFlBRVQsTUFBTSxrQkFJWCxLQUFLLFlBQWMsU0FBVSxHQUUzQixJQUFLLEdBREQsTUFDSyxFQUFJLEVBQUcsRUFBSSxFQUFJLE9BQVEsSUFBSyxDQUNuQyxHQUFJLEdBQU8sRUFBSSxFQUNmLEdBQUssRUFBSyxNQUFRLEVBQUssTUFFekIsTUFBTyxJQVFULEtBQUssZUFBaUIsU0FBVSxHQUNKLGdCQUFmLEtBQXlCLEVBQWEsU0FBUyxHQUMxRCxJQUFJLEVBQ0osSUFBSSxPQUNGLElBQUssR0FBSSxHQUFJLEVBQUcsRUFBSSxPQUFPLEtBQUssTUFBTSxPQUFRLElBQUssQ0FDakQsR0FBSSxHQUFPLE9BQU8sS0FBSyxNQUFNLEVBQ3pCLEdBQUssYUFBZSxJQUN0QixFQUFZLEdBSWxCLE1BQU8sSUFJVCxLQUFLLFlBQWMsU0FBVSxHQUNELGdCQUFmLEtBQXlCLEVBQWEsU0FBUyxHQUMxRCxJQUFJLElBQWMsQ0FDbEIsSUFBSSxPQUNGLElBQUssR0FBSSxHQUFJLEVBQUcsRUFBSSxPQUFPLEtBQUssTUFBTSxPQUFRLElBQUssQ0FDakQsR0FBSSxHQUFPLE9BQU8sS0FBSyxNQUFNLEVBQ3pCLEdBQUssYUFBZSxJQUN0QixHQUFjLEdBSXBCLE1BQU8sSUFHVCxPQUFPLFFBQVU7Ozs7QUNsTWpCLEdBQUksaUJBT0osZUFBYyx1QkFBeUIsV0FDckMsR0FBSSxHQUFVLEVBQUUsc0JBQ2hCLElBQUksRUFBUSxPQUFTLEVBQUcsQ0FDdEIsR0FBSSxHQUFxQixFQUFFLEVBQVEsS0FBSyxpQkFBaUIsR0FDckQsRUFBa0IsUUFBUSxNQUFNLFVBQVUsRUFBbUIsSUFFOUQsR0FBUSxPQUFTLEdBQ2xCLEVBQVEsS0FBSyxXQUNYLEdBQUksR0FBUSxHQUFJLE9BQ1osRUFBTSxFQUFFLE1BQU0sS0FBSyxRQUNuQixFQUFZLFFBQVEsTUFBTSxpQkFBaUIsRUFBSyxFQUNwRCxHQUFNLElBQU0sTUFPcEIsY0FBYyxlQUFpQixXQUM3QixFQUFFLFVBQVUsR0FBRyxRQUFTLHNCQUF1QixTQUFVLEdBQ3ZELEVBQUUsZ0JBQ0YsSUFBSSxHQUFrQixFQUFFLEVBQUUsZUFDdEIsRUFBcUIsRUFBRSxFQUFnQixLQUFLLGlCQUFpQixHQUM3RCxFQUFZLEVBQWdCLEtBQUssT0FDckMsZUFBYyxhQUFhLEVBQW9CLE1BT25ELGNBQWMsYUFBZSxTQUFVLEVBQW9CLEdBQ3pELEdBQUssR0FBdUIsRUFBNUIsQ0FJQSxHQUFJLEdBQWtCLFFBQVEsTUFBTSxVQUFVLEVBQW1CLEtBQzdELEVBQWdCLFFBQVEsTUFBTSxpQkFBaUIsRUFBVyxFQUUxRCxHQUFtQixNQUFRLElBQzdCLEVBQW1CLElBQU0sS0FJN0IsT0FBTyxRQUFVOzs7O0FDbERqQixHQUFJLE9BQVEsT0FBTyxTQU1uQixPQUFNLGtCQUFvQixTQUFVLEdBQ2xDLEdBQUksRUFDc0IsaUJBQWYsS0FBeUIsRUFBYSxTQUFTLEdBRTFELEtBQUssR0FBSSxHQUFJLEVBQUcsRUFBSSxNQUFNLFFBQVEsU0FBUyxPQUFRLElBQUssQ0FDdEQsR0FBSSxHQUFVLE1BQU0sUUFBUSxTQUFTLEVBQ2pDLEdBQVEsS0FBTyxJQUNqQixFQUFtQixHQUd2QixNQUFPLElBSVQsTUFBTSxLQUFPLFFBQVEsbUJBQ3JCLE1BQU0sY0FBZ0IsUUFBUSw2QkFDOUIsTUFBTSxzQkFBd0IsUUFBUSxzQ0FDdEMsTUFBTSxxQkFBdUIsUUFBUSxxQ0FDckMsTUFBTSxPQUFTLFFBQVEscUJBQ3ZCLE1BQU0sV0FBYSxRQUFRLHlCQUMzQixNQUFNLFlBQWMsUUFBUSwyQkFFNUIsT0FBTyxRQUFVOzs7O0FDekJqQixHQUFJLHdCQUNKLHNCQUFxQixjQUVyQixxQkFBcUIsd0JBQTBCLFNBQVMsR0FDdEQsR0FBSSxHQUFLLENBRVQsUUFBUSxHQUNOLElBQUssR0FDSCxFQUFNLE9BQ04sRUFBVyxPQUFPLGdDQUNsQixNQUNGLEtBQUssR0FDSCxFQUFNLE9BQU8saUNBQWlDLE1BQzlDLEVBQVcsT0FBTyxnQ0FDbEIsTUFDRixLQUFLLEdBQ0gsRUFBTSxPQUFPLGlDQUFpQyxNQUM5QyxHQUFPLE1BQVEsT0FBTyxpQ0FBaUMsTUFDdkQsRUFBVyxPQUFPLGlDQUd0QixHQUFJLEdBQWUsRUFBUyxLQUM1QixHQUFTLE9BQ1QsSUFBSSxHQUFtQixxQkFBcUIsV0FBVyxFQUN2RCxJQUF5QixTQUFyQixFQUFnQyxDQUNsQyxJQUFLLEdBQUksR0FBRSxFQUFHLEVBQUUsRUFBaUIsT0FBUSxJQUFLLENBQzVDLEdBQUksR0FBUyxFQUFpQixHQUMxQixFQUFZLE9BQU8scUJBQXFCLElBQUksR0FBUSxLQUFLLEVBQzdELEdBQVMsT0FBTyxHQUVsQixPQUFPLDhCQUFnQyxFQUFnQixzQkFBc0IsS0FBSyxXQUNYLEtBQWpFLE9BQU8sUUFBUSxFQUFFLE1BQU0sS0FBSyxjQUFlLEdBQzdDLEVBQUUsTUFBTSxZQUFZLFdBQVcsT0FBTyxLQUFLLFVBQVUsV0FBVyxXQUFXLFlBQVksV0FBVyxXQUdsRyxFQUFFLE1BQU0sU0FBUyxXQUFXLE9BQU8sS0FBSyxVQUFVLFdBQVcsV0FBVyxLQUFLLFdBQVcsY0FHckMsS0FBbkQsT0FBTyxRQUFRLEVBQWMsSUFDL0IsRUFBUyxJQUFJLEdBRWYsRUFBUyxRQUFRLFlBSXJCLHFCQUFxQixvQkFBc0IsU0FBUyxHQUVsRCxJQUFLLEdBQUksR0FBRSxFQUFHLEVBQUUsRUFBUSxTQUFTLE9BQVEsSUFBSyxDQUM1QyxHQUFJLEdBQVUsRUFBUSxTQUFTLEVBQy9CLElBQUksRUFBUSxVQUFXLENBQ3JCLEdBQUksRUFFSixzQkFBcUIsV0FBVyxLQUFPLHFCQUFxQixXQUFXLFNBQ3ZFLHFCQUFxQixXQUFXLEtBQUssS0FBSyxFQUFRLFNBQ2xELHFCQUFxQixXQUFXLEtBQU8sUUFBUSxLQUFLLHFCQUFxQixXQUFXLE1BRWhGLEVBQVEsUUFBUSxPQUFTLElBQzNCLEVBQU0sRUFBUSxRQUNkLHFCQUFxQixXQUFXLEdBQU8scUJBQXFCLFdBQVcsT0FDdkUscUJBQXFCLFdBQVcsR0FBSyxLQUFLLEVBQVEsU0FDbEQscUJBQXFCLFdBQVcsR0FBTyxRQUFRLEtBQUsscUJBQXFCLFdBQVcsS0FHdkQsSUFBM0IsRUFBUSxRQUFRLFNBQ2xCLEVBQU0sRUFBUSxRQUFVLE1BQVEsRUFBUSxRQUN4QyxxQkFBcUIsV0FBVyxHQUFPLHFCQUFxQixXQUFXLE9BQ3ZFLHFCQUFxQixXQUFXLEdBQUssS0FBSyxFQUFRLFNBQ2xELHFCQUFxQixXQUFXLEdBQU8sUUFBUSxLQUFLLHFCQUFxQixXQUFXLE1BSzFGLHFCQUFxQix3QkFBd0IsR0FDekMsRUFBUSxRQUFRLE9BQVMsR0FBRyxxQkFBcUIsd0JBQXdCLEdBQzlDLElBQTNCLEVBQVEsUUFBUSxRQUFjLHFCQUFxQix3QkFBd0IsR0FFL0UsT0FBTyxpQ0FBaUMsT0FBTyxXQUc3QyxNQUZBLHNCQUFxQix3QkFBd0IsR0FDZCxJQUEzQixFQUFRLFFBQVEsUUFBYyxxQkFBcUIsd0JBQXdCLElBQ3hFLElBR1QsT0FBTyxpQ0FBaUMsT0FBTyxXQUU3QyxNQUQrQixLQUEzQixFQUFRLFFBQVEsUUFBYyxxQkFBcUIsd0JBQXdCLElBQ3hFLEtBS1gsT0FBTyxRQUFVOzs7O0FDN0ZqQixHQUFJLE1BQVUsUUFBUSxnQkFDbEIsR0FBVSxRQUFRLDJCQUN0QixTQUFRLG1CQUdSLElBQUksZUFBZ0IsU0FBVSxFQUFLLEdBQ2pDLEtBQUssSUFBTSxFQUNYLEtBQUssV0FBYSxFQUNsQixLQUFLLFNBQVcsYUFHbEIsZUFBYyxVQUFVLEtBQU8sV0FDN0IsS0FBSyxLQUFPLEVBQUUsS0FBSyxLQUNuQixLQUFLLGVBQWlCLEVBQ3RCLEtBQUssUUFBVSxHQUFJLE1BQUssS0FBSyxJQUU3QixJQUFJLEdBQVEsSUFDWixNQUFLLFFBQVEsR0FBRyxXQUFZLFNBQVMsRUFBVSxHQUM3QyxFQUFNLHFCQUFxQixLQUMxQixHQUFHLE9BQVEsV0FDWixFQUFNLHNCQUNOLEVBQU0sU0FBUyxNQUFNLE1BS3pCLGNBQWMsVUFBVSxxQkFBdUIsU0FBUyxHQUN0RCxHQUFHLEVBQU0sU0FBUyxDQUNoQixHQUFJLEdBQU8sRUFBRSxFQUFNLEtBQ2YsRUFBVSxFQUFLLFFBQVEsS0FBSyxXQUNoQyxNQUFLLGdCQUFrQixLQUFLLHFCQUFxQixPQUVqRCxHQUFFLEVBQU0sS0FBSyxRQUlqQixjQUFjLFVBQVUscUJBQXVCLFNBQVMsR0FFdEQsTUFBTyxHQUFjLFFBQVUsS0FBSyxnQkFBZ0IsRUFBZSxlQUFpQixLQUFLLGdCQUFnQixFQUFlLGdCQUFrQixHQUc1SSxjQUFjLFVBQVUsZ0JBQWtCLFNBQVMsRUFBZSxHQUNoRSxNQUFPLFVBQVMsRUFBYyxJQUFJLEdBQVMsUUFBUSxLQUFNLE1BRzNELGNBQWMsVUFBVSxvQkFBc0IsV0FDNUMsS0FBSyxLQUFLLE1BQU0sS0FBSyxnQkFJdkIsSUFBSSxTQUFVLFNBQVMsR0FDckIsS0FBSyxRQUFVLEVBRWYsS0FBSyxJQUFNLEtBQUssUUFBUSxnQkFDeEIsS0FBSyxhQUFlLEtBQUssUUFBUSxhQUNqQyxLQUFLLGlCQUFtQixLQUFLLFFBQVEsaUJBQ3JDLEtBQUssT0FBUyxHQUFJLGVBQWMsS0FBSyxJQUFLLEtBQUssUUFBUSxjQUN2RCxLQUFLLFdBQVksRUFFakIsS0FBSyxRQUdQLFNBQVEsVUFBVSxPQUFTLFdBQ3pCLEtBQUssS0FBSyxTQUFTLFNBQVMsUUFBUyxHQUFJLFFBQ3pDLEtBQUsseUJBQ0wsS0FBSyxTQUdQLFFBQVEsVUFBVSxNQUFRLFdBQ3hCLEtBQUssS0FBTyxFQUFFLEtBQUssS0FFaEIsS0FBSyxLQUFLLE9BQVMsSUFDcEIsS0FBSyxzQkFDTCxLQUFLLE9BQU8sT0FDWixLQUFLLHVCQUlULFFBQVEsVUFBVSxvQkFBc0IsV0FDdEMsR0FBSSxHQUFRLElBQ1osTUFBSyxPQUFPLFNBQVcsV0FDckIsRUFBTSxLQUFLLFNBQVMsU0FBUyxRQUFTLEdBQUksUUFDdEMsRUFBTSxXQUFXLEVBQU0sVUFBVSxNQUFNLElBRzdDLEVBQUUsVUFBVSxHQUFHLFlBQWEsS0FBSyxpQkFBa0IsU0FBVSxHQUMzRCxFQUFNLGNBR1IsRUFBRSxVQUFVLEdBQUcsYUFBYyxLQUFLLGlCQUFrQixTQUFVLEdBQzVELEVBQU0sY0FHUixFQUFFLFVBQVUsR0FBRyxRQUFTLDJCQUE0QixTQUFVLEdBQzVELEVBQU0sZ0JBQ04sSUFBSSxHQUFrQixFQUFFLEVBQU0sY0FDb0IsVUFBOUMsRUFBZ0IsS0FBSyxxQkFDdkIsRUFBTSxZQUVOLEVBQU0sZUFLWixRQUFRLFVBQVUsdUJBQXlCLFdBQ3pDLEtBQUssT0FBTyxVQUFXLEVBRXZCLEVBQUUsVUFBVSxJQUFJLFlBQWEsS0FBSyxrQkFDbEMsRUFBRSxVQUFVLElBQUksYUFBYyxLQUFLLGtCQUNuQyxFQUFFLFVBQVUsSUFBSSxRQUFTLDZCQUczQixRQUFRLFVBQVUsbUJBQXFCLFdBQ3JDLEdBQUksR0FBVyxLQUFLLEtBQUssS0FBSyxLQUFLLGFBQWEsY0FDNUMsR0FBUyxPQUFTLEVBQ3JCLEtBQUssZUFBaUIsRUFBUyxRQUUvQixLQUFLLGVBQWlCLEtBQUssS0FBSyxLQUFLLEtBQUssY0FBYyxRQUV6RCxLQUFLLGVBQWUsU0FBUyxjQUM3QixLQUFLLGtCQUdQLFFBQVEsVUFBVSxVQUFZLFdBQzVCLEdBQUksR0FBTyxLQUFLLGVBQWUsTUFDM0IsR0FBSyxPQUFTLElBQ2hCLEVBQUssS0FBTSxXQUFZLE1BQU8sU0FBUyxjQUN2QyxLQUFLLGVBQWUsWUFBWSxjQUNoQyxLQUFLLGVBQWlCLEVBQ3RCLEtBQUssbUJBSVQsUUFBUSxVQUFVLFVBQVksV0FDNUIsR0FBSSxHQUFPLEtBQUssZUFBZSxNQUMvQixJQUFJLEVBQUssT0FBUyxFQUFHLENBQ25CLEdBQUksR0FBUSxLQUFLLE9BQU8scUJBQXFCLEtBQUssZUFDbEQsTUFBSyxlQUFlLEtBQU0sV0FBcUIsR0FBUixJQUFlLFlBQVksY0FDbEUsRUFBSyxTQUFTLGNBQ2QsS0FBSyxlQUFpQixFQUN0QixLQUFLLG1CQUlULFFBQVEsVUFBVSxlQUFpQixXQUNqQyxFQUFFLDRCQUE0QixZQUFZLFlBQ0EsSUFBdEMsS0FBSyxlQUFlLE9BQU8sT0FDN0IsRUFBRSxtQ0FBbUMsU0FBUyxZQUNDLElBQXRDLEtBQUssZUFBZSxPQUFPLFFBQ3BDLEVBQUUsb0NBQW9DLFNBQVMsYUFJbkQsT0FBTyxRQUFVOzs7O0FDekpaLE9BQU8sbUJBQ1YsT0FBTyxpQkFBbUIsU0FBUyxFQUFJLEdBWXJDLE1BWEEsTUFBSyxHQUFLLEVBQ1YsS0FBSyxpQkFBbUIsU0FBUyxHQUMvQixHQUFJLEdBQUssaUJBT1QsT0FOWSxTQUFSLElBQWlCLEVBQU8sY0FDeEIsRUFBRyxLQUFLLEtBQ1YsRUFBTyxFQUFLLFFBQVEsRUFBSSxXQUN0QixNQUFPLFdBQVUsR0FBRyxpQkFHakIsRUFBRyxhQUFhLEdBQVEsRUFBRyxhQUFhLEdBQVEsTUFFbEQsT0FJWCxPQUFPLFFBQVEsS0FBTyxXQUNwQixNQUFPLFFBQU8saUJBQWlCLFNBQVMsS0FBSyxVQUFVLGlCQUFpQjs7OztBQ2hCMUUsR0FBSSxlQUFnQixTQUFVLEdBQzVCLEtBQUssSUFBTSxFQUNYLEtBQUssS0FBTyxFQUFFLEtBQUssS0FDbkIsS0FBSyxRQUFVLCtCQUVmLEtBQUssaUJBQ0wsS0FBSyxZQUFhLEVBRWxCLEtBQUssb0JBQXNCLEdBQzNCLEtBQUssbUJBQXFCLEdBRTFCLEtBQUssWUFDTCxLQUFLLGFBR1AsZUFBYyxVQUFVLFVBQVksV0FDbEMsS0FBSyxVQUFZLEtBQUssS0FBSyxLQUFLLGFBQ2hDLEtBQUssWUFBZ0IsS0FBSyxLQUFLLEtBQUssZ0JBQWtCLEtBQUssb0JBQzNELEtBQUssWUFBYyxLQUFLLFlBQWMsS0FBSyxtQkFFM0MsS0FBSyxRQUFVLEtBQUssS0FBSyxLQUFLLFdBQzlCLEtBQUssS0FBTyxLQUFLLEtBQUssS0FBSyxRQUMzQixLQUFLLGdCQUdQLGNBQWMsVUFBVSxhQUFlLFdBQ2pDLEtBQUssT0FDUCxLQUFLLGNBQWMsS0FBSyxXQUN4QixLQUFLLG9CQUlULGNBQWMsVUFBVSxXQUFhLFdBQ25DLEdBQUksRUFDaUIsVUFBakIsS0FBSyxRQUNQLEVBQWUsVUFDUSxTQUFkLEtBQUssT0FDZCxFQUFlLFFBRWpCLEtBQUssY0FBYyxLQUFLLEdBQ3hCLEtBQUssbUJBR1AsY0FBYyxVQUFVLGVBQWlCLFNBQVUsR0FDakQsR0FBdUIsT0FBbkIsS0FBSyxVQUFvQixLQUFNLGlEQUNuQyxJQUFJLEtBS0osUUFKQSxFQUFRLE1BQ04sVUFBVyxLQUFLLFdBR1YsR0FDTixJQUFLLFVBQ0gsRUFBUSxJQUFNLEtBQUssUUFBVSxtQkFBcUIsS0FBSyxLQUN2RCxFQUFRLFNBQVcsU0FBVSxHQUMzQixLQUFLLFFBQVUsRUFBUyxLQUFLLEdBQUcsR0FFbEMsTUFFRixLQUFLLE9BQ0gsRUFBUSxJQUFNLEtBQUssUUFBVSxVQUFZLEtBQUssUUFBVSxnQkFDeEQsRUFBUSxLQUFPLEVBQUUsT0FBTyxFQUFRLE1BQzlCLE1BQU8sS0FBSyxjQUVkLEVBQVEsU0FBVyxTQUFVLEdBQzNCLEtBQUssWUFBWSxFQUFTLE1BRTVCLE1BRUYsS0FBSyxVQUNILEVBQVEsSUFBTSxLQUFLLFFBQVUsU0FBVyxLQUFLLFFBQVUsZ0JBQ3ZELEVBQVEsS0FBTyxFQUFFLE9BQU8sRUFBUSxNQUM5QixNQUFPLEtBQUssY0FFZCxFQUFRLFNBQVcsU0FBVSxHQUMzQixLQUFLLFlBQVksRUFBUyxPQUtoQyxNQUFPLElBR1QsY0FBYyxVQUFVLGdCQUFrQixXQUNuQyxLQUFLLGFBQ1IsS0FBSyxZQUFhLEVBQ2xCLEtBQUssYUFJVCxjQUFjLFVBQVUsU0FBVyxXQUNqQyxHQUFJLEtBQUssY0FBYyxPQUFTLEVBQUcsQ0FDakMsR0FBSSxHQUFRLEtBQ1IsRUFBZSxLQUFLLGNBQWMsUUFDbEMsRUFBVSxLQUFLLGVBQWUsRUFFbEMsR0FBRSxNQUNBLFNBQVUsUUFDVixJQUFLLEVBQVEsSUFDYixLQUFNLEVBQVEsT0FFZixLQUFLLFNBQVUsR0FDZCxFQUFRLFNBQVMsTUFBTSxHQUFRLElBQy9CLEVBQU0sYUFFUCxLQUFLLFNBQVUsRUFBRSxFQUFFLEdBQ2xCLFFBQVEsSUFBSSxPQUFRLEVBQUcsRUFBRyxTQUk1QixNQUFLLFlBQWEsR0FJdEIsY0FBYyxVQUFVLFlBQWMsU0FBVSxHQUM5QyxHQUFJLEdBQ0YsRUFBZ0IsS0FBSyxhQUFhLEVBRWhDLEdBQWMsT0FBUyxHQUN6QixFQUFTLEtBQUssbUJBQW1CLEdBQ2pDLEtBQUssS0FBSyxTQUFTLFNBQVMsS0FBSyxrQkFBbUIsRUFBYyxTQUVsRSxFQUFTLEtBQUssc0JBR2hCLEtBQUssS0FBSyxPQUFPLElBR25CLGNBQWMsVUFBVSxhQUFlLFNBQVUsR0FFL0MsTUFBTyxJQUdULGNBQWMsVUFBVSxtQkFBcUIsU0FBVSxHQUlyRCxJQUFLLEdBSEQsR0FBUyxHQUNULEVBQVMsRUFBSyxPQUFTLEtBQUssWUFBYyxFQUFLLE9BQVMsS0FBSyxZQUV4RCxFQUFJLEVBQU8sRUFBSixFQUFXLElBQUssQ0FDOUIsR0FBSSxHQUFPLEVBQUssRUFDWixLQUNGLEdBQVUsS0FBSyxtQkFBbUIsSUFHdEMsTUFBTyxJQUdULGNBQWMsVUFBVSxtQkFBcUIsU0FBVSxHQUNyRCxNQUFPLHdGQUVTLEVBQUssS0FBTSwrREFFTCxFQUFLLE9BQU8sb0JBQW9CLElBQU0sVUFBWSxFQUFLLFFBQVEsS0FBTywwR0FHMUQsRUFBSyxRQUFRLEtBQUssU0FBVyxXQUFhLEVBQUssUUFBUSxLQUFPLDREQU9sRyxjQUFjLFVBQVUsb0JBQXNCLFNBQVUsR0FDdEQsTUFBTyxNQUFRLEtBQUssS0FBSyxLQUFLLGlCQUFtQixRQUduRCxPQUFPLFFBQVU7Ozs7QUN0S2pCLEdBQUksV0FBWSxRQUFRLG9DQUVwQixjQUVKLGFBQVksS0FBTyxXQUNqQixZQUFZLGFBR2QsWUFBWSxVQUFZLFdBQ3RCLEdBQUksR0FBTyxZQUFZLGNBQWMsWUFDakMsR0FBSyxPQUFTLEdBQ2hCLEVBQUssS0FBSyxXQUNSLEdBQUksV0FBVSxTQUtwQixZQUFZLGNBQWdCLFNBQVUsR0FDcEMsR0FBSSxHQUFlLHNCQUFzQixFQUFRLElBQ2pELE9BQU8sR0FBRSxJQUdYLE9BQU8sUUFBVTs7OztBQ3RCakIsUUFBUSxxQkFDUixRQUFRLGlCQUVSLElBQUksY0FFSixZQUFXLEtBQU8sV0FDaEIsR0FBSSxNQUFNLG1CQUFtQixpQkFBa0IsQ0FFN0MsR0FBSSxLQUNKLEdBQUssSUFBTyxNQUFNLG1CQUE4QixZQUFHLE9BQVMsUUFDNUQsRUFBSyxNQUFRLE1BQU0sbUJBQW1CLGdCQUFnQixhQUN0RCxJQUFJLEdBQVEsTUFBTSxtQkFBbUIsWUFBWSxhQUNuQyxZQUFWLEdBQWdDLGNBQVYsR0FBbUMsYUFBVixFQUNqRCxFQUFLLE9BQVMsRUFFZCxFQUFLLE1BQVEsRUFHZixFQUFFLE1BQU0sb0JBQW9CLGVBQWUsbUJBQW1CLEdBQU0sR0FBRyxjQUFlLFdBQ3BGLFdBQVcsZ0JBSWIsWUFBVyxXQUlmLFdBQVcsUUFBVSxXQUNuQixFQUFFLE1BQU0sb0JBQW9CLGlCQUFpQixTQUFVLE9BQVEsY0FHakUsT0FBTyxRQUFVOzs7O0FDL0JqQixHQUFJLE9BQVEsV0FDVixLQUFLLFVBQVksRUFDakIsS0FBSyxNQUFRLEtBQ2IsS0FBSyxNQUFRLEtBQ2IsS0FBSyxzQkFHUCxPQUFNLFVBQVUsb0JBQXNCLFdBQ3BDLEdBQUksR0FBUSxJQUNSLFNBQVEsVUFBVSxtQkFDcEIsU0FBUyxpQkFBaUIsYUFBYyxTQUFVLEdBQ2hELEVBQU0saUJBQWlCLEtBQ3RCLEdBQ0gsU0FBUyxpQkFBaUIsWUFBYSxTQUFVLEdBQy9DLEVBQU0sZ0JBQWdCLEtBQ3JCLEtBSVAsTUFBTSxVQUFVLGlCQUFtQixTQUFVLEdBQzNDLEtBQUssTUFBUSxFQUFJLFFBQVEsR0FBRyxRQUM1QixLQUFLLE1BQVEsRUFBSSxRQUFRLEdBQUcsU0FHOUIsTUFBTSxVQUFVLGdCQUFrQixTQUFVLEdBQzFDLEdBQU8sS0FBSyxPQUFXLEtBQUssTUFBNUIsQ0FFQSxHQUFJLEdBQWlCLEVBQUksY0FBYyxHQUFHLE9BRXRDLEVBQU0sRUFBSSxRQUFRLEdBQUcsUUFDckIsRUFBTSxFQUFJLFFBQVEsR0FBRyxRQUVyQixFQUFRLEtBQUssTUFBUSxFQUNyQixFQUFRLEtBQUssTUFBUSxDQUVwQixNQUFLLElBQUssR0FBVSxLQUFLLElBQUssR0FDNUIsRUFBUSxFQUNQLEVBQVEsS0FBSyxXQUNmLEVBQUUsR0FBZ0IsUUFBUSxhQUdoQixHQUFSLEVBQWEsS0FBSyxXQUNwQixFQUFFLEdBQWdCLFFBQVEsY0FJekIsRUFBUSxFQUNQLEVBQVEsS0FBSyxXQUNmLEVBQUUsR0FBZ0IsUUFBUSxXQUdoQixHQUFSLEVBQWEsS0FBSyxXQUNwQixFQUFFLEdBQWdCLFFBQVEsYUFLaEMsS0FBSyxNQUFRLEtBQ2IsS0FBSyxNQUFRLE9BR2YsR0FBSTs7OztBQzdESixHQUFJLHlCQUdKLHVCQUFzQix1QkFBeUIsV0FFN0MsR0FBSSxHQUFvQixFQUFFLE1BQU0sVUFBVSxRQUFRLGdCQUVsRCxHQUFFLFVBQVUsR0FBRyxRQUFTLG9CQUFxQixTQUFVLEdBQ3JELEVBQUUsZ0JBQ0YsSUFBSSxHQUFrQixFQUFFLEVBQUUsY0FFMUIsR0FBa0IsSUFBSSxFQUFnQixLQUFLLGVBRTNDLHNCQUFzQixnQ0FBZ0MsTUFNMUQsc0JBQXNCLGdDQUFrQyxTQUFVLEdBR2hFLEdBQUksR0FBYSxFQUFrQixNQUMvQixFQUFVLE1BQU0sa0JBQWtCLEVBRXRDLElBQUksRUFFRixJQUFLLEdBQUksR0FBSSxFQUFHLEVBQUksTUFBTSxRQUFRLFFBQVEsT0FBUSxJQUFLLENBQ3JELEdBQUksR0FBUyxVQUFVLEVBQUUsR0FDckIsRUFBUSxFQUFRLEVBQ3BCLEdBQUUsOEJBQThCLEVBQUUsS0FBSyxJQUFJLEdBQU8sUUFBUSxZQUtoRSxPQUFPLFFBQVU7Ozs7QUMvQmpCLEdBQUksZ0JBQWlCLFFBQVEseUJBQ3pCLGlCQUFtQixRQUFRLDJCQUMzQixhQUFlLFFBQVEsMEJBRXZCLFFBQVUsV0FDWixHQUFJLEdBQU8sR0FBSSxhQUlmLElBQUksZ0JBQWUsR0FDbkIsR0FBSSxrQkFBaUIsR0FHdkIsUUFBTyxRQUFVOzs7O0FDakJqQixHQUFJLGtCQUFtQixTQUFVLEdBQy9CLEtBQUssY0FBZ0IsRUFHdkIsUUFBTyxRQUFVOzs7O0FDSmpCLEdBQUksU0FBVSxRQUFRLGlCQUNsQixZQUFjLFFBQVEsc0NBQ3RCLGFBQWUsUUFBUSx3Q0FDdkIsY0FBZ0IsUUFBUSwwQ0FJeEIsY0FBZ0IsU0FBVSxHQUM1QixLQUFLLEtBQU8sRUFDWixHQUFJLFNBQVEsS0FFWixJQUFJLEdBQWlCLEtBQUssS0FBSyxLQUFLLCtCQUFpQyxFQUNqRSxFQUFrQixLQUFLLEtBQUssS0FBSyw0QkFDakMsRUFBb0IsS0FBSyxLQUFLLEtBQUssT0FFdkMsTUFBSyxNQUFRLEdBQUksYUFBWSxHQUM3QixLQUFLLGNBQWdCLEdBQUksY0FBYSxFQUFpQixFQUFnQixLQUFLLE9BQzVFLEtBQUssVUFBWSxHQUFJLGVBQWMsRUFBbUIsS0FBSyxPQUUzRCxLQUFLLHVCQUdQLGVBQWMsVUFBVSxlQUFpQixTQUFVLEdBRWpELE1BREEsTUFBSyxNQUFNLFNBQVMsR0FDYixLQUFLLE1BQU0sV0FBVyxFQUFRLEtBR3ZDLGNBQWMsVUFBVSxvQkFBc0IsU0FBVSxHQUV0RCxNQURBLE1BQUssTUFBTSxZQUFZLEdBQ2hCLEtBQUssTUFBTSxXQUFXLElBRy9CLGNBQWMsVUFBVSx1QkFBeUIsU0FBVSxFQUFTLEdBRWxFLE1BREEsTUFBSyxNQUFNLFlBQVksRUFBUyxHQUN6QixLQUFLLE1BQU0sV0FBVyxFQUFRLEtBS3ZDLGNBQWMsVUFBVSxxQkFBdUIsV0FDN0MsR0FBSSxHQUFRLElBR1osR0FBTSxjQUFjLEdBQUcsb0JBQXFCLFNBQVUsR0FDcEQsRUFBTSxNQUFNLFlBQVksRUFDeEIsSUFBSSxJQUNGLEVBQ0EsS0FBSyxNQUFNLFdBQVcsR0FFeEIsR0FBTSxRQUFRLGFBQWMsTUFJaEMsT0FBTyxRQUFVOzs7O0FDbkRqQixHQUFJLFNBQVUsUUFBUSxpQkFFbEIsMEJBQTRCLFNBQVUsRUFBTSxFQUFnQixHQUM5RCxLQUFLLEtBQU8sRUFDWixLQUFLLE1BQVEsRUFDYixLQUFLLGVBQWlCLEVBQ3RCLEtBQUssaUJBQW1CLDBCQUN4QixLQUFLLGNBQWdCLFVBRXJCLEdBQUksU0FBUSxNQUVaLEtBQUssdUJBQ0wsS0FBSyw2QkFDTCxLQUFLLGdCQUdQLDJCQUEwQixVQUFVLE9BQVMsV0FDM0MsS0FBSyx1QkFDTCxLQUFLLHdCQUNMLEtBQUssd0JBQ0wsS0FBSyxpQkFHUCwwQkFBMEIsVUFBVSxNQUFRLFdBQzFDLEtBQUssdUJBQ0wsS0FBSyw2QkFDTCxLQUFLLGlCQUtQLDBCQUEwQixVQUFVLHFCQUF1QixXQUN6RCxHQUFJLEdBQVEsSUFDWixHQUFNLE1BQU0sR0FBRyxlQUFnQixXQUM3QixFQUFNLFdBR1IsRUFBTSxLQUFLLEdBQUcsUUFBUyxnQkFBaUIsU0FBVSxHQUNoRCxFQUFFLGlCQUNGLEVBQU0sYUFBYSxNQUl2QiwwQkFBMEIsVUFBVSxzQkFBd0IsV0FHMUQsSUFBSyxHQUZELEdBQWMsS0FBSyxNQUFNLGNBQ3pCLEVBQVEsS0FBSyxNQUFNLEVBQWMsS0FBSyxnQkFBa0IsRUFDbkQsRUFBSSxFQUFPLEVBQUosRUFBVyxJQUN6QixLQUFLLDhCQUlULDBCQUEwQixVQUFVLHFCQUF1QixXQUN6RCxLQUFLLG1CQUNMLEtBQUssS0FBSyxLQUFLLEtBR2pCLDBCQUEwQixVQUFVLDJCQUE2QixXQUUvRCxJQUFLLEdBREQsR0FBUyxHQUNKLEVBQUksRUFBRyxFQUFJLEtBQUssZUFBZ0IsSUFDdkMsR0FBVSxLQUFLLDRCQUVqQixNQUFLLEtBQUssT0FBTyxtQ0FBbUMsRUFBTyxXQUc3RCwwQkFBMEIsVUFBVSwyQkFBNkIsV0FDL0QsTUFBTyxtakRBTVQsMEJBQTBCLFVBQVUsc0JBQXdCLFdBRTFELElBQUssR0FERCxHQUFjLEtBQUssTUFBTSxjQUNwQixFQUFJLEVBQU8sRUFBSixFQUFpQixJQUFLLENBQ3BDLEdBQUksR0FBTyxLQUFLLE1BQU0saUJBQWlCLEdBQ25DLEVBQVksS0FBSyxLQUFLLEtBQUssaUJBQWlCLEdBQUcsRUFFbkQsR0FBVSxZQUFZLHlCQUNyQixLQUFLLFFBQVMsVUFBVSxFQUFLLE9BQzdCLEtBQUssbUJBQW9CLEVBQUssSUFDOUIsS0FBSyxjQUFlLEVBQUssSUFFdkIsRUFBSyxPQUNOLEVBQVUsS0FBSyxRQUFRLEtBQ3JCLE1BQTBCLE1BQWxCLEVBQUssTUFBTSxHQUFhLElBQUssSUFBSSxFQUFLLFVBTXRELDBCQUEwQixVQUFVLGNBQWdCLFdBQ2xELEVBQUUsS0FBSyxrQkFBa0IsV0FHM0IsMEJBQTBCLFVBQVUsaUJBQW1CLFdBQ3JELEVBQUUsS0FBSyxrQkFBa0IsUUFBUSxZQUduQywwQkFBMEIsVUFBVSxhQUFlLFNBQVUsR0FDM0QsR0FBSSxHQUFpQixFQUFFLEVBQUUsY0FDekIsS0FBSyxFQUFlLFNBQVMseUJBQTBCLENBQ3JELEdBQUksSUFDRixFQUFlLEtBQUssZUFFdEIsTUFBSyxRQUFRLG9CQUFxQixLQUl0QyxPQUFPLFFBQVU7Ozs7QUM5R2pCLEdBQUksU0FBVSxRQUFRLGlCQUVsQixtQkFBcUIsU0FBVSxHQUNqQyxHQUFJLFNBQVEsTUFFWixLQUFLLFlBQ0wsS0FBSyxzQkFBdUIsRUFDNUIsS0FBSyxlQUFpQixFQUd4QixvQkFBbUIsVUFBVSxTQUFXLFNBQVUsR0FDaEQsS0FBSyxTQUFTLEtBQUssR0FDbkIsS0FBSywrQkFBK0IsY0FHdEMsbUJBQW1CLFVBQVUsWUFBYyxTQUFVLEdBRW5ELElBQUssR0FERCxHQUFjLEtBQUssY0FDZCxFQUFJLEVBQWMsRUFBRyxFQUFJLEdBQUksSUFBSyxDQUN6QyxHQUFJLEdBQVUsS0FBSywyQkFBMkIsRUFBWSxFQUMxRCxJQUFJLEVBQ0YsTUFHSixLQUFLLCtCQUErQixnQkFHdEMsbUJBQW1CLFVBQVUsWUFBYyxTQUFVLEVBQVMsR0FHNUQsSUFBSyxHQURELEdBQWMsS0FBSyxjQUNkLEVBQUksRUFBYyxFQUFHLEVBQUksR0FBSSxJQUNwQyxLQUFLLDJCQUEyQixFQUFRLEdBQUksRUFHOUMsSUFBSSxFQUFNLEVBQ1IsSUFBSyxHQUFJLEdBQUksRUFBTyxFQUFKLEVBQVMsSUFDdkIsS0FBSyxTQUFTLEtBQUssRUFHdkIsTUFBSywrQkFBK0IsZ0JBR3RDLG1CQUFtQixVQUFVLFdBQWEsU0FBVSxHQUVsRCxJQUFLLEdBREQsR0FBUSxFQUNILEVBQUksRUFBRyxFQUFJLEtBQUssU0FBUyxPQUFRLElBQ3BDLEtBQUssU0FBUyxHQUFHLEtBQU8sR0FDMUIsR0FHSixPQUFPLElBR1QsbUJBQW1CLFVBQVUsWUFBYyxXQUN6QyxNQUFPLE1BQUssU0FBUyxRQUd2QixtQkFBbUIsVUFBVSxpQkFBbUIsU0FBVSxHQUN4RCxNQUFPLE1BQUssU0FBUyxJQUt2QixtQkFBbUIsVUFBVSwyQkFBNkIsU0FBVSxFQUFZLEdBQzlFLEdBQUksS0FJSixPQUhJLE1BQUssU0FBUyxHQUFHLEtBQU8sSUFDMUIsRUFBVSxLQUFLLFNBQVMsT0FBTyxFQUFHLElBRTdCLEVBQVEsT0FBUyxHQUcxQixtQkFBbUIsVUFBVSwrQkFBaUMsU0FBVSxHQUN0RSxLQUFLLHFCQUF1QixLQUFLLGNBQ2pDLEtBQUssUUFBUSxHQUNiLEtBQUssUUFBUSxpQkFHZixtQkFBbUIsVUFBVSxZQUFjLFdBQ3pDLEdBQUksR0FBYyxLQUFLLGNBQ25CLEVBQWUsRUFBYyxLQUFLLGNBQ3RDLE9BQU8sR0FBYyxHQUFzQixJQUFqQixHQUc1QixPQUFPLFFBQVU7Ozs7QUMvRWpCLEdBQUksU0FBVSxRQUFRLGlCQUNsQixNQUFRLFFBQVEsa0JBRWhCLDJCQUE2QixTQUFVLEVBQU0sR0FDL0MsR0FBSSxTQUFRLE1BQ1osS0FBSyxLQUFPLEVBQ1osS0FBSyxNQUFRLEVBQ2IsS0FBSyxRQUFVLEVBQUssS0FBSyxtQkFDekIsS0FBSyxNQUFRLEdBQUksUUFDZixRQUFTLFdBQ1AsUUFBUSxJQUFJLHlCQUVkLFNBQVUsV0FDUixRQUFRLElBQUksNEJBSWhCLEtBQUssdUJBR1AsNEJBQTJCLFVBQVUscUJBQXVCLFdBQzFELEdBQUksR0FBUSxJQUVaLEdBQU0sS0FBSyxHQUFHLFNBQVUsU0FBVSxHQUNoQyxFQUFFLGlCQUNGLEVBQU0sZ0JBR1IsRUFBTSxNQUFNLEdBQUcsZUFBZ0IsV0FDN0IsRUFBTSwwQkFJViwyQkFBMkIsVUFBVSxxQkFBdUIsV0FDdEQsS0FBSyxNQUFNLHFCQUNiLEtBQUssUUFBUSxLQUFLLFlBQVksR0FFOUIsS0FBSyxRQUFRLEtBQUssWUFBWSxJQUlsQywyQkFBMkIsVUFBVSxZQUFjLFdBQ2pELEtBQUssTUFBTSxRQUFVLEtBQUssZ0JBQzFCLEtBQUssTUFBTSxRQUdiLDJCQUEyQixVQUFVLGNBQWdCLFdBQ25ELE1BQU8saWlCQVVULE9BQU8sUUFBVTs7OztBQzNEakIsR0FBSSxTQUFVLFFBQVEsaUJBQ2xCLFVBQVksUUFBUSxvQkFDcEIsTUFBUSxRQUFRLGtCQUVoQixZQUFjLFNBQVUsRUFBTSxHQUNoQyxLQUFLLEtBQU8sRUFDWixLQUFLLEdBQUssRUFFVixHQUFJLFNBQVEsTUFDWixHQUFJLFdBQVUsTUFDWixjQUFlLGtCQUFrQixLQUFLLEdBQUcsWUFHM0MsS0FBSyxNQUFRLEdBQUksT0FFakIsS0FBSyxXQUFhLEtBQUssS0FBSyxLQUFLLGtCQUNqQyxLQUFLLGNBQWdCLEtBQUssS0FBSyxLQUFLLHFCQUNwQyxLQUFLLGNBQWdCLEtBQUssS0FBSyxLQUFLLHFCQUVwQyxLQUFLLFNBQ0gsR0FBSSxLQUFLLFdBQ1QsTUFBTyxLQUFLLGNBQ1osTUFBTyxLQUFLLGVBR2QsS0FBSyx1QkFLUCxhQUFZLFVBQVUscUJBQXVCLFdBQzNDLEdBQUksR0FBUSxJQUNaLEdBQU0sS0FBSyxHQUFHLFFBQVMsc0JBQXVCLFNBQVUsR0FDdEQsRUFBRSxpQkFDRixFQUFFLGNBQWMsT0FDaEIsRUFBTSxvQkFHUixFQUFNLEtBQUssR0FBRyxRQUFTLHlCQUEwQixTQUFVLEdBQ3pELEVBQUUsaUJBQ0YsRUFBRSxjQUFjLE9BQ2hCLEVBQU0seUJBR1IsRUFBTSxLQUFLLEdBQUcsT0FBUSx1QkFBd0IsU0FBVSxHQUN0RCxHQUFJLEdBQU0sU0FBUyxFQUFFLGNBQWMsTUFDbkMsR0FBTSx3QkFBd0IsS0FHaEMsRUFBTSxLQUFLLEdBQUcsUUFBUyxtQkFBb0IsU0FBVSxHQUNuRCxFQUFFLGdCQUNGLElBQUksR0FBa0IsRUFBRSxFQUFFLGVBQ3RCLEVBQWMsRUFBZ0IsS0FBSyxPQUN2QyxHQUFNLE1BQU0sT0FDWixFQUFFLEtBQUssR0FBYSxLQUFLLFNBQVUsR0FDakMsRUFBTSxNQUFNLFFBQVUsT0FLNUIsWUFBWSxVQUFVLGdCQUFrQixXQUN0QyxHQUFJLElBQ0YsS0FBSyxRQUVQLE1BQUssUUFBUSxlQUFnQixJQUcvQixZQUFZLFVBQVUscUJBQXVCLFdBQzNDLEdBQUksSUFDRixLQUFLLFdBRVAsTUFBSyxRQUFRLG9CQUFxQixJQUdwQyxZQUFZLFVBQVUsd0JBQTBCLFNBQVUsR0FDeEQsR0FBSSxJQUNGLEtBQUssUUFDTCxFQUVGLE1BQUssUUFBUSxnQkFBaUIsSUFHaEMsT0FBTyxRQUFVOzs7O0FDbEZqQixHQUFJLGFBQWMsUUFBUSw4QkFDdEIsY0FBZ0IsUUFBUSxnQ0FFeEIsZUFBaUIsU0FBVSxHQUM3QixLQUFLLEtBQU8sRUFDWixLQUFLLHFCQUF1QixnQ0FDNUIsS0FBSyxrQkFBb0IsNkJBQ3pCLEtBQUssU0FFTCxLQUFLLGVBQ0wsS0FBSyxjQUdQLGdCQUFlLFVBQVUsYUFBZSxXQUN0QyxHQUFJLEdBQVEsS0FDUixFQUFtQixFQUFFLEtBQUsscUJBQzlCLEdBQU0sZUFBaUIsR0FBSSxlQUFjLEdBQ3pDLEVBQU0sZUFBZSxHQUFHLFlBQWEsU0FBVSxNQUsvQyxFQUFNLGVBQWUsR0FBRyxhQUFjLFNBQVUsRUFBWSxHQUMxRCxFQUFNLE1BQU0sR0FBWSxjQUFnQixLQUk1QyxlQUFlLFVBQVUsWUFBYyxXQUNyQyxHQUFJLEdBQVEsS0FDUixFQUFpQixFQUFFLEtBQUssa0JBQzVCLEdBQWUsS0FBSyxTQUFVLEVBQUcsR0FDL0IsR0FBSSxHQUFRLEVBQUUsR0FDVixFQUFPLEdBQUksYUFBWSxFQUFPLEVBR2xDLEdBQU0sTUFBTSxFQUFLLFlBQWMsRUFFL0IsRUFBSyxHQUFHLGVBQWdCLFNBQVUsR0FDaEMsR0FBSSxHQUFnQixFQUFNLGVBQWUsZUFBZSxFQUN4RCxHQUFLLGNBQWdCLElBR3ZCLEVBQUssR0FBRyxvQkFBcUIsU0FBVSxHQUNyQyxHQUFJLEdBQWdCLEVBQU0sZUFBZSxvQkFBb0IsRUFDN0QsR0FBSyxjQUFpQixFQUFnQixFQUFLLEVBQWdCLEtBRzdELEVBQUssR0FBRyxnQkFBaUIsU0FBVSxFQUFTLEdBQzFDLEdBQUksR0FBZ0IsRUFBTSxlQUFlLHVCQUF1QixFQUFTLEVBQ3pFLEdBQUssY0FBaUIsRUFBZ0IsRUFBSyxFQUFnQixRQUtqRSxPQUFPLFFBQVU7Ozs7QUN0RGpCLEdBQUksY0FBZSxZQUluQixjQUFhLFVBQVUsYUFBZSxTQUFVLEdBQzlDLFFBQVEsSUFBSSw0QkFBNkIsSUFHM0MsT0FBTyxRQUFVOzs7O0FDUmpCLEdBQUksV0FBWSxRQUFRLG1CQUNwQixRQUFVLFFBQVEsaUJBRWxCLElBQU0sV0FDUixHQUFJLFdBQ0osR0FBSSxTQUdOLFFBQU8sUUFBVTs7OztBQ1BqQixHQUFJLFdBQVksUUFBUSxvQkFFcEIsU0FBVyxTQUFVLEVBQVcsR0FDbEMsS0FBSyxpQkFBbUIsVUFBVSxZQUNsQyxLQUFLLFNBQVcsR0FBWSxxQkFDNUIsS0FBSyxLQUFPLEVBQUUsS0FBSyxVQUNuQixLQUFLLEdBQUssS0FBSyxNQUVmLEdBQUksV0FBVSxNQUNaLFFBQVMsS0FBSyxTQUFTLG9CQUd6QixLQUFLLGVBQWUsR0FDcEIsS0FBSyx1QkFHUCxVQUFTLFVBQVUsS0FBTyxXQUN4QixLQUFLLEtBQUssUUFDVixLQUFLLEtBQUssS0FBSyxXQUFZLEtBQUssSUFDNUIsS0FBSyxTQUFTLEtBQUssV0FHekIsU0FBUyxVQUFVLE1BQVEsV0FDekIsS0FBSyxLQUFLLE1BQU0sUUFDWixLQUFLLFVBQVUsS0FBSyxXQUN4QixLQUFLLFdBR1AsU0FBUyxVQUFVLFFBQVUsV0FDM0IsS0FBSyxRQUFVLEdBQ2YsS0FBSyxLQUFLLEtBQUssV0FBWSxNQUMzQixLQUFLLEtBQUssS0FBSyxXQUFZLE9BSzdCLFNBQVMsVUFBVSxxQkFBdUIsV0FDeEMsR0FBSSxHQUFRLElBQ1osTUFBSyxLQUFLLEdBQUcsa0JBQW1CLFdBRTFCLEVBQU0sS0FBSyxLQUFLLGNBQWdCLEVBQU0sSUFDeEMsRUFBTSxXQUtaLFNBQVMsVUFBVSxlQUFpQixTQUFVLEdBQzVDLEdBQUksRUFDRixJQUFLLEdBQUksS0FBSyxNQUFLLGdCQUFpQixDQUNsQyxHQUFJLEdBQVEsS0FBSyxnQkFBZ0IsRUFDN0IsR0FBVSxLQUNaLEtBQUssR0FBUyxFQUFVLE1BTWhDLFNBQVMsVUFBVSxJQUFNLFdBRXZCLE1BQU8sSUFBTSxLQUFLLFNBQVMsU0FBUyxJQUFJLE9BQU8sRUFBRyxJQUdwRCxPQUFPLFFBQVU7Ozs7QUM5RGpCLEdBQUksV0FBWSxXQUNkLEdBQUksR0FBTyxFQUFFLHVCQUNULEVBQVUsRUFBSyxTQUVmLEdBRFUsRUFBRSxRQUNnQixTQUFTLEVBQVEsSUFBSSxtQkFFakQsRUFBYSxTQUFVLEdBQ3pCLEVBQUssU0FBUyxLQUFNLGdCQUFpQixJQUduQyxHQUFLLE9BQVMsR0FFaEIsRUFBSyxPQUNILFFBQ0UsSUFBSyxFQUFLLFNBQVMsSUFDbkIsT0FBUSxNQUVULEdBQUcsbUJBQW9CLFdBQ3hCLEdBQUksR0FBbUMsYUFBekIsRUFBSyxJQUFJLFlBQStCLEVBQTRCLEVBQUssU0FBWSxDQUNuRyxHQUFXLEtBQ1YsR0FBRyx1QkFBd0IsV0FDNUIsRUFBVyxLQUtqQixRQUFPLFFBQVUiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiBlKHQsbixyKXtmdW5jdGlvbiBzKG8sdSl7aWYoIW5bb10pe2lmKCF0W29dKXt2YXIgYT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2lmKCF1JiZhKXJldHVybiBhKG8sITApO2lmKGkpcmV0dXJuIGkobywhMCk7dmFyIGY9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitvK1wiJ1wiKTt0aHJvdyBmLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsZn12YXIgbD1uW29dPXtleHBvcnRzOnt9fTt0W29dWzBdLmNhbGwobC5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciBuPXRbb11bMV1bZV07cmV0dXJuIHMobj9uOmUpfSxsLGwuZXhwb3J0cyxlLHQsbixyKX1yZXR1cm4gbltvXS5leHBvcnRzfXZhciBpPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pIiwiLypcbiAgTWFpbiBhcHAgZm9yIEJvb3RzdHJhcGlmeVxuKi9cblxudmFyIEJzaWZ5ID0gcmVxdWlyZSgnLi9ic2lmeS5qcycpO1xudmFyIENhcnRKUyA9IHJlcXVpcmUoXCIuLy4uLy4uL2Jvd2VyX2NvbXBvbmVudHMvc2hvcGlmeS1jYXJ0anMvZGlzdC9jYXJ0LmpzXCIpO1xudmFyIExvb2tib29rID0gcmVxdWlyZSgnLi9ic2lmeS5sb29rYm9va19nYWxsZXJ5LmpzJyk7XG52YXIgUGhkID0gcmVxdWlyZSgnLi9waGQuanMnKTtcblxudmFyIEFwcCA9IGZ1bmN0aW9uICgpIHtcbiAgLy8gaW5pdCBDYXJ0SlNcbiAgQ2FydEpTLmluaXQoQnNpZnkuY2FydCwgQnNpZnkubW9uZXlfZm9ybWF0cyk7XG5cbiAgLy8gaW5pdCBwcm9kdWN0IHRlbXBsYXRlIGpzXG4gIGlmIChCc2lmeS5wcm9kdWN0KSB7XG4gICAgLy8gUHJlbG9hZCBpbWFnZXMgYW5kIGNhbGwgaW1hZ2Ugc3dpdGNoZXIgaW5pdFxuICAgIEJzaWZ5LkltYWdlU3dpdGNoZXIucHJlbG9hZF9wcm9kdWN0X3RodW1icygpO1xuICAgIEJzaWZ5LkltYWdlU3dpdGNoZXIuaW1hZ2Vfc3d0aWNoZXIoKTtcbiAgICAvLyBJbml0aWFsaXNlIHRoZSBpbWFnZV92YXJpYW50X3N3aXRjaGVyXG4gICAgQnNpZnkuVmFyaWFudE9wdGlvblN3aXRjaGVyLmltYWdlX3ZhcmlhbnRfc3dpdGNoZXIoKTtcblxuICAgIC8vIENhbGwgbGlua09wdGlvblNlbGVjdG9yc1xuICAgIC8vIENoZWNrIHRoYXQgd2Ugd2FudCB0byB1c2UgdGhlIGxpbmtlZCBwcm9kdWN0IG9wdGlvbnNcbiAgICBpZiAoQnNpZnkubGlua2VkX3Byb2R1Y3Rfb3B0aW9ucykge1xuICAgICAgLy8gTWFrZSBzdXJlIHRoZSBwcm9kdWN0IG1lZXRzIHRoZSBjb3JyZWN0IGNpdGVyaWEgZm9yIGxpbmtlZCBwcm9kdWN0IG9wdGlvbnMgYW5kIHRoZW4gaW5pdGlhbGlzZVxuICAgICAgaWYgKEJzaWZ5LnByb2R1Y3QuYXZhaWxhYmxlICYmIEJzaWZ5LnByb2R1Y3Qub3B0aW9ucy5sZW5ndGggPiAxKSB7XG4gICAgICAgIEJzaWZ5LkxpbmtlZFByb2R1Y3RPcHRpb25zLmxpbmtPcHRpb25TZWxlY3RvcnMoQnNpZnkucHJvZHVjdCk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLy8gaW5pdCBhamF4IGFkZCB0byBjYXJ0XG4gIGlmIChCc2lmeS5hamF4X2FkZF90b19jYXJ0KSB7XG4gICAgQnNpZnkuQ2FydC5pbml0KCk7XG4gIH1cblxuICAvLyBsb2FkIHVuaWZvcm0gdGh1bWJzIGFuZCBvcmRlcmx5XG4gIEJzaWZ5LlRodW1ibmFpbHMuaW5pdCgpO1xuXG4gIC8vIGluaXQgZXZlbnQgbGlzdGVuZXJzIGZvciBiYW5uZXJcbiAgQnNpZnkuQmFubmVyLmluaXQoKTtcblxuICAvLyBpbml0IGxvb2tib29rIGdhbGxlcnlcbiAgaWYgKCQoJy5jb2xsZWN0aW9uLWxvb2tib29rJykubGVuZ3RoID4gMCkge1xuICAgIHZhciBsb29rYm9vayA9IG5ldyBMb29rYm9vayh7XG4gICAgICBnYWxsZXJ5X3dyYXBwZXI6ICcuY29sbGVjdGlvbi1sb29rYm9vayAucHJvZHVjdHMuZ3JvdXAnLFxuICAgICAgaXRlbV93cmFwcGVyOiAnLmdyb3VwLWl0ZW0td3JhcCcsXG4gICAgICBjb250cm9sc193cmFwcGVyOiAnLmxvb2tib29rLWNvbnRyb2xzJ1xuICAgIH0pO1xuXG4gICAgbG9va2Jvb2sub25fbG9hZGVkID0gZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIGl0ZW1faGVpZ2h0ID0gJCgnLmdyb3VwLWl0ZW0taW1hZ2UnKS5oZWlnaHQoKTtcbiAgICAgICQoJy5sb29rYm9vay1jb250cm9scycpLmhlaWdodChpdGVtX2hlaWdodCk7XG5cbiAgICAgIEJzaWZ5LlRodW1ibmFpbHMub3JkZXJseSgpO1xuICAgIH07XG4gIH1cblxuICAvLyBpbml0IHNvY2lhbCBmZWVkc1xuICBCc2lmeS5Tb2NpYWxGZWVkcy5pbml0KCk7XG4gIFxuICAvLyBjdXN0b20gcGhkIGNvZGVcbiAgbmV3IFBoZCgpO1xufTtcblxuLy8gaW5pdGlhdGUgdGhlIGFwcCBhbmQgZXhwb3NlIGl0IHRvIHRoZSBicm93c2VyXG52YXIgYXBwID0gbmV3IEFwcCgpO1xubW9kdWxlLmV4cG9ydHMgPSBhcHA7XG4iLCIoZnVuY3Rpb24oKSB7XG4gIHZhciAkZG9jdW1lbnQsIENhcnQsIENhcnRKUywgSXRlbSwgcHJvY2Vzc2luZywgcXVldWUsXG4gICAgX19iaW5kID0gZnVuY3Rpb24oZm4sIG1lKXsgcmV0dXJuIGZ1bmN0aW9uKCl7IHJldHVybiBmbi5hcHBseShtZSwgYXJndW1lbnRzKTsgfTsgfTtcblxuICBDYXJ0ID0gKGZ1bmN0aW9uKCkge1xuICAgIGZ1bmN0aW9uIENhcnQoKSB7XG4gICAgICB0aGlzLnVwZGF0ZSA9IF9fYmluZCh0aGlzLnVwZGF0ZSwgdGhpcyk7XG4gICAgfVxuXG4gICAgQ2FydC5wcm90b3R5cGUudXBkYXRlID0gZnVuY3Rpb24oY2FydCkge1xuICAgICAgdmFyIGl0ZW0sIGtleSwgdmFsdWU7XG4gICAgICBmb3IgKGtleSBpbiBjYXJ0KSB7XG4gICAgICAgIHZhbHVlID0gY2FydFtrZXldO1xuICAgICAgICBpZiAoa2V5ICE9PSAnaXRlbXMnKSB7XG4gICAgICAgICAgdGhpc1trZXldID0gdmFsdWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiB0aGlzLml0ZW1zID0gKGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgX2ksIF9sZW4sIF9yZWYsIF9yZXN1bHRzO1xuICAgICAgICBfcmVmID0gY2FydC5pdGVtcztcbiAgICAgICAgX3Jlc3VsdHMgPSBbXTtcbiAgICAgICAgZm9yIChfaSA9IDAsIF9sZW4gPSBfcmVmLmxlbmd0aDsgX2kgPCBfbGVuOyBfaSsrKSB7XG4gICAgICAgICAgaXRlbSA9IF9yZWZbX2ldO1xuICAgICAgICAgIF9yZXN1bHRzLnB1c2gobmV3IEl0ZW0oaXRlbSkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBfcmVzdWx0cztcbiAgICAgIH0pKCk7XG4gICAgfTtcblxuICAgIHJldHVybiBDYXJ0O1xuXG4gIH0pKCk7XG5cbiAgSXRlbSA9IChmdW5jdGlvbigpIHtcbiAgICBmdW5jdGlvbiBJdGVtKGl0ZW0pIHtcbiAgICAgIHRoaXMucHJvcGVydHlBcnJheSA9IF9fYmluZCh0aGlzLnByb3BlcnR5QXJyYXksIHRoaXMpO1xuICAgICAgdGhpcy51cGRhdGUgPSBfX2JpbmQodGhpcy51cGRhdGUsIHRoaXMpO1xuICAgICAgdGhpcy51cGRhdGUoaXRlbSk7XG4gICAgfVxuXG4gICAgSXRlbS5wcm90b3R5cGUudXBkYXRlID0gZnVuY3Rpb24oaXRlbSkge1xuICAgICAgdmFyIGtleSwgdmFsdWU7XG4gICAgICBmb3IgKGtleSBpbiBpdGVtKSB7XG4gICAgICAgIHZhbHVlID0gaXRlbVtrZXldO1xuICAgICAgICBpZiAoa2V5ICE9PSAncHJvcGVydGllcycpIHtcbiAgICAgICAgICB0aGlzW2tleV0gPSB2YWx1ZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIHRoaXMucHJvcGVydGllcyA9IENhcnRKUy5VdGlscy5leHRlbmQoe30sIGl0ZW0ucHJvcGVydGllcyk7XG4gICAgfTtcblxuICAgIEl0ZW0ucHJvdG90eXBlLnByb3BlcnR5QXJyYXkgPSBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBuYW1lLCB2YWx1ZSwgX3JlZiwgX3Jlc3VsdHM7XG4gICAgICBfcmVmID0gdGhpcy5wcm9wZXJ0aWVzO1xuICAgICAgX3Jlc3VsdHMgPSBbXTtcbiAgICAgIGZvciAobmFtZSBpbiBfcmVmKSB7XG4gICAgICAgIHZhbHVlID0gX3JlZltuYW1lXTtcbiAgICAgICAgX3Jlc3VsdHMucHVzaCh7XG4gICAgICAgICAgbmFtZTogbmFtZSxcbiAgICAgICAgICB2YWx1ZTogdmFsdWVcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gX3Jlc3VsdHM7XG4gICAgfTtcblxuICAgIHJldHVybiBJdGVtO1xuXG4gIH0pKCk7XG5cbiAgQ2FydEpTID0ge1xuICAgIHNldHRpbmdzOiB7XG4gICAgICBkYXRhQVBJOiB0cnVlLFxuICAgICAgcmVxdWVzdEJvZHlDbGFzczogbnVsbCxcbiAgICAgIHJpdmV0c01vZGVsczoge30sXG4gICAgICBtb25leUZvcm1hdDogbnVsbCxcbiAgICAgIG1vbmV5V2l0aEN1cnJlbmN5Rm9ybWF0OiBudWxsXG4gICAgfSxcbiAgICBjYXJ0OiBuZXcgQ2FydCgpXG4gIH07XG5cbiAgQ2FydEpTLmluaXQgPSBmdW5jdGlvbihjYXJ0LCBzZXR0aW5ncykge1xuICAgIGlmIChzZXR0aW5ncyA9PSBudWxsKSB7XG4gICAgICBzZXR0aW5ncyA9IHt9O1xuICAgIH1cbiAgICBDYXJ0SlMuY29uZmlndXJlKHNldHRpbmdzKTtcbiAgICBDYXJ0SlMuY2FydC51cGRhdGUoY2FydCk7XG4gICAgaWYgKENhcnRKUy5zZXR0aW5ncy5kYXRhQVBJKSB7XG4gICAgICBDYXJ0SlMuRGF0YS5pbml0KCk7XG4gICAgfVxuICAgIGlmIChDYXJ0SlMuc2V0dGluZ3MucmVxdWVzdEJvZHlDbGFzcykge1xuICAgICAgJChkb2N1bWVudCkub24oJ2NhcnQucmVxdWVzdFN0YXJ0ZWQnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuICQoJ2JvZHknKS5hZGRDbGFzcyhDYXJ0SlMuc2V0dGluZ3MucmVxdWVzdEJvZHlDbGFzcyk7XG4gICAgICB9KTtcbiAgICAgICQoZG9jdW1lbnQpLm9uKCdjYXJ0LnJlcXVlc3RDb21wbGV0ZScsIGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gJCgnYm9keScpLnJlbW92ZUNsYXNzKENhcnRKUy5zZXR0aW5ncy5yZXF1ZXN0Qm9keUNsYXNzKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgICByZXR1cm4gQ2FydEpTLlJpdmV0cy5pbml0KCk7XG4gIH07XG5cbiAgQ2FydEpTLmNvbmZpZ3VyZSA9IGZ1bmN0aW9uKHNldHRpbmdzKSB7XG4gICAgaWYgKHNldHRpbmdzID09IG51bGwpIHtcbiAgICAgIHNldHRpbmdzID0ge307XG4gICAgfVxuICAgIHJldHVybiBDYXJ0SlMuVXRpbHMuZXh0ZW5kKENhcnRKUy5zZXR0aW5ncywgc2V0dGluZ3MpO1xuICB9O1xuXG4gIENhcnRKUy5VdGlscyA9IHtcbiAgICB3cmFwS2V5czogZnVuY3Rpb24ob2JqLCB0eXBlLCBvdmVycmlkZSkge1xuICAgICAgdmFyIGtleSwgdmFsdWUsIHdyYXBwZWQ7XG4gICAgICBpZiAodHlwZSA9PSBudWxsKSB7XG4gICAgICAgIHR5cGUgPSAncHJvcGVydGllcyc7XG4gICAgICB9XG4gICAgICB3cmFwcGVkID0ge307XG4gICAgICBmb3IgKGtleSBpbiBvYmopIHtcbiAgICAgICAgdmFsdWUgPSBvYmpba2V5XTtcbiAgICAgICAgd3JhcHBlZFtcIlwiICsgdHlwZSArIFwiW1wiICsga2V5ICsgXCJdXCJdID0gb3ZlcnJpZGUgIT0gbnVsbCA/IG92ZXJyaWRlIDogdmFsdWU7XG4gICAgICB9XG4gICAgICByZXR1cm4gd3JhcHBlZDtcbiAgICB9LFxuICAgIHVud3JhcEtleXM6IGZ1bmN0aW9uKG9iaiwgdHlwZSwgb3ZlcnJpZGUpIHtcbiAgICAgIHZhciBrZXksIHVud3JhcHBlZCwgdW53cmFwcGVkS2V5LCB2YWx1ZTtcbiAgICAgIGlmICh0eXBlID09IG51bGwpIHtcbiAgICAgICAgdHlwZSA9ICdwcm9wZXJ0aWVzJztcbiAgICAgIH1cbiAgICAgIHVud3JhcHBlZCA9IHt9O1xuICAgICAgZm9yIChrZXkgaW4gb2JqKSB7XG4gICAgICAgIHZhbHVlID0gb2JqW2tleV07XG4gICAgICAgIHVud3JhcHBlZEtleSA9IGtleS5yZXBsYWNlKFwiXCIgKyB0eXBlICsgXCJbXCIsIFwiXCIpLnJlcGxhY2UoXCJdXCIsIFwiXCIpO1xuICAgICAgICB1bndyYXBwZWRbdW53cmFwcGVkS2V5XSA9IG92ZXJyaWRlICE9IG51bGwgPyBvdmVycmlkZSA6IHZhbHVlO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHVud3JhcHBlZDtcbiAgICB9LFxuICAgIGV4dGVuZDogZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0aWVzKSB7XG4gICAgICB2YXIga2V5LCB2YWw7XG4gICAgICBmb3IgKGtleSBpbiBwcm9wZXJ0aWVzKSB7XG4gICAgICAgIHZhbCA9IHByb3BlcnRpZXNba2V5XTtcbiAgICAgICAgb2JqZWN0W2tleV0gPSB2YWw7XG4gICAgICB9XG4gICAgICByZXR1cm4gb2JqZWN0O1xuICAgIH0sXG4gICAgY2xvbmU6IGZ1bmN0aW9uKG9iamVjdCkge1xuICAgICAgdmFyIGtleSwgbmV3SW5zdGFuY2U7XG4gICAgICBpZiAoKG9iamVjdCA9PSBudWxsKSB8fCB0eXBlb2Ygb2JqZWN0ICE9PSAnb2JqZWN0Jykge1xuICAgICAgICByZXR1cm4gb2JqZWN0O1xuICAgICAgfVxuICAgICAgbmV3SW5zdGFuY2UgPSBuZXcgb2JqZWN0LmNvbnN0cnVjdG9yKCk7XG4gICAgICBmb3IgKGtleSBpbiBvYmplY3QpIHtcbiAgICAgICAgbmV3SW5zdGFuY2Vba2V5XSA9IGNsb25lKG9iamVjdFtrZXldKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBuZXdJbnN0YW5jZTtcbiAgICB9LFxuICAgIGlzQXJyYXk6IEFycmF5LmlzQXJyYXkgfHwgZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgIHJldHVybiB7fS50b1N0cmluZy5jYWxsKHZhbHVlKSA9PT0gJ1tvYmplY3QgQXJyYXldJztcbiAgICB9LFxuICAgIGVuc3VyZUFycmF5OiBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgaWYgKENhcnRKUy5VdGlscy5pc0FycmF5KHZhbHVlKSkge1xuICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgICB9XG4gICAgICBpZiAodmFsdWUgIT0gbnVsbCkge1xuICAgICAgICByZXR1cm4gW3ZhbHVlXTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBbXTtcbiAgICAgIH1cbiAgICB9LFxuICAgIGZvcm1hdE1vbmV5OiBmdW5jdGlvbih2YWx1ZSwgZm9ybWF0KSB7XG4gICAgICB2YXIgX3JlZjtcbiAgICAgIGlmICgoKF9yZWYgPSB3aW5kb3cuU2hvcGlmeSkgIT0gbnVsbCA/IF9yZWYuZm9ybWF0TW9uZXkgOiB2b2lkIDApICE9IG51bGwpIHtcbiAgICAgICAgcmV0dXJuIFNob3BpZnkuZm9ybWF0TW9uZXkodmFsdWUsIGZvcm1hdCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgICB9XG4gICAgfSxcbiAgICBnZXRTaXplZEltYWdlVXJsOiBmdW5jdGlvbihzcmMsIHNpemUpIHtcbiAgICAgIHZhciBfcmVmLCBfcmVmMTtcbiAgICAgIGlmICgoKF9yZWYgPSB3aW5kb3cuU2hvcGlmeSkgIT0gbnVsbCA/IChfcmVmMSA9IF9yZWYuSW1hZ2UpICE9IG51bGwgPyBfcmVmMS5nZXRTaXplZEltYWdlVXJsIDogdm9pZCAwIDogdm9pZCAwKSAhPSBudWxsKSB7XG4gICAgICAgIHJldHVybiBTaG9waWZ5LkltYWdlLmdldFNpemVkSW1hZ2VVcmwoc3JjLCBzaXplKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBzcmM7XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIHF1ZXVlID0gW107XG5cbiAgcHJvY2Vzc2luZyA9IGZhbHNlO1xuXG4gIENhcnRKUy5RdWV1ZSA9IHtcbiAgICBhZGQ6IGZ1bmN0aW9uKHVybCwgZGF0YSwgb3B0aW9ucykge1xuICAgICAgdmFyIHJlcXVlc3Q7XG4gICAgICBpZiAob3B0aW9ucyA9PSBudWxsKSB7XG4gICAgICAgIG9wdGlvbnMgPSB7fTtcbiAgICAgIH1cbiAgICAgIHJlcXVlc3QgPSB7XG4gICAgICAgIHVybDogdXJsLFxuICAgICAgICBkYXRhOiBkYXRhLFxuICAgICAgICB0eXBlOiBvcHRpb25zLnR5cGUgfHwgJ1BPU1QnLFxuICAgICAgICBkYXRhVHlwZTogb3B0aW9ucy5kYXRhVHlwZSB8fCAnanNvbicsXG4gICAgICAgIHN1Y2Nlc3M6IENhcnRKUy5VdGlscy5lbnN1cmVBcnJheShvcHRpb25zLnN1Y2Nlc3MpLFxuICAgICAgICBlcnJvcjogQ2FydEpTLlV0aWxzLmVuc3VyZUFycmF5KG9wdGlvbnMuZXJyb3IpLFxuICAgICAgICBjb21wbGV0ZTogQ2FydEpTLlV0aWxzLmVuc3VyZUFycmF5KG9wdGlvbnMuY29tcGxldGUpXG4gICAgICB9O1xuICAgICAgaWYgKG9wdGlvbnMudXBkYXRlQ2FydCkge1xuICAgICAgICByZXF1ZXN0LnN1Y2Nlc3MucHVzaChDYXJ0SlMuY2FydC51cGRhdGUpO1xuICAgICAgfVxuICAgICAgcXVldWUucHVzaChyZXF1ZXN0KTtcbiAgICAgIGlmIChwcm9jZXNzaW5nKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGpRdWVyeShkb2N1bWVudCkudHJpZ2dlcignY2FydC5yZXF1ZXN0U3RhcnRlZCcsIFtDYXJ0SlMuY2FydF0pO1xuICAgICAgcmV0dXJuIENhcnRKUy5RdWV1ZS5wcm9jZXNzKCk7XG4gICAgfSxcbiAgICBwcm9jZXNzOiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBwYXJhbXM7XG4gICAgICBpZiAoIXF1ZXVlLmxlbmd0aCkge1xuICAgICAgICBwcm9jZXNzaW5nID0gZmFsc2U7XG4gICAgICAgIGpRdWVyeShkb2N1bWVudCkudHJpZ2dlcignY2FydC5yZXF1ZXN0Q29tcGxldGUnLCBbQ2FydEpTLmNhcnRdKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgcHJvY2Vzc2luZyA9IHRydWU7XG4gICAgICBwYXJhbXMgPSBxdWV1ZS5zaGlmdCgpO1xuICAgICAgcGFyYW1zLmNvbXBsZXRlID0gQ2FydEpTLlF1ZXVlLnByb2Nlc3M7XG4gICAgICByZXR1cm4galF1ZXJ5LmFqYXgocGFyYW1zKTtcbiAgICB9XG4gIH07XG5cbiAgQ2FydEpTLkNvcmUgPSB7XG4gICAgZ2V0Q2FydDogZnVuY3Rpb24ob3B0aW9ucykge1xuICAgICAgaWYgKG9wdGlvbnMgPT0gbnVsbCkge1xuICAgICAgICBvcHRpb25zID0ge307XG4gICAgICB9XG4gICAgICBvcHRpb25zLnR5cGUgPSAnR0VUJztcbiAgICAgIG9wdGlvbnMudXBkYXRlQ2FydCA9IHRydWU7XG4gICAgICByZXR1cm4gQ2FydEpTLlF1ZXVlLmFkZCgnL2NhcnQuanMnLCB7fSwgb3B0aW9ucyk7XG4gICAgfSxcbiAgICBhZGRJdGVtOiBmdW5jdGlvbihpZCwgcXVhbnRpdHksIHByb3BlcnRpZXMsIG9wdGlvbnMpIHtcbiAgICAgIHZhciBkYXRhO1xuICAgICAgaWYgKHF1YW50aXR5ID09IG51bGwpIHtcbiAgICAgICAgcXVhbnRpdHkgPSAxO1xuICAgICAgfVxuICAgICAgaWYgKHByb3BlcnRpZXMgPT0gbnVsbCkge1xuICAgICAgICBwcm9wZXJ0aWVzID0ge307XG4gICAgICB9XG4gICAgICBpZiAob3B0aW9ucyA9PSBudWxsKSB7XG4gICAgICAgIG9wdGlvbnMgPSB7fTtcbiAgICAgIH1cbiAgICAgIGRhdGEgPSBDYXJ0SlMuVXRpbHMud3JhcEtleXMocHJvcGVydGllcyk7XG4gICAgICBkYXRhLmlkID0gaWQ7XG4gICAgICBkYXRhLnF1YW50aXR5ID0gcXVhbnRpdHk7XG4gICAgICBDYXJ0SlMuUXVldWUuYWRkKCcvY2FydC9hZGQuanMnLCBkYXRhLCBvcHRpb25zKTtcbiAgICAgIHJldHVybiBDYXJ0SlMuQ29yZS5nZXRDYXJ0KCk7XG4gICAgfSxcbiAgICB1cGRhdGVJdGVtOiBmdW5jdGlvbihsaW5lLCBxdWFudGl0eSwgcHJvcGVydGllcywgb3B0aW9ucykge1xuICAgICAgdmFyIGRhdGE7XG4gICAgICBpZiAocHJvcGVydGllcyA9PSBudWxsKSB7XG4gICAgICAgIHByb3BlcnRpZXMgPSB7fTtcbiAgICAgIH1cbiAgICAgIGlmIChvcHRpb25zID09IG51bGwpIHtcbiAgICAgICAgb3B0aW9ucyA9IHt9O1xuICAgICAgfVxuICAgICAgZGF0YSA9IENhcnRKUy5VdGlscy53cmFwS2V5cyhwcm9wZXJ0aWVzKTtcbiAgICAgIGRhdGEubGluZSA9IGxpbmU7XG4gICAgICBpZiAocXVhbnRpdHkgIT0gbnVsbCkge1xuICAgICAgICBkYXRhLnF1YW50aXR5ID0gcXVhbnRpdHk7XG4gICAgICB9XG4gICAgICBvcHRpb25zLnVwZGF0ZUNhcnQgPSB0cnVlO1xuICAgICAgcmV0dXJuIENhcnRKUy5RdWV1ZS5hZGQoJy9jYXJ0L2NoYW5nZS5qcycsIGRhdGEsIG9wdGlvbnMpO1xuICAgIH0sXG4gICAgcmVtb3ZlSXRlbTogZnVuY3Rpb24obGluZSwgb3B0aW9ucykge1xuICAgICAgaWYgKG9wdGlvbnMgPT0gbnVsbCkge1xuICAgICAgICBvcHRpb25zID0ge307XG4gICAgICB9XG4gICAgICByZXR1cm4gQ2FydEpTLkNvcmUudXBkYXRlSXRlbShsaW5lLCAwLCB7fSwgb3B0aW9ucyk7XG4gICAgfSxcbiAgICB1cGRhdGVJdGVtQnlJZDogZnVuY3Rpb24oaWQsIHF1YW50aXR5LCBwcm9wZXJ0aWVzLCBvcHRpb25zKSB7XG4gICAgICB2YXIgZGF0YTtcbiAgICAgIGlmIChwcm9wZXJ0aWVzID09IG51bGwpIHtcbiAgICAgICAgcHJvcGVydGllcyA9IHt9O1xuICAgICAgfVxuICAgICAgaWYgKG9wdGlvbnMgPT0gbnVsbCkge1xuICAgICAgICBvcHRpb25zID0ge307XG4gICAgICB9XG4gICAgICBkYXRhID0gQ2FydEpTLlV0aWxzLndyYXBLZXlzKHByb3BlcnRpZXMpO1xuICAgICAgZGF0YS5pZCA9IGlkO1xuICAgICAgaWYgKHF1YW50aXR5ICE9IG51bGwpIHtcbiAgICAgICAgZGF0YS5xdWFudGl0eSA9IHF1YW50aXR5O1xuICAgICAgfVxuICAgICAgb3B0aW9ucy51cGRhdGVDYXJ0ID0gdHJ1ZTtcbiAgICAgIHJldHVybiBDYXJ0SlMuUXVldWUuYWRkKCcvY2FydC9jaGFuZ2UuanMnLCBkYXRhLCBvcHRpb25zKTtcbiAgICB9LFxuICAgIHVwZGF0ZUl0ZW1RdWFudGl0aWVzQnlJZDogZnVuY3Rpb24odXBkYXRlcywgb3B0aW9ucykge1xuICAgICAgaWYgKHVwZGF0ZXMgPT0gbnVsbCkge1xuICAgICAgICB1cGRhdGVzID0ge307XG4gICAgICB9XG4gICAgICBpZiAob3B0aW9ucyA9PSBudWxsKSB7XG4gICAgICAgIG9wdGlvbnMgPSB7fTtcbiAgICAgIH1cbiAgICAgIG9wdGlvbnMudXBkYXRlQ2FydCA9IHRydWU7XG4gICAgICByZXR1cm4gQ2FydEpTLlF1ZXVlLmFkZCgnL2NhcnQvdXBkYXRlLmpzJywge1xuICAgICAgICB1cGRhdGVzOiB1cGRhdGVzXG4gICAgICB9LCBvcHRpb25zKTtcbiAgICB9LFxuICAgIHJlbW92ZUl0ZW1CeUlkOiBmdW5jdGlvbihpZCwgb3B0aW9ucykge1xuICAgICAgdmFyIGRhdGE7XG4gICAgICBpZiAob3B0aW9ucyA9PSBudWxsKSB7XG4gICAgICAgIG9wdGlvbnMgPSB7fTtcbiAgICAgIH1cbiAgICAgIGRhdGEgPSB7XG4gICAgICAgIGlkOiBpZCxcbiAgICAgICAgcXVhbnRpdHk6IDBcbiAgICAgIH07XG4gICAgICBvcHRpb25zLnVwZGF0ZUNhcnQgPSB0cnVlO1xuICAgICAgcmV0dXJuIENhcnRKUy5RdWV1ZS5hZGQoJy9jYXJ0L2NoYW5nZS5qcycsIGRhdGEsIG9wdGlvbnMpO1xuICAgIH0sXG4gICAgY2xlYXI6IGZ1bmN0aW9uKG9wdGlvbnMpIHtcbiAgICAgIGlmIChvcHRpb25zID09IG51bGwpIHtcbiAgICAgICAgb3B0aW9ucyA9IHt9O1xuICAgICAgfVxuICAgICAgb3B0aW9ucy51cGRhdGVDYXJ0ID0gdHJ1ZTtcbiAgICAgIHJldHVybiBDYXJ0SlMuUXVldWUuYWRkKCcvY2FydC9jbGVhci5qcycsIHt9LCBvcHRpb25zKTtcbiAgICB9LFxuICAgIGdldEF0dHJpYnV0ZTogZnVuY3Rpb24oYXR0cmlidXRlTmFtZSwgZGVmYXVsdFZhbHVlKSB7XG4gICAgICBpZiAoYXR0cmlidXRlTmFtZSBpbiBDYXJ0SlMuY2FydC5hdHRyaWJ1dGVzKSB7XG4gICAgICAgIHJldHVybiBDYXJ0SlMuY2FydC5hdHRyaWJ1dGVzW2F0dHJpYnV0ZU5hbWVdO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGRlZmF1bHRWYWx1ZTtcbiAgICAgIH1cbiAgICB9LFxuICAgIHNldEF0dHJpYnV0ZTogZnVuY3Rpb24oYXR0cmlidXRlTmFtZSwgdmFsdWUsIG9wdGlvbnMpIHtcbiAgICAgIHZhciBhdHRyaWJ1dGVzO1xuICAgICAgaWYgKG9wdGlvbnMgPT0gbnVsbCkge1xuICAgICAgICBvcHRpb25zID0ge307XG4gICAgICB9XG4gICAgICBhdHRyaWJ1dGVzID0ge307XG4gICAgICBhdHRyaWJ1dGVzW2F0dHJpYnV0ZU5hbWVdID0gdmFsdWU7XG4gICAgICByZXR1cm4gQ2FydEpTLkNvcmUuc2V0QXR0cmlidXRlcyhhdHRyaWJ1dGVzLCBvcHRpb25zKTtcbiAgICB9LFxuICAgIGdldEF0dHJpYnV0ZXM6IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIENhcnRKUy5jYXJ0LmF0dHJpYnV0ZXM7XG4gICAgfSxcbiAgICBzZXRBdHRyaWJ1dGVzOiBmdW5jdGlvbihhdHRyaWJ1dGVzLCBvcHRpb25zKSB7XG4gICAgICBpZiAoYXR0cmlidXRlcyA9PSBudWxsKSB7XG4gICAgICAgIGF0dHJpYnV0ZXMgPSB7fTtcbiAgICAgIH1cbiAgICAgIGlmIChvcHRpb25zID09IG51bGwpIHtcbiAgICAgICAgb3B0aW9ucyA9IHt9O1xuICAgICAgfVxuICAgICAgb3B0aW9ucy51cGRhdGVDYXJ0ID0gdHJ1ZTtcbiAgICAgIHJldHVybiBDYXJ0SlMuUXVldWUuYWRkKCcvY2FydC91cGRhdGUuanMnLCBDYXJ0SlMuVXRpbHMud3JhcEtleXMoYXR0cmlidXRlcywgJ2F0dHJpYnV0ZXMnKSwgb3B0aW9ucyk7XG4gICAgfSxcbiAgICBjbGVhckF0dHJpYnV0ZXM6IGZ1bmN0aW9uKG9wdGlvbnMpIHtcbiAgICAgIGlmIChvcHRpb25zID09IG51bGwpIHtcbiAgICAgICAgb3B0aW9ucyA9IHt9O1xuICAgICAgfVxuICAgICAgb3B0aW9ucy51cGRhdGVDYXJ0ID0gdHJ1ZTtcbiAgICAgIHJldHVybiBDYXJ0SlMuUXVldWUuYWRkKCcvY2FydC91cGRhdGUuanMnLCBDYXJ0SlMuVXRpbHMud3JhcEtleXMoQ2FydEpTLkNvcmUuZ2V0QXR0cmlidXRlcygpLCAnYXR0cmlidXRlcycsICcnKSwgb3B0aW9ucyk7XG4gICAgfSxcbiAgICBnZXROb3RlOiBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBDYXJ0SlMuY2FydC5ub3RlO1xuICAgIH0sXG4gICAgc2V0Tm90ZTogZnVuY3Rpb24obm90ZSwgb3B0aW9ucykge1xuICAgICAgaWYgKG9wdGlvbnMgPT0gbnVsbCkge1xuICAgICAgICBvcHRpb25zID0ge307XG4gICAgICB9XG4gICAgICBvcHRpb25zLnVwZGF0ZUNhcnQgPSB0cnVlO1xuICAgICAgcmV0dXJuIENhcnRKUy5RdWV1ZS5hZGQoJy9jYXJ0L3VwZGF0ZS5qcycsIHtcbiAgICAgICAgbm90ZTogbm90ZVxuICAgICAgfSwgb3B0aW9ucyk7XG4gICAgfVxuICB9O1xuXG4gICRkb2N1bWVudCA9IGpRdWVyeShkb2N1bWVudCk7XG5cbiAgQ2FydEpTLkRhdGEgPSB7XG4gICAgaW5pdDogZnVuY3Rpb24oKSB7XG4gICAgICBDYXJ0SlMuRGF0YS5zZXRFdmVudExpc3RlbmVycygnb24nKTtcbiAgICAgIHJldHVybiBDYXJ0SlMuRGF0YS5yZW5kZXIobnVsbCwgQ2FydEpTLmNhcnQpO1xuICAgIH0sXG4gICAgZGVzdHJveTogZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gQ2FydEpTLkRhdGEuc2V0RXZlbnRMaXN0ZW5lcnMoJ29mZicpO1xuICAgIH0sXG4gICAgc2V0RXZlbnRMaXN0ZW5lcnM6IGZ1bmN0aW9uKG1ldGhvZCkge1xuICAgICAgJGRvY3VtZW50W21ldGhvZF0oJ2NsaWNrJywgJ1tkYXRhLWNhcnQtYWRkXScsIENhcnRKUy5EYXRhLmFkZCk7XG4gICAgICAkZG9jdW1lbnRbbWV0aG9kXSgnY2xpY2snLCAnW2RhdGEtY2FydC1yZW1vdmVdJywgQ2FydEpTLkRhdGEucmVtb3ZlKTtcbiAgICAgICRkb2N1bWVudFttZXRob2RdKCdjbGljaycsICdbZGF0YS1jYXJ0LXJlbW92ZS1pZF0nLCBDYXJ0SlMuRGF0YS5yZW1vdmVCeUlkKTtcbiAgICAgICRkb2N1bWVudFttZXRob2RdKCdjbGljaycsICdbZGF0YS1jYXJ0LXVwZGF0ZV0nLCBDYXJ0SlMuRGF0YS51cGRhdGUpO1xuICAgICAgJGRvY3VtZW50W21ldGhvZF0oJ2NsaWNrJywgJ1tkYXRhLWNhcnQtdXBkYXRlLWlkXScsIENhcnRKUy5EYXRhLnVwZGF0ZUJ5SWQpO1xuICAgICAgJGRvY3VtZW50W21ldGhvZF0oJ2NsaWNrJywgJ1tkYXRhLWNhcnQtY2xlYXJdJywgQ2FydEpTLkRhdGEuY2xlYXIpO1xuICAgICAgJGRvY3VtZW50W21ldGhvZF0oJ2NoYW5nZScsICdbZGF0YS1jYXJ0LXRvZ2dsZV0nLCBDYXJ0SlMuRGF0YS50b2dnbGUpO1xuICAgICAgJGRvY3VtZW50W21ldGhvZF0oJ2NoYW5nZScsICdbZGF0YS1jYXJ0LXRvZ2dsZS1hdHRyaWJ1dGVdJywgQ2FydEpTLkRhdGEudG9nZ2xlQXR0cmlidXRlKTtcbiAgICAgICRkb2N1bWVudFttZXRob2RdKCdzdWJtaXQnLCAnW2RhdGEtY2FydC1zdWJtaXRdJywgQ2FydEpTLkRhdGEuc3VibWl0KTtcbiAgICAgIHJldHVybiAkZG9jdW1lbnRbbWV0aG9kXSgnY2FydC5yZXF1ZXN0Q29tcGxldGUnLCBDYXJ0SlMuRGF0YS5yZW5kZXIpO1xuICAgIH0sXG4gICAgYWRkOiBmdW5jdGlvbihlKSB7XG4gICAgICB2YXIgJHRoaXM7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAkdGhpcyA9IGpRdWVyeSh0aGlzKTtcbiAgICAgIHJldHVybiBDYXJ0SlMuQ29yZS5hZGRJdGVtKCR0aGlzLmF0dHIoJ2RhdGEtY2FydC1hZGQnKSwgJHRoaXMuYXR0cignZGF0YS1jYXJ0LXF1YW50aXR5JykpO1xuICAgIH0sXG4gICAgcmVtb3ZlOiBmdW5jdGlvbihlKSB7XG4gICAgICB2YXIgJHRoaXM7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAkdGhpcyA9IGpRdWVyeSh0aGlzKTtcbiAgICAgIHJldHVybiBDYXJ0SlMuQ29yZS5yZW1vdmVJdGVtKCR0aGlzLmF0dHIoJ2RhdGEtY2FydC1yZW1vdmUnKSk7XG4gICAgfSxcbiAgICByZW1vdmVCeUlkOiBmdW5jdGlvbihlKSB7XG4gICAgICB2YXIgJHRoaXM7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAkdGhpcyA9IGpRdWVyeSh0aGlzKTtcbiAgICAgIHJldHVybiBDYXJ0SlMuQ29yZS5yZW1vdmVJdGVtQnlJZCgkdGhpcy5hdHRyKCdkYXRhLWNhcnQtcmVtb3ZlLWlkJykpO1xuICAgIH0sXG4gICAgdXBkYXRlOiBmdW5jdGlvbihlKSB7XG4gICAgICB2YXIgJHRoaXM7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAkdGhpcyA9IGpRdWVyeSh0aGlzKTtcbiAgICAgIHJldHVybiBDYXJ0SlMuQ29yZS51cGRhdGVJdGVtKCR0aGlzLmF0dHIoJ2RhdGEtY2FydC11cGRhdGUnKSwgJHRoaXMuYXR0cignZGF0YS1jYXJ0LXF1YW50aXR5JykpO1xuICAgIH0sXG4gICAgdXBkYXRlQnlJZDogZnVuY3Rpb24oZSkge1xuICAgICAgdmFyICR0aGlzO1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgJHRoaXMgPSBqUXVlcnkodGhpcyk7XG4gICAgICByZXR1cm4gQ2FydEpTLkNvcmUudXBkYXRlSXRlbUJ5SWQoJHRoaXMuYXR0cignZGF0YS1jYXJ0LXVwZGF0ZS1pZCcpLCAkdGhpcy5hdHRyKCdkYXRhLWNhcnQtcXVhbnRpdHknKSk7XG4gICAgfSxcbiAgICBjbGVhcjogZnVuY3Rpb24oZSkge1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgcmV0dXJuIENhcnRKUy5Db3JlLmNsZWFyKCk7XG4gICAgfSxcbiAgICB0b2dnbGU6IGZ1bmN0aW9uKGUpIHtcbiAgICAgIHZhciAkaW5wdXQsIGlkO1xuICAgICAgJGlucHV0ID0galF1ZXJ5KHRoaXMpO1xuICAgICAgaWQgPSAkaW5wdXQuYXR0cignZGF0YS1jYXJ0LXRvZ2dsZScpO1xuICAgICAgaWYgKCRpbnB1dC5pcygnOmNoZWNrZWQnKSkge1xuICAgICAgICByZXR1cm4gQ2FydEpTLkNvcmUuYWRkSXRlbShpZCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gQ2FydEpTLkNvcmUucmVtb3ZlSXRlbUJ5SWQoaWQpO1xuICAgICAgfVxuICAgIH0sXG4gICAgdG9nZ2xlQXR0cmlidXRlOiBmdW5jdGlvbihlKSB7XG4gICAgICB2YXIgJGlucHV0LCBhdHRyaWJ1dGU7XG4gICAgICAkaW5wdXQgPSBqUXVlcnkodGhpcyk7XG4gICAgICBhdHRyaWJ1dGUgPSAkaW5wdXQuYXR0cignZGF0YS1jYXJ0LXRvZ2dsZS1hdHRyaWJ1dGUnKTtcbiAgICAgIHJldHVybiBDYXJ0SlMuQ29yZS5zZXRBdHRyaWJ1dGUoYXR0cmlidXRlLCAkaW5wdXQuaXMoJzpjaGVja2VkJykgPyAnWWVzJyA6ICcnKTtcbiAgICB9LFxuICAgIHN1Ym1pdDogZnVuY3Rpb24oZSkge1xuICAgICAgdmFyIGRhdGFBcnJheSwgaWQsIHByb3BlcnRpZXMsIHF1YW50aXR5O1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgZGF0YUFycmF5ID0galF1ZXJ5KHRoaXMpLnNlcmlhbGl6ZUFycmF5KCk7XG4gICAgICBpZCA9IHZvaWQgMDtcbiAgICAgIHF1YW50aXR5ID0gdm9pZCAwO1xuICAgICAgcHJvcGVydGllcyA9IHt9O1xuICAgICAgalF1ZXJ5LmVhY2goZGF0YUFycmF5LCBmdW5jdGlvbihpLCBpdGVtKSB7XG4gICAgICAgIGlmIChpdGVtLm5hbWUgPT09ICdpZCcpIHtcbiAgICAgICAgICByZXR1cm4gaWQgPSBpdGVtLnZhbHVlO1xuICAgICAgICB9IGVsc2UgaWYgKGl0ZW0ubmFtZSA9PT0gJ3F1YW50aXR5Jykge1xuICAgICAgICAgIHJldHVybiBxdWFudGl0eSA9IGl0ZW0udmFsdWU7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmV0dXJuIHByb3BlcnRpZXNbaXRlbS5uYW1lXSA9IGl0ZW0udmFsdWU7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIENhcnRKUy5Db3JlLmFkZEl0ZW0oaWQsIHF1YW50aXR5LCBDYXJ0SlMuVXRpbHMudW53cmFwS2V5cyhwcm9wZXJ0aWVzKSk7XG4gICAgfSxcbiAgICByZW5kZXI6IGZ1bmN0aW9uKGUsIGNhcnQpIHtcbiAgICAgIHZhciBjb250ZXh0O1xuICAgICAgY29udGV4dCA9IHtcbiAgICAgICAgJ2l0ZW1fY291bnQnOiBjYXJ0Lml0ZW1fY291bnQsXG4gICAgICAgICd0b3RhbF9wcmljZSc6IGNhcnQudG90YWxfcHJpY2UsXG4gICAgICAgICd0b3RhbF9wcmljZV9tb25leSc6IENhcnRKUy5VdGlscy5mb3JtYXRNb25leShjYXJ0LnRvdGFsX3ByaWNlLCBDYXJ0SlMuc2V0dGluZ3MubW9uZXlGb3JtYXQpLFxuICAgICAgICAndG90YWxfcHJpY2VfbW9uZXlfd2l0aF9jdXJyZW5jeSc6IENhcnRKUy5VdGlscy5mb3JtYXRNb25leShjYXJ0LnRvdGFsX3ByaWNlLCBDYXJ0SlMuc2V0dGluZ3MubW9uZXlXaXRoQ3VycmVuY3lGb3JtYXQpXG4gICAgICB9O1xuICAgICAgcmV0dXJuIGpRdWVyeSgnW2RhdGEtY2FydC1yZW5kZXJdJykuZWFjaChmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyICR0aGlzO1xuICAgICAgICAkdGhpcyA9IGpRdWVyeSh0aGlzKTtcbiAgICAgICAgcmV0dXJuICR0aGlzLnRleHQoY29udGV4dFskdGhpcy5hdHRyKCdkYXRhLWNhcnQtcmVuZGVyJyldKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfTtcblxuICBpZiAoJ3JpdmV0cycgaW4gd2luZG93KSB7XG4gICAgQ2FydEpTLlJpdmV0cyA9IHtcbiAgICAgIHZpZXdzOiBbXSxcbiAgICAgIGluaXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gQ2FydEpTLlJpdmV0cy5iaW5kVmlld3MoKTtcbiAgICAgIH0sXG4gICAgICBkZXN0cm95OiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIENhcnRKUy5SaXZldHMudW5iaW5kVmlld3MoKTtcbiAgICAgIH0sXG4gICAgICBiaW5kVmlld3M6IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgbW9kZWxzO1xuICAgICAgICBDYXJ0SlMuUml2ZXRzLnVuYmluZFZpZXdzKCk7XG4gICAgICAgIG1vZGVscyA9IENhcnRKUy5VdGlscy5leHRlbmQoe1xuICAgICAgICAgIGNhcnQ6IENhcnRKUy5jYXJ0XG4gICAgICAgIH0sIENhcnRKUy5zZXR0aW5ncy5yaXZldHNNb2RlbHMpO1xuICAgICAgICByZXR1cm4galF1ZXJ5KCdbZGF0YS1jYXJ0LXZpZXddJykuZWFjaChmdW5jdGlvbigpIHtcbiAgICAgICAgICByZXR1cm4gQ2FydEpTLlJpdmV0cy52aWV3cy5wdXNoKHJpdmV0cy5iaW5kKHRoaXMsIG1vZGVscykpO1xuICAgICAgICB9KTtcbiAgICAgIH0sXG4gICAgICB1bmJpbmRWaWV3czogZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciB2aWV3LCBfaSwgX2xlbiwgX3JlZjtcbiAgICAgICAgX3JlZiA9IENhcnRKUy5SaXZldHMudmlld3M7XG4gICAgICAgIGZvciAoX2kgPSAwLCBfbGVuID0gX3JlZi5sZW5ndGg7IF9pIDwgX2xlbjsgX2krKykge1xuICAgICAgICAgIHZpZXcgPSBfcmVmW19pXTtcbiAgICAgICAgICB2aWV3LnVuYmluZCgpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBDYXJ0SlMuUml2ZXRzLnZpZXdzID0gW107XG4gICAgICB9XG4gICAgfTtcbiAgICByaXZldHMuZm9ybWF0dGVycy5lcSA9IGZ1bmN0aW9uKGEsIGIpIHtcbiAgICAgIHJldHVybiBhID09PSBiO1xuICAgIH07XG4gICAgcml2ZXRzLmZvcm1hdHRlcnMubHQgPSBmdW5jdGlvbihhLCBiKSB7XG4gICAgICByZXR1cm4gYSA8IGI7XG4gICAgfTtcbiAgICByaXZldHMuZm9ybWF0dGVycy5ndCA9IGZ1bmN0aW9uKGEsIGIpIHtcbiAgICAgIHJldHVybiBhID4gYjtcbiAgICB9O1xuICAgIHJpdmV0cy5mb3JtYXR0ZXJzLm5vdCA9IGZ1bmN0aW9uKGEpIHtcbiAgICAgIHJldHVybiAhYTtcbiAgICB9O1xuICAgIHJpdmV0cy5mb3JtYXR0ZXJzLmVtcHR5ID0gZnVuY3Rpb24oYSkge1xuICAgICAgcmV0dXJuICFhLmxlbmd0aDtcbiAgICB9O1xuICAgIHJpdmV0cy5mb3JtYXR0ZXJzLnBsdXMgPSBmdW5jdGlvbihhLCBiKSB7XG4gICAgICByZXR1cm4gcGFyc2VJbnQoYSkgKyBwYXJzZUludChiKTtcbiAgICB9O1xuICAgIHJpdmV0cy5mb3JtYXR0ZXJzLm1pbnVzID0gZnVuY3Rpb24oYSwgYikge1xuICAgICAgcmV0dXJuIHBhcnNlSW50KGEpIC0gcGFyc2VJbnQoYik7XG4gICAgfTtcbiAgICByaXZldHMuZm9ybWF0dGVycy5wcmVwZW5kID0gZnVuY3Rpb24oYSwgYikge1xuICAgICAgcmV0dXJuIGIgKyBhO1xuICAgIH07XG4gICAgcml2ZXRzLmZvcm1hdHRlcnMuYXBwZW5kID0gZnVuY3Rpb24oYSwgYikge1xuICAgICAgcmV0dXJuIGEgKyBiO1xuICAgIH07XG4gICAgcml2ZXRzLmZvcm1hdHRlcnMubW9uZXkgPSBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgcmV0dXJuIENhcnRKUy5VdGlscy5mb3JtYXRNb25leSh2YWx1ZSwgQ2FydEpTLnNldHRpbmdzLm1vbmV5Rm9ybWF0KTtcbiAgICB9O1xuICAgIHJpdmV0cy5mb3JtYXR0ZXJzLm1vbmV5X3dpdGhfY3VycmVuY3kgPSBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgcmV0dXJuIENhcnRKUy5VdGlscy5mb3JtYXRNb25leSh2YWx1ZSwgQ2FydEpTLnNldHRpbmdzLm1vbmV5V2l0aEN1cnJlbmN5Rm9ybWF0KTtcbiAgICB9O1xuICAgIHJpdmV0cy5mb3JtYXR0ZXJzLnByb2R1Y3RJbWFnZVNpemUgPSBmdW5jdGlvbihzcmMsIHNpemUpIHtcbiAgICAgIHJldHVybiBDYXJ0SlMuVXRpbHMuZ2V0U2l6ZWRJbWFnZVVybChzcmMsIHNpemUpO1xuICAgIH07XG4gIH0gZWxzZSB7XG4gICAgQ2FydEpTLlJpdmV0cyA9IHtcbiAgICAgIGluaXQ6IGZ1bmN0aW9uKCkge30sXG4gICAgICBkZXN0cm95OiBmdW5jdGlvbigpIHt9XG4gICAgfTtcbiAgfVxuXG4gIENhcnRKUy5mYWN0b3J5ID0gZnVuY3Rpb24oZXhwb3J0cykge1xuICAgIGV4cG9ydHMuaW5pdCA9IENhcnRKUy5pbml0O1xuICAgIGV4cG9ydHMuY29uZmlndXJlID0gQ2FydEpTLmNvbmZpZ3VyZTtcbiAgICBleHBvcnRzLmNhcnQgPSBDYXJ0SlMuY2FydDtcbiAgICBleHBvcnRzLnNldHRpbmdzID0gQ2FydEpTLnNldHRpbmdzO1xuICAgIGV4cG9ydHMuYWRkSXRlbSA9IENhcnRKUy5Db3JlLmFkZEl0ZW07XG4gICAgZXhwb3J0cy51cGRhdGVJdGVtID0gQ2FydEpTLkNvcmUudXBkYXRlSXRlbTtcbiAgICBleHBvcnRzLnVwZGF0ZUl0ZW1CeUlkID0gQ2FydEpTLkNvcmUudXBkYXRlSXRlbUJ5SWQ7XG4gICAgZXhwb3J0cy51cGRhdGVJdGVtUXVhbnRpdGllc0J5SWQgPSBDYXJ0SlMuQ29yZS51cGRhdGVJdGVtUXVhbnRpdGllc0J5SWQ7XG4gICAgZXhwb3J0cy5yZW1vdmVJdGVtID0gQ2FydEpTLkNvcmUucmVtb3ZlSXRlbTtcbiAgICBleHBvcnRzLmNsZWFyID0gQ2FydEpTLkNvcmUuY2xlYXI7XG4gICAgZXhwb3J0cy5nZXRBdHRyaWJ1dGUgPSBDYXJ0SlMuQ29yZS5nZXRBdHRyaWJ1dGU7XG4gICAgZXhwb3J0cy5zZXRBdHRyaWJ1dGUgPSBDYXJ0SlMuQ29yZS5zZXRBdHRyaWJ1dGU7XG4gICAgZXhwb3J0cy5nZXRBdHRyaWJ1dGVzID0gQ2FydEpTLkNvcmUuZ2V0QXR0cmlidXRlcztcbiAgICBleHBvcnRzLnNldEF0dHJpYnV0ZXMgPSBDYXJ0SlMuQ29yZS5zZXRBdHRyaWJ1dGVzO1xuICAgIGV4cG9ydHMuY2xlYXJBdHRyaWJ1dGVzID0gQ2FydEpTLkNvcmUuY2xlYXJBdHRyaWJ1dGVzO1xuICAgIGV4cG9ydHMuZ2V0Tm90ZSA9IENhcnRKUy5Db3JlLmdldE5vdGU7XG4gICAgcmV0dXJuIGV4cG9ydHMuc2V0Tm90ZSA9IENhcnRKUy5Db3JlLnNldE5vdGU7XG4gIH07XG5cbiAgaWYgKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0Jykge1xuICAgIENhcnRKUy5mYWN0b3J5KGV4cG9ydHMpO1xuICB9IGVsc2UgaWYgKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZCkge1xuICAgIGRlZmluZShbJ2V4cG9ydHMnXSwgZnVuY3Rpb24oZXhwb3J0cykge1xuICAgICAgQ2FydEpTLmZhY3RvcnkodGhpcy5DYXJ0SlMgPSBleHBvcnRzKTtcbiAgICAgIHJldHVybiBleHBvcnRzO1xuICAgIH0pO1xuICB9IGVsc2Uge1xuICAgIENhcnRKUy5mYWN0b3J5KHRoaXMuQ2FydEpTID0ge30pO1xuICB9XG5cbn0pLmNhbGwodGhpcyk7XG4iLCIvKiFcbiAqIGltYWdlc0xvYWRlZCB2My4xLjhcbiAqIEphdmFTY3JpcHQgaXMgYWxsIGxpa2UgXCJZb3UgaW1hZ2VzIGFyZSBkb25lIHlldCBvciB3aGF0P1wiXG4gKiBNSVQgTGljZW5zZVxuICovXG5cbiggZnVuY3Rpb24oIHdpbmRvdywgZmFjdG9yeSApIHsgJ3VzZSBzdHJpY3QnO1xuICAvLyB1bml2ZXJzYWwgbW9kdWxlIGRlZmluaXRpb25cblxuICAvKmdsb2JhbCBkZWZpbmU6IGZhbHNlLCBtb2R1bGU6IGZhbHNlLCByZXF1aXJlOiBmYWxzZSAqL1xuXG4gIGlmICggdHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kICkge1xuICAgIC8vIEFNRFxuICAgIGRlZmluZSggW1xuICAgICAgJ2V2ZW50RW1pdHRlci9FdmVudEVtaXR0ZXInLFxuICAgICAgJ2V2ZW50aWUvZXZlbnRpZSdcbiAgICBdLCBmdW5jdGlvbiggRXZlbnRFbWl0dGVyLCBldmVudGllICkge1xuICAgICAgcmV0dXJuIGZhY3RvcnkoIHdpbmRvdywgRXZlbnRFbWl0dGVyLCBldmVudGllICk7XG4gICAgfSk7XG4gIH0gZWxzZSBpZiAoIHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0JyApIHtcbiAgICAvLyBDb21tb25KU1xuICAgIG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeShcbiAgICAgIHdpbmRvdyxcbiAgICAgIHJlcXVpcmUoJ3dvbGZ5ODctZXZlbnRlbWl0dGVyJyksXG4gICAgICByZXF1aXJlKCdldmVudGllJylcbiAgICApO1xuICB9IGVsc2Uge1xuICAgIC8vIGJyb3dzZXIgZ2xvYmFsXG4gICAgd2luZG93LmltYWdlc0xvYWRlZCA9IGZhY3RvcnkoXG4gICAgICB3aW5kb3csXG4gICAgICB3aW5kb3cuRXZlbnRFbWl0dGVyLFxuICAgICAgd2luZG93LmV2ZW50aWVcbiAgICApO1xuICB9XG5cbn0pKCB3aW5kb3csXG5cbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICBmYWN0b3J5IC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIC8vXG5cbmZ1bmN0aW9uIGZhY3RvcnkoIHdpbmRvdywgRXZlbnRFbWl0dGVyLCBldmVudGllICkge1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciAkID0gd2luZG93LmpRdWVyeTtcbnZhciBjb25zb2xlID0gd2luZG93LmNvbnNvbGU7XG52YXIgaGFzQ29uc29sZSA9IHR5cGVvZiBjb25zb2xlICE9PSAndW5kZWZpbmVkJztcblxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gaGVscGVycyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAvL1xuXG4vLyBleHRlbmQgb2JqZWN0c1xuZnVuY3Rpb24gZXh0ZW5kKCBhLCBiICkge1xuICBmb3IgKCB2YXIgcHJvcCBpbiBiICkge1xuICAgIGFbIHByb3AgXSA9IGJbIHByb3AgXTtcbiAgfVxuICByZXR1cm4gYTtcbn1cblxudmFyIG9ialRvU3RyaW5nID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZztcbmZ1bmN0aW9uIGlzQXJyYXkoIG9iaiApIHtcbiAgcmV0dXJuIG9ialRvU3RyaW5nLmNhbGwoIG9iaiApID09PSAnW29iamVjdCBBcnJheV0nO1xufVxuXG4vLyB0dXJuIGVsZW1lbnQgb3Igbm9kZUxpc3QgaW50byBhbiBhcnJheVxuZnVuY3Rpb24gbWFrZUFycmF5KCBvYmogKSB7XG4gIHZhciBhcnkgPSBbXTtcbiAgaWYgKCBpc0FycmF5KCBvYmogKSApIHtcbiAgICAvLyB1c2Ugb2JqZWN0IGlmIGFscmVhZHkgYW4gYXJyYXlcbiAgICBhcnkgPSBvYmo7XG4gIH0gZWxzZSBpZiAoIHR5cGVvZiBvYmoubGVuZ3RoID09PSAnbnVtYmVyJyApIHtcbiAgICAvLyBjb252ZXJ0IG5vZGVMaXN0IHRvIGFycmF5XG4gICAgZm9yICggdmFyIGk9MCwgbGVuID0gb2JqLmxlbmd0aDsgaSA8IGxlbjsgaSsrICkge1xuICAgICAgYXJ5LnB1c2goIG9ialtpXSApO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICAvLyBhcnJheSBvZiBzaW5nbGUgaW5kZXhcbiAgICBhcnkucHVzaCggb2JqICk7XG4gIH1cbiAgcmV0dXJuIGFyeTtcbn1cblxuICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSBpbWFnZXNMb2FkZWQgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gLy9cblxuICAvKipcbiAgICogQHBhcmFtIHtBcnJheSwgRWxlbWVudCwgTm9kZUxpc3QsIFN0cmluZ30gZWxlbVxuICAgKiBAcGFyYW0ge09iamVjdCBvciBGdW5jdGlvbn0gb3B0aW9ucyAtIGlmIGZ1bmN0aW9uLCB1c2UgYXMgY2FsbGJhY2tcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gb25BbHdheXMgLSBjYWxsYmFjayBmdW5jdGlvblxuICAgKi9cbiAgZnVuY3Rpb24gSW1hZ2VzTG9hZGVkKCBlbGVtLCBvcHRpb25zLCBvbkFsd2F5cyApIHtcbiAgICAvLyBjb2VyY2UgSW1hZ2VzTG9hZGVkKCkgd2l0aG91dCBuZXcsIHRvIGJlIG5ldyBJbWFnZXNMb2FkZWQoKVxuICAgIGlmICggISggdGhpcyBpbnN0YW5jZW9mIEltYWdlc0xvYWRlZCApICkge1xuICAgICAgcmV0dXJuIG5ldyBJbWFnZXNMb2FkZWQoIGVsZW0sIG9wdGlvbnMgKTtcbiAgICB9XG4gICAgLy8gdXNlIGVsZW0gYXMgc2VsZWN0b3Igc3RyaW5nXG4gICAgaWYgKCB0eXBlb2YgZWxlbSA9PT0gJ3N0cmluZycgKSB7XG4gICAgICBlbGVtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCggZWxlbSApO1xuICAgIH1cblxuICAgIHRoaXMuZWxlbWVudHMgPSBtYWtlQXJyYXkoIGVsZW0gKTtcbiAgICB0aGlzLm9wdGlvbnMgPSBleHRlbmQoIHt9LCB0aGlzLm9wdGlvbnMgKTtcblxuICAgIGlmICggdHlwZW9mIG9wdGlvbnMgPT09ICdmdW5jdGlvbicgKSB7XG4gICAgICBvbkFsd2F5cyA9IG9wdGlvbnM7XG4gICAgfSBlbHNlIHtcbiAgICAgIGV4dGVuZCggdGhpcy5vcHRpb25zLCBvcHRpb25zICk7XG4gICAgfVxuXG4gICAgaWYgKCBvbkFsd2F5cyApIHtcbiAgICAgIHRoaXMub24oICdhbHdheXMnLCBvbkFsd2F5cyApO1xuICAgIH1cblxuICAgIHRoaXMuZ2V0SW1hZ2VzKCk7XG5cbiAgICBpZiAoICQgKSB7XG4gICAgICAvLyBhZGQgalF1ZXJ5IERlZmVycmVkIG9iamVjdFxuICAgICAgdGhpcy5qcURlZmVycmVkID0gbmV3ICQuRGVmZXJyZWQoKTtcbiAgICB9XG5cbiAgICAvLyBIQUNLIGNoZWNrIGFzeW5jIHRvIGFsbG93IHRpbWUgdG8gYmluZCBsaXN0ZW5lcnNcbiAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgIHNldFRpbWVvdXQoIGZ1bmN0aW9uKCkge1xuICAgICAgX3RoaXMuY2hlY2soKTtcbiAgICB9KTtcbiAgfVxuXG4gIEltYWdlc0xvYWRlZC5wcm90b3R5cGUgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XG5cbiAgSW1hZ2VzTG9hZGVkLnByb3RvdHlwZS5vcHRpb25zID0ge307XG5cbiAgSW1hZ2VzTG9hZGVkLnByb3RvdHlwZS5nZXRJbWFnZXMgPSBmdW5jdGlvbigpIHtcbiAgICB0aGlzLmltYWdlcyA9IFtdO1xuXG4gICAgLy8gZmlsdGVyICYgZmluZCBpdGVtcyBpZiB3ZSBoYXZlIGFuIGl0ZW0gc2VsZWN0b3JcbiAgICBmb3IgKCB2YXIgaT0wLCBsZW4gPSB0aGlzLmVsZW1lbnRzLmxlbmd0aDsgaSA8IGxlbjsgaSsrICkge1xuICAgICAgdmFyIGVsZW0gPSB0aGlzLmVsZW1lbnRzW2ldO1xuICAgICAgLy8gZmlsdGVyIHNpYmxpbmdzXG4gICAgICBpZiAoIGVsZW0ubm9kZU5hbWUgPT09ICdJTUcnICkge1xuICAgICAgICB0aGlzLmFkZEltYWdlKCBlbGVtICk7XG4gICAgICB9XG4gICAgICAvLyBmaW5kIGNoaWxkcmVuXG4gICAgICAvLyBubyBub24tZWxlbWVudCBub2RlcywgIzE0M1xuICAgICAgdmFyIG5vZGVUeXBlID0gZWxlbS5ub2RlVHlwZTtcbiAgICAgIGlmICggIW5vZGVUeXBlIHx8ICEoIG5vZGVUeXBlID09PSAxIHx8IG5vZGVUeXBlID09PSA5IHx8IG5vZGVUeXBlID09PSAxMSApICkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIHZhciBjaGlsZEVsZW1zID0gZWxlbS5xdWVyeVNlbGVjdG9yQWxsKCdpbWcnKTtcbiAgICAgIC8vIGNvbmNhdCBjaGlsZEVsZW1zIHRvIGZpbHRlckZvdW5kIGFycmF5XG4gICAgICBmb3IgKCB2YXIgaj0wLCBqTGVuID0gY2hpbGRFbGVtcy5sZW5ndGg7IGogPCBqTGVuOyBqKysgKSB7XG4gICAgICAgIHZhciBpbWcgPSBjaGlsZEVsZW1zW2pdO1xuICAgICAgICB0aGlzLmFkZEltYWdlKCBpbWcgKTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7SW1hZ2V9IGltZ1xuICAgKi9cbiAgSW1hZ2VzTG9hZGVkLnByb3RvdHlwZS5hZGRJbWFnZSA9IGZ1bmN0aW9uKCBpbWcgKSB7XG4gICAgdmFyIGxvYWRpbmdJbWFnZSA9IG5ldyBMb2FkaW5nSW1hZ2UoIGltZyApO1xuICAgIHRoaXMuaW1hZ2VzLnB1c2goIGxvYWRpbmdJbWFnZSApO1xuICB9O1xuXG4gIEltYWdlc0xvYWRlZC5wcm90b3R5cGUuY2hlY2sgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgIHZhciBjaGVja2VkQ291bnQgPSAwO1xuICAgIHZhciBsZW5ndGggPSB0aGlzLmltYWdlcy5sZW5ndGg7XG4gICAgdGhpcy5oYXNBbnlCcm9rZW4gPSBmYWxzZTtcbiAgICAvLyBjb21wbGV0ZSBpZiBubyBpbWFnZXNcbiAgICBpZiAoICFsZW5ndGggKSB7XG4gICAgICB0aGlzLmNvbXBsZXRlKCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gb25Db25maXJtKCBpbWFnZSwgbWVzc2FnZSApIHtcbiAgICAgIGlmICggX3RoaXMub3B0aW9ucy5kZWJ1ZyAmJiBoYXNDb25zb2xlICkge1xuICAgICAgICBjb25zb2xlLmxvZyggJ2NvbmZpcm0nLCBpbWFnZSwgbWVzc2FnZSApO1xuICAgICAgfVxuXG4gICAgICBfdGhpcy5wcm9ncmVzcyggaW1hZ2UgKTtcbiAgICAgIGNoZWNrZWRDb3VudCsrO1xuICAgICAgaWYgKCBjaGVja2VkQ291bnQgPT09IGxlbmd0aCApIHtcbiAgICAgICAgX3RoaXMuY29tcGxldGUoKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0cnVlOyAvLyBiaW5kIG9uY2VcbiAgICB9XG5cbiAgICBmb3IgKCB2YXIgaT0wOyBpIDwgbGVuZ3RoOyBpKysgKSB7XG4gICAgICB2YXIgbG9hZGluZ0ltYWdlID0gdGhpcy5pbWFnZXNbaV07XG4gICAgICBsb2FkaW5nSW1hZ2Uub24oICdjb25maXJtJywgb25Db25maXJtICk7XG4gICAgICBsb2FkaW5nSW1hZ2UuY2hlY2soKTtcbiAgICB9XG4gIH07XG5cbiAgSW1hZ2VzTG9hZGVkLnByb3RvdHlwZS5wcm9ncmVzcyA9IGZ1bmN0aW9uKCBpbWFnZSApIHtcbiAgICB0aGlzLmhhc0FueUJyb2tlbiA9IHRoaXMuaGFzQW55QnJva2VuIHx8ICFpbWFnZS5pc0xvYWRlZDtcbiAgICAvLyBIQUNLIC0gQ2hyb21lIHRyaWdnZXJzIGV2ZW50IGJlZm9yZSBvYmplY3QgcHJvcGVydGllcyBoYXZlIGNoYW5nZWQuICM4M1xuICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgc2V0VGltZW91dCggZnVuY3Rpb24oKSB7XG4gICAgICBfdGhpcy5lbWl0KCAncHJvZ3Jlc3MnLCBfdGhpcywgaW1hZ2UgKTtcbiAgICAgIGlmICggX3RoaXMuanFEZWZlcnJlZCAmJiBfdGhpcy5qcURlZmVycmVkLm5vdGlmeSApIHtcbiAgICAgICAgX3RoaXMuanFEZWZlcnJlZC5ub3RpZnkoIF90aGlzLCBpbWFnZSApO1xuICAgICAgfVxuICAgIH0pO1xuICB9O1xuXG4gIEltYWdlc0xvYWRlZC5wcm90b3R5cGUuY29tcGxldGUgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgZXZlbnROYW1lID0gdGhpcy5oYXNBbnlCcm9rZW4gPyAnZmFpbCcgOiAnZG9uZSc7XG4gICAgdGhpcy5pc0NvbXBsZXRlID0gdHJ1ZTtcbiAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgIC8vIEhBQ0sgLSBhbm90aGVyIHNldFRpbWVvdXQgc28gdGhhdCBjb25maXJtIGhhcHBlbnMgYWZ0ZXIgcHJvZ3Jlc3NcbiAgICBzZXRUaW1lb3V0KCBmdW5jdGlvbigpIHtcbiAgICAgIF90aGlzLmVtaXQoIGV2ZW50TmFtZSwgX3RoaXMgKTtcbiAgICAgIF90aGlzLmVtaXQoICdhbHdheXMnLCBfdGhpcyApO1xuICAgICAgaWYgKCBfdGhpcy5qcURlZmVycmVkICkge1xuICAgICAgICB2YXIganFNZXRob2QgPSBfdGhpcy5oYXNBbnlCcm9rZW4gPyAncmVqZWN0JyA6ICdyZXNvbHZlJztcbiAgICAgICAgX3RoaXMuanFEZWZlcnJlZFsganFNZXRob2QgXSggX3RoaXMgKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfTtcblxuICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSBqcXVlcnkgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gLy9cblxuICBpZiAoICQgKSB7XG4gICAgJC5mbi5pbWFnZXNMb2FkZWQgPSBmdW5jdGlvbiggb3B0aW9ucywgY2FsbGJhY2sgKSB7XG4gICAgICB2YXIgaW5zdGFuY2UgPSBuZXcgSW1hZ2VzTG9hZGVkKCB0aGlzLCBvcHRpb25zLCBjYWxsYmFjayApO1xuICAgICAgcmV0dXJuIGluc3RhbmNlLmpxRGVmZXJyZWQucHJvbWlzZSggJCh0aGlzKSApO1xuICAgIH07XG4gIH1cblxuXG4gIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAvL1xuXG4gIGZ1bmN0aW9uIExvYWRpbmdJbWFnZSggaW1nICkge1xuICAgIHRoaXMuaW1nID0gaW1nO1xuICB9XG5cbiAgTG9hZGluZ0ltYWdlLnByb3RvdHlwZSA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcblxuICBMb2FkaW5nSW1hZ2UucHJvdG90eXBlLmNoZWNrID0gZnVuY3Rpb24oKSB7XG4gICAgLy8gZmlyc3QgY2hlY2sgY2FjaGVkIGFueSBwcmV2aW91cyBpbWFnZXMgdGhhdCBoYXZlIHNhbWUgc3JjXG4gICAgdmFyIHJlc291cmNlID0gY2FjaGVbIHRoaXMuaW1nLnNyYyBdIHx8IG5ldyBSZXNvdXJjZSggdGhpcy5pbWcuc3JjICk7XG4gICAgaWYgKCByZXNvdXJjZS5pc0NvbmZpcm1lZCApIHtcbiAgICAgIHRoaXMuY29uZmlybSggcmVzb3VyY2UuaXNMb2FkZWQsICdjYWNoZWQgd2FzIGNvbmZpcm1lZCcgKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBJZiBjb21wbGV0ZSBpcyB0cnVlIGFuZCBicm93c2VyIHN1cHBvcnRzIG5hdHVyYWwgc2l6ZXMsXG4gICAgLy8gdHJ5IHRvIGNoZWNrIGZvciBpbWFnZSBzdGF0dXMgbWFudWFsbHkuXG4gICAgaWYgKCB0aGlzLmltZy5jb21wbGV0ZSAmJiB0aGlzLmltZy5uYXR1cmFsV2lkdGggIT09IHVuZGVmaW5lZCApIHtcbiAgICAgIC8vIHJlcG9ydCBiYXNlZCBvbiBuYXR1cmFsV2lkdGhcbiAgICAgIHRoaXMuY29uZmlybSggdGhpcy5pbWcubmF0dXJhbFdpZHRoICE9PSAwLCAnbmF0dXJhbFdpZHRoJyApO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIElmIG5vbmUgb2YgdGhlIGNoZWNrcyBhYm92ZSBtYXRjaGVkLCBzaW11bGF0ZSBsb2FkaW5nIG9uIGRldGFjaGVkIGVsZW1lbnQuXG4gICAgdmFyIF90aGlzID0gdGhpcztcbiAgICByZXNvdXJjZS5vbiggJ2NvbmZpcm0nLCBmdW5jdGlvbiggcmVzcmMsIG1lc3NhZ2UgKSB7XG4gICAgICBfdGhpcy5jb25maXJtKCByZXNyYy5pc0xvYWRlZCwgbWVzc2FnZSApO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSk7XG5cbiAgICByZXNvdXJjZS5jaGVjaygpO1xuICB9O1xuXG4gIExvYWRpbmdJbWFnZS5wcm90b3R5cGUuY29uZmlybSA9IGZ1bmN0aW9uKCBpc0xvYWRlZCwgbWVzc2FnZSApIHtcbiAgICB0aGlzLmlzTG9hZGVkID0gaXNMb2FkZWQ7XG4gICAgdGhpcy5lbWl0KCAnY29uZmlybScsIHRoaXMsIG1lc3NhZ2UgKTtcbiAgfTtcblxuICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSBSZXNvdXJjZSAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAvL1xuXG4gIC8vIFJlc291cmNlIGNoZWNrcyBlYWNoIHNyYywgb25seSBvbmNlXG4gIC8vIHNlcGFyYXRlIGNsYXNzIGZyb20gTG9hZGluZ0ltYWdlIHRvIHByZXZlbnQgbWVtb3J5IGxlYWtzLiBTZWUgIzExNVxuXG4gIHZhciBjYWNoZSA9IHt9O1xuXG4gIGZ1bmN0aW9uIFJlc291cmNlKCBzcmMgKSB7XG4gICAgdGhpcy5zcmMgPSBzcmM7XG4gICAgLy8gYWRkIHRvIGNhY2hlXG4gICAgY2FjaGVbIHNyYyBdID0gdGhpcztcbiAgfVxuXG4gIFJlc291cmNlLnByb3RvdHlwZSA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcblxuICBSZXNvdXJjZS5wcm90b3R5cGUuY2hlY2sgPSBmdW5jdGlvbigpIHtcbiAgICAvLyBvbmx5IHRyaWdnZXIgY2hlY2tpbmcgb25jZVxuICAgIGlmICggdGhpcy5pc0NoZWNrZWQgKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIC8vIHNpbXVsYXRlIGxvYWRpbmcgb24gZGV0YWNoZWQgZWxlbWVudFxuICAgIHZhciBwcm94eUltYWdlID0gbmV3IEltYWdlKCk7XG4gICAgZXZlbnRpZS5iaW5kKCBwcm94eUltYWdlLCAnbG9hZCcsIHRoaXMgKTtcbiAgICBldmVudGllLmJpbmQoIHByb3h5SW1hZ2UsICdlcnJvcicsIHRoaXMgKTtcbiAgICBwcm94eUltYWdlLnNyYyA9IHRoaXMuc3JjO1xuICAgIC8vIHNldCBmbGFnXG4gICAgdGhpcy5pc0NoZWNrZWQgPSB0cnVlO1xuICB9O1xuXG4gIC8vIC0tLS0tIGV2ZW50cyAtLS0tLSAvL1xuXG4gIC8vIHRyaWdnZXIgc3BlY2lmaWVkIGhhbmRsZXIgZm9yIGV2ZW50IHR5cGVcbiAgUmVzb3VyY2UucHJvdG90eXBlLmhhbmRsZUV2ZW50ID0gZnVuY3Rpb24oIGV2ZW50ICkge1xuICAgIHZhciBtZXRob2QgPSAnb24nICsgZXZlbnQudHlwZTtcbiAgICBpZiAoIHRoaXNbIG1ldGhvZCBdICkge1xuICAgICAgdGhpc1sgbWV0aG9kIF0oIGV2ZW50ICk7XG4gICAgfVxuICB9O1xuXG4gIFJlc291cmNlLnByb3RvdHlwZS5vbmxvYWQgPSBmdW5jdGlvbiggZXZlbnQgKSB7XG4gICAgdGhpcy5jb25maXJtKCB0cnVlLCAnb25sb2FkJyApO1xuICAgIHRoaXMudW5iaW5kUHJveHlFdmVudHMoIGV2ZW50ICk7XG4gIH07XG5cbiAgUmVzb3VyY2UucHJvdG90eXBlLm9uZXJyb3IgPSBmdW5jdGlvbiggZXZlbnQgKSB7XG4gICAgdGhpcy5jb25maXJtKCBmYWxzZSwgJ29uZXJyb3InICk7XG4gICAgdGhpcy51bmJpbmRQcm94eUV2ZW50cyggZXZlbnQgKTtcbiAgfTtcblxuICAvLyAtLS0tLSBjb25maXJtIC0tLS0tIC8vXG5cbiAgUmVzb3VyY2UucHJvdG90eXBlLmNvbmZpcm0gPSBmdW5jdGlvbiggaXNMb2FkZWQsIG1lc3NhZ2UgKSB7XG4gICAgdGhpcy5pc0NvbmZpcm1lZCA9IHRydWU7XG4gICAgdGhpcy5pc0xvYWRlZCA9IGlzTG9hZGVkO1xuICAgIHRoaXMuZW1pdCggJ2NvbmZpcm0nLCB0aGlzLCBtZXNzYWdlICk7XG4gIH07XG5cbiAgUmVzb3VyY2UucHJvdG90eXBlLnVuYmluZFByb3h5RXZlbnRzID0gZnVuY3Rpb24oIGV2ZW50ICkge1xuICAgIGV2ZW50aWUudW5iaW5kKCBldmVudC50YXJnZXQsICdsb2FkJywgdGhpcyApO1xuICAgIGV2ZW50aWUudW5iaW5kKCBldmVudC50YXJnZXQsICdlcnJvcicsIHRoaXMgKTtcbiAgfTtcblxuICAvLyAtLS0tLSAgLS0tLS0gLy9cblxuICByZXR1cm4gSW1hZ2VzTG9hZGVkO1xuXG59KTtcbiIsIi8qIVxuICogZXZlbnRpZSB2MS4wLjZcbiAqIGV2ZW50IGJpbmRpbmcgaGVscGVyXG4gKiAgIGV2ZW50aWUuYmluZCggZWxlbSwgJ2NsaWNrJywgbXlGbiApXG4gKiAgIGV2ZW50aWUudW5iaW5kKCBlbGVtLCAnY2xpY2snLCBteUZuIClcbiAqIE1JVCBsaWNlbnNlXG4gKi9cblxuLypqc2hpbnQgYnJvd3NlcjogdHJ1ZSwgdW5kZWY6IHRydWUsIHVudXNlZDogdHJ1ZSAqL1xuLypnbG9iYWwgZGVmaW5lOiBmYWxzZSwgbW9kdWxlOiBmYWxzZSAqL1xuXG4oIGZ1bmN0aW9uKCB3aW5kb3cgKSB7XG5cbid1c2Ugc3RyaWN0JztcblxudmFyIGRvY0VsZW0gPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQ7XG5cbnZhciBiaW5kID0gZnVuY3Rpb24oKSB7fTtcblxuZnVuY3Rpb24gZ2V0SUVFdmVudCggb2JqICkge1xuICB2YXIgZXZlbnQgPSB3aW5kb3cuZXZlbnQ7XG4gIC8vIGFkZCBldmVudC50YXJnZXRcbiAgZXZlbnQudGFyZ2V0ID0gZXZlbnQudGFyZ2V0IHx8IGV2ZW50LnNyY0VsZW1lbnQgfHwgb2JqO1xuICByZXR1cm4gZXZlbnQ7XG59XG5cbmlmICggZG9jRWxlbS5hZGRFdmVudExpc3RlbmVyICkge1xuICBiaW5kID0gZnVuY3Rpb24oIG9iaiwgdHlwZSwgZm4gKSB7XG4gICAgb2JqLmFkZEV2ZW50TGlzdGVuZXIoIHR5cGUsIGZuLCBmYWxzZSApO1xuICB9O1xufSBlbHNlIGlmICggZG9jRWxlbS5hdHRhY2hFdmVudCApIHtcbiAgYmluZCA9IGZ1bmN0aW9uKCBvYmosIHR5cGUsIGZuICkge1xuICAgIG9ialsgdHlwZSArIGZuIF0gPSBmbi5oYW5kbGVFdmVudCA/XG4gICAgICBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIGV2ZW50ID0gZ2V0SUVFdmVudCggb2JqICk7XG4gICAgICAgIGZuLmhhbmRsZUV2ZW50LmNhbGwoIGZuLCBldmVudCApO1xuICAgICAgfSA6XG4gICAgICBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIGV2ZW50ID0gZ2V0SUVFdmVudCggb2JqICk7XG4gICAgICAgIGZuLmNhbGwoIG9iaiwgZXZlbnQgKTtcbiAgICAgIH07XG4gICAgb2JqLmF0dGFjaEV2ZW50KCBcIm9uXCIgKyB0eXBlLCBvYmpbIHR5cGUgKyBmbiBdICk7XG4gIH07XG59XG5cbnZhciB1bmJpbmQgPSBmdW5jdGlvbigpIHt9O1xuXG5pZiAoIGRvY0VsZW0ucmVtb3ZlRXZlbnRMaXN0ZW5lciApIHtcbiAgdW5iaW5kID0gZnVuY3Rpb24oIG9iaiwgdHlwZSwgZm4gKSB7XG4gICAgb2JqLnJlbW92ZUV2ZW50TGlzdGVuZXIoIHR5cGUsIGZuLCBmYWxzZSApO1xuICB9O1xufSBlbHNlIGlmICggZG9jRWxlbS5kZXRhY2hFdmVudCApIHtcbiAgdW5iaW5kID0gZnVuY3Rpb24oIG9iaiwgdHlwZSwgZm4gKSB7XG4gICAgb2JqLmRldGFjaEV2ZW50KCBcIm9uXCIgKyB0eXBlLCBvYmpbIHR5cGUgKyBmbiBdICk7XG4gICAgdHJ5IHtcbiAgICAgIGRlbGV0ZSBvYmpbIHR5cGUgKyBmbiBdO1xuICAgIH0gY2F0Y2ggKCBlcnIgKSB7XG4gICAgICAvLyBjYW4ndCBkZWxldGUgd2luZG93IG9iamVjdCBwcm9wZXJ0aWVzXG4gICAgICBvYmpbIHR5cGUgKyBmbiBdID0gdW5kZWZpbmVkO1xuICAgIH1cbiAgfTtcbn1cblxudmFyIGV2ZW50aWUgPSB7XG4gIGJpbmQ6IGJpbmQsXG4gIHVuYmluZDogdW5iaW5kXG59O1xuXG4vLyAtLS0tLSBtb2R1bGUgZGVmaW5pdGlvbiAtLS0tLSAvL1xuXG5pZiAoIHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZCApIHtcbiAgLy8gQU1EXG4gIGRlZmluZSggZXZlbnRpZSApO1xufSBlbHNlIGlmICggdHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnICkge1xuICAvLyBDb21tb25KU1xuICBtb2R1bGUuZXhwb3J0cyA9IGV2ZW50aWU7XG59IGVsc2Uge1xuICAvLyBicm93c2VyIGdsb2JhbFxuICB3aW5kb3cuZXZlbnRpZSA9IGV2ZW50aWU7XG59XG5cbn0pKCB3aW5kb3cgKTtcbiIsIi8qIVxuICogRXZlbnRFbWl0dGVyIHY0LjIuMTEgLSBnaXQuaW8vZWVcbiAqIFVubGljZW5zZSAtIGh0dHA6Ly91bmxpY2Vuc2Uub3JnL1xuICogT2xpdmVyIENhbGR3ZWxsIC0gaHR0cDovL29saS5tZS51ay9cbiAqIEBwcmVzZXJ2ZVxuICovXG5cbjsoZnVuY3Rpb24gKCkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIC8qKlxuICAgICAqIENsYXNzIGZvciBtYW5hZ2luZyBldmVudHMuXG4gICAgICogQ2FuIGJlIGV4dGVuZGVkIHRvIHByb3ZpZGUgZXZlbnQgZnVuY3Rpb25hbGl0eSBpbiBvdGhlciBjbGFzc2VzLlxuICAgICAqXG4gICAgICogQGNsYXNzIEV2ZW50RW1pdHRlciBNYW5hZ2VzIGV2ZW50IHJlZ2lzdGVyaW5nIGFuZCBlbWl0dGluZy5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBFdmVudEVtaXR0ZXIoKSB7fVxuXG4gICAgLy8gU2hvcnRjdXRzIHRvIGltcHJvdmUgc3BlZWQgYW5kIHNpemVcbiAgICB2YXIgcHJvdG8gPSBFdmVudEVtaXR0ZXIucHJvdG90eXBlO1xuICAgIHZhciBleHBvcnRzID0gdGhpcztcbiAgICB2YXIgb3JpZ2luYWxHbG9iYWxWYWx1ZSA9IGV4cG9ydHMuRXZlbnRFbWl0dGVyO1xuXG4gICAgLyoqXG4gICAgICogRmluZHMgdGhlIGluZGV4IG9mIHRoZSBsaXN0ZW5lciBmb3IgdGhlIGV2ZW50IGluIGl0cyBzdG9yYWdlIGFycmF5LlxuICAgICAqXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbltdfSBsaXN0ZW5lcnMgQXJyYXkgb2YgbGlzdGVuZXJzIHRvIHNlYXJjaCB0aHJvdWdoLlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGxpc3RlbmVyIE1ldGhvZCB0byBsb29rIGZvci5cbiAgICAgKiBAcmV0dXJuIHtOdW1iZXJ9IEluZGV4IG9mIHRoZSBzcGVjaWZpZWQgbGlzdGVuZXIsIC0xIGlmIG5vdCBmb3VuZFxuICAgICAqIEBhcGkgcHJpdmF0ZVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGluZGV4T2ZMaXN0ZW5lcihsaXN0ZW5lcnMsIGxpc3RlbmVyKSB7XG4gICAgICAgIHZhciBpID0gbGlzdGVuZXJzLmxlbmd0aDtcbiAgICAgICAgd2hpbGUgKGktLSkge1xuICAgICAgICAgICAgaWYgKGxpc3RlbmVyc1tpXS5saXN0ZW5lciA9PT0gbGlzdGVuZXIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gaTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiAtMTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBbGlhcyBhIG1ldGhvZCB3aGlsZSBrZWVwaW5nIHRoZSBjb250ZXh0IGNvcnJlY3QsIHRvIGFsbG93IGZvciBvdmVyd3JpdGluZyBvZiB0YXJnZXQgbWV0aG9kLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IG5hbWUgVGhlIG5hbWUgb2YgdGhlIHRhcmdldCBtZXRob2QuXG4gICAgICogQHJldHVybiB7RnVuY3Rpb259IFRoZSBhbGlhc2VkIG1ldGhvZFxuICAgICAqIEBhcGkgcHJpdmF0ZVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGFsaWFzKG5hbWUpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIGFsaWFzQ2xvc3VyZSgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzW25hbWVdLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgbGlzdGVuZXIgYXJyYXkgZm9yIHRoZSBzcGVjaWZpZWQgZXZlbnQuXG4gICAgICogV2lsbCBpbml0aWFsaXNlIHRoZSBldmVudCBvYmplY3QgYW5kIGxpc3RlbmVyIGFycmF5cyBpZiByZXF1aXJlZC5cbiAgICAgKiBXaWxsIHJldHVybiBhbiBvYmplY3QgaWYgeW91IHVzZSBhIHJlZ2V4IHNlYXJjaC4gVGhlIG9iamVjdCBjb250YWlucyBrZXlzIGZvciBlYWNoIG1hdGNoZWQgZXZlbnQuIFNvIC9iYVtyel0vIG1pZ2h0IHJldHVybiBhbiBvYmplY3QgY29udGFpbmluZyBiYXIgYW5kIGJhei4gQnV0IG9ubHkgaWYgeW91IGhhdmUgZWl0aGVyIGRlZmluZWQgdGhlbSB3aXRoIGRlZmluZUV2ZW50IG9yIGFkZGVkIHNvbWUgbGlzdGVuZXJzIHRvIHRoZW0uXG4gICAgICogRWFjaCBwcm9wZXJ0eSBpbiB0aGUgb2JqZWN0IHJlc3BvbnNlIGlzIGFuIGFycmF5IG9mIGxpc3RlbmVyIGZ1bmN0aW9ucy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7U3RyaW5nfFJlZ0V4cH0gZXZ0IE5hbWUgb2YgdGhlIGV2ZW50IHRvIHJldHVybiB0aGUgbGlzdGVuZXJzIGZyb20uXG4gICAgICogQHJldHVybiB7RnVuY3Rpb25bXXxPYmplY3R9IEFsbCBsaXN0ZW5lciBmdW5jdGlvbnMgZm9yIHRoZSBldmVudC5cbiAgICAgKi9cbiAgICBwcm90by5nZXRMaXN0ZW5lcnMgPSBmdW5jdGlvbiBnZXRMaXN0ZW5lcnMoZXZ0KSB7XG4gICAgICAgIHZhciBldmVudHMgPSB0aGlzLl9nZXRFdmVudHMoKTtcbiAgICAgICAgdmFyIHJlc3BvbnNlO1xuICAgICAgICB2YXIga2V5O1xuXG4gICAgICAgIC8vIFJldHVybiBhIGNvbmNhdGVuYXRlZCBhcnJheSBvZiBhbGwgbWF0Y2hpbmcgZXZlbnRzIGlmXG4gICAgICAgIC8vIHRoZSBzZWxlY3RvciBpcyBhIHJlZ3VsYXIgZXhwcmVzc2lvbi5cbiAgICAgICAgaWYgKGV2dCBpbnN0YW5jZW9mIFJlZ0V4cCkge1xuICAgICAgICAgICAgcmVzcG9uc2UgPSB7fTtcbiAgICAgICAgICAgIGZvciAoa2V5IGluIGV2ZW50cykge1xuICAgICAgICAgICAgICAgIGlmIChldmVudHMuaGFzT3duUHJvcGVydHkoa2V5KSAmJiBldnQudGVzdChrZXkpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlW2tleV0gPSBldmVudHNba2V5XTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXNwb25zZSA9IGV2ZW50c1tldnRdIHx8IChldmVudHNbZXZ0XSA9IFtdKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiByZXNwb25zZTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogVGFrZXMgYSBsaXN0IG9mIGxpc3RlbmVyIG9iamVjdHMgYW5kIGZsYXR0ZW5zIGl0IGludG8gYSBsaXN0IG9mIGxpc3RlbmVyIGZ1bmN0aW9ucy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7T2JqZWN0W119IGxpc3RlbmVycyBSYXcgbGlzdGVuZXIgb2JqZWN0cy5cbiAgICAgKiBAcmV0dXJuIHtGdW5jdGlvbltdfSBKdXN0IHRoZSBsaXN0ZW5lciBmdW5jdGlvbnMuXG4gICAgICovXG4gICAgcHJvdG8uZmxhdHRlbkxpc3RlbmVycyA9IGZ1bmN0aW9uIGZsYXR0ZW5MaXN0ZW5lcnMobGlzdGVuZXJzKSB7XG4gICAgICAgIHZhciBmbGF0TGlzdGVuZXJzID0gW107XG4gICAgICAgIHZhciBpO1xuXG4gICAgICAgIGZvciAoaSA9IDA7IGkgPCBsaXN0ZW5lcnMubGVuZ3RoOyBpICs9IDEpIHtcbiAgICAgICAgICAgIGZsYXRMaXN0ZW5lcnMucHVzaChsaXN0ZW5lcnNbaV0ubGlzdGVuZXIpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGZsYXRMaXN0ZW5lcnM7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIEZldGNoZXMgdGhlIHJlcXVlc3RlZCBsaXN0ZW5lcnMgdmlhIGdldExpc3RlbmVycyBidXQgd2lsbCBhbHdheXMgcmV0dXJuIHRoZSByZXN1bHRzIGluc2lkZSBhbiBvYmplY3QuIFRoaXMgaXMgbWFpbmx5IGZvciBpbnRlcm5hbCB1c2UgYnV0IG90aGVycyBtYXkgZmluZCBpdCB1c2VmdWwuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1N0cmluZ3xSZWdFeHB9IGV2dCBOYW1lIG9mIHRoZSBldmVudCB0byByZXR1cm4gdGhlIGxpc3RlbmVycyBmcm9tLlxuICAgICAqIEByZXR1cm4ge09iamVjdH0gQWxsIGxpc3RlbmVyIGZ1bmN0aW9ucyBmb3IgYW4gZXZlbnQgaW4gYW4gb2JqZWN0LlxuICAgICAqL1xuICAgIHByb3RvLmdldExpc3RlbmVyc0FzT2JqZWN0ID0gZnVuY3Rpb24gZ2V0TGlzdGVuZXJzQXNPYmplY3QoZXZ0KSB7XG4gICAgICAgIHZhciBsaXN0ZW5lcnMgPSB0aGlzLmdldExpc3RlbmVycyhldnQpO1xuICAgICAgICB2YXIgcmVzcG9uc2U7XG5cbiAgICAgICAgaWYgKGxpc3RlbmVycyBpbnN0YW5jZW9mIEFycmF5KSB7XG4gICAgICAgICAgICByZXNwb25zZSA9IHt9O1xuICAgICAgICAgICAgcmVzcG9uc2VbZXZ0XSA9IGxpc3RlbmVycztcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiByZXNwb25zZSB8fCBsaXN0ZW5lcnM7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIEFkZHMgYSBsaXN0ZW5lciBmdW5jdGlvbiB0byB0aGUgc3BlY2lmaWVkIGV2ZW50LlxuICAgICAqIFRoZSBsaXN0ZW5lciB3aWxsIG5vdCBiZSBhZGRlZCBpZiBpdCBpcyBhIGR1cGxpY2F0ZS5cbiAgICAgKiBJZiB0aGUgbGlzdGVuZXIgcmV0dXJucyB0cnVlIHRoZW4gaXQgd2lsbCBiZSByZW1vdmVkIGFmdGVyIGl0IGlzIGNhbGxlZC5cbiAgICAgKiBJZiB5b3UgcGFzcyBhIHJlZ3VsYXIgZXhwcmVzc2lvbiBhcyB0aGUgZXZlbnQgbmFtZSB0aGVuIHRoZSBsaXN0ZW5lciB3aWxsIGJlIGFkZGVkIHRvIGFsbCBldmVudHMgdGhhdCBtYXRjaCBpdC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7U3RyaW5nfFJlZ0V4cH0gZXZ0IE5hbWUgb2YgdGhlIGV2ZW50IHRvIGF0dGFjaCB0aGUgbGlzdGVuZXIgdG8uXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gbGlzdGVuZXIgTWV0aG9kIHRvIGJlIGNhbGxlZCB3aGVuIHRoZSBldmVudCBpcyBlbWl0dGVkLiBJZiB0aGUgZnVuY3Rpb24gcmV0dXJucyB0cnVlIHRoZW4gaXQgd2lsbCBiZSByZW1vdmVkIGFmdGVyIGNhbGxpbmcuXG4gICAgICogQHJldHVybiB7T2JqZWN0fSBDdXJyZW50IGluc3RhbmNlIG9mIEV2ZW50RW1pdHRlciBmb3IgY2hhaW5pbmcuXG4gICAgICovXG4gICAgcHJvdG8uYWRkTGlzdGVuZXIgPSBmdW5jdGlvbiBhZGRMaXN0ZW5lcihldnQsIGxpc3RlbmVyKSB7XG4gICAgICAgIHZhciBsaXN0ZW5lcnMgPSB0aGlzLmdldExpc3RlbmVyc0FzT2JqZWN0KGV2dCk7XG4gICAgICAgIHZhciBsaXN0ZW5lcklzV3JhcHBlZCA9IHR5cGVvZiBsaXN0ZW5lciA9PT0gJ29iamVjdCc7XG4gICAgICAgIHZhciBrZXk7XG5cbiAgICAgICAgZm9yIChrZXkgaW4gbGlzdGVuZXJzKSB7XG4gICAgICAgICAgICBpZiAobGlzdGVuZXJzLmhhc093blByb3BlcnR5KGtleSkgJiYgaW5kZXhPZkxpc3RlbmVyKGxpc3RlbmVyc1trZXldLCBsaXN0ZW5lcikgPT09IC0xKSB7XG4gICAgICAgICAgICAgICAgbGlzdGVuZXJzW2tleV0ucHVzaChsaXN0ZW5lcklzV3JhcHBlZCA/IGxpc3RlbmVyIDoge1xuICAgICAgICAgICAgICAgICAgICBsaXN0ZW5lcjogbGlzdGVuZXIsXG4gICAgICAgICAgICAgICAgICAgIG9uY2U6IGZhbHNlXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogQWxpYXMgb2YgYWRkTGlzdGVuZXJcbiAgICAgKi9cbiAgICBwcm90by5vbiA9IGFsaWFzKCdhZGRMaXN0ZW5lcicpO1xuXG4gICAgLyoqXG4gICAgICogU2VtaS1hbGlhcyBvZiBhZGRMaXN0ZW5lci4gSXQgd2lsbCBhZGQgYSBsaXN0ZW5lciB0aGF0IHdpbGwgYmVcbiAgICAgKiBhdXRvbWF0aWNhbGx5IHJlbW92ZWQgYWZ0ZXIgaXRzIGZpcnN0IGV4ZWN1dGlvbi5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7U3RyaW5nfFJlZ0V4cH0gZXZ0IE5hbWUgb2YgdGhlIGV2ZW50IHRvIGF0dGFjaCB0aGUgbGlzdGVuZXIgdG8uXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gbGlzdGVuZXIgTWV0aG9kIHRvIGJlIGNhbGxlZCB3aGVuIHRoZSBldmVudCBpcyBlbWl0dGVkLiBJZiB0aGUgZnVuY3Rpb24gcmV0dXJucyB0cnVlIHRoZW4gaXQgd2lsbCBiZSByZW1vdmVkIGFmdGVyIGNhbGxpbmcuXG4gICAgICogQHJldHVybiB7T2JqZWN0fSBDdXJyZW50IGluc3RhbmNlIG9mIEV2ZW50RW1pdHRlciBmb3IgY2hhaW5pbmcuXG4gICAgICovXG4gICAgcHJvdG8uYWRkT25jZUxpc3RlbmVyID0gZnVuY3Rpb24gYWRkT25jZUxpc3RlbmVyKGV2dCwgbGlzdGVuZXIpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYWRkTGlzdGVuZXIoZXZ0LCB7XG4gICAgICAgICAgICBsaXN0ZW5lcjogbGlzdGVuZXIsXG4gICAgICAgICAgICBvbmNlOiB0cnVlXG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBBbGlhcyBvZiBhZGRPbmNlTGlzdGVuZXIuXG4gICAgICovXG4gICAgcHJvdG8ub25jZSA9IGFsaWFzKCdhZGRPbmNlTGlzdGVuZXInKTtcblxuICAgIC8qKlxuICAgICAqIERlZmluZXMgYW4gZXZlbnQgbmFtZS4gVGhpcyBpcyByZXF1aXJlZCBpZiB5b3Ugd2FudCB0byB1c2UgYSByZWdleCB0byBhZGQgYSBsaXN0ZW5lciB0byBtdWx0aXBsZSBldmVudHMgYXQgb25jZS4gSWYgeW91IGRvbid0IGRvIHRoaXMgdGhlbiBob3cgZG8geW91IGV4cGVjdCBpdCB0byBrbm93IHdoYXQgZXZlbnQgdG8gYWRkIHRvPyBTaG91bGQgaXQganVzdCBhZGQgdG8gZXZlcnkgcG9zc2libGUgbWF0Y2ggZm9yIGEgcmVnZXg/IE5vLiBUaGF0IGlzIHNjYXJ5IGFuZCBiYWQuXG4gICAgICogWW91IG5lZWQgdG8gdGVsbCBpdCB3aGF0IGV2ZW50IG5hbWVzIHNob3VsZCBiZSBtYXRjaGVkIGJ5IGEgcmVnZXguXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gZXZ0IE5hbWUgb2YgdGhlIGV2ZW50IHRvIGNyZWF0ZS5cbiAgICAgKiBAcmV0dXJuIHtPYmplY3R9IEN1cnJlbnQgaW5zdGFuY2Ugb2YgRXZlbnRFbWl0dGVyIGZvciBjaGFpbmluZy5cbiAgICAgKi9cbiAgICBwcm90by5kZWZpbmVFdmVudCA9IGZ1bmN0aW9uIGRlZmluZUV2ZW50KGV2dCkge1xuICAgICAgICB0aGlzLmdldExpc3RlbmVycyhldnQpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogVXNlcyBkZWZpbmVFdmVudCB0byBkZWZpbmUgbXVsdGlwbGUgZXZlbnRzLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtTdHJpbmdbXX0gZXZ0cyBBbiBhcnJheSBvZiBldmVudCBuYW1lcyB0byBkZWZpbmUuXG4gICAgICogQHJldHVybiB7T2JqZWN0fSBDdXJyZW50IGluc3RhbmNlIG9mIEV2ZW50RW1pdHRlciBmb3IgY2hhaW5pbmcuXG4gICAgICovXG4gICAgcHJvdG8uZGVmaW5lRXZlbnRzID0gZnVuY3Rpb24gZGVmaW5lRXZlbnRzKGV2dHMpIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBldnRzLmxlbmd0aDsgaSArPSAxKSB7XG4gICAgICAgICAgICB0aGlzLmRlZmluZUV2ZW50KGV2dHNbaV0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBSZW1vdmVzIGEgbGlzdGVuZXIgZnVuY3Rpb24gZnJvbSB0aGUgc3BlY2lmaWVkIGV2ZW50LlxuICAgICAqIFdoZW4gcGFzc2VkIGEgcmVndWxhciBleHByZXNzaW9uIGFzIHRoZSBldmVudCBuYW1lLCBpdCB3aWxsIHJlbW92ZSB0aGUgbGlzdGVuZXIgZnJvbSBhbGwgZXZlbnRzIHRoYXQgbWF0Y2ggaXQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1N0cmluZ3xSZWdFeHB9IGV2dCBOYW1lIG9mIHRoZSBldmVudCB0byByZW1vdmUgdGhlIGxpc3RlbmVyIGZyb20uXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gbGlzdGVuZXIgTWV0aG9kIHRvIHJlbW92ZSBmcm9tIHRoZSBldmVudC5cbiAgICAgKiBAcmV0dXJuIHtPYmplY3R9IEN1cnJlbnQgaW5zdGFuY2Ugb2YgRXZlbnRFbWl0dGVyIGZvciBjaGFpbmluZy5cbiAgICAgKi9cbiAgICBwcm90by5yZW1vdmVMaXN0ZW5lciA9IGZ1bmN0aW9uIHJlbW92ZUxpc3RlbmVyKGV2dCwgbGlzdGVuZXIpIHtcbiAgICAgICAgdmFyIGxpc3RlbmVycyA9IHRoaXMuZ2V0TGlzdGVuZXJzQXNPYmplY3QoZXZ0KTtcbiAgICAgICAgdmFyIGluZGV4O1xuICAgICAgICB2YXIga2V5O1xuXG4gICAgICAgIGZvciAoa2V5IGluIGxpc3RlbmVycykge1xuICAgICAgICAgICAgaWYgKGxpc3RlbmVycy5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XG4gICAgICAgICAgICAgICAgaW5kZXggPSBpbmRleE9mTGlzdGVuZXIobGlzdGVuZXJzW2tleV0sIGxpc3RlbmVyKTtcblxuICAgICAgICAgICAgICAgIGlmIChpbmRleCAhPT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgbGlzdGVuZXJzW2tleV0uc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogQWxpYXMgb2YgcmVtb3ZlTGlzdGVuZXJcbiAgICAgKi9cbiAgICBwcm90by5vZmYgPSBhbGlhcygncmVtb3ZlTGlzdGVuZXInKTtcblxuICAgIC8qKlxuICAgICAqIEFkZHMgbGlzdGVuZXJzIGluIGJ1bGsgdXNpbmcgdGhlIG1hbmlwdWxhdGVMaXN0ZW5lcnMgbWV0aG9kLlxuICAgICAqIElmIHlvdSBwYXNzIGFuIG9iamVjdCBhcyB0aGUgc2Vjb25kIGFyZ3VtZW50IHlvdSBjYW4gYWRkIHRvIG11bHRpcGxlIGV2ZW50cyBhdCBvbmNlLiBUaGUgb2JqZWN0IHNob3VsZCBjb250YWluIGtleSB2YWx1ZSBwYWlycyBvZiBldmVudHMgYW5kIGxpc3RlbmVycyBvciBsaXN0ZW5lciBhcnJheXMuIFlvdSBjYW4gYWxzbyBwYXNzIGl0IGFuIGV2ZW50IG5hbWUgYW5kIGFuIGFycmF5IG9mIGxpc3RlbmVycyB0byBiZSBhZGRlZC5cbiAgICAgKiBZb3UgY2FuIGFsc28gcGFzcyBpdCBhIHJlZ3VsYXIgZXhwcmVzc2lvbiB0byBhZGQgdGhlIGFycmF5IG9mIGxpc3RlbmVycyB0byBhbGwgZXZlbnRzIHRoYXQgbWF0Y2ggaXQuXG4gICAgICogWWVhaCwgdGhpcyBmdW5jdGlvbiBkb2VzIHF1aXRlIGEgYml0LiBUaGF0J3MgcHJvYmFibHkgYSBiYWQgdGhpbmcuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1N0cmluZ3xPYmplY3R8UmVnRXhwfSBldnQgQW4gZXZlbnQgbmFtZSBpZiB5b3Ugd2lsbCBwYXNzIGFuIGFycmF5IG9mIGxpc3RlbmVycyBuZXh0LiBBbiBvYmplY3QgaWYgeW91IHdpc2ggdG8gYWRkIHRvIG11bHRpcGxlIGV2ZW50cyBhdCBvbmNlLlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb25bXX0gW2xpc3RlbmVyc10gQW4gb3B0aW9uYWwgYXJyYXkgb2YgbGlzdGVuZXIgZnVuY3Rpb25zIHRvIGFkZC5cbiAgICAgKiBAcmV0dXJuIHtPYmplY3R9IEN1cnJlbnQgaW5zdGFuY2Ugb2YgRXZlbnRFbWl0dGVyIGZvciBjaGFpbmluZy5cbiAgICAgKi9cbiAgICBwcm90by5hZGRMaXN0ZW5lcnMgPSBmdW5jdGlvbiBhZGRMaXN0ZW5lcnMoZXZ0LCBsaXN0ZW5lcnMpIHtcbiAgICAgICAgLy8gUGFzcyB0aHJvdWdoIHRvIG1hbmlwdWxhdGVMaXN0ZW5lcnNcbiAgICAgICAgcmV0dXJuIHRoaXMubWFuaXB1bGF0ZUxpc3RlbmVycyhmYWxzZSwgZXZ0LCBsaXN0ZW5lcnMpO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBSZW1vdmVzIGxpc3RlbmVycyBpbiBidWxrIHVzaW5nIHRoZSBtYW5pcHVsYXRlTGlzdGVuZXJzIG1ldGhvZC5cbiAgICAgKiBJZiB5b3UgcGFzcyBhbiBvYmplY3QgYXMgdGhlIHNlY29uZCBhcmd1bWVudCB5b3UgY2FuIHJlbW92ZSBmcm9tIG11bHRpcGxlIGV2ZW50cyBhdCBvbmNlLiBUaGUgb2JqZWN0IHNob3VsZCBjb250YWluIGtleSB2YWx1ZSBwYWlycyBvZiBldmVudHMgYW5kIGxpc3RlbmVycyBvciBsaXN0ZW5lciBhcnJheXMuXG4gICAgICogWW91IGNhbiBhbHNvIHBhc3MgaXQgYW4gZXZlbnQgbmFtZSBhbmQgYW4gYXJyYXkgb2YgbGlzdGVuZXJzIHRvIGJlIHJlbW92ZWQuXG4gICAgICogWW91IGNhbiBhbHNvIHBhc3MgaXQgYSByZWd1bGFyIGV4cHJlc3Npb24gdG8gcmVtb3ZlIHRoZSBsaXN0ZW5lcnMgZnJvbSBhbGwgZXZlbnRzIHRoYXQgbWF0Y2ggaXQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1N0cmluZ3xPYmplY3R8UmVnRXhwfSBldnQgQW4gZXZlbnQgbmFtZSBpZiB5b3Ugd2lsbCBwYXNzIGFuIGFycmF5IG9mIGxpc3RlbmVycyBuZXh0LiBBbiBvYmplY3QgaWYgeW91IHdpc2ggdG8gcmVtb3ZlIGZyb20gbXVsdGlwbGUgZXZlbnRzIGF0IG9uY2UuXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbltdfSBbbGlzdGVuZXJzXSBBbiBvcHRpb25hbCBhcnJheSBvZiBsaXN0ZW5lciBmdW5jdGlvbnMgdG8gcmVtb3ZlLlxuICAgICAqIEByZXR1cm4ge09iamVjdH0gQ3VycmVudCBpbnN0YW5jZSBvZiBFdmVudEVtaXR0ZXIgZm9yIGNoYWluaW5nLlxuICAgICAqL1xuICAgIHByb3RvLnJlbW92ZUxpc3RlbmVycyA9IGZ1bmN0aW9uIHJlbW92ZUxpc3RlbmVycyhldnQsIGxpc3RlbmVycykge1xuICAgICAgICAvLyBQYXNzIHRocm91Z2ggdG8gbWFuaXB1bGF0ZUxpc3RlbmVyc1xuICAgICAgICByZXR1cm4gdGhpcy5tYW5pcHVsYXRlTGlzdGVuZXJzKHRydWUsIGV2dCwgbGlzdGVuZXJzKTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogRWRpdHMgbGlzdGVuZXJzIGluIGJ1bGsuIFRoZSBhZGRMaXN0ZW5lcnMgYW5kIHJlbW92ZUxpc3RlbmVycyBtZXRob2RzIGJvdGggdXNlIHRoaXMgdG8gZG8gdGhlaXIgam9iLiBZb3Ugc2hvdWxkIHJlYWxseSB1c2UgdGhvc2UgaW5zdGVhZCwgdGhpcyBpcyBhIGxpdHRsZSBsb3dlciBsZXZlbC5cbiAgICAgKiBUaGUgZmlyc3QgYXJndW1lbnQgd2lsbCBkZXRlcm1pbmUgaWYgdGhlIGxpc3RlbmVycyBhcmUgcmVtb3ZlZCAodHJ1ZSkgb3IgYWRkZWQgKGZhbHNlKS5cbiAgICAgKiBJZiB5b3UgcGFzcyBhbiBvYmplY3QgYXMgdGhlIHNlY29uZCBhcmd1bWVudCB5b3UgY2FuIGFkZC9yZW1vdmUgZnJvbSBtdWx0aXBsZSBldmVudHMgYXQgb25jZS4gVGhlIG9iamVjdCBzaG91bGQgY29udGFpbiBrZXkgdmFsdWUgcGFpcnMgb2YgZXZlbnRzIGFuZCBsaXN0ZW5lcnMgb3IgbGlzdGVuZXIgYXJyYXlzLlxuICAgICAqIFlvdSBjYW4gYWxzbyBwYXNzIGl0IGFuIGV2ZW50IG5hbWUgYW5kIGFuIGFycmF5IG9mIGxpc3RlbmVycyB0byBiZSBhZGRlZC9yZW1vdmVkLlxuICAgICAqIFlvdSBjYW4gYWxzbyBwYXNzIGl0IGEgcmVndWxhciBleHByZXNzaW9uIHRvIG1hbmlwdWxhdGUgdGhlIGxpc3RlbmVycyBvZiBhbGwgZXZlbnRzIHRoYXQgbWF0Y2ggaXQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge0Jvb2xlYW59IHJlbW92ZSBUcnVlIGlmIHlvdSB3YW50IHRvIHJlbW92ZSBsaXN0ZW5lcnMsIGZhbHNlIGlmIHlvdSB3YW50IHRvIGFkZC5cbiAgICAgKiBAcGFyYW0ge1N0cmluZ3xPYmplY3R8UmVnRXhwfSBldnQgQW4gZXZlbnQgbmFtZSBpZiB5b3Ugd2lsbCBwYXNzIGFuIGFycmF5IG9mIGxpc3RlbmVycyBuZXh0LiBBbiBvYmplY3QgaWYgeW91IHdpc2ggdG8gYWRkL3JlbW92ZSBmcm9tIG11bHRpcGxlIGV2ZW50cyBhdCBvbmNlLlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb25bXX0gW2xpc3RlbmVyc10gQW4gb3B0aW9uYWwgYXJyYXkgb2YgbGlzdGVuZXIgZnVuY3Rpb25zIHRvIGFkZC9yZW1vdmUuXG4gICAgICogQHJldHVybiB7T2JqZWN0fSBDdXJyZW50IGluc3RhbmNlIG9mIEV2ZW50RW1pdHRlciBmb3IgY2hhaW5pbmcuXG4gICAgICovXG4gICAgcHJvdG8ubWFuaXB1bGF0ZUxpc3RlbmVycyA9IGZ1bmN0aW9uIG1hbmlwdWxhdGVMaXN0ZW5lcnMocmVtb3ZlLCBldnQsIGxpc3RlbmVycykge1xuICAgICAgICB2YXIgaTtcbiAgICAgICAgdmFyIHZhbHVlO1xuICAgICAgICB2YXIgc2luZ2xlID0gcmVtb3ZlID8gdGhpcy5yZW1vdmVMaXN0ZW5lciA6IHRoaXMuYWRkTGlzdGVuZXI7XG4gICAgICAgIHZhciBtdWx0aXBsZSA9IHJlbW92ZSA/IHRoaXMucmVtb3ZlTGlzdGVuZXJzIDogdGhpcy5hZGRMaXN0ZW5lcnM7XG5cbiAgICAgICAgLy8gSWYgZXZ0IGlzIGFuIG9iamVjdCB0aGVuIHBhc3MgZWFjaCBvZiBpdHMgcHJvcGVydGllcyB0byB0aGlzIG1ldGhvZFxuICAgICAgICBpZiAodHlwZW9mIGV2dCA9PT0gJ29iamVjdCcgJiYgIShldnQgaW5zdGFuY2VvZiBSZWdFeHApKSB7XG4gICAgICAgICAgICBmb3IgKGkgaW4gZXZ0KSB7XG4gICAgICAgICAgICAgICAgaWYgKGV2dC5oYXNPd25Qcm9wZXJ0eShpKSAmJiAodmFsdWUgPSBldnRbaV0pKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIFBhc3MgdGhlIHNpbmdsZSBsaXN0ZW5lciBzdHJhaWdodCB0aHJvdWdoIHRvIHRoZSBzaW5ndWxhciBtZXRob2RcbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2luZ2xlLmNhbGwodGhpcywgaSwgdmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gT3RoZXJ3aXNlIHBhc3MgYmFjayB0byB0aGUgbXVsdGlwbGUgZnVuY3Rpb25cbiAgICAgICAgICAgICAgICAgICAgICAgIG11bHRpcGxlLmNhbGwodGhpcywgaSwgdmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgLy8gU28gZXZ0IG11c3QgYmUgYSBzdHJpbmdcbiAgICAgICAgICAgIC8vIEFuZCBsaXN0ZW5lcnMgbXVzdCBiZSBhbiBhcnJheSBvZiBsaXN0ZW5lcnNcbiAgICAgICAgICAgIC8vIExvb3Agb3ZlciBpdCBhbmQgcGFzcyBlYWNoIG9uZSB0byB0aGUgbXVsdGlwbGUgbWV0aG9kXG4gICAgICAgICAgICBpID0gbGlzdGVuZXJzLmxlbmd0aDtcbiAgICAgICAgICAgIHdoaWxlIChpLS0pIHtcbiAgICAgICAgICAgICAgICBzaW5nbGUuY2FsbCh0aGlzLCBldnQsIGxpc3RlbmVyc1tpXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogUmVtb3ZlcyBhbGwgbGlzdGVuZXJzIGZyb20gYSBzcGVjaWZpZWQgZXZlbnQuXG4gICAgICogSWYgeW91IGRvIG5vdCBzcGVjaWZ5IGFuIGV2ZW50IHRoZW4gYWxsIGxpc3RlbmVycyB3aWxsIGJlIHJlbW92ZWQuXG4gICAgICogVGhhdCBtZWFucyBldmVyeSBldmVudCB3aWxsIGJlIGVtcHRpZWQuXG4gICAgICogWW91IGNhbiBhbHNvIHBhc3MgYSByZWdleCB0byByZW1vdmUgYWxsIGV2ZW50cyB0aGF0IG1hdGNoIGl0LlxuICAgICAqXG4gICAgICogQHBhcmFtIHtTdHJpbmd8UmVnRXhwfSBbZXZ0XSBPcHRpb25hbCBuYW1lIG9mIHRoZSBldmVudCB0byByZW1vdmUgYWxsIGxpc3RlbmVycyBmb3IuIFdpbGwgcmVtb3ZlIGZyb20gZXZlcnkgZXZlbnQgaWYgbm90IHBhc3NlZC5cbiAgICAgKiBAcmV0dXJuIHtPYmplY3R9IEN1cnJlbnQgaW5zdGFuY2Ugb2YgRXZlbnRFbWl0dGVyIGZvciBjaGFpbmluZy5cbiAgICAgKi9cbiAgICBwcm90by5yZW1vdmVFdmVudCA9IGZ1bmN0aW9uIHJlbW92ZUV2ZW50KGV2dCkge1xuICAgICAgICB2YXIgdHlwZSA9IHR5cGVvZiBldnQ7XG4gICAgICAgIHZhciBldmVudHMgPSB0aGlzLl9nZXRFdmVudHMoKTtcbiAgICAgICAgdmFyIGtleTtcblxuICAgICAgICAvLyBSZW1vdmUgZGlmZmVyZW50IHRoaW5ncyBkZXBlbmRpbmcgb24gdGhlIHN0YXRlIG9mIGV2dFxuICAgICAgICBpZiAodHlwZSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgIC8vIFJlbW92ZSBhbGwgbGlzdGVuZXJzIGZvciB0aGUgc3BlY2lmaWVkIGV2ZW50XG4gICAgICAgICAgICBkZWxldGUgZXZlbnRzW2V2dF07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoZXZ0IGluc3RhbmNlb2YgUmVnRXhwKSB7XG4gICAgICAgICAgICAvLyBSZW1vdmUgYWxsIGV2ZW50cyBtYXRjaGluZyB0aGUgcmVnZXguXG4gICAgICAgICAgICBmb3IgKGtleSBpbiBldmVudHMpIHtcbiAgICAgICAgICAgICAgICBpZiAoZXZlbnRzLmhhc093blByb3BlcnR5KGtleSkgJiYgZXZ0LnRlc3Qoa2V5KSkge1xuICAgICAgICAgICAgICAgICAgICBkZWxldGUgZXZlbnRzW2tleV07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgLy8gUmVtb3ZlIGFsbCBsaXN0ZW5lcnMgaW4gYWxsIGV2ZW50c1xuICAgICAgICAgICAgZGVsZXRlIHRoaXMuX2V2ZW50cztcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBBbGlhcyBvZiByZW1vdmVFdmVudC5cbiAgICAgKlxuICAgICAqIEFkZGVkIHRvIG1pcnJvciB0aGUgbm9kZSBBUEkuXG4gICAgICovXG4gICAgcHJvdG8ucmVtb3ZlQWxsTGlzdGVuZXJzID0gYWxpYXMoJ3JlbW92ZUV2ZW50Jyk7XG5cbiAgICAvKipcbiAgICAgKiBFbWl0cyBhbiBldmVudCBvZiB5b3VyIGNob2ljZS5cbiAgICAgKiBXaGVuIGVtaXR0ZWQsIGV2ZXJ5IGxpc3RlbmVyIGF0dGFjaGVkIHRvIHRoYXQgZXZlbnQgd2lsbCBiZSBleGVjdXRlZC5cbiAgICAgKiBJZiB5b3UgcGFzcyB0aGUgb3B0aW9uYWwgYXJndW1lbnQgYXJyYXkgdGhlbiB0aG9zZSBhcmd1bWVudHMgd2lsbCBiZSBwYXNzZWQgdG8gZXZlcnkgbGlzdGVuZXIgdXBvbiBleGVjdXRpb24uXG4gICAgICogQmVjYXVzZSBpdCB1c2VzIGBhcHBseWAsIHlvdXIgYXJyYXkgb2YgYXJndW1lbnRzIHdpbGwgYmUgcGFzc2VkIGFzIGlmIHlvdSB3cm90ZSB0aGVtIG91dCBzZXBhcmF0ZWx5LlxuICAgICAqIFNvIHRoZXkgd2lsbCBub3QgYXJyaXZlIHdpdGhpbiB0aGUgYXJyYXkgb24gdGhlIG90aGVyIHNpZGUsIHRoZXkgd2lsbCBiZSBzZXBhcmF0ZS5cbiAgICAgKiBZb3UgY2FuIGFsc28gcGFzcyBhIHJlZ3VsYXIgZXhwcmVzc2lvbiB0byBlbWl0IHRvIGFsbCBldmVudHMgdGhhdCBtYXRjaCBpdC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7U3RyaW5nfFJlZ0V4cH0gZXZ0IE5hbWUgb2YgdGhlIGV2ZW50IHRvIGVtaXQgYW5kIGV4ZWN1dGUgbGlzdGVuZXJzIGZvci5cbiAgICAgKiBAcGFyYW0ge0FycmF5fSBbYXJnc10gT3B0aW9uYWwgYXJyYXkgb2YgYXJndW1lbnRzIHRvIGJlIHBhc3NlZCB0byBlYWNoIGxpc3RlbmVyLlxuICAgICAqIEByZXR1cm4ge09iamVjdH0gQ3VycmVudCBpbnN0YW5jZSBvZiBFdmVudEVtaXR0ZXIgZm9yIGNoYWluaW5nLlxuICAgICAqL1xuICAgIHByb3RvLmVtaXRFdmVudCA9IGZ1bmN0aW9uIGVtaXRFdmVudChldnQsIGFyZ3MpIHtcbiAgICAgICAgdmFyIGxpc3RlbmVycyA9IHRoaXMuZ2V0TGlzdGVuZXJzQXNPYmplY3QoZXZ0KTtcbiAgICAgICAgdmFyIGxpc3RlbmVyO1xuICAgICAgICB2YXIgaTtcbiAgICAgICAgdmFyIGtleTtcbiAgICAgICAgdmFyIHJlc3BvbnNlO1xuXG4gICAgICAgIGZvciAoa2V5IGluIGxpc3RlbmVycykge1xuICAgICAgICAgICAgaWYgKGxpc3RlbmVycy5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XG4gICAgICAgICAgICAgICAgaSA9IGxpc3RlbmVyc1trZXldLmxlbmd0aDtcblxuICAgICAgICAgICAgICAgIHdoaWxlIChpLS0pIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gSWYgdGhlIGxpc3RlbmVyIHJldHVybnMgdHJ1ZSB0aGVuIGl0IHNoYWxsIGJlIHJlbW92ZWQgZnJvbSB0aGUgZXZlbnRcbiAgICAgICAgICAgICAgICAgICAgLy8gVGhlIGZ1bmN0aW9uIGlzIGV4ZWN1dGVkIGVpdGhlciB3aXRoIGEgYmFzaWMgY2FsbCBvciBhbiBhcHBseSBpZiB0aGVyZSBpcyBhbiBhcmdzIGFycmF5XG4gICAgICAgICAgICAgICAgICAgIGxpc3RlbmVyID0gbGlzdGVuZXJzW2tleV1baV07XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKGxpc3RlbmVyLm9uY2UgPT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlTGlzdGVuZXIoZXZ0LCBsaXN0ZW5lci5saXN0ZW5lcik7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICByZXNwb25zZSA9IGxpc3RlbmVyLmxpc3RlbmVyLmFwcGx5KHRoaXMsIGFyZ3MgfHwgW10pO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZSA9PT0gdGhpcy5fZ2V0T25jZVJldHVyblZhbHVlKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlTGlzdGVuZXIoZXZ0LCBsaXN0ZW5lci5saXN0ZW5lcik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogQWxpYXMgb2YgZW1pdEV2ZW50XG4gICAgICovXG4gICAgcHJvdG8udHJpZ2dlciA9IGFsaWFzKCdlbWl0RXZlbnQnKTtcblxuICAgIC8qKlxuICAgICAqIFN1YnRseSBkaWZmZXJlbnQgZnJvbSBlbWl0RXZlbnQgaW4gdGhhdCBpdCB3aWxsIHBhc3MgaXRzIGFyZ3VtZW50cyBvbiB0byB0aGUgbGlzdGVuZXJzLCBhcyBvcHBvc2VkIHRvIHRha2luZyBhIHNpbmdsZSBhcnJheSBvZiBhcmd1bWVudHMgdG8gcGFzcyBvbi5cbiAgICAgKiBBcyB3aXRoIGVtaXRFdmVudCwgeW91IGNhbiBwYXNzIGEgcmVnZXggaW4gcGxhY2Ugb2YgdGhlIGV2ZW50IG5hbWUgdG8gZW1pdCB0byBhbGwgZXZlbnRzIHRoYXQgbWF0Y2ggaXQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1N0cmluZ3xSZWdFeHB9IGV2dCBOYW1lIG9mIHRoZSBldmVudCB0byBlbWl0IGFuZCBleGVjdXRlIGxpc3RlbmVycyBmb3IuXG4gICAgICogQHBhcmFtIHsuLi4qfSBPcHRpb25hbCBhZGRpdGlvbmFsIGFyZ3VtZW50cyB0byBiZSBwYXNzZWQgdG8gZWFjaCBsaXN0ZW5lci5cbiAgICAgKiBAcmV0dXJuIHtPYmplY3R9IEN1cnJlbnQgaW5zdGFuY2Ugb2YgRXZlbnRFbWl0dGVyIGZvciBjaGFpbmluZy5cbiAgICAgKi9cbiAgICBwcm90by5lbWl0ID0gZnVuY3Rpb24gZW1pdChldnQpIHtcbiAgICAgICAgdmFyIGFyZ3MgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpO1xuICAgICAgICByZXR1cm4gdGhpcy5lbWl0RXZlbnQoZXZ0LCBhcmdzKTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogU2V0cyB0aGUgY3VycmVudCB2YWx1ZSB0byBjaGVjayBhZ2FpbnN0IHdoZW4gZXhlY3V0aW5nIGxpc3RlbmVycy4gSWYgYVxuICAgICAqIGxpc3RlbmVycyByZXR1cm4gdmFsdWUgbWF0Y2hlcyB0aGUgb25lIHNldCBoZXJlIHRoZW4gaXQgd2lsbCBiZSByZW1vdmVkXG4gICAgICogYWZ0ZXIgZXhlY3V0aW9uLiBUaGlzIHZhbHVlIGRlZmF1bHRzIHRvIHRydWUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSBuZXcgdmFsdWUgdG8gY2hlY2sgZm9yIHdoZW4gZXhlY3V0aW5nIGxpc3RlbmVycy5cbiAgICAgKiBAcmV0dXJuIHtPYmplY3R9IEN1cnJlbnQgaW5zdGFuY2Ugb2YgRXZlbnRFbWl0dGVyIGZvciBjaGFpbmluZy5cbiAgICAgKi9cbiAgICBwcm90by5zZXRPbmNlUmV0dXJuVmFsdWUgPSBmdW5jdGlvbiBzZXRPbmNlUmV0dXJuVmFsdWUodmFsdWUpIHtcbiAgICAgICAgdGhpcy5fb25jZVJldHVyblZhbHVlID0gdmFsdWU7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBGZXRjaGVzIHRoZSBjdXJyZW50IHZhbHVlIHRvIGNoZWNrIGFnYWluc3Qgd2hlbiBleGVjdXRpbmcgbGlzdGVuZXJzLiBJZlxuICAgICAqIHRoZSBsaXN0ZW5lcnMgcmV0dXJuIHZhbHVlIG1hdGNoZXMgdGhpcyBvbmUgdGhlbiBpdCBzaG91bGQgYmUgcmVtb3ZlZFxuICAgICAqIGF1dG9tYXRpY2FsbHkuIEl0IHdpbGwgcmV0dXJuIHRydWUgYnkgZGVmYXVsdC5cbiAgICAgKlxuICAgICAqIEByZXR1cm4geyp8Qm9vbGVhbn0gVGhlIGN1cnJlbnQgdmFsdWUgdG8gY2hlY2sgZm9yIG9yIHRoZSBkZWZhdWx0LCB0cnVlLlxuICAgICAqIEBhcGkgcHJpdmF0ZVxuICAgICAqL1xuICAgIHByb3RvLl9nZXRPbmNlUmV0dXJuVmFsdWUgPSBmdW5jdGlvbiBfZ2V0T25jZVJldHVyblZhbHVlKCkge1xuICAgICAgICBpZiAodGhpcy5oYXNPd25Qcm9wZXJ0eSgnX29uY2VSZXR1cm5WYWx1ZScpKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fb25jZVJldHVyblZhbHVlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogRmV0Y2hlcyB0aGUgZXZlbnRzIG9iamVjdCBhbmQgY3JlYXRlcyBvbmUgaWYgcmVxdWlyZWQuXG4gICAgICpcbiAgICAgKiBAcmV0dXJuIHtPYmplY3R9IFRoZSBldmVudHMgc3RvcmFnZSBvYmplY3QuXG4gICAgICogQGFwaSBwcml2YXRlXG4gICAgICovXG4gICAgcHJvdG8uX2dldEV2ZW50cyA9IGZ1bmN0aW9uIF9nZXRFdmVudHMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9ldmVudHMgfHwgKHRoaXMuX2V2ZW50cyA9IHt9KTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogUmV2ZXJ0cyB0aGUgZ2xvYmFsIHtAbGluayBFdmVudEVtaXR0ZXJ9IHRvIGl0cyBwcmV2aW91cyB2YWx1ZSBhbmQgcmV0dXJucyBhIHJlZmVyZW5jZSB0byB0aGlzIHZlcnNpb24uXG4gICAgICpcbiAgICAgKiBAcmV0dXJuIHtGdW5jdGlvbn0gTm9uIGNvbmZsaWN0aW5nIEV2ZW50RW1pdHRlciBjbGFzcy5cbiAgICAgKi9cbiAgICBFdmVudEVtaXR0ZXIubm9Db25mbGljdCA9IGZ1bmN0aW9uIG5vQ29uZmxpY3QoKSB7XG4gICAgICAgIGV4cG9ydHMuRXZlbnRFbWl0dGVyID0gb3JpZ2luYWxHbG9iYWxWYWx1ZTtcbiAgICAgICAgcmV0dXJuIEV2ZW50RW1pdHRlcjtcbiAgICB9O1xuXG4gICAgLy8gRXhwb3NlIHRoZSBjbGFzcyBlaXRoZXIgdmlhIEFNRCwgQ29tbW9uSlMgb3IgdGhlIGdsb2JhbCBvYmplY3RcbiAgICBpZiAodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKSB7XG4gICAgICAgIGRlZmluZShmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gRXZlbnRFbWl0dGVyO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZW9mIG1vZHVsZSA9PT0gJ29iamVjdCcgJiYgbW9kdWxlLmV4cG9ydHMpe1xuICAgICAgICBtb2R1bGUuZXhwb3J0cyA9IEV2ZW50RW1pdHRlcjtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGV4cG9ydHMuRXZlbnRFbWl0dGVyID0gRXZlbnRFbWl0dGVyO1xuICAgIH1cbn0uY2FsbCh0aGlzKSk7XG4iLCIoIGZ1bmN0aW9uKCAkICkge1xuXG4gICAgdmFyIE9yZGVybHkgPSBmdW5jdGlvbiggJGVsZW1lbnRzLCBvcHRpb25zICkge1xuICAgICAgICB0aGlzLl9faW5pdCggJGVsZW1lbnRzLCBvcHRpb25zICk7XG4gICAgfTtcblxuICAgIHZhciBvID0gT3JkZXJseSwgcCA9IG8ucHJvdG90eXBlO1xuXG4gICAgby5jb3VudGVyID0gMDtcblxuICAgIC8vIC0tIENvbnN0cnVjdG9yIC0tXG5cbiAgICBwLl9faW5pdCA9IGZ1bmN0aW9uKCAkZWxlbWVudHMsIG9wdGlvbnMgKSB7XG4gICAgICAgIHRoaXMuJGVsZW1lbnRzID0gJGVsZW1lbnRzO1xuICAgICAgICB0aGlzLm9wdGlvbnMgICA9ICQuZXh0ZW5kKCB7fSwgdGhpcy5kZWZhdWx0cywgb3B0aW9ucyApO1xuICAgIH07XG5cbiAgICBwLmRlZmF1bHRzID0ge1xuICAgICAgICByZXNldEhlaWdodDogJycgLy8gZWcuICdhdXRvJywgJzM2cHgnIC4uLlxuICAgIH07XG5cbiAgICAvLyAtLSBFdmVudCBIYW5kbGVycyAtLVxuXG4gICAgcC5hdHRhY2ggPSBmdW5jdGlvbigpIHtcbiAgICAgICAgaWYgKCB0aGlzLmF0dGFjaGVkID09PSB1bmRlZmluZWQgKSB7XG4gICAgICAgICAgICAkKCB3aW5kb3cgKS5vbiggJ3Jlc2l6ZScsIHRoaXMuaGFuZGxlcnMoKS5yZXNpemUgKTtcblxuICAgICAgICAgICAgdGhpcy5hdHRhY2hlZCA9IHRydWU7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgcC5oYW5kbGVycyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgdGhhdCA9IHRoaXM7XG5cbiAgICAgICAgcmV0dXJuIHsgcmVzaXplOiBmdW5jdGlvbiggZSApIHtcbiAgICAgICAgICAgIHRoYXQuX2VhY2hSb3coIGZ1bmN0aW9uKCAkZWxlbWVudHMgKSB7XG4gICAgICAgICAgICAgICAgdGhhdC5fcmVzaXplRWxlbWVudHMoICRlbGVtZW50cyApO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH19O1xuICAgIH07XG5cbiAgICAvLyAtLSBQcml2YXRlKC1pc2gpIC0tXG5cbiAgICBwLl9jb2x1bW5Db3VudCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgbGFzdFBvcyA9IDAsIHBvcyA9IDAsIGNvdW50ID0gMDtcblxuICAgICAgICB0aGlzLiRlbGVtZW50cy5lYWNoKCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHBvcyA9ICQoIHRoaXMgKS5vZmZzZXQoKS5sZWZ0LCBjb3VudCArPSAxO1xuXG4gICAgICAgICAgICBpZiAoIHBvcyA8PSBsYXN0UG9zICYmIGxhc3RQb3MgIT09IDAgKSB7XG4gICAgICAgICAgICAgICAgY291bnQgLT0gMTsgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBsYXN0UG9zID0gcG9zO1xuICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4gY291bnQ7XG4gICAgfTtcblxuICAgIHAuX2VhY2hSb3cgPSBmdW5jdGlvbiggY2FsbGJhY2sgKSB7XG4gICAgICAgIHZhciBkID0gdGhpcy5fZGltZW5zaW9ucygpO1xuXG4gICAgICAgIGZvciAoIHZhciBzdGFydCwgJHJvdywgaSA9IDA7IGkgPCBkLnI7IGkrKyApIHtcbiAgICAgICAgICAgIHN0YXJ0ID0gZC5jICogaTtcbiAgICAgICAgICAgICRyb3cgID0gdGhpcy4kZWxlbWVudHMuc2xpY2UoIHN0YXJ0LCBzdGFydCArIGQuYyApO1xuXG4gICAgICAgICAgICBjYWxsYmFjayggJHJvdywgaSApO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIHAuX2RpbWVuc2lvbnMgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIGNvbHVtbnMgPSB0aGlzLl9jb2x1bW5Db3VudCgpXG4gICAgICAgICAgLCByb3dzICAgID0gTWF0aC5jZWlsKCB0aGlzLiRlbGVtZW50cy5sZW5ndGggLyBjb2x1bW5zICk7XG5cbiAgICAgICAgcmV0dXJuIHsgYzogY29sdW1ucywgcjogcm93cyB9O1xuICAgIH07XG5cbiAgICBwLl9yZXNpemVFbGVtZW50cyA9IGZ1bmN0aW9uKCAkZWxlbWVudHMgKSB7XG4gICAgICAgIHZhciBoZWlnaHQgID0gdGhpcy5fbWF4SGVpZ2h0KCAkZWxlbWVudHMgKVxuICAgICAgICAgICwgb3B0aW9ucyA9IHRoaXMub3B0aW9ucztcblxuICAgICAgICAkZWxlbWVudHMuZWFjaCggZnVuY3Rpb24oIGksIGVsZW1lbnQgKSB7XG4gICAgICAgICAgICAkKCBlbGVtZW50ICkuY3NzKCAnaGVpZ2h0JywgaGVpZ2h0ICk7XG4gICAgICAgICAgICAkKCBlbGVtZW50ICkudHJpZ2dlciggJ29yZGVybHkucmVzaXplJywgW1xuICAgICAgICAgICAgICAgIGVsZW1lbnRcbiAgICAgICAgICAgICAgLCBoZWlnaHRcbiAgICAgICAgICAgICAgLCBpXG4gICAgICAgICAgICAgICwgJGVsZW1lbnRzLmxlbmd0aFxuICAgICAgICAgICAgICAsIG9wdGlvbnNcbiAgICAgICAgICAgIF0pO1xuICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgcC5fbWF4SGVpZ2h0ID0gZnVuY3Rpb24oICRlbGVtZW50cyApIHtcbiAgICAgICAgdmFyIHZhbHVlLCBjdXJyZW50LCBtYXggPSAwLCBvcHRpb25zID0gdGhpcy5vcHRpb25zLCBib3g7XG5cbiAgICAgICAgJGVsZW1lbnRzLmVhY2goIGZ1bmN0aW9uKCBpLCBlbGVtZW50ICkge1xuICAgICAgICAgICAgJCggZWxlbWVudCApLnRyaWdnZXIoICdvcmRlcmx5LnJlc2V0JywgW1xuICAgICAgICAgICAgICAgIGVsZW1lbnRcbiAgICAgICAgICAgICAgLCBvcHRpb25zLnJlc2V0SGVpZ2h0XG4gICAgICAgICAgICAgICwgaVxuICAgICAgICAgICAgICAsICRlbGVtZW50cy5sZW5ndGhcbiAgICAgICAgICAgICAgLCBvcHRpb25zXG4gICAgICAgICAgICBdKTtcblxuICAgICAgICAgICAgJCggZWxlbWVudCApLmNzcyggJ2hlaWdodCcsIG9wdGlvbnMucmVzZXRIZWlnaHQgKTtcbiAgICAgICAgICAgIGJveCAgICAgPSBlbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgICAgICAgY3VycmVudCA9IGJveC5ib3R0b20gLSBib3gudG9wO1xuXG4gICAgICAgICAgICBpZiAoIGN1cnJlbnQgPiBtYXggKSB7XG4gICAgICAgICAgICAgICAgbWF4ID0gY3VycmVudDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgdmFsdWUgPSBNYXRoLnJvdW5kKCBtYXggKS50b1N0cmluZygpOyAvLyBicm93c2VyIGNvbnNpc3RlbnQgcm91bmRpbmdcblxuICAgICAgICByZXR1cm4gdmFsdWUgKz0gJ3B4JztcbiAgICB9O1xuXG4gICAgLy8gLS0galF1ZXJ5IFBsdWdpbiAtLVxuXG4gICAgdmFyIGcgPSB7fTtcblxuICAgIGcuX2RlbGVnYXRlID0gZnVuY3Rpb24oIG9wdGlvbnMgKSB7XG4gICAgICAgIHZhciBtZXRob2QgPSAnXycgKyAoIG9wdGlvbnMgJiYgb3B0aW9ucy5tZXRob2QgfHwgJ3JlZ2lzdGVyJyApXG4gICAgICAgICAgLCBtICAgICAgPSBnW21ldGhvZF07XG5cbiAgICAgICAgbS5jYWxsKCB0aGlzLCBvcHRpb25zICk7XG4gICAgfTtcblxuICAgIC8vIENhbGwgZm9yIGVhY2ggc3BlY2lmaWMgY29sbGVjdGlvbiBvZiBlbGVtZW50cyB0byBhbGlnbiBwZXIgcm93LlxuXG4gICAgZy5fcmVnaXN0ZXIgPSBmdW5jdGlvbiggb3B0aW9ucyApIHtcbiAgICAgICAgdmFyIG8gPSBuZXcgT3JkZXJseSggdGhpcywgb3B0aW9ucyApO1xuXG4gICAgICAgIG8uYXR0YWNoKCk7XG4gICAgICAgIG8uaGFuZGxlcnMoKS5yZXNpemUoKTtcbiAgICB9O1xuXG4gICAgLy8gQ2FsbCBvbiBhIGNvbGxlY3Rpb24gb2YgcGFyZW50IGNvbnRhaW5lcnMuIEVhY2ggZGlyZWN0IGNoaWxkIGVsZW1lbnRcbiAgICAvLyB3aWxsIGJlIGdpdmVuIG9yZGVybHkoKS5cblxuICAgIGcuX2NoaWxkcmVuID0gZnVuY3Rpb24oIG9wdGlvbnMgKSB7XG4gICAgICAgIHZhciBsZW5ndGggID0gdGhpc1swXS5jaGlsZHJlbi5sZW5ndGhcbiAgICAgICAgICAsIGNvdW50ZXIgPSBvLmNvdW50ZXIrKzsgLy8gZW5zdXJlcyB1bmlxdWUgc2VsZWN0b3JzXG5cbiAgICAgICAgZy5fY2hpbGRyZW5EYXRhLmNhbGwoIHRoaXMsIGNvdW50ZXIgKTtcbiAgICAgICAgZy5fcmVnaXN0ZXJDaGlsZHJlbiggbGVuZ3RoLCBjb3VudGVyLCBvcHRpb25zICk7XG4gICAgICAgIGcuX3JlZ2lzdGVyLmNhbGwoIHRoaXMsIG9wdGlvbnMgKTtcbiAgICB9O1xuXG4gICAgZy5fY2hpbGRyZW5EYXRhID0gZnVuY3Rpb24oIGNvdW50ZXIgKSB7XG4gICAgICAgIHRoaXMuZWFjaCggZnVuY3Rpb24oIGksIGVsZW1lbnQgKSB7XG4gICAgICAgICAgICAkKCBlbGVtZW50LmNoaWxkcmVuICkuZWFjaCggZnVuY3Rpb24oIGksIGNoaWxkICkge1xuICAgICAgICAgICAgICAgICQoIGNoaWxkICkuYXR0ciggJ2RhdGEtb3JkZXJseScsIGNvdW50ZXIgKyAnOicgKyBpICk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgIGcuX3JlZ2lzdGVyQ2hpbGRyZW4gPSBmdW5jdGlvbiggbGVuZ3RoLCBjb3VudGVyLCBvcHRpb25zICkge1xuICAgICAgICBmb3IgKCB2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKyApIHtcbiAgICAgICAgICAgIGcuX3JlZ2lzdGVyLmNhbGwoIGcuX2ZpbmQoIGNvdW50ZXIsIGkgKSwgb3B0aW9ucyApO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIGcuX2ZpbmQgPSBmdW5jdGlvbiggY291bnRlciwgaSApIHtcbiAgICAgICAgcmV0dXJuICQoICdbZGF0YS1vcmRlcmx5PVwiJyArIGNvdW50ZXIgKyAnOicgKyBpICsgJ1wiXScgKTtcbiAgICB9O1xuXG4gICAgLy8gLS0tXG5cbiAgICAkLmZuLm9yZGVybHkgPSBmdW5jdGlvbiggb3B0aW9ucyApIHtcbiAgICAgICAgaWYgKCB0aGlzLmxlbmd0aCA+IDAgKSB7XG4gICAgICAgICAgICBnLl9kZWxlZ2F0ZS5jYWxsKCB0aGlzLCBvcHRpb25zICk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuXG59KSggalF1ZXJ5ICk7XG4iLCJ2YXIgaW1hZ2VzTG9hZGVkID0gcmVxdWlyZSgnaW1hZ2VzbG9hZGVkJyk7XG5cbihmdW5jdGlvbigkKSB7XG4gIFxuICAvKioqXG4gICAqIE1haW5cbiAgICoqKi9cbiAgIFxuICB2YXIgVW5pZm9ybVRodW1icyA9IGZ1bmN0aW9uKCRlbGUsIHNldHRpbmdzKXtcbiAgICB0aGlzLiRlbGUgPSAkZWxlO1xuICAgIHRoaXMuc2V0dGluZ3MgPSBzZXR0aW5ncztcbiAgICBcbiAgICB0aGlzLmZvcm1hdGVyID0gbmV3IFVuaWZvcm1UaHVtYnNGb3JtYXRlcih0aGlzLiRlbGUsIHRoaXMuc2V0dGluZ3MpO1xuICAgIHRoaXMuZml0dGVyID0gbmV3IFVuaWZvcm1UaHVtYnNGaXR0ZXIodGhpcy4kZWxlLCB0aGlzLnNldHRpbmdzKTtcbiAgICB0aGlzLmltYWdlTG9hZGVkID0gaW1hZ2VzTG9hZGVkKHRoaXMuJGVsZSk7XG4gICAgXG4gICAgdGhpcy5hZGRFdmVudEhhbmRsZXJzKCk7XG4gICAgdGhpcy5oaWRlSW1hZ2VzKCk7XG4gIH07XG4gIFxuICBVbmlmb3JtVGh1bWJzLnByb3RvdHlwZS5hZGRFdmVudEhhbmRsZXJzID0gZnVuY3Rpb24oKXtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgXG4gICAgdGhpcy5pbWFnZUxvYWRlZC5vbignZG9uZScsIGZ1bmN0aW9uKCl7XG4gICAgICBzZWxmLmZvcm1hdGVyLnNldEltYWdlRm9ybWF0KCk7XG4gICAgICBzZWxmLmZpdHRlci5zZXRJbWFnZUZpdCgpO1xuICAgICAgc2VsZi5zaG93SW1hZ2VzKCk7XG4gICAgICBzZWxmLiRlbGUudHJpZ2dlcigndXRfaW1hZ2VMb2FkZWQnKTtcbiAgICB9KTtcbiAgICBcbiAgICAvLyByZXNpemUgaW1hZ2VzIG9uIHdpbmRvdyByZXNpemVcbiAgICB2YXIgdGltZW91dDtcbiAgICAkKHdpbmRvdykucmVzaXplKGZ1bmN0aW9uKCkge1xuICAgICAgaWYgKHRpbWVvdXQpIHtcbiAgICAgICAgY2xlYXJUaW1lb3V0KHRpbWVvdXQpO1xuICAgICAgfVxuICAgICAgdGltZW91dCA9IHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgIHNlbGYuZm9ybWF0ZXIuc2V0SW1hZ2VGb3JtYXQoKTtcbiAgICAgICAgc2VsZi5maXR0ZXIuc2V0SW1hZ2VGaXQoKTtcbiAgICAgIH0sIDEwMCk7XG4gICAgfSk7XG4gIH07XG4gIFxuICBVbmlmb3JtVGh1bWJzLnByb3RvdHlwZS5oaWRlSW1hZ2VzID0gZnVuY3Rpb24oKXtcbiAgICB0aGlzLiRlbGUuY3NzKHtcbiAgICAgIG9wYWNpdHk6IDAsXG4gICAgICBvdmVyZmxvdzogJ2hpZGRlbidcbiAgICB9KTtcbiAgfTtcbiAgXG4gIFVuaWZvcm1UaHVtYnMucHJvdG90eXBlLnNob3dJbWFnZXMgPSBmdW5jdGlvbigpe1xuICAgIHRoaXMuJGVsZS5mYWRlVG8oOTAwLCAxKTtcbiAgfTtcbiAgXG4gIC8qKipcbiAgICogSW1hZ2UgZm9ybWF0ZXJcbiAgICoqKi9cbiAgIFxuICB2YXIgVW5pZm9ybVRodW1ic0Zvcm1hdGVyID0gZnVuY3Rpb24oJHdyYXBwZXIsIHNldHRpbmdzKXtcbiAgICB0aGlzLiR3cmFwcGVyID0gJHdyYXBwZXI7XG4gICAgdGhpcy5zZXR0aW5ncyA9IHNldHRpbmdzO1xuICAgIHRoaXMucmF0aW8gPSB0aGlzLmdldFJhdGlvKCk7XG4gIH07XG4gIFxuICBVbmlmb3JtVGh1bWJzRm9ybWF0ZXIucHJvdG90eXBlLnNldEltYWdlRm9ybWF0ID0gZnVuY3Rpb24oKXtcbiAgICB2YXIgd2lkdGhSYXRpbyA9IHRoaXMuJHdyYXBwZXIud2lkdGgoKSAvIHRoaXMucmF0aW8ud2lkdGg7XG4gICAgdmFyIGhlaWdodFJhdGlvID0gd2lkdGhSYXRpbyAqIHRoaXMucmF0aW8uaGVpZ2h0O1xuICAgIHRoaXMuJHdyYXBwZXIuaGVpZ2h0KGhlaWdodFJhdGlvKTtcbiAgfTtcbiAgXG4gIFVuaWZvcm1UaHVtYnNGb3JtYXRlci5wcm90b3R5cGUuZ2V0UmF0aW8gPSBmdW5jdGlvbigpe1xuICAgIHZhciByYXRpb1N0ciA9IHRoaXMuX2dldFJhdGlvU3RyaW5nKCk7XG4gICAgcmV0dXJuIHRoaXMuX2dldFJhdGlvRnJvbVN0cmluZyhyYXRpb1N0cik7XG4gIH07XG4gIFxuICBVbmlmb3JtVGh1bWJzRm9ybWF0ZXIucHJvdG90eXBlLl9nZXRSYXRpb1N0cmluZyA9IGZ1bmN0aW9uKCl7XG4gICAgc3dpdGNoICh0aGlzLnNldHRpbmdzLmZvcm1hdCkge1xuICAgICAgY2FzZSAnc3F1YXJlJzpcbiAgICAgICAgcmV0dXJuICcxOjEnO1xuICAgICAgY2FzZSAnbGFuZHNjYXBlJzpcbiAgICAgICAgcmV0dXJuIHRoaXMuc2V0dGluZ3MubGFuZHNjYXBlUmF0aW87XG4gICAgICBjYXNlICdwb3J0cmFpdCc6XG4gICAgICAgIHJldHVybiB0aGlzLnNldHRpbmdzLnBvcnRyYWl0UmF0aW87XG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gdGhpcy5zZXR0aW5ncy5yYXRpbztcbiAgICB9XG4gIH07XG4gIFxuICBVbmlmb3JtVGh1bWJzRm9ybWF0ZXIucHJvdG90eXBlLl9nZXRSYXRpb0Zyb21TdHJpbmcgPSBmdW5jdGlvbihyYXRpb1N0cil7XG4gICAgdmFyIHJhdGlvQXJyID0gcmF0aW9TdHIuc3BsaXQoJzonKTtcbiAgICByZXR1cm4ge1xuICAgICAgIHdpZHRoOiByYXRpb0FyclswXSxcbiAgICAgIGhlaWdodDogcmF0aW9BcnJbMV1cbiAgICB9O1xuICB9O1xuICBcbiAgLyoqKlxuICAgKiBJbWFnZSBmaXR0ZXJcbiAgICoqKi9cbiAgXG4gIHZhciBVbmlmb3JtVGh1bWJzRml0dGVyID0gZnVuY3Rpb24oJHdyYXBwZXIsIHNldHRpbmdzKXtcbiAgICB0aGlzLiR3cmFwcGVyID0gJHdyYXBwZXI7XG4gICAgdGhpcy4kaW1hZ2UgPSB0aGlzLiR3cmFwcGVyLmZpbmQoJ2ltZycpO1xuICAgIHRoaXMuc2V0dGluZ3MgPSBzZXR0aW5ncztcbiAgICB0aGlzLndyYXBwZXJSYXRpbztcbiAgICB0aGlzLmltYWdlUmF0aW87XG4gICAgdGhpcy5pbWFnZU5hdHVyYWxXaWR0aDtcbiAgICB0aGlzLmltYWdlTmF0dXJhbEhlaWdodDtcbiAgfTtcbiAgXG4gIFVuaWZvcm1UaHVtYnNGaXR0ZXIucHJvdG90eXBlLnNldEltYWdlRml0ID0gZnVuY3Rpb24oKXtcbiAgICB0aGlzLl9yZXNldEltYWdlQ1NTKCk7XG4gICAgc3dpdGNoICh0aGlzLnNldHRpbmdzLmZpdCkge1xuICAgICAgY2FzZSAnY3JvcCc6XG4gICAgICAgIHRoaXMuX2Nyb3BJbWFnZSgpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ3NjYWxlJzpcbiAgICAgICAgdGhpcy5fc2NhbGVJbWFnZSgpO1xuICAgICAgICBicmVhaztcbiAgICB9XG4gICAgdGhpcy5fYWxpZ25JbWFnZSgpO1xuICB9O1xuICBcbiAgVW5pZm9ybVRodW1ic0ZpdHRlci5wcm90b3R5cGUuX2Nyb3BJbWFnZSA9IGZ1bmN0aW9uKCl7XG4gICAgaWYodGhpcy5faW1hZ2VSYXRpbygpID4gdGhpcy5fd3JhcHBlclJhdGlvKCkpe1xuICAgICAgdGhpcy5fZml0SG9yaXpvbnRhbCgpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9maXRWZXJ0aWNhbCgpO1xuICAgIH1cbiAgfTtcbiAgXG4gIFVuaWZvcm1UaHVtYnNGaXR0ZXIucHJvdG90eXBlLl9zY2FsZUltYWdlID0gZnVuY3Rpb24oKXtcbiAgICBpZih0aGlzLl9pbWFnZVJhdGlvKCkgPiB0aGlzLl93cmFwcGVyUmF0aW8oKSl7XG4gICAgICB0aGlzLl9maXRWZXJ0aWNhbCgpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9maXRIb3Jpem9udGFsKCk7XG4gICAgfVxuICB9O1xuICBcbiAgVW5pZm9ybVRodW1ic0ZpdHRlci5wcm90b3R5cGUuX2ZpdEhvcml6b250YWwgPSBmdW5jdGlvbigpIHtcbiAgICBpZiAodGhpcy5fZ2V0TmF0dXJhbEhlaWdodCh0aGlzLiRpbWFnZSkgPj0gdGhpcy4kd3JhcHBlci5oZWlnaHQoKSkge1xuICAgICAgdGhpcy4kaW1hZ2UuaGVpZ2h0KHRoaXMuJHdyYXBwZXIuaGVpZ2h0KCkpO1xuICAgIH1cbiAgfTtcbiAgXG4gIFVuaWZvcm1UaHVtYnNGaXR0ZXIucHJvdG90eXBlLl9maXRWZXJ0aWNhbCA9IGZ1bmN0aW9uKCkge1xuICAgIGlmICh0aGlzLl9nZXROYXR1cmFsV2lkdGgodGhpcy4kaW1hZ2UpID49IHRoaXMuJHdyYXBwZXIud2lkdGgoKSkge1xuICAgICAgdGhpcy4kaW1hZ2Uud2lkdGgodGhpcy4kd3JhcHBlci53aWR0aCgpKTtcbiAgICB9XG4gIH07XG5cbiAgVW5pZm9ybVRodW1ic0ZpdHRlci5wcm90b3R5cGUuX2ltYWdlUmF0aW8gPSBmdW5jdGlvbigpe1xuICAgIC8vIGNhY2hlIHRoZSBpbWFnZXMgcmF0aW8gYmVjYXVzZSB3ZSBkb24ndCBuZWVkIHRvIGNhbGN1bGF0ZSBpdCBldmVyeSB0aW1lXG4gICAgdGhpcy5pbWFnZVJhdGlvID0gdGhpcy5pbWFnZVJhdGlvIHx8IHRoaXMuX2dldE5hdHVyYWxXaWR0aCh0aGlzLiRpbWFnZSkgLyB0aGlzLl9nZXROYXR1cmFsSGVpZ2h0KHRoaXMuJGltYWdlKTtcbiAgICByZXR1cm4gdGhpcy5pbWFnZVJhdGlvO1xuICB9O1xuXG4gIFVuaWZvcm1UaHVtYnNGaXR0ZXIucHJvdG90eXBlLl93cmFwcGVyUmF0aW8gPSBmdW5jdGlvbigpe1xuICAgIC8vIGNhY2hlIHRoZSB3cmFwcGVycyByYXRpbyBiZWNhdXNlIHdlIGRvbid0IG5lZWQgdG8gY2FsY3VsYXRlIGl0IGV2ZXJ5IHRpbWVcbiAgICB0aGlzLndyYXBwZXJSYXRpbyA9IHRoaXMud3JhcHBlclJhdGlvIHx8IHRoaXMuJHdyYXBwZXIud2lkdGgoKSAvIHRoaXMuJHdyYXBwZXIuaGVpZ2h0KCk7XG4gICAgcmV0dXJuIHRoaXMud3JhcHBlclJhdGlvO1xuICB9O1xuICBcbiAgVW5pZm9ybVRodW1ic0ZpdHRlci5wcm90b3R5cGUuX2FsaWduSW1hZ2UgPSBmdW5jdGlvbigpe1xuICAgIHZhciBzdHlsZSA9IHt9O1xuICAgIHN0eWxlLm1hcmdpbkxlZnQgPSAodGhpcy4kd3JhcHBlci53aWR0aCgpIC0gdGhpcy4kaW1hZ2Uud2lkdGgoKSkgLyAyO1xuICAgIHN3aXRjaCAodGhpcy5zZXR0aW5ncy5hbGlnbikge1xuICAgICAgY2FzZSAndG9wJzpcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdtaWRkbGUnOlxuICAgICAgICBzdHlsZS5tYXJnaW5Ub3AgPSAodGhpcy4kd3JhcHBlci5oZWlnaHQoKSAtIHRoaXMuJGltYWdlLmhlaWdodCgpKSAvIDI7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnYm90dG9tJzpcbiAgICAgICAgc3R5bGUubWFyZ2luVG9wID0gdGhpcy4kd3JhcHBlci5oZWlnaHQoKSAtIHRoaXMuJGltYWdlLmhlaWdodCgpO1xuICAgICAgICBicmVhaztcbiAgICB9XG4gICAgdGhpcy4kaW1hZ2UuY3NzKHN0eWxlKTtcbiAgfTtcbiAgXG4gIFVuaWZvcm1UaHVtYnNGaXR0ZXIucHJvdG90eXBlLl9nZXROYXR1cmFsSGVpZ2h0ID0gZnVuY3Rpb24oJGltYWdlKXtcbiAgICBpZiAoIXRoaXMuaW1hZ2VOYXR1cmFsSGVpZ2h0KSB7XG4gICAgICBpZiAoJGltYWdlLnByb3AoJ25hdHVyYWxIZWlnaHQnKSkge1xuICAgICAgICB0aGlzLmltYWdlTmF0dXJhbEhlaWdodCA9ICRpbWFnZS5wcm9wKCduYXR1cmFsSGVpZ2h0Jyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLmltYWdlTmF0dXJhbEhlaWdodCA9IHRoaXMuX2dldE5hdHVyYWxTaXplKCRpbWFnZSkuaGVpZ2h0O1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdGhpcy5pbWFnZU5hdHVyYWxIZWlnaHQ7XG4gIH07XG4gIFxuICBVbmlmb3JtVGh1bWJzRml0dGVyLnByb3RvdHlwZS5fZ2V0TmF0dXJhbFdpZHRoID0gZnVuY3Rpb24oJGltYWdlKXtcbiAgICBpZiAoIXRoaXMuaW1hZ2VOYXR1cmFsV2lkdGgpIHtcbiAgICAgIGlmICgkaW1hZ2UucHJvcCgnbmF0dXJhbFdpZHRoJykpIHtcbiAgICAgICAgdGhpcy5pbWFnZU5hdHVyYWxXaWR0aCA9ICRpbWFnZS5wcm9wKCduYXR1cmFsV2lkdGgnKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuaW1hZ2VOYXR1cmFsV2lkdGggPSB0aGlzLl9nZXROYXR1cmFsU2l6ZSgkaW1hZ2UpLndpZHRoO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdGhpcy5pbWFnZU5hdHVyYWxXaWR0aDtcbiAgfTtcbiAgXG4gIFVuaWZvcm1UaHVtYnNGaXR0ZXIucHJvdG90eXBlLl9nZXROYXR1cmFsU2l6ZSA9IGZ1bmN0aW9uKCRpbWFnZSl7XG4gICAgaWYgKCRpbWFnZS5wcm9wKCdzcmMnKSkge1xuICAgICAgdmFyIGltZyA9IG5ldyBJbWFnZSgpO1xuICAgICAgaW1nLnNyYyA9ICRpbWFnZS5wcm9wKCdzcmMnKTtcbiAgICAgIHJldHVybiB7IHdpZHRoOiBpbWcud2lkdGgsIGhlaWdodDogaW1nLmhlaWdodCB9O1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9O1xuICBcbiAgVW5pZm9ybVRodW1ic0ZpdHRlci5wcm90b3R5cGUuX3Jlc2V0SW1hZ2VDU1MgPSBmdW5jdGlvbigpe1xuICAgIHRoaXMuJGltYWdlLmNzcyh7XG4gICAgICBtYXhXaWR0aDogJ25vbmUnLFxuICAgICAgd2lkdGg6ICdhdXRvJyxcbiAgICAgIGhlaWdodDogJ2F1dG8nXG4gICAgfSk7XG4gIH07XG5cbiAgLyoqKlxuICAgKiBqUXVlcnktaWZ5XG4gICAqKiovXG4gICBcbiAgdmFyIHRodW1ibmFpbENvbXBsZXRlQ291bnQgPSAwO1xuICB2YXIgaW52b2tlRmluYWxUcmlnZ2VyID0gZnVuY3Rpb24oc2VsZil7XG4gICAgdGh1bWJuYWlsQ29tcGxldGVDb3VudCsrO1xuICAgIGlmICh0aHVtYm5haWxDb21wbGV0ZUNvdW50ID09PSBzZWxmLmxlbmd0aCkge1xuICAgICAgJChzZWxmKS5sYXN0KCkudHJpZ2dlcigndXRfY29tcGxldGUnKTtcbiAgICB9XG4gIH07XG4gICBcbiAgJC5mbi51bmlmb3JtX3RodW1ibmFpbHMgPSBmdW5jdGlvbiggb3B0aW9ucyApIHtcbiAgICAvLyBjb2xsZWN0IHNldHRpbmdzXG4gICAgdmFyIHNldHRpbmdzID0gJC5leHRlbmQoIHt9LCAkLmZuLnVuaWZvcm1fdGh1bWJuYWlscy5kZWZhdWx0cywgb3B0aW9ucyApO1xuICAgIC8vIGJ1aWxkIHBsdWdpblxuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICByZXR1cm4gc2VsZi5lYWNoKGZ1bmN0aW9uKCl7XG4gICAgICB2YXIgJGVsZSA9ICQodGhpcyk7XG4gICAgICAkZWxlLmRhdGEoJ191bmlmb3JtX3RodW1ibmFpbHMnLCBuZXcgVW5pZm9ybVRodW1icygkZWxlLCBzZXR0aW5ncykpO1xuICAgICAgJGVsZS5vbigndXRfaW1hZ2VMb2FkZWQnLCBmdW5jdGlvbigpe1xuICAgICAgICBpbnZva2VGaW5hbFRyaWdnZXIoc2VsZik7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfTtcbiAgXG4gIC8vIERlZmF1bHQgc2V0dGluZ3NcbiAgJC5mbi51bmlmb3JtX3RodW1ibmFpbHMuZGVmYXVsdHMgPSB7XG4gICAgICAgICAgICAgICBmaXQ6ICdjcm9wJywgICAvLyBjcm9wfHNjYWxlXG4gICAgICAgICAgICAgcmF0aW86ICcxOjEnLCAgICAvLyBhc3BlY3QgcmF0aW8gZm9yIGltYWdlIGNvbnRhaW5lclxuICAgICAgICAgICAgZm9ybWF0OiAncmF0aW8nLCAgLy8gcmF0aW98c3F1YXJlfGxhbmRzY2FwZXxwb3J0cmFpdFxuICAgICAgICAgICAgIGFsaWduOiAnbWlkZGxlJywgLy8gdG9wfG1pZGRsZXxib3R0b21cbiAgICBsYW5kc2NhcGVSYXRpbzogJzQ6MycsICAgIC8vIGRlZmF1bHQgcmF0aW8gZm9yIGxhbmRzY2FwZVxuICAgICBwb3J0cmFpdFJhdGlvOiAnMzo0JyAgICAgLy8gZGVmYXVsdCByYXRpbyBmb3IgcG9ydHJhaXRcbiAgfTtcblxufShqUXVlcnkpKTsiLCIvKlxuICBUT0RPOiBtYWtlIHByb3RvdHlwbGUgaW5oZXJpdGVuY2VcbiovXG5cbnZhciBEYXRhTW9kZWwgPSBmdW5jdGlvbiAob2JqLCBwcm9wZXJ0aWVzKSB7XG4gIHRoaXMub2JqID0gb2JqO1xuICB0aGlzLl9idWlsZF9wcm9wZXJ0aWVzKHByb3BlcnRpZXMpO1xufTtcblxuRGF0YU1vZGVsLnByb3RvdHlwZS5fYnVpbGRfcHJvcGVydGllcyA9IGZ1bmN0aW9uIChwcm9wZXJ0aWVzKSB7XG4gIHZhciBfdGhpcyA9IHRoaXM7XG4gIFxuICBmb3IgKHZhciBrZXkgaW4gcHJvcGVydGllcykge1xuICAgIGlmIChwcm9wZXJ0aWVzLmhhc093blByb3BlcnR5KGtleSkpIHtcbiAgICAgIF90aGlzLl9idWlsZF9wcm9wZXJ0eV9tZXRob2RzKGtleSwgcHJvcGVydGllc1trZXldKTtcbiAgICB9XG4gIH1cbn07XG5cbkRhdGFNb2RlbC5wcm90b3R5cGUuX2J1aWxkX3Byb3BlcnR5X21ldGhvZHMgPSBmdW5jdGlvbiAoa2V5LCBzZWxlY3Rvcikge1xuICB2YXIgc2VsZWN0b3Jfa2V5ID0ga2V5Kydfc2VsZWN0b3InO1xuICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcy5vYmosIHNlbGVjdG9yX2tleSwge1xuICAgIHZhbHVlOiBzZWxlY3RvclxuICB9KTtcbiAgXG4gIHZhciB2YWx1ZTtcbiAgdmFyIF90aGlzID0gdGhpcztcbiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMub2JqLCBrZXksIHtcbiAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9LFxuICAgIHNldDogZnVuY3Rpb24gKG5ld192YWx1ZSkge1xuICAgICAgaWYgKHZhbHVlICE9PSBuZXdfdmFsdWUpIHtcbiAgICAgICAgdmFsdWUgPSBuZXdfdmFsdWU7XG4gICAgICAgIF90aGlzLl91cGRhdGVfZWxlbWVudHMoc2VsZWN0b3IsIHZhbHVlKTtcbiAgICAgIH1cbiAgICB9XG4gIH0pO1xufTtcblxuRGF0YU1vZGVsLnByb3RvdHlwZS5fdXBkYXRlX2VsZW1lbnRzID0gZnVuY3Rpb24gKHNlbGVjdG9yLCB2YWx1ZSkge1xuICB2YXIgX3RoaXMgPSB0aGlzO1xuICAkKHNlbGVjdG9yKS5lYWNoKGZ1bmN0aW9uIChpLCBlbGVtZW50KSB7XG4gICAgX3RoaXMuX3NldF9lbGVtZW50X3ZhbHVlKGVsZW1lbnQsIHZhbHVlKTtcbiAgfSk7XG59O1xuXG5EYXRhTW9kZWwucHJvdG90eXBlLl9zZXRfZWxlbWVudF92YWx1ZSA9IGZ1bmN0aW9uIChlbGVtZW50LCB2YWx1ZSkge1xuICB2YXIgJGVsZW1lbnQgPSAkKGVsZW1lbnQpO1xuICBpZiAodGhpcy5faXNfaW5wdXQoZWxlbWVudCkpIHtcbiAgICAkZWxlbWVudC52YWwodmFsdWUpO1xuICB9IGVsc2Uge1xuICAgICRlbGVtZW50Lmh0bWwodmFsdWUpO1xuICB9XG59O1xuXG5EYXRhTW9kZWwucHJvdG90eXBlLl9pc19pbnB1dCA9IGZ1bmN0aW9uIChlbGVtZW50KSB7XG4gIHZhciB0YWdfbmFtZSA9IGVsZW1lbnQudGFnTmFtZS50b0xvd2VyQ2FzZSgpO1xuICByZXR1cm4gdGFnX25hbWUgPT09ICdpbnB1dCcgfHwgdGFnX25hbWUgPT09ICdzZWxlY3QnIHx8IHRhZ19uYW1lID09PSAndGV4dGFyZWEnO1xufTtcblxubW9kdWxlLmV4cG9ydHMgPSBEYXRhTW9kZWw7IiwiLypcbiAgVE9ETzogbWFrZSBwcm90b3R5cGxlIGluaGVyaXRlbmNlXG4qL1xuXG52YXIgRXZlbnRlciA9IGZ1bmN0aW9uIChjYWxsZXIpIHtcbiAgdGhpcy5jYWxsZXIgPSBjYWxsZXI7XG4gIHRoaXMuY2FsbGVyLl9ldmVudHMgPSB7fTtcbiAgdGhpcy5jYWxsZXIub24gPSB0aGlzLm9uO1xuICB0aGlzLmNhbGxlci5vZmYgPSB0aGlzLm9mZjtcbiAgdGhpcy5jYWxsZXIudHJpZ2dlciA9IHRoaXMudHJpZ2dlcjtcbn07XG4gXG4vLyB0aGlzID09PSBjYWxsZXIgbm90IEV2ZW50ZXJcbkV2ZW50ZXIucHJvdG90eXBlLm9uID0gZnVuY3Rpb24gKGV2ZW50LCBjYWxsYmFjaykge1xuICBpZiAoIXRoaXMuX2V2ZW50c1tldmVudF0pIHRoaXMuX2V2ZW50c1tldmVudF0gPSBbXTtcbiAgdGhpcy5fZXZlbnRzW2V2ZW50XS5wdXNoKGNhbGxiYWNrKTtcbiAgcmV0dXJuIHRoaXMuX2V2ZW50c1tldmVudF0ubGVuZ3RoIC0gMTtcbn07XG4gXG5FdmVudGVyLnByb3RvdHlwZS5vZmYgPSBmdW5jdGlvbiAoZXZlbnQsIGlkKSB7XG4gIGlmIChldmVudCAmJiBpZCkge1xuICAgIGlmICh0aGlzLl9ldmVudHNbZXZlbnRdW2lkXSkgdGhpcy5fZXZlbnRzW2V2ZW50XVtpZF0gPSBudWxsO1xuICB9IGVsc2UgaWYgKGV2ZW50KSB7XG4gICAgaWYgKHRoaXMuX2V2ZW50c1tldmVudF0pIHRoaXMuX2V2ZW50c1tldmVudF0gPSBudWxsO1xuICB9IGVsc2Uge1xuICAgIHRoaXMuX2V2ZW50cyA9IHt9O1xuICB9XG59O1xuIFxuRXZlbnRlci5wcm90b3R5cGUudHJpZ2dlciA9IGZ1bmN0aW9uIChldmVudCwgYXJncykge1xuICBpZiAodHlwZW9mIGFyZ3MgIT09ICdvYmplY3QnKSBhcmdzID0gW2FyZ3NdOyBcbiAgZm9yICh2YXIgaSBpbiB0aGlzLl9ldmVudHNbZXZlbnRdKSB7XG4gICAgdmFyIGUgPSB0aGlzLl9ldmVudHNbZXZlbnRdW2ldO1xuICAgIGlmICh0aGlzLl9ldmVudHNbZXZlbnRdLmhhc093blByb3BlcnR5KGkpICYmIHR5cGVvZiBlID09PSAnZnVuY3Rpb24nKSBlLmFwcGx5KHRoaXMsIGFyZ3MpO1xuICB9XG59O1xuIFxubW9kdWxlLmV4cG9ydHMgPSBFdmVudGVyOyIsIkJhbm5lciA9IHt9O1xuXG52YXIgJGJhbm5lciA9ICQoJ1tkYXRhLWJhbm5lcl0nKTtcblxuQmFubmVyLmluaXQgPSBmdW5jdGlvbiAoKSB7XG4gIGlmICgkYmFubmVyLmxlbmd0aCA+IDApIHtcbiAgICBCYW5uZXIuYWRkX2V2ZW50X2hhbmRsZXJzKCk7XG4gIH1cbn07XG5cbkJhbm5lci5hZGRfZXZlbnRfaGFuZGxlcnMgPSBmdW5jdGlvbiAoKSB7XG4gIC8vIFRoaXMgZXZlbnQgZmlyZXMgaW1tZWRpYXRlbHkgd2hlbiB0aGUgc2xpZGUgaW5zdGFuY2UgbWV0aG9kIGlzIGludm9rZWQuXG4gICRiYW5uZXIub24oJ3NsaWRlLmJzLmNhcm91c2VsJywgZnVuY3Rpb24gKGUpIHtcbiAgICB2YXIgJHJlbGF0ZWRfdGFyZ2V0ID0gJChlLnJlbGF0ZWRUYXJnZXQpO1xuICAgIC8vIFNldCB0aGUgZGF0YS1iYW5uZXIgYXR0ciB0byB0aGUgY3VycmVudCBzbGlkZXMgaW5kZXggc28gdGhhdCB3ZSBjYW4gZG8gYXdlc29tZSBzY3NzIHN0dWZmc1xuICAgICRiYW5uZXIuYXR0cignZGF0YS1iYW5uZXInLCAkcmVsYXRlZF90YXJnZXQuZGF0YSgnc2xpZGUnKSk7XG4gIH0pO1xuICBcbiAgLy8gVGhpcyBldmVudCBpcyBmaXJlZCB3aGVuIHRoZSBjYXJvdXNlbCBoYXMgY29tcGxldGVkIGl0cyBzbGlkZSB0cmFuc2l0aW9uLlxuICAkYmFubmVyLm9uKCdzbGlkLmJzLmNhcm91c2VsJywgZnVuY3Rpb24gKCkge1xuICB9KTtcbn07XG4gICAgXG5tb2R1bGUuZXhwb3J0cyA9IEJhbm5lcjsiLCJ2YXIgQ2FydEpTID0gcmVxdWlyZShcIi4vLi4vLi4vYm93ZXJfY29tcG9uZW50cy9zaG9waWZ5LWNhcnRqcy9kaXN0L2NhcnQuanNcIik7XG5cbnZhciBDYXJ0ID0ge307XG52YXIgbWVzc2FnZV9jb3VudCA9IDA7XG5cbi8vIENhcnQgdmFyc1xudmFyICRjYXJ0X2Rpc3BsYXlfZWxlID0gJCgnW2RhdGEtY2FydC1kaXNwbGF5XScpO1xudmFyICRjYXJ0X3RvdGFsX2VsZSA9ICQoJ1tkYXRhLWNhcnQtdG90YWxdJyk7XG52YXIgJGNhcnRfZm9ybV9lbGUgPSAkKEJzaWZ5LnNlbGVjdG9ycy5jYXJ0LmZvcm1fc2VsZWN0b3IpO1xudmFyICRjYXJ0X21lc3NhZ2VfZWxlID0gJChCc2lmeS5zZWxlY3RvcnMuY2FydC5tZXNzYWdlX3NlbGVjdG9yKTtcblxuLy8gcHJvZHVjdCB2YXJzXG5pZiAoQnNpZnkucHJvZHVjdCkge1xuICB2YXIgJHByb2R1Y3RfZm9ybV9lbGUgPSAkKEJzaWZ5LnNlbGVjdG9ycy5wcm9kdWN0LmZvcm1fc2VsZWN0b3IpO1xuICB2YXIgJHByb2R1Y3RfZm9ybV9idXR0b24gPSAkcHJvZHVjdF9mb3JtX2VsZS5maW5kKCdpbnB1dFt0eXBlPXN1Ym1pdF0nKTtcbiAgdmFyICRwcm9kdWN0X2Zvcm1fbWVzc2FnZV9lbGUgPSAkKEJzaWZ5LnNlbGVjdG9ycy5wcm9kdWN0LmZvcm1fbWVzc2FnZV9zZWxlY3Rvcik7XG59XG5cbi8vIFNldCB1cCBjYXJ0IGV2ZW50IGhhbmRsZXJzXG5DYXJ0LmluaXQgPSBmdW5jdGlvbiAoKSB7XG4gIFxuICAvLyBmaXJlZCB3aGVuIHRoZSBDYXJ0SlMgb2JqZWN0IGhhcyBmaW5pc2hlZCB1cGRhdGluZyB0aGUgY2FydFxuICAkKGRvY3VtZW50KS5vbignY2FydC5yZXF1ZXN0Q29tcGxldGUnLCBmdW5jdGlvbihldmVudCwgY2FydCkge1xuICAgIC8vIHVwZGF0ZSB0aGUgY2FydCBub3RlIGluIHRoZSBuYXZiYXJcbiAgICBDYXJ0LnVwZGF0ZV9jYXJ0X2Rpc3BsYXkoKTtcbiAgICBDYXJ0LnVwZGF0ZV9jYXJ0X3RhYmxlKCk7XG4gIH0pO1xuICBcbiAgLy8gQWpheCBhZGQgdG8gY2FydCBmcm9tIHByb2R1Y3QgdGVtcGxhdGVcbiAgaWYgKEJzaWZ5LnByb2R1Y3QpIHtcbiAgICAvLyBDYXB0dXJlIHRoZSBmb3JtIHN1Ym1pdFxuICAgICQoZG9jdW1lbnQpLm9uKCdzdWJtaXQnLCBCc2lmeS5zZWxlY3RvcnMucHJvZHVjdC5mb3JtX3NlbGVjdG9yLCBmdW5jdGlvbiAoZSkge1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgdmFyICRjdXJyZW50X3RhcmdldCA9ICQoZS5jdXJyZW50VGFyZ2V0KTtcbiAgICAgIENhcnQuYWRkX2l0ZW1fdG9fY2FydCgkY3VycmVudF90YXJnZXQpO1xuICAgIH0pO1xuICB9XG4gIFxuICAvLyByZW1vdmUgaXRlbSBmcm9tIGNhcnRcbiAgJChkb2N1bWVudCkub24oJ2NsaWNrJywgJ1tkYXRhLXJlbW92ZS1pdGVtXScsIGZ1bmN0aW9uIChlKSB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIHZhciAkY3VycmVudF90YXJnZXQgPSAkKGUuY3VycmVudFRhcmdldCk7XG4gICAgQ2FydC5yZW1vdmVfaXRlbV9mcm9tX2NhcnQoJGN1cnJlbnRfdGFyZ2V0KTtcbiAgfSk7XG59O1xuXG4vKlxuICBDYXJ0IG1ldGhvZHNcbiovXG5cbkNhcnQuYWRkX2l0ZW1fdG9fY2FydCA9IGZ1bmN0aW9uICgkY3VycmVudF90YXJnZXQpIHtcbiAgdmFyIHZhbHVlcyA9IENhcnQuZm9ybV92YWx1ZXMoJGN1cnJlbnRfdGFyZ2V0LnNlcmlhbGl6ZUFycmF5KCkpO1xuICB2YXIgcHJvcGVydGllcyA9IHt9OyAvLyBUT0RPOiBkZWFsIHdpdGggaXRlbSBwcm9wZXJ0aWVzIHdoZW4gYWRkaW5nIHRvIGNhcnRcbiAgXG4gIHZhciB2YXJpYW50ID0gQnNpZnkuZ2V0X3ZhcmlhbnRfYnlfaWQodmFsdWVzLmlkKTtcbiAgdmFyIGl0ZW1fdGl0bGUgPSBCc2lmeS5wcm9kdWN0LnRpdGxlICsgQnNpZnkudHJhbnNsYXRpb25zLnByb2R1Y3QuaXRlbV90aXRsZV9zZXBlcmF0b3IgKyB2YXJpYW50LnRpdGxlO1xuICBcbiAgLy8gdXBkYXRlIHRoZSB1c2VyIHRoYXQgd2UgYXJlIHdvcmtpbmcgb24gaXRcbiAgJHByb2R1Y3RfZm9ybV9idXR0b24udmFsKEJzaWZ5LnRyYW5zbGF0aW9ucy5wcm9kdWN0LmFkZGluZ190b19jYXJ0X2J1dHRvbl90ZXh0KTtcbiAgXG4gIC8vIGFkZCB0aGUgaXRlbSB0byB0aGUgY2FydFxuICBDYXJ0SlMuYWRkSXRlbSh2YWx1ZXMuaWQsIHZhbHVlcy5xdWFudGl0eSwgcHJvcGVydGllcywge1xuICAgIFwic3VjY2Vzc1wiIDogZnVuY3Rpb24gKGRhdGEsIHRleHRfc3RhdHVzLCBqcVhIUikge1xuICAgICAgXG4gICAgICAvLyBjcmVhdGUgYW5kIGRpc3BsYXkgY29tcGxldGVkIG1lc3NhZ2VcbiAgICAgIHZhciBtZXNzYWdlID0gQnNpZnkudHJhbnNsYXRpb25zLnByb2R1Y3QuYWZ0ZXJfcHJvZHVjdF9hZGRlZF9tZXNzYWdlX2h0bWwucmVwbGFjZSgnW2l0ZW1fdGl0bGVdJywgaXRlbV90aXRsZSk7XG4gICAgICBDYXJ0LnNob3dfbWVzc2FnZSgkcHJvZHVjdF9mb3JtX21lc3NhZ2VfZWxlLCAnc3VjY2VzcycsIG1lc3NhZ2UpO1xuICAgICAgXG4gICAgICAvLyB1cGRhdGUgYWRkIHRvIGNhcnQgYnV0dG9uIHRleHRcbiAgICAgICRwcm9kdWN0X2Zvcm1fYnV0dG9uLnZhbChCc2lmeS50cmFuc2xhdGlvbnMucHJvZHVjdC5hZGRlZF90b19jYXJ0X2J1dHRvbl90ZXh0KTtcbiAgICAgIFxuICAgIH0sXG4gICAgXCJlcnJvclwiOiBmdW5jdGlvbihqcVhIUiwgdGV4dF9zdGF0dXMsIGVycm9yX3Rocm93bikge1xuICAgICAgY29uc29sZS5sb2coJ1tFUlJPUl0gLSBBZGQgdG8gY2FydDonLCBqcVhIUiwgdGV4dF9zdGF0dXMsIGVycm9yX3Rocm93bik7XG4gICAgICBcbiAgICAgIC8vIGNyZWF0ZSBhbmQgZGlzcGxheSBlcnJvciBtZXNzYWdlXG4gICAgICB2YXIgbWVzc2FnZSA9IEJzaWZ5LnRyYW5zbGF0aW9ucy5wcm9kdWN0LmFmdGVyX3Byb2R1Y3RfYWRkZWRfZXJyb3JfbWVzc2FnZV9odG1sLnJlcGxhY2UoJ1tpdGVtX3RpdGxlXScsIGl0ZW1fdGl0bGUpLnJlcGxhY2UoJ1tlcnJvcl9tZXNzYWdlXScsIGVycm9yX3Rocm93bik7XG4gICAgICBDYXJ0LnNob3dfbWVzc2FnZSgkcHJvZHVjdF9mb3JtX21lc3NhZ2VfZWxlLCAnZXJyb3InLCBtZXNzYWdlKTtcbiAgICAgIFxuICAgICAgLy8gdXBkYXRlIGFkZCB0byBjYXJ0IGJ1dHRvbiB0ZXh0XG4gICAgICAkcHJvZHVjdF9mb3JtX2J1dHRvbi52YWwoQnNpZnkudHJhbnNsYXRpb25zLnByb2R1Y3QudW5hdmFpbGFibGVfYnV0dG9uX3RleHQpO1xuICAgIH1cbiAgfSk7XG59O1xuXG5DYXJ0LnJlbW92ZV9pdGVtX2Zyb21fY2FydCA9IGZ1bmN0aW9uICgkY3VycmVudF90YXJnZXQpIHtcbiAgdmFyICRjYXJ0X2l0ZW1fZWxlID0gJGN1cnJlbnRfdGFyZ2V0LmNsb3Nlc3QoQnNpZnkuc2VsZWN0b3JzLmNhcnQuaXRlbV9zZWxlY3Rvcik7XG4gIFxuICB2YXIgaXRlbSA9IENhcnQuZ2V0X2l0ZW1fYnlfaWQoJGNhcnRfaXRlbV9lbGUuZGF0YSgnY2FydC1pdGVtJykpO1xuICB2YXIgaXRlbV90aXRsZSA9IGl0ZW0ucHJvZHVjdF90aXRsZSArIEJzaWZ5LnRyYW5zbGF0aW9ucy5wcm9kdWN0Lml0ZW1fdGl0bGVfc2VwZXJhdG9yICsgaXRlbS52YXJpYW50X3RpdGxlO1xuICBcbiAgQ2FydEpTLnJlbW92ZUl0ZW0oJGN1cnJlbnRfdGFyZ2V0LmRhdGEoJ3JlbW92ZS1pdGVtJyksIHtcbiAgICBcInN1Y2Nlc3NcIjogZnVuY3Rpb24gKGRhdGEsIHRleHRfc3RhdHVzLCBqcVhIUikge1xuICAgICAgLy8gaGlkZSBpdGVtIHJvd1xuICAgICAgJGNhcnRfaXRlbV9lbGUuaGlkZSgpO1xuICAgICAgXG4gICAgICAvLyBTaG93IHVzZXIgYSBuaWNlIG1lc3NhZ2VcbiAgICAgIHZhciBtZXNzYWdlID0gQnNpZnkudHJhbnNsYXRpb25zLmNhcnQucmVtb3ZlX2l0ZW1fbWVzc2FnZS5yZXBsYWNlKCdbaXRlbV90aXRsZV0nLCBpdGVtX3RpdGxlKTtcbiAgICAgIENhcnQuc2hvd19tZXNzYWdlKCRjYXJ0X21lc3NhZ2VfZWxlLCAnc3VjY2VzcycsIG1lc3NhZ2UpO1xuICAgICAgXG4gICAgfSxcbiAgICBcImVycm9yXCI6IGZ1bmN0aW9uIChqcVhIUiwgdGV4dF9zdGF0dXMsIGVycm9yX3Rocm93bikge1xuICAgICAgY29uc29sZS5sb2coJ1tFUlJPUl0gLSBSZW1vdmUgaXRlbSBmcm9tIGNhcnQ6JywganFYSFIsIHRleHRfc3RhdHVzLCBlcnJvcl90aHJvd24pO1xuICAgICAgXG4gICAgICAvLyBTaG93IHVzZXIgYSBuaWNlIG1lc3NhZ2VcbiAgICAgIHZhciBtZXNzYWdlID0gQnNpZnkudHJhbnNsYXRpb25zLmNhcnQucmVtb3ZlX2l0ZW1fZXJyb3JfbWVzc2FnZS5yZXBsYWNlKCdbaXRlbV90aXRsZV0nLCBpdGVtX3RpdGxlKS5yZXBsYWNlKCdbZXJyb3JfbWVzc2FnZV0nLCBlcnJvcl90aHJvd24pO1xuICAgICAgQ2FydC5zaG93X21lc3NhZ2UoJGNhcnRfbWVzc2FnZV9lbGUsICdzdWNjZXNzJywgbWVzc2FnZSk7XG4gICAgfSBcbiAgfSk7XG59O1xuXG4vKlxuICBEaXNwbGF5IG1ldGhvZHNcbiovXG5cbi8vIFVwZGF0ZSBjYXJ0IGRpc3BsYXkgd2l0aCB0aGUgY3VycmVudCBjYXJ0IGRldGFpbHNcbkNhcnQudXBkYXRlX2NhcnRfZGlzcGxheSA9IGZ1bmN0aW9uICgpIHtcbiAgdmFyIGNhcnRfdG90YWxfcHJpY2UgPSBTaG9waWZ5LmZvcm1hdE1vbmV5KENhcnRKUy5jYXJ0LnRvdGFsX3ByaWNlLCBCc2lmeS5tb25leV9mb3JtYXRzLm1vbmV5Rm9ybWF0KTtcbiAgdmFyIGNhcnRfdG90YWxfcHJpY2Vfd2l0aF9jdXJyZW5jeSA9IFNob3BpZnkuZm9ybWF0TW9uZXkoQ2FydEpTLmNhcnQudG90YWxfcHJpY2UsIEJzaWZ5Lm1vbmV5X2Zvcm1hdHMubW9uZXlXaXRoQ3VycmVuY3lGb3JtYXQpO1xuICBcbiAgdmFyIGNhcnRfZGlzcGxheV90ZXh0ID0gQnNpZnkudHJhbnNsYXRpb25zLmNhcnQuY2FydF9kaXNwbGF5X3RleHQucmVwbGFjZSgnW2l0ZW1fY291bnRdJywgQ2FydEpTLmNhcnQuaXRlbV9jb3VudCkucmVwbGFjZSgnW2NhcnRfdG90YWxfcHJpY2VdJywgY2FydF90b3RhbF9wcmljZSkucmVwbGFjZSgnW2NhcnRfdG90YWxfcHJpY2Vfd2l0aF9jdXJyZW5jeV0nLCBjYXJ0X3RvdGFsX3ByaWNlX3dpdGhfY3VycmVuY3kpO1xuICAkY2FydF9kaXNwbGF5X2VsZS5odG1sKGNhcnRfZGlzcGxheV90ZXh0KTtcbiAgXG4gIHZhciBjYXJ0X3RvdGFsX3RleHQgPSBCc2lmeS50cmFuc2xhdGlvbnMuY2FydC5jYXJ0X3RvdGFsLnJlcGxhY2UoJ1tjYXJ0X3RvdGFsX3ByaWNlXScsIGNhcnRfdG90YWxfcHJpY2UpLnJlcGxhY2UoJ1tjYXJ0X3RvdGFsX3ByaWNlX3dpdGhfY3VycmVuY3ldJywgY2FydF90b3RhbF9wcmljZV93aXRoX2N1cnJlbmN5KTtcbiAgJGNhcnRfdG90YWxfZWxlLmh0bWwoY2FydF90b3RhbF90ZXh0KTtcbn07XG5cbi8vIGhpZGUgdGhlIGNhcnQgdGFibGUgaWYgdGhlIGNhcnQgaXMgZW1wdHlcbkNhcnQudXBkYXRlX2NhcnRfdGFibGUgPSBmdW5jdGlvbiAoKSB7XG4gIGlmIChDYXJ0SlMuY2FydC5pdGVtX2NvdW50ID09PSAwKSB7XG4gICAgJGNhcnRfZm9ybV9lbGUuaGlkZSgpO1xuICAgICRjYXJ0X21lc3NhZ2VfZWxlLnJlbW92ZUNsYXNzKCdoaWRkZW4nKS5odG1sKEJzaWZ5LnRyYW5zbGF0aW9ucy5jYXJ0LmVtcHR5X2NhcnRfdGV4dCk7XG4gIH1cbn07XG5cbi8vIHNob3cgYW5kIGhpZGUgZmVlZGJhY2sgbWVzYWdlcyBmb3IgY2FydCBhY3Rpb25zXG5DYXJ0LnNob3dfbWVzc2FnZSA9IGZ1bmN0aW9uICgkbWVzc2FnZV9lbGUsIG1lc3NhZ2VfY2xhc3MsIG1lc3NhZ2UpIHtcbiAgbWVzc2FnZV9jb3VudCsrO1xuICAkbWVzc2FnZV9lbGUucmVtb3ZlQ2xhc3MoJ2hpZGRlbicpLmh0bWwoJzxkaXYgY2xhc3M9XCJub3RlICcrbWVzc2FnZV9jbGFzcysnIG1lc3NhZ2UnK21lc3NhZ2VfY291bnQrJ1wiPicrbWVzc2FnZSsnPC9kaXY+Jyk7XG4gIENhcnQucmVtb3ZlX21lc3NhZ2UobWVzc2FnZV9jb3VudCk7XG59O1xuXG5DYXJ0LnJlbW92ZV9tZXNzYWdlID0gZnVuY3Rpb24gKG1lc3NhZ2VfaWQpIHtcbiAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgJCgnLm1lc3NhZ2UnK21lc3NhZ2VfaWQpLmZhZGVPdXQoZnVuY3Rpb24gKCkge1xuICAgICAgJCh0aGlzKS5yZW1vdmUoKTtcbiAgICB9KTtcbiAgfSwgQnNpZnkubWVzc2FnZV90aW1lb3V0KTtcbn07XG5cbi8vIGNvbnZlcnQgalF1ZXJ5IHNlcmlhbGl6ZUFycmF5IHJlc3VsdHMgaW50byBzb21ldGhpbmcgdXNlZnVsIFxuQ2FydC5mb3JtX3ZhbHVlcyA9IGZ1bmN0aW9uIChhcnIpIHtcbiAgdmFyIHZhbHMgPSB7fTtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcnIubGVuZ3RoOyBpKyspIHtcbiAgICB2YXIgaXRlbSA9IGFycltpXTtcbiAgICB2YWxzW2l0ZW0ubmFtZV0gPSBpdGVtLnZhbHVlO1xuICB9XG4gIHJldHVybiB2YWxzO1xufTtcblxuLypcbiAgQ2FydCB1dGlsaXR5IGZ1bmN0aW9uc1xuKi9cblxuLy8gR2V0IGl0ZW0gZnJvbSBDYXJ0SlMgYnkgdmFyaWFudCBpZFxuQ2FydC5nZXRfaXRlbV9ieV9pZCA9IGZ1bmN0aW9uICh2YXJpYW50X2lkKSB7XG4gIGlmICh0eXBlb2YgdmFyaWFudF9pZCA9PT0gJ3N0cmluZycpIHZhcmlhbnRfaWQgPSBwYXJzZUludCh2YXJpYW50X2lkKTtcbiAgdmFyIGxpbmVfaXRlbTtcbiAgaWYgKENhcnRKUykge1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgQ2FydEpTLmNhcnQuaXRlbXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciBpdGVtID0gQ2FydEpTLmNhcnQuaXRlbXNbaV07XG4gICAgICBpZiAoaXRlbS52YXJpYW50X2lkID09PSB2YXJpYW50X2lkKSB7XG4gICAgICAgIGxpbmVfaXRlbSA9IGl0ZW07XG4gICAgICB9XG4gICAgfVxuICB9XG4gIHJldHVybiBsaW5lX2l0ZW07XG59O1xuXG4vLyBDaGVjayBjYXJ0IGZvciB2YXJpYW50XG5DYXJ0Lmhhc192YXJpYW50ID0gZnVuY3Rpb24gKHZhcmlhbnRfaWQpIHtcbiAgaWYgKHR5cGVvZiB2YXJpYW50X2lkID09PSAnc3RyaW5nJykgdmFyaWFudF9pZCA9IHBhcnNlSW50KHZhcmlhbnRfaWQpO1xuICB2YXIgaGFzX3ZhcmlhbnQgPSBmYWxzZTtcbiAgaWYgKENhcnRKUykge1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgQ2FydEpTLmNhcnQuaXRlbXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciBpdGVtID0gQ2FydEpTLmNhcnQuaXRlbXNbaV07XG4gICAgICBpZiAoaXRlbS52YXJpYW50X2lkID09PSB2YXJpYW50X2lkKSB7XG4gICAgICAgIGhhc192YXJpYW50ID0gdHJ1ZTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgcmV0dXJuIGhhc192YXJpYW50O1xufTtcblxubW9kdWxlLmV4cG9ydHMgPSBDYXJ0OyIsInZhciBJbWFnZVN3aXRjaGVyID0ge307XG5cbi8vIE5PVEU6IGhvdyB3aWxsIHRoaXMgYWxsIHdvcmsgd2l0aCBzcmNzZXQgPz8hIVxuLy8gVE9ETzogc3dpcGUgYmV0d2VlbiBpbWFnZXMgb24gbW9iaWxlXG5cbi8vIFByZWxvYWQgaW1hZ2VzIGZvciBnYWxsZXJ5XG4vLyBVc2VkIHRoZSBzaXplZCBzcmNcbkltYWdlU3dpdGNoZXIucHJlbG9hZF9wcm9kdWN0X3RodW1icyA9IGZ1bmN0aW9uKCl7XG4gIHZhciAkdGh1bWJzID0gJCgnW2RhdGEtZ2FsbGVyeS1tYWluXScpO1xuICBpZiAoJHRodW1icy5sZW5ndGggPiAwKSB7XG4gICAgdmFyIG1haW5faW1hZ2VfZWxlbWVudCA9ICQoJHRodW1icy5kYXRhKCdnYWxsZXJ5LW1haW4nKSlbMF07XG4gICAgdmFyIG1haW5faW1hZ2Vfc2l6ZSA9IFNob3BpZnkuSW1hZ2UuaW1hZ2VTaXplKG1haW5faW1hZ2VfZWxlbWVudC5zcmMpO1xuICAgIFxuICAgIGlmKCR0aHVtYnMubGVuZ3RoID4gMCl7XG4gICAgICAkdGh1bWJzLmVhY2goZnVuY3Rpb24oKXtcbiAgICAgICAgdmFyIGltYWdlID0gbmV3IEltYWdlKCk7XG4gICAgICAgIHZhciBzcmMgPSAkKHRoaXMpLmF0dHIoJ2hyZWYnKTtcbiAgICAgICAgdmFyIHNpemVkX3NyYyA9IFNob3BpZnkuSW1hZ2UuZ2V0U2l6ZWRJbWFnZVVybChzcmMsIG1haW5faW1hZ2Vfc2l6ZSk7XG4gICAgICAgIGltYWdlLnNyYyA9IHNpemVkX3NyYztcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxufTtcblxuLy8gSW5pdGlhbGlzZSB0aGUgaW1hZ2Ugc3dpdGNoZXIgZm9yIGdhbGxlcnkgdGh1bWJzXG5JbWFnZVN3aXRjaGVyLmltYWdlX3N3dGljaGVyID0gZnVuY3Rpb24gKCkge1xuICAkKGRvY3VtZW50KS5vbignY2xpY2snLCAnW2RhdGEtZ2FsbGVyeS1tYWluXScsIGZ1bmN0aW9uIChlKSB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIHZhciAkY3VycmVudF90YXJnZXQgPSAkKGUuY3VycmVudFRhcmdldCk7XG4gICAgdmFyIG1haW5faW1hZ2VfZWxlbWVudCA9ICQoJGN1cnJlbnRfdGFyZ2V0LmRhdGEoJ2dhbGxlcnktbWFpbicpKVswXTtcbiAgICB2YXIgaW1hZ2Vfc3JjID0gJGN1cnJlbnRfdGFyZ2V0LmF0dHIoJ2hyZWYnKTtcbiAgICBJbWFnZVN3aXRjaGVyLnN3aXRjaF9pbWFnZShtYWluX2ltYWdlX2VsZW1lbnQsIGltYWdlX3NyYyk7XG4gIH0pO1xufTtcblxuLy8gU3dpdGNoIGltYWdlXG4vLyAtIHRha2VzIHRoZSBtYWluIGltYWdlIGVsZW1lbnQgdGhhdCB3aWxsIGhhdmUgaXQncyBzcmMgY2hhbmdlZFxuLy8gLSBhbmQgdGhlIG5ldyBzcmMgdG8gY2hhbmdlIGl0IHRvXG5JbWFnZVN3aXRjaGVyLnN3aXRjaF9pbWFnZSA9IGZ1bmN0aW9uIChtYWluX2ltYWdlX2VsZW1lbnQsIGltYWdlX3NyYykge1xuICBpZiAoIW1haW5faW1hZ2VfZWxlbWVudCB8fCAhaW1hZ2Vfc3JjKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIC8vIGdldCB0aGUgbmV3IGltYWdlIHNyYyBhdCB0aGUgY29ycmVjdCBzaXplXG4gIHZhciBtYWluX2ltYWdlX3NpemUgPSBTaG9waWZ5LkltYWdlLmltYWdlU2l6ZShtYWluX2ltYWdlX2VsZW1lbnQuc3JjKTtcbiAgdmFyIG5ld19pbWFnZV9zcmMgPSBTaG9waWZ5LkltYWdlLmdldFNpemVkSW1hZ2VVcmwoaW1hZ2Vfc3JjLCBtYWluX2ltYWdlX3NpemUpO1xuICAvLyBzd2l0Y2ggdGhlIG1haW4gaW1hZ2UgdG8gdGhlIG5ldyBzcmNcbiAgaWYgKG1haW5faW1hZ2VfZWxlbWVudC5zcmMgIT09IG5ld19pbWFnZV9zcmMpIHtcbiAgICBtYWluX2ltYWdlX2VsZW1lbnQuc3JjID0gbmV3X2ltYWdlX3NyYztcbiAgfVxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBJbWFnZVN3aXRjaGVyOyIsIi8vIENvbGxlY3QgdGhlIEJzaWZ5IG9iamVjdCBmcm9tIHRoZSB3aW5kb3cgd2l0aCBvdXIgdHJhbnNsYXRpb25zIGFuZCBsaXF1aWQgdmFyaWFibGVzIGFsbCBzZXQgdXBcbnZhciBCc2lmeSA9IHdpbmRvdy5Cc2lmeSB8fCB7fTtcblxuLypcbiAgQm9vdHN0cmFwaWZ5IHV0aWxpdHkgbWV0aG9kc1xuKi9cblxuQnNpZnkuZ2V0X3ZhcmlhbnRfYnlfaWQgPSBmdW5jdGlvbiAodmFyaWFudF9pZCkge1xuICB2YXIgc2VsZWN0ZWRfdmFyaWFudDtcbiAgaWYgKHR5cGVvZiB2YXJpYW50X2lkID09PSAnc3RyaW5nJykgdmFyaWFudF9pZCA9IHBhcnNlSW50KHZhcmlhbnRfaWQpO1xuICBcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBCc2lmeS5wcm9kdWN0LnZhcmlhbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgdmFyIHZhcmlhbnQgPSBCc2lmeS5wcm9kdWN0LnZhcmlhbnRzW2ldO1xuICAgIGlmICh2YXJpYW50LmlkID09PSB2YXJpYW50X2lkKSB7XG4gICAgICBzZWxlY3RlZF92YXJpYW50ID0gdmFyaWFudDtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHNlbGVjdGVkX3ZhcmlhbnQ7XG59O1xuXG4vLyBhZGQgYnNpZnkgY2xhc3NlcyB0byB0aGUgQnNpZnkgb2JqZWN0XG5Cc2lmeS5DYXJ0ID0gcmVxdWlyZSgnLi9ic2lmeS5jYXJ0LmpzJyk7XG5Cc2lmeS5JbWFnZVN3aXRjaGVyID0gcmVxdWlyZSgnLi9ic2lmeS5pbWFnZV9zd2l0Y2hlci5qcycpO1xuQnNpZnkuVmFyaWFudE9wdGlvblN3aXRjaGVyID0gcmVxdWlyZSgnLi9ic2lmeS52YXJpYW50X29wdGlvbl9zd2l0Y2hlci5qcycpO1xuQnNpZnkuTGlua2VkUHJvZHVjdE9wdGlvbnMgPSByZXF1aXJlKCcuL2JzaWZ5LmxpbmtlZF9wcm9kdWN0X29wdGlvbnMuanMnKTtcbkJzaWZ5LkJhbm5lciA9IHJlcXVpcmUoJy4vYnNpZnkuYmFubmVyLmpzJyk7XG5Cc2lmeS5UaHVtYm5haWxzID0gcmVxdWlyZSgnLi9ic2lmeS50aHVtYm5haWxzLmpzJyk7XG5Cc2lmeS5Tb2NpYWxGZWVkcyA9IHJlcXVpcmUoJy4vYnNpZnkuc29jaWFsX2ZlZWRzLmpzJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gQnNpZnk7IiwiLy8gKGMpIENvcHlyaWdodCAyMDE0IENhcm9saW5lIFNjaG5hcHAuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuIENvbnRhY3Q6IG1sbGVnZW9yZ2VzYW5kQGdtYWlsLmNvbVxuLy8gU2VlIGh0dHA6Ly9kb2NzLnNob3BpZnkuY29tL21hbnVhbC9jb25maWd1cmF0aW9uL3N0b3JlLWN1c3RvbWl6YXRpb24vYWR2YW5jZWQtbmF2aWdhdGlvbi9saW5rZWQtcHJvZHVjdC1vcHRpb25zXG4vLyBNb2RpZmllZCBmb3IgdXNlIHdpdGggQm9vdHN0cmFwaWZ5NCBieSBMdWNpZCAtIDAzLzIwMTVcblxudmFyIExpbmtlZFByb2R1Y3RPcHRpb25zID0ge307XG5MaW5rZWRQcm9kdWN0T3B0aW9ucy5vcHRpb25zTWFwID0ge307XG5cbkxpbmtlZFByb2R1Y3RPcHRpb25zLnVwZGF0ZU9wdGlvbnNJblNlbGVjdG9yID0gZnVuY3Rpb24oc2VsZWN0b3JJbmRleCkge1xuICB2YXIga2V5LCBzZWxlY3RvcjtcbiAgICBcbiAgc3dpdGNoIChzZWxlY3RvckluZGV4KSB7XG4gICAgY2FzZSAwOlxuICAgICAga2V5ID0gJ3Jvb3QnO1xuICAgICAgc2VsZWN0b3IgPSBqUXVlcnkoJy5zaW5nbGUtb3B0aW9uLXNlbGVjdG9yOmVxKDApJyk7XG4gICAgICBicmVhaztcbiAgICBjYXNlIDE6XG4gICAgICBrZXkgPSBqUXVlcnkoJy5zaW5nbGUtb3B0aW9uLXNlbGVjdG9yOmVxKDApJykudmFsKCk7XG4gICAgICBzZWxlY3RvciA9IGpRdWVyeSgnLnNpbmdsZS1vcHRpb24tc2VsZWN0b3I6ZXEoMSknKTtcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgMjpcbiAgICAgIGtleSA9IGpRdWVyeSgnLnNpbmdsZS1vcHRpb24tc2VsZWN0b3I6ZXEoMCknKS52YWwoKTsgIFxuICAgICAga2V5ICs9ICcgLyAnICsgalF1ZXJ5KCcuc2luZ2xlLW9wdGlvbi1zZWxlY3RvcjplcSgxKScpLnZhbCgpO1xuICAgICAgc2VsZWN0b3IgPSBqUXVlcnkoJy5zaW5nbGUtb3B0aW9uLXNlbGVjdG9yOmVxKDIpJyk7XG4gIH1cbiAgXG4gIHZhciBpbml0aWFsVmFsdWUgPSBzZWxlY3Rvci52YWwoKTtcbiAgc2VsZWN0b3IuZW1wdHkoKTsgICAgXG4gIHZhciBhdmFpbGFibGVPcHRpb25zID0gTGlua2VkUHJvZHVjdE9wdGlvbnMub3B0aW9uc01hcFtrZXldO1xuICBpZiAoYXZhaWxhYmxlT3B0aW9ucyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgZm9yICh2YXIgaT0wOyBpPGF2YWlsYWJsZU9wdGlvbnMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciBvcHRpb24gPSBhdmFpbGFibGVPcHRpb25zW2ldO1xuICAgICAgdmFyIG5ld09wdGlvbiA9IGpRdWVyeSgnPG9wdGlvbj48L29wdGlvbj4nKS52YWwob3B0aW9uKS5odG1sKG9wdGlvbik7XG4gICAgICBzZWxlY3Rvci5hcHBlbmQobmV3T3B0aW9uKTtcbiAgICB9XG4gICAgalF1ZXJ5KCcuc3dhdGNoW2RhdGEtb3B0aW9uLWluZGV4PVwiJyArIHNlbGVjdG9ySW5kZXggKyAnXCJdIC5zd2F0Y2gtZWxlbWVudCcpLmVhY2goZnVuY3Rpb24oKSB7XG4gICAgICBpZiAoalF1ZXJ5LmluQXJyYXkoJCh0aGlzKS5hdHRyKCdkYXRhLXZhbHVlJyksIGF2YWlsYWJsZU9wdGlvbnMpICE9PSAtMSkge1xuICAgICAgICAkKHRoaXMpLnJlbW92ZUNsYXNzKCdzb2xkb3V0Jykuc2hvdygpLmZpbmQoJzpyYWRpbycpLnJlbW92ZUF0dHIoJ2Rpc2FibGVkJywnZGlzYWJsZWQnKS5yZW1vdmVBdHRyKCdjaGVja2VkJyk7XG4gICAgICB9XG4gICAgICBlbHNlIHtcbiAgICAgICAgJCh0aGlzKS5hZGRDbGFzcygnc29sZG91dCcpLmhpZGUoKS5maW5kKCc6cmFkaW8nKS5yZW1vdmVBdHRyKCdjaGVja2VkJykuYXR0cignZGlzYWJsZWQnLCdkaXNhYmxlZCcpO1xuICAgICAgfVxuICAgIH0pO1xuICAgIGlmIChqUXVlcnkuaW5BcnJheShpbml0aWFsVmFsdWUsIGF2YWlsYWJsZU9wdGlvbnMpICE9PSAtMSkge1xuICAgICAgc2VsZWN0b3IudmFsKGluaXRpYWxWYWx1ZSk7XG4gICAgfVxuICAgIHNlbGVjdG9yLnRyaWdnZXIoJ2NoYW5nZScpO1xuICB9XG59O1xuXG5MaW5rZWRQcm9kdWN0T3B0aW9ucy5saW5rT3B0aW9uU2VsZWN0b3JzID0gZnVuY3Rpb24ocHJvZHVjdCkge1xuICAvLyBCdWlsZGluZyBvdXIgbWFwcGluZyBvYmplY3QuXG4gIGZvciAodmFyIGk9MDsgaTxwcm9kdWN0LnZhcmlhbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgdmFyIHZhcmlhbnQgPSBwcm9kdWN0LnZhcmlhbnRzW2ldO1xuICAgIGlmICh2YXJpYW50LmF2YWlsYWJsZSkge1xuICAgICAgdmFyIGtleTtcbiAgICAgIC8vIEdhdGhlcmluZyB2YWx1ZXMgZm9yIHRoZSAxc3QgZHJvcC1kb3duLlxuICAgICAgTGlua2VkUHJvZHVjdE9wdGlvbnMub3B0aW9uc01hcC5yb290ID0gTGlua2VkUHJvZHVjdE9wdGlvbnMub3B0aW9uc01hcC5yb290IHx8IFtdO1xuICAgICAgTGlua2VkUHJvZHVjdE9wdGlvbnMub3B0aW9uc01hcC5yb290LnB1c2godmFyaWFudC5vcHRpb24xKTtcbiAgICAgIExpbmtlZFByb2R1Y3RPcHRpb25zLm9wdGlvbnNNYXAucm9vdCA9IFNob3BpZnkudW5pcShMaW5rZWRQcm9kdWN0T3B0aW9ucy5vcHRpb25zTWFwLnJvb3QpO1xuICAgICAgLy8gR2F0aGVyaW5nIHZhbHVlcyBmb3IgdGhlIDJuZCBkcm9wLWRvd24uXG4gICAgICBpZiAocHJvZHVjdC5vcHRpb25zLmxlbmd0aCA+IDEpIHtcbiAgICAgICAga2V5ID0gdmFyaWFudC5vcHRpb24xO1xuICAgICAgICBMaW5rZWRQcm9kdWN0T3B0aW9ucy5vcHRpb25zTWFwW2tleV0gPSBMaW5rZWRQcm9kdWN0T3B0aW9ucy5vcHRpb25zTWFwW2tleV0gfHwgW107XG4gICAgICAgIExpbmtlZFByb2R1Y3RPcHRpb25zLm9wdGlvbnNNYXBba2V5XS5wdXNoKHZhcmlhbnQub3B0aW9uMik7XG4gICAgICAgIExpbmtlZFByb2R1Y3RPcHRpb25zLm9wdGlvbnNNYXBba2V5XSA9IFNob3BpZnkudW5pcShMaW5rZWRQcm9kdWN0T3B0aW9ucy5vcHRpb25zTWFwW2tleV0pO1xuICAgICAgfVxuICAgICAgLy8gR2F0aGVyaW5nIHZhbHVlcyBmb3IgdGhlIDNyZCBkcm9wLWRvd24uXG4gICAgICBpZiAocHJvZHVjdC5vcHRpb25zLmxlbmd0aCA9PT0gMykge1xuICAgICAgICBrZXkgPSB2YXJpYW50Lm9wdGlvbjEgKyAnIC8gJyArIHZhcmlhbnQub3B0aW9uMjtcbiAgICAgICAgTGlua2VkUHJvZHVjdE9wdGlvbnMub3B0aW9uc01hcFtrZXldID0gTGlua2VkUHJvZHVjdE9wdGlvbnMub3B0aW9uc01hcFtrZXldIHx8IFtdO1xuICAgICAgICBMaW5rZWRQcm9kdWN0T3B0aW9ucy5vcHRpb25zTWFwW2tleV0ucHVzaCh2YXJpYW50Lm9wdGlvbjMpO1xuICAgICAgICBMaW5rZWRQcm9kdWN0T3B0aW9ucy5vcHRpb25zTWFwW2tleV0gPSBTaG9waWZ5LnVuaXEoTGlua2VkUHJvZHVjdE9wdGlvbnMub3B0aW9uc01hcFtrZXldKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgLy8gVXBkYXRlIG9wdGlvbnMgcmlnaHQgYXdheS5cbiAgTGlua2VkUHJvZHVjdE9wdGlvbnMudXBkYXRlT3B0aW9uc0luU2VsZWN0b3IoMCk7XG4gIGlmIChwcm9kdWN0Lm9wdGlvbnMubGVuZ3RoID4gMSkgTGlua2VkUHJvZHVjdE9wdGlvbnMudXBkYXRlT3B0aW9uc0luU2VsZWN0b3IoMSk7XG4gIGlmIChwcm9kdWN0Lm9wdGlvbnMubGVuZ3RoID09PSAzKSBMaW5rZWRQcm9kdWN0T3B0aW9ucy51cGRhdGVPcHRpb25zSW5TZWxlY3RvcigyKTtcbiAgLy8gV2hlbiB0aGVyZSBpcyBhbiB1cGRhdGUgaW4gdGhlIGZpcnN0IGRyb3Bkb3duLlxuICBqUXVlcnkoXCIuc2luZ2xlLW9wdGlvbi1zZWxlY3RvcjplcSgwKVwiKS5jaGFuZ2UoZnVuY3Rpb24oKSB7XG4gICAgTGlua2VkUHJvZHVjdE9wdGlvbnMudXBkYXRlT3B0aW9uc0luU2VsZWN0b3IoMSk7XG4gICAgaWYgKHByb2R1Y3Qub3B0aW9ucy5sZW5ndGggPT09IDMpIExpbmtlZFByb2R1Y3RPcHRpb25zLnVwZGF0ZU9wdGlvbnNJblNlbGVjdG9yKDIpO1xuICAgIHJldHVybiB0cnVlO1xuICB9KTtcbiAgLy8gV2hlbiB0aGVyZSBpcyBhbiB1cGRhdGUgaW4gdGhlIHNlY29uZCBkcm9wZG93bi5cbiAgalF1ZXJ5KFwiLnNpbmdsZS1vcHRpb24tc2VsZWN0b3I6ZXEoMSlcIikuY2hhbmdlKGZ1bmN0aW9uKCkge1xuICAgIGlmIChwcm9kdWN0Lm9wdGlvbnMubGVuZ3RoID09PSAzKSBMaW5rZWRQcm9kdWN0T3B0aW9ucy51cGRhdGVPcHRpb25zSW5TZWxlY3RvcigyKTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfSk7XG4gIFxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBMaW5rZWRQcm9kdWN0T3B0aW9uczsiLCJ2YXIgaW1nbCAgICA9IHJlcXVpcmUoJ2ltYWdlc2xvYWRlZCcpO1xudmFyIG1xICAgICAgPSByZXF1aXJlKCcuL2JzaWZ5Lm1lZGlhX3F1ZXJpZXMuanMnKTtcbnJlcXVpcmUoJy4vYnNpZnkudG91Y2guanMnKTtcblxuLyogTG9hZGVyICovXG52YXIgR2FsbGVyeUxvYWRlciA9IGZ1bmN0aW9uIChlbGUsIHBhcmVudF9lbGUpIHtcbiAgdGhpcy5lbGUgPSBlbGU7XG4gIHRoaXMucGFyZW50X2VsZSA9IHBhcmVudF9lbGU7XG4gIHRoaXMub25Mb2FkZWQgPSBmdW5jdGlvbigpe307XG59O1xuXG5HYWxsZXJ5TG9hZGVyLnByb3RvdHlwZS5pbml0ID0gZnVuY3Rpb24oKXtcbiAgdGhpcy4kZWxlID0gJCh0aGlzLmVsZSk7XG4gIHRoaXMuY2Fyb3VzZWxfd2lkdGggPSAwO1xuICB0aGlzLmltZ0xvYWQgPSBuZXcgaW1nbCh0aGlzLmVsZSk7XG4gIFxuICB2YXIgX3RoaXMgPSB0aGlzO1xuICB0aGlzLmltZ0xvYWQub24oJ3Byb2dyZXNzJywgZnVuY3Rpb24oaW5zdGFuY2UsIGltYWdlKXtcbiAgICBfdGhpcy5fY29sbGVjdF9pbWFnZV93aWR0aChpbWFnZSk7XG4gIH0pLm9uKCdkb25lJywgZnVuY3Rpb24oKXtcbiAgICBfdGhpcy5fc2V0X2Nhcm91c2VsX3dpZHRoKCk7XG4gICAgX3RoaXMub25Mb2FkZWQuYXBwbHkoX3RoaXMpO1xuICB9KTtcbn07XG5cbi8vIFByaXZhdGVcbkdhbGxlcnlMb2FkZXIucHJvdG90eXBlLl9jb2xsZWN0X2ltYWdlX3dpZHRoID0gZnVuY3Rpb24oaW1hZ2Upe1xuICBpZihpbWFnZS5pc0xvYWRlZCl7XG4gICAgdmFyICRpbWcgPSAkKGltYWdlLmltZyk7XG4gICAgdmFyICRwYXJlbnQgPSAkaW1nLmNsb3Nlc3QodGhpcy5wYXJlbnRfZWxlKTtcbiAgICB0aGlzLmNhcm91c2VsX3dpZHRoICs9IHRoaXMuX2ltYWdlX3BhcmVudHNfd2lkdGgoJHBhcmVudCk7XG4gIH0gZWxzZSB7XG4gICAgJChpbWFnZS5pbWcpLmhpZGUoKTtcbiAgfVxufTtcblxuR2FsbGVyeUxvYWRlci5wcm90b3R5cGUuX2ltYWdlX3BhcmVudHNfd2lkdGggPSBmdW5jdGlvbigkaW1hZ2VfcGFyZW50KXtcbiAgLy8gcGx1cyBvbmUgYmVjdWFzZSBqcyBpcyByb3VuZGluZyBhY3R1YWwgd2lkdGggd2hlcmUgYXMgYnJvd3NlciBpcyBub3RcbiAgcmV0dXJuICRpbWFnZV9wYXJlbnQud2lkdGgoKSArIHRoaXMuX3BhZGRpbmdfdG9fbnVtKCRpbWFnZV9wYXJlbnQsICdwYWRkaW5nTGVmdCcpICsgdGhpcy5fcGFkZGluZ190b19udW0oJGltYWdlX3BhcmVudCwgJ3BhZGRpbmdSaWdodCcpICsgMTtcbn07XG5cbkdhbGxlcnlMb2FkZXIucHJvdG90eXBlLl9wYWRkaW5nX3RvX251bSA9IGZ1bmN0aW9uKCRpbWFnZV9wYXJlbnQsIHBhZGRpbmcpe1xuICByZXR1cm4gcGFyc2VJbnQoJGltYWdlX3BhcmVudC5jc3MocGFkZGluZykucmVwbGFjZSgncHgnLCAnJykpO1xufTtcblxuR2FsbGVyeUxvYWRlci5wcm90b3R5cGUuX3NldF9jYXJvdXNlbF93aWR0aCA9IGZ1bmN0aW9uKCl7XG4gIHRoaXMuJGVsZS53aWR0aCh0aGlzLmNhcm91c2VsX3dpZHRoKTtcbn07XG5cbi8qIE1haW4gKi9cbnZhciBHYWxsZXJ5ID0gZnVuY3Rpb24ob3B0aW9ucyl7XG4gIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XG4gIFxuICB0aGlzLmVsZSA9IHRoaXMub3B0aW9ucy5nYWxsZXJ5X3dyYXBwZXI7XG4gIHRoaXMuaXRlbV93cmFwcGVyID0gdGhpcy5vcHRpb25zLml0ZW1fd3JhcHBlcjtcbiAgdGhpcy5jb250cm9sc193cmFwcGVyID0gdGhpcy5vcHRpb25zLmNvbnRyb2xzX3dyYXBwZXI7XG4gIHRoaXMubG9hZGVyID0gbmV3IEdhbGxlcnlMb2FkZXIodGhpcy5lbGUsIHRoaXMub3B0aW9ucy5pdGVtX3dyYXBwZXIpO1xuICB0aGlzLm9uX2xvYWRlZCA9IGZhbHNlO1xuICBcbiAgdGhpcy5faW5pdCgpO1xufTtcblxuR2FsbGVyeS5wcm90b3R5cGUudXBkYXRlID0gZnVuY3Rpb24gKCkge1xuICB0aGlzLiRlbGUucGFyZW50KCkuYW5pbWF0ZSh7b3BhY2l0eTogMH0sICdzbG93Jyk7XG4gIHRoaXMuX3JlbW92ZV9ldmVudF9oYW5kbGVycygpO1xuICB0aGlzLl9pbml0KCk7XG59O1xuXG5HYWxsZXJ5LnByb3RvdHlwZS5faW5pdCA9IGZ1bmN0aW9uKCl7XG4gIHRoaXMuJGVsZSA9ICQodGhpcy5lbGUpO1xuXG4gIGlmKHRoaXMuJGVsZS5sZW5ndGggPiAwKXtcbiAgICB0aGlzLl9hZGRfZXZlbnRfaGFuZGxlcnMoKTtcbiAgICB0aGlzLmxvYWRlci5pbml0KCk7XG4gICAgdGhpcy5fc2V0X2N1cnJlbnRfaW1hZ2UoKTtcbiAgfVxufTtcblxuR2FsbGVyeS5wcm90b3R5cGUuX2FkZF9ldmVudF9oYW5kbGVycyA9IGZ1bmN0aW9uKCl7XG4gIHZhciBfdGhpcyA9IHRoaXM7XG4gIHRoaXMubG9hZGVyLm9uTG9hZGVkID0gZnVuY3Rpb24oKXtcbiAgICBfdGhpcy4kZWxlLnBhcmVudCgpLmFuaW1hdGUoe29wYWNpdHk6IDF9LCAnc2xvdycpO1xuICAgIGlmIChfdGhpcy5vbl9sb2FkZWQpIF90aGlzLm9uX2xvYWRlZC5hcHBseShfdGhpcyk7XG4gIH07XG4gIFxuICAkKGRvY3VtZW50KS5vbignc3dpcGVMZWZ0JywgdGhpcy5jb250cm9sc193cmFwcGVyLCBmdW5jdGlvbiAoZSkge1xuICAgIF90aGlzLl9uZXh0X2ltZygpO1xuICB9KTtcbiAgXG4gICQoZG9jdW1lbnQpLm9uKCdzd2lwZVJpZ2h0JywgdGhpcy5jb250cm9sc193cmFwcGVyLCBmdW5jdGlvbiAoZSkge1xuICAgIF90aGlzLl9wcmV2X2ltZygpO1xuICB9KTtcbiAgXG4gICQoZG9jdW1lbnQpLm9uKCdjbGljaycsICdbZGF0YS1nYWxsZXJ5LWRpcmVjdGlvbl0nLCBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIHZhciAkY3VycmVudF90YXJnZXQgPSAkKGV2ZW50LmN1cnJlbnRUYXJnZXQpO1xuICAgIGlmICgkY3VycmVudF90YXJnZXQuZGF0YSgnZ2FsbGVyeS1kaXJlY3Rpb24nKSA9PT0gJ2xlZnQnKSB7XG4gICAgICBfdGhpcy5fcHJldl9pbWcoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgX3RoaXMuX25leHRfaW1nKCk7XG4gICAgfVxuICB9KTtcbn07XG5cbkdhbGxlcnkucHJvdG90eXBlLl9yZW1vdmVfZXZlbnRfaGFuZGxlcnMgPSBmdW5jdGlvbigpe1xuICB0aGlzLmxvYWRlci5vbkxvYWRlZCA9IGZhbHNlO1xuICBcbiAgJChkb2N1bWVudCkub2ZmKCdzd2lwZUxlZnQnLCB0aGlzLmNvbnRyb2xzX3dyYXBwZXIpO1xuICAkKGRvY3VtZW50KS5vZmYoJ3N3aXBlUmlnaHQnLCB0aGlzLmNvbnRyb2xzX3dyYXBwZXIpO1xuICAkKGRvY3VtZW50KS5vZmYoJ2NsaWNrJywgJ1tkYXRhLWdhbGxlcnktZGlyZWN0aW9uXScpO1xufTtcblxuR2FsbGVyeS5wcm90b3R5cGUuX3NldF9jdXJyZW50X2ltYWdlID0gZnVuY3Rpb24oKXtcbiAgdmFyICRjdXJyZW50ID0gdGhpcy4kZWxlLmZpbmQodGhpcy5pdGVtX3dyYXBwZXIrJy5pc19jdXJyZW50Jyk7XG4gIGlmICgkY3VycmVudC5sZW5ndGggPiAwKSB7XG4gICB0aGlzLiRjdXJyZW50X2ltYWdlID0gJGN1cnJlbnQuZmlyc3QoKTtcbiAgfSBlbHNlIHtcbiAgIHRoaXMuJGN1cnJlbnRfaW1hZ2UgPSB0aGlzLiRlbGUuZmluZCh0aGlzLml0ZW1fd3JhcHBlcikuZmlyc3QoKTtcbiAgfVxuICB0aGlzLiRjdXJyZW50X2ltYWdlLmFkZENsYXNzKCdpc19jdXJyZW50Jyk7XG4gIHRoaXMuX2NoZWNrX2Zvcl9lbmQoKTtcbn07XG5cbkdhbGxlcnkucHJvdG90eXBlLl9wcmV2X2ltZyA9IGZ1bmN0aW9uKCl7XG4gIHZhciBwcmV2ID0gdGhpcy4kY3VycmVudF9pbWFnZS5wcmV2KCk7XG4gIGlmIChwcmV2Lmxlbmd0aCA+IDApIHtcbiAgICBwcmV2LmNzcyh7IG1hcmdpbkxlZnQ6ICcwJyB9KS5hZGRDbGFzcygnaXNfY3VycmVudCcpO1xuICAgIHRoaXMuJGN1cnJlbnRfaW1hZ2UucmVtb3ZlQ2xhc3MoJ2lzX2N1cnJlbnQnKTtcbiAgICB0aGlzLiRjdXJyZW50X2ltYWdlID0gcHJldjtcbiAgICB0aGlzLl9jaGVja19mb3JfZW5kKCk7XG4gIH1cbn07XG5cbkdhbGxlcnkucHJvdG90eXBlLl9uZXh0X2ltZyA9IGZ1bmN0aW9uKCl7XG4gIHZhciBuZXh0ID0gdGhpcy4kY3VycmVudF9pbWFnZS5uZXh0KCk7XG4gIGlmIChuZXh0Lmxlbmd0aCA+IDApIHtcbiAgICB2YXIgd2lkdGggPSB0aGlzLmxvYWRlci5faW1hZ2VfcGFyZW50c193aWR0aCh0aGlzLiRjdXJyZW50X2ltYWdlKTtcbiAgICB0aGlzLiRjdXJyZW50X2ltYWdlLmNzcyh7IG1hcmdpbkxlZnQ6ICh3aWR0aCAqIC0xKSB9KS5yZW1vdmVDbGFzcygnaXNfY3VycmVudCcpO1xuICAgIG5leHQuYWRkQ2xhc3MoJ2lzX2N1cnJlbnQnKTtcbiAgICB0aGlzLiRjdXJyZW50X2ltYWdlID0gbmV4dDtcbiAgICB0aGlzLl9jaGVja19mb3JfZW5kKCk7XG4gIH1cbn07XG5cbkdhbGxlcnkucHJvdG90eXBlLl9jaGVja19mb3JfZW5kID0gZnVuY3Rpb24gKCkge1xuICAkKCdbZGF0YS1nYWxsZXJ5LWRpcmVjdGlvbl0nKS5yZW1vdmVDbGFzcygnZGlzYWJsZWQnKTtcbiAgaWYgKHRoaXMuJGN1cnJlbnRfaW1hZ2UucHJldigpLmxlbmd0aCA9PT0gMCkge1xuICAgICQoJ1tkYXRhLWdhbGxlcnktZGlyZWN0aW9uPVwibGVmdFwiXScpLmFkZENsYXNzKCdkaXNhYmxlZCcpO1xuICB9IGVsc2UgaWYgKHRoaXMuJGN1cnJlbnRfaW1hZ2UubmV4dCgpLmxlbmd0aCA9PT0gMCkge1xuICAgICQoJ1tkYXRhLWdhbGxlcnktZGlyZWN0aW9uPVwicmlnaHRcIl0nKS5hZGRDbGFzcygnZGlzYWJsZWQnKTtcbiAgfVxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBHYWxsZXJ5OyIsImlmICghd2luZG93LmdldENvbXB1dGVkU3R5bGUpIHtcbiAgd2luZG93LmdldENvbXB1dGVkU3R5bGUgPSBmdW5jdGlvbihlbCwgcHNldWRvKSB7XG4gICAgdGhpcy5lbCA9IGVsO1xuICAgIHRoaXMuZ2V0UHJvcGVydHlWYWx1ZSA9IGZ1bmN0aW9uKHByb3ApIHtcbiAgICAgIHZhciByZSA9IC8oXFwtKFthLXpdKXsxfSkvZztcbiAgICAgIGlmIChwcm9wID09ICdmbG9hdCcpIHByb3AgPSAnc3R5bGVGbG9hdCc7XG4gICAgICBpZiAocmUudGVzdChwcm9wKSkge1xuICAgICAgICBwcm9wID0gcHJvcC5yZXBsYWNlKHJlLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgcmV0dXJuIGFyZ3VtZW50c1syXS50b1VwcGVyQ2FzZSgpO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBlbC5jdXJyZW50U3R5bGVbcHJvcF0gPyBlbC5jdXJyZW50U3R5bGVbcHJvcF0gOiBudWxsO1xuICAgIH07XG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG59XG5cbm1vZHVsZS5leHBvcnRzLnNpemUgPSBmdW5jdGlvbiAoKSB7XG4gIHJldHVybiB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShkb2N1bWVudC5ib2R5LCc6YWZ0ZXInKS5nZXRQcm9wZXJ0eVZhbHVlKCdjb250ZW50Jyk7XG59OyIsIi8qanNoaW50IG11bHRpc3RyOiB0cnVlICovXG5cbnZhciBJbnN0YWdyYW1GZWVkID0gZnVuY3Rpb24gKGVsZSkge1xuICB0aGlzLmVsZSA9IGVsZTtcbiAgdGhpcy4kZWxlID0gJCh0aGlzLmVsZSk7XG4gIHRoaXMuYXBpX3VybCA9ICdodHRwczovL2FwaS5pbnN0YWdyYW0uY29tL3YxJztcbiAgXG4gIHRoaXMucmVxdWVzdF9xdWV1ZSA9IFtdO1xuICB0aGlzLnJlcXVlc3RpbmcgPSBmYWxzZTtcbiAgXG4gIHRoaXMuaW1hZ2VfY291bnRfZGVmYXVsdCA9IDEyO1xuICB0aGlzLmltYWdlX2NvdW50X2J1ZmZlciA9IDEwOyAvLyBhZGQgYSBmZXcgZXh0cmEgaW5jYXNlIHdlIHNvbWUgaGF2ZSBiZWVuIGZpbHRlcmVkIG91dCBieSBpbnN0YWdyYW0gb3IgdGhlIGJsYWNrbGlzdFxuICBcbiAgdGhpcy5fZ2V0X2RhdGEoKTtcbiAgdGhpcy5fbG9hZF9mZWVkKCk7XG59O1xuXG5JbnN0YWdyYW1GZWVkLnByb3RvdHlwZS5fZ2V0X2RhdGEgPSBmdW5jdGlvbiAoKSB7XG4gIHRoaXMuY2xpZW50X2lkID0gdGhpcy4kZWxlLmRhdGEoJ2NsaWVudC1pZCcpO1xuICB0aGlzLmltYWdlX2NvdW50ID0gKCB0aGlzLiRlbGUuZGF0YSgnaW1hZ2UtY291bnQnKSB8fCB0aGlzLmltYWdlX2NvdW50X2RlZmF1bHQgKTtcbiAgdGhpcy5pbWFnZV90b3RhbCA9IHRoaXMuaW1hZ2VfY291bnQgKyB0aGlzLmltYWdlX2NvdW50X2J1ZmZlcjtcbiAgXG4gIHRoaXMuaGFzaHRhZyA9IHRoaXMuJGVsZS5kYXRhKCdoYXNodGFnJyk7XG4gIHRoaXMudXNlciA9IHRoaXMuJGVsZS5kYXRhKCd1c2VyJyk7XG4gIHRoaXMuX2dldF91c2VyX2lkKCk7XG59O1xuXG5JbnN0YWdyYW1GZWVkLnByb3RvdHlwZS5fZ2V0X3VzZXJfaWQgPSBmdW5jdGlvbiAoKSB7XG4gIGlmICh0aGlzLnVzZXIpIHtcbiAgICB0aGlzLnJlcXVlc3RfcXVldWUucHVzaCgndXNlcl9pZCcpO1xuICAgIHRoaXMuX3N0YXJ0X3JlcXVlc3RzKCk7XG4gIH1cbn07XG5cbkluc3RhZ3JhbUZlZWQucHJvdG90eXBlLl9sb2FkX2ZlZWQgPSBmdW5jdGlvbiAoKSB7XG4gIHZhciByZXF1ZXN0X3R5cGU7XG4gIGlmICh0aGlzLmhhc2h0YWcgIT09IHVuZGVmaW5lZCkge1xuICAgIHJlcXVlc3RfdHlwZSA9ICdoYXNodGFnJztcbiAgfSBlbHNlIGlmICh0aGlzLnVzZXIgIT09IHVuZGVmaW5lZCkge1xuICAgIHJlcXVlc3RfdHlwZSA9ICd1c2VyJztcbiAgfVxuICB0aGlzLnJlcXVlc3RfcXVldWUucHVzaChyZXF1ZXN0X3R5cGUpO1xuICB0aGlzLl9zdGFydF9yZXF1ZXN0cygpO1xufTtcblxuSW5zdGFncmFtRmVlZC5wcm90b3R5cGUuX2J1aWxkX3JlcXVlc3QgPSBmdW5jdGlvbiAodHlwZSkge1xuICBpZiAodGhpcy5jbGllbnRfaWQgPT09IG51bGwpIHRocm93ICdbRVJST1JdIEluc3RhZ3JhbTogWW91IG11c3QgcHJvdmlkZSBhIGNsaWVudCBpZCc7XG4gIHZhciByZXF1ZXN0ID0ge307XG4gIHJlcXVlc3QuZGF0YSA9IHtcbiAgICBjbGllbnRfaWQ6IHRoaXMuY2xpZW50X2lkXG4gIH07XG4gIFxuICBzd2l0Y2ggKHR5cGUpIHtcbiAgICBjYXNlICd1c2VyX2lkJzpcbiAgICAgIHJlcXVlc3QudXJsID0gdGhpcy5hcGlfdXJsICsgJy91c2Vycy9zZWFyY2g/cT0nICsgdGhpcy51c2VyO1xuICAgICAgcmVxdWVzdC5jYWxsYmFjayA9IGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgICB0aGlzLnVzZXJfaWQgPSByZXNwb25zZS5kYXRhWzBdLmlkO1xuICAgICAgfTtcbiAgICAgIGJyZWFrO1xuICAgIFxuICAgIGNhc2UgJ3VzZXInOlxuICAgICAgcmVxdWVzdC51cmwgPSB0aGlzLmFwaV91cmwgKyAnL3VzZXJzLycgKyB0aGlzLnVzZXJfaWQgKyAnL21lZGlhL3JlY2VudCc7XG4gICAgICByZXF1ZXN0LmRhdGEgPSAkLmV4dGVuZChyZXF1ZXN0LmRhdGEsIHtcbiAgICAgICAgY291bnQ6IHRoaXMuaW1hZ2VfdG90YWxcbiAgICAgIH0pO1xuICAgICAgcmVxdWVzdC5jYWxsYmFjayA9IGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgICB0aGlzLl9idWlsZF9mZWVkKHJlc3BvbnNlLmRhdGEpO1xuICAgICAgfTtcbiAgICAgIGJyZWFrO1xuICAgIFxuICAgIGNhc2UgJ2hhc2h0YWcnOlxuICAgICAgcmVxdWVzdC51cmwgPSB0aGlzLmFwaV91cmwgKyAnL3RhZ3MvJyArIHRoaXMuaGFzaHRhZyArICcvbWVkaWEvcmVjZW50JztcbiAgICAgIHJlcXVlc3QuZGF0YSA9ICQuZXh0ZW5kKHJlcXVlc3QuZGF0YSwge1xuICAgICAgICBjb3VudDogdGhpcy5pbWFnZV90b3RhbFxuICAgICAgfSk7XG4gICAgICByZXF1ZXN0LmNhbGxiYWNrID0gZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgIHRoaXMuX2J1aWxkX2ZlZWQocmVzcG9uc2UuZGF0YSk7XG4gICAgICB9O1xuICAgICAgYnJlYWs7XG4gIH1cbiAgXG4gIHJldHVybiByZXF1ZXN0O1xufTtcblxuSW5zdGFncmFtRmVlZC5wcm90b3R5cGUuX3N0YXJ0X3JlcXVlc3RzID0gZnVuY3Rpb24gKCkge1xuICBpZiAoIXRoaXMucmVxdWVzdGluZykge1xuICAgIHRoaXMucmVxdWVzdGluZyA9IHRydWU7XG4gICAgdGhpcy5fcmVxdWVzdCgpO1xuICB9XG59O1xuXG5JbnN0YWdyYW1GZWVkLnByb3RvdHlwZS5fcmVxdWVzdCA9IGZ1bmN0aW9uICgpIHtcbiAgaWYgKHRoaXMucmVxdWVzdF9xdWV1ZS5sZW5ndGggPiAwKSB7XG4gICAgdmFyIF90aGlzID0gdGhpcztcbiAgICB2YXIgcmVxdWVzdF90eXBlID0gdGhpcy5yZXF1ZXN0X3F1ZXVlLnNoaWZ0KCk7XG4gICAgdmFyIHJlcXVlc3QgPSB0aGlzLl9idWlsZF9yZXF1ZXN0KHJlcXVlc3RfdHlwZSk7XG4gICAgXG4gICAgJC5hamF4KHtcbiAgICAgIGRhdGFUeXBlOiBcImpzb25wXCIsXG4gICAgICB1cmw6IHJlcXVlc3QudXJsLFxuICAgICAgZGF0YTogcmVxdWVzdC5kYXRhXG4gICAgfSlcbiAgICAuZG9uZShmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgIHJlcXVlc3QuY2FsbGJhY2suYXBwbHkoX3RoaXMsIFtyZXNwb25zZV0pO1xuICAgICAgX3RoaXMuX3JlcXVlc3QoKTtcbiAgICB9KVxuICAgIC5mYWlsKGZ1bmN0aW9uIChhLGIsYykge1xuICAgICAgY29uc29sZS5sb2coJ2ZhaWwnLCBhLCBiLCBjKTtcbiAgICB9KTtcbiAgICBcbiAgfSBlbHNlIHtcbiAgICB0aGlzLnJlcXVlc3RpbmcgPSBmYWxzZTtcbiAgfVxufTtcblxuSW5zdGFncmFtRmVlZC5wcm90b3R5cGUuX2J1aWxkX2ZlZWQgPSBmdW5jdGlvbiAoZGF0YSkge1xuICB2YXIgbWFya3VwLFxuICAgIGZpbHRlcmVkX2RhdGEgPSB0aGlzLl9maWx0ZXJfZGF0YShkYXRhKTtcbiAgICBcbiAgaWYgKGZpbHRlcmVkX2RhdGEubGVuZ3RoID4gMCkge1xuICAgIG1hcmt1cCA9IHRoaXMuX2J1aWxkX2ZlZWRfbWFya3VwKGZpbHRlcmVkX2RhdGEpO1xuICAgIHRoaXMuJGVsZS5hZGRDbGFzcygnZ3JvdXAnKS5hdHRyKCdkYXRhLWdyb3VwLXNpemUnLCBmaWx0ZXJlZF9kYXRhLmxlbmd0aCk7XG4gIH0gZWxzZSB7XG4gICAgbWFya3VwID0gdGhpcy5fYnVpbGRfZXJyb3JfbWFya3VwKCk7XG4gIH1cbiAgXG4gIHRoaXMuJGVsZS5hcHBlbmQobWFya3VwKTtcbn07XG5cbkluc3RhZ3JhbUZlZWQucHJvdG90eXBlLl9maWx0ZXJfZGF0YSA9IGZ1bmN0aW9uIChkYXRhKSB7XG4gIC8qIFRPRE86IHJlbW92ZSBibGFja2xpc3RlZCBpbWFnZXMgKi9cbiAgcmV0dXJuIGRhdGE7XG59O1xuXG5JbnN0YWdyYW1GZWVkLnByb3RvdHlwZS5fYnVpbGRfZmVlZF9tYXJrdXAgPSBmdW5jdGlvbiAoZGF0YSkge1xuICB2YXIgbWFya3VwID0gJyc7XG4gIHZhciBjb3VudCA9IChkYXRhLmxlbmd0aCA8IHRoaXMuaW1hZ2VfY291bnQpPyBkYXRhLmxlbmd0aCA6IHRoaXMuaW1hZ2VfY291bnQ7XG4gIFxuICBmb3IgKHZhciBpID0gMDsgaSA8IGNvdW50OyBpKyspIHtcbiAgICB2YXIgaXRlbSA9IGRhdGFbaV07XG4gICAgaWYgKGl0ZW0pIHtcbiAgICAgIG1hcmt1cCArPSB0aGlzLl9idWlsZF9pdGVtX21hcmt1cChpdGVtKTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIG1hcmt1cDtcbn07XG4gIFxuSW5zdGFncmFtRmVlZC5wcm90b3R5cGUuX2J1aWxkX2l0ZW1fbWFya3VwID0gZnVuY3Rpb24gKGRhdGEpIHtcbiAgcmV0dXJuICc8ZGl2IGNsYXNzPVwiZ3JvdXAtaXRlbS13cmFwXCI+XFxcbiAgICA8ZmlndXJlIGNsYXNzPVwiZ3JvdXAtaXRlbSB0aHVtYm5haWxcIj5cXFxuICAgICAgPGEgaHJlZj1cIicrIGRhdGEubGluayArJ1wiPlxcXG4gICAgICAgIDxkaXYgY2xhc3M9XCJncm91cC1pdGVtLWltYWdlXCI+XFxcbiAgICAgICAgICA8aW1nIHNyYz1cIicgKyBkYXRhLmltYWdlcy5zdGFuZGFyZF9yZXNvbHV0aW9uLnVybCArICdcIiBhbHQ9XCInICsgZGF0YS5jYXB0aW9uLnRleHQgKyAnXCI+XFxcbiAgICAgICAgPC9kaXY+XFxcbiAgICAgICAgPGZpZ2NhcHRpb24gY2xhc3M9XCJncm91cC1pdGVtLWRldGFpbHMgY2FwdGlvblwiPlxcXG4gICAgICAgICAgPHA+PHNwYW4gY2xhc3M9XCJ1c2VyXCI+JyArIGRhdGEuY2FwdGlvbi5mcm9tLnVzZXJuYW1lICsgJzwvc3Bhbj4gJyArIGRhdGEuY2FwdGlvbi50ZXh0ICsgJzwvcD5cXFxuICAgICAgICA8L2ZpZ2NhcHRpb24+XFxcbiAgICAgIDwvYT5cXFxuICAgIDwvZmlndXJlPlxcXG4gIDwvZGl2Pic7XG59O1xuXG5JbnN0YWdyYW1GZWVkLnByb3RvdHlwZS5fYnVpbGRfZXJyb3JfbWFya3VwID0gZnVuY3Rpb24gKGRhdGEpIHtcbiAgcmV0dXJuICc8cD4nICsgdGhpcy4kZWxlLmRhdGEoJ2VtcHR5LW1lc3NhZ2UnKSArICc8L3A+Jztcbn07XG5cbm1vZHVsZS5leHBvcnRzID0gSW5zdGFncmFtRmVlZDsiLCJ2YXIgSW5zdGFncmFtID0gcmVxdWlyZSgnLi9ic2lmeS5zb2NpYWxfZmVlZF9pbnN0YWdyYW0uanMnKTtcblxudmFyIFNvY2lhbEZlZWRzID0ge307XG5cblNvY2lhbEZlZWRzLmluaXQgPSBmdW5jdGlvbiAoKSB7XG4gIFNvY2lhbEZlZWRzLmluc3RhZ3JhbSgpO1xufTtcblxuU29jaWFsRmVlZHMuaW5zdGFncmFtID0gZnVuY3Rpb24gKCkge1xuICB2YXIgZWxlcyA9IFNvY2lhbEZlZWRzLl9nZXRfZWxlbWVudHMoJ2luc3RhZ3JhbScpO1xuICBpZiAoZWxlcy5sZW5ndGggPiAwKSB7XG4gICAgZWxlcy5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgIG5ldyBJbnN0YWdyYW0odGhpcyk7XG4gICAgfSk7XG4gIH1cbn07XG5cblNvY2lhbEZlZWRzLl9nZXRfZWxlbWVudHMgPSBmdW5jdGlvbiAoc2VydmljZSkge1xuICB2YXIgZWxlX3NlbGVjdG9yID0gJ1tkYXRhLXNvY2lhbC1mZWVkPVwiJytzZXJ2aWNlKydcIl0nO1xuICByZXR1cm4gJChlbGVfc2VsZWN0b3IpO1xufTtcblxubW9kdWxlLmV4cG9ydHMgPSBTb2NpYWxGZWVkczsiLCJyZXF1aXJlKCd1bmlmb3JtVGh1bWJuYWlscycpO1xucmVxdWlyZSgnanF1ZXJ5LW9yZGVybHknKTtcblxudmFyIFRodW1ibmFpbHMgPSB7fTtcblxuVGh1bWJuYWlscy5pbml0ID0gZnVuY3Rpb24gKCkge1xuICBpZiAoQnNpZnkudGh1bWJuYWlsX3NldHRpbmdzLmNvbnN0cmFpbl9pbWFnZXMpIHtcbiAgICBcbiAgICB2YXIgb3B0cyA9IHt9O1xuICAgIG9wdHMuZml0ID0gKEJzaWZ5LnRodW1ibmFpbF9zZXR0aW5ncy5jcm9wX2ltYWdlcyk/ICdjcm9wJyA6ICdzY2FsZSc7XG4gICAgb3B0cy5hbGlnbiA9IEJzaWZ5LnRodW1ibmFpbF9zZXR0aW5ncy5pbWFnZV9hbGlnbm1lbnQudG9Mb3dlckNhc2UoKTtcbiAgICB2YXIgcmF0aW8gPSBCc2lmeS50aHVtYm5haWxfc2V0dGluZ3MuaW1hZ2VfcmF0aW8udG9Mb3dlckNhc2UoKTtcbiAgICBpZiAocmF0aW8gPT09ICdzcXVhcmUnIHx8IHJhdGlvID09PSAnbGFuZHNjYXBlJyB8fCByYXRpbyA9PT0gJ3BvcnRyYWl0Jykge1xuICAgICAgb3B0cy5mb3JtYXQgPSByYXRpbztcbiAgICB9IGVsc2Uge1xuICAgICAgb3B0cy5yYXRpbyA9IHJhdGlvO1xuICAgIH1cbiAgICBcbiAgICAkKEJzaWZ5LnRodW1ibmFpbF9zZWxlY3RvcnMuaW1hZ2Vfd3JhcHBlcikudW5pZm9ybV90aHVtYm5haWxzKG9wdHMpLm9uKCd1dF9jb21wbGV0ZScsIGZ1bmN0aW9uKCl7XG4gICAgICBUaHVtYm5haWxzLm9yZGVybHkoKTtcbiAgICB9KTtcbiAgfSBlbHNlIHtcbiAgICAvLyBqdXN0IHVzZSBvcmRlcmx5XG4gICAgVGh1bWJuYWlscy5vcmRlcmx5KCk7XG4gIH1cbn07XG5cblRodW1ibmFpbHMub3JkZXJseSA9IGZ1bmN0aW9uICgpIHtcbiAgJChCc2lmeS50aHVtYm5haWxfc2VsZWN0b3JzLmRldGFpbHNfd3JhcHBlcikub3JkZXJseSh7IG1ldGhvZDogJ2NoaWxkcmVuJyB9KTtcbn07XG5cbm1vZHVsZS5leHBvcnRzID0gVGh1bWJuYWlsczsiLCJ2YXIgU3dpcGUgPSBmdW5jdGlvbiAoKSB7XG4gIHRoaXMudGhyZXNob2xkID0gNTtcbiAgdGhpcy54RG93biA9IG51bGw7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcbiAgdGhpcy55RG93biA9IG51bGw7XG4gIHRoaXMuYWRkX2V2ZW50X2xpc3RlbmVycygpO1xufTtcblxuU3dpcGUucHJvdG90eXBlLmFkZF9ldmVudF9saXN0ZW5lcnMgPSBmdW5jdGlvbiAoKSB7XG4gIHZhciBfdGhpcyA9IHRoaXM7XG4gIGlmIChFbGVtZW50LnByb3RvdHlwZS5hZGRFdmVudExpc3RlbmVyKSB7XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hzdGFydCcsIGZ1bmN0aW9uIChldnQpIHtcbiAgICAgIF90aGlzLmhhbmRsZVRvdWNoU3RhcnQoZXZ0KTtcbiAgICB9LCBmYWxzZSk7XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2htb3ZlJywgZnVuY3Rpb24gKGV2dCkge1xuICAgICAgX3RoaXMuaGFuZGxlVG91Y2hNb3ZlKGV2dCk7XG4gICAgfSwgZmFsc2UpO1xuICB9XG59O1xuXG5Td2lwZS5wcm90b3R5cGUuaGFuZGxlVG91Y2hTdGFydCA9IGZ1bmN0aW9uIChldnQpIHsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxuICB0aGlzLnhEb3duID0gZXZ0LnRvdWNoZXNbMF0uY2xpZW50WDsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxuICB0aGlzLnlEb3duID0gZXZ0LnRvdWNoZXNbMF0uY2xpZW50WTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxufTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcblxuU3dpcGUucHJvdG90eXBlLmhhbmRsZVRvdWNoTW92ZSA9IGZ1bmN0aW9uIChldnQpIHtcbiAgaWYgKCAhIHRoaXMueERvd24gfHwgISB0aGlzLnlEb3duICkgcmV0dXJuO1xuICBcbiAgdmFyIGN1cnJlbnRfdGFyZ2V0ID0gZXZ0LnRhcmdldFRvdWNoZXNbMF0udGFyZ2V0O1xuICBcbiAgdmFyIHhVcCA9IGV2dC50b3VjaGVzWzBdLmNsaWVudFg7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gIHZhciB5VXAgPSBldnQudG91Y2hlc1swXS5jbGllbnRZO1xuICBcbiAgdmFyIHhEaWZmID0gdGhpcy54RG93biAtIHhVcDtcbiAgdmFyIHlEaWZmID0gdGhpcy55RG93biAtIHlVcDtcbiAgXG4gIGlmICggTWF0aC5hYnMoIHhEaWZmICkgPiBNYXRoLmFicyggeURpZmYgKSApIHtcbiAgICBpZiAoIHhEaWZmID4gMCApIHtcbiAgICAgIGlmICh4RGlmZiA+IHRoaXMudGhyZXNob2xkKSB7XG4gICAgICAgICQoY3VycmVudF90YXJnZXQpLnRyaWdnZXIoJ3N3aXBlTGVmdCcpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBpZiAoeERpZmYgKiAtMSA+IHRoaXMudGhyZXNob2xkKSB7XG4gICAgICAgICQoY3VycmVudF90YXJnZXQpLnRyaWdnZXIoJ3N3aXBlUmlnaHQnKTtcbiAgICAgIH1cbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgaWYgKCB5RGlmZiA+IDAgKSB7XG4gICAgICBpZiAoeURpZmYgPiB0aGlzLnRocmVzaG9sZCkge1xuICAgICAgICAkKGN1cnJlbnRfdGFyZ2V0KS50cmlnZ2VyKCdzd2lwZVVwJyk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmICh5RGlmZiAqIC0xID4gdGhpcy50aHJlc2hvbGQpIHtcbiAgICAgICAgJChjdXJyZW50X3RhcmdldCkudHJpZ2dlcignc3dpcGVEb3duJyk7XG4gICAgICB9XG4gICAgfSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gIH1cbiAgLyogcmVzZXQgdmFsdWVzICovXG4gIHRoaXMueERvd24gPSBudWxsO1xuICB0aGlzLnlEb3duID0gbnVsbDsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcbn07XG5cbm5ldyBTd2lwZSgpOyIsInZhciBWYXJpYW50T3B0aW9uU3dpdGNoZXIgPSB7fTtcblxuLy8gU3dpdGNoIHRoZSB2YXJpYW50IGlmIHRoZSBnYWxsZXJ5IHRodW1iIGlzIGxpbmtlZCB0byBvbmVcblZhcmlhbnRPcHRpb25Td2l0Y2hlci5pbWFnZV92YXJpYW50X3N3aXRjaGVyID0gZnVuY3Rpb24gKCkge1xuICBcbiAgdmFyICRwcm9kdWN0X3NlbGVjdG9yID0gJChCc2lmeS5zZWxlY3RvcnMucHJvZHVjdC5zZWxlY3Rfc2VsZWN0b3IpO1xuICBcbiAgJChkb2N1bWVudCkub24oJ2NsaWNrJywgJ1tkYXRhLXZhcmlhbnQtaWRdJywgZnVuY3Rpb24gKGUpIHtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgdmFyICRjdXJyZW50X3RhcmdldCA9ICQoZS5jdXJyZW50VGFyZ2V0KTtcbiAgICAvLyB1cGRhdGUgdGhlIHByb2R1Y3Qgc2VsZWN0b3Igd2l0aCB0aGUgbmV3IHZhcmlhbnQgaWRcbiAgICAkcHJvZHVjdF9zZWxlY3Rvci52YWwoJGN1cnJlbnRfdGFyZ2V0LmRhdGEoJ3ZhcmlhbnQtaWQnKSk7XG4gICAgLy8gdXBkYXRlIHRoZSBvcHRpb24gc2VsZWN0b3JzXG4gICAgVmFyaWFudE9wdGlvblN3aXRjaGVyLnVwZGF0ZV9wcm9kdWN0X3NlbGVjdG9yX29wdGlvbnMoJHByb2R1Y3Rfc2VsZWN0b3IpO1xuICB9KTtcbn07XG5cbi8vIE1ha2UgdGhlIG9yaWdpbmFsIHZhcmlhbnQgc2VsZWN0b3IgdXBkYXRlIHRoZSBnZW5lcmF0ZWQgb3B0aW9uIHNlbGVjdG9yc1xuLy8gd2UgYXJlIG5vdCBkb2luZyB0aGlzIG9uIGEgdHJpZ2dlciBldmVudCBiZWNhdXNlIGlmIHdlIGRpZCB3ZSdkIGVuZCB1cCBpbiByZWN1cnNpdmUgaGVsbFxuVmFyaWFudE9wdGlvblN3aXRjaGVyLnVwZGF0ZV9wcm9kdWN0X3NlbGVjdG9yX29wdGlvbnMgPSBmdW5jdGlvbiAoJHByb2R1Y3Rfc2VsZWN0b3IpIHtcbiAgXG4gIC8vIGdldCB0aGUgc2VsZWN0ZWQgdmFyaWFudCBvYmplY3RcbiAgdmFyIHZhcmlhbnRfaWQgPSAkcHJvZHVjdF9zZWxlY3Rvci52YWwoKTtcbiAgdmFyIHZhcmlhbnQgPSBCc2lmeS5nZXRfdmFyaWFudF9ieV9pZCh2YXJpYW50X2lkKTtcbiAgXG4gIGlmICh2YXJpYW50KSB7XG4gICAgLy8gdXBkYXRlIGVhY2ggb3B0aW9uIHNlbGVjdG9yXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBCc2lmeS5wcm9kdWN0Lm9wdGlvbnMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciBvcHRpb24gPSAnb3B0aW9uJysoaSsxKTtcbiAgICAgIHZhciB2YWx1ZSA9IHZhcmlhbnRbb3B0aW9uXTtcbiAgICAgICQoJy5zaW5nbGUtb3B0aW9uLXNlbGVjdG9yOmVxKCcraSsnKScpLnZhbCh2YWx1ZSkudHJpZ2dlcignY2hhbmdlJyk7XG4gICAgfVxuICB9XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IFZhcmlhbnRPcHRpb25Td2l0Y2hlcjsiLCIvKlxuICBQSEQgQ2FydCBpcyB0aGUgbWFpbiBmaWxlIGZvciBoYW5kbGluZyBhbGwgdGhlIGRpZmZlcmVudCB3YXlzIHRoYXQgdGhlIHNpdGUgY2FuIGFkZCBpdGVtcyB0byB0aGUgY2FydFxuKi9cblxudmFyIFNpeFBhY2tCdWlsZGVyID0gcmVxdWlyZSgnLi9waGQuY2FydC5zaXhwYWNrLmpzJyk7XG52YXIgTXVsdGlTdGVwQnVpbGRlciA9IHJlcXVpcmUoJy4vcGhkLmNhcnQubXVsdGlzdGVwLmpzJyk7XG52YXIgU3RhbmRhcmRDYXJ0ID0gcmVxdWlyZSgnLi9waGQuY2FydC5zdGFuZGFyZC5qcycpO1xuXG52YXIgUGhkQ2FydCA9IGZ1bmN0aW9uICgpIHtcbiAgdmFyIGNhcnQgPSBuZXcgU3RhbmRhcmRDYXJ0KCk7XG4gIFxuICAvLyBUT0RPOiBvbmx5IGxvYWQgdGhlIGFwcHJvcHJpYXRlIGNsYXNzZXMgdGhhdCBhcmUgbmVlZGVkIGZvciB0aGUgcGFnZVxuICBcbiAgbmV3IFNpeFBhY2tCdWlsZGVyKGNhcnQpO1xuICBuZXcgTXVsdGlTdGVwQnVpbGRlcihjYXJ0KTtcbn07XG5cbm1vZHVsZS5leHBvcnRzID0gUGhkQ2FydDsiLCJ2YXIgTXVsdGlTdGVwQnVpbGRlciA9IGZ1bmN0aW9uIChzdGFuZGFyZF9jYXJ0KSB7XG4gIHRoaXMuc3RhbmRhcmRfY2FydCA9IHN0YW5kYXJkX2NhcnQ7XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IE11bHRpU3RlcEJ1aWxkZXI7IiwidmFyIEV2ZW50ZXIgPSByZXF1aXJlKCcuL19ldmVudGVyLmpzJyk7XG52YXIgSXRlbXNIb2xkZXIgPSByZXF1aXJlKCcuL3BoZC5jYXJ0LnNpeHBhY2suaG9sZGVyX2l0ZW1zLmpzJyk7XG52YXIgSXRlbXNEaXNwbGF5ID0gcmVxdWlyZSgnLi9waGQuY2FydC5zaXhwYWNrLmhvbGRlcl9kaXNwbGF5LmpzJyk7XG52YXIgSXRlbVN1Ym1pdHRlciA9IHJlcXVpcmUoJy4vcGhkLmNhcnQuc2l4cGFjay5ob2xkZXJfc3VibWl0dGVyLmpzJyk7XG5cbi8vIFRPRE86IHN1Ym1pdHRlciBjbGFzc1xuXG52YXIgU2l4UGFja0hvbGRlciA9IGZ1bmN0aW9uICgkZWxlKSB7XG4gIHRoaXMuJGVsZSA9ICRlbGU7XG4gIG5ldyBFdmVudGVyKHRoaXMpO1xuICBcbiAgdmFyIGxpbWl0X211bHRpcGxlID0gdGhpcy4kZWxlLmRhdGEoJ3BoZC1ob2xkaW5nLWxpbWl0LW11bHRpcGxlJykgfHwgNjtcbiAgdmFyIGRpc3BsYXlfZWxlbWVudCA9IHRoaXMuJGVsZS5maW5kKCdbZGF0YS1waGQtaG9sZGluZy1pdGVtc10nKTtcbiAgdmFyIHN1Ym1pdHRlcl9lbGVtZW50ID0gdGhpcy4kZWxlLmZpbmQoJ2Zvcm0nKTtcbiAgXG4gIHRoaXMuaXRlbXMgPSBuZXcgSXRlbXNIb2xkZXIobGltaXRfbXVsdGlwbGUpO1xuICB0aGlzLml0ZW1zX2Rpc3BsYXkgPSBuZXcgSXRlbXNEaXNwbGF5KGRpc3BsYXlfZWxlbWVudCwgbGltaXRfbXVsdGlwbGUsIHRoaXMuaXRlbXMpO1xuICB0aGlzLnN1Ym1pdHRlciA9IG5ldyBJdGVtU3VibWl0dGVyKHN1Ym1pdHRlcl9lbGVtZW50LCB0aGlzLml0ZW1zKTtcbiAgXG4gIHRoaXMuX2FkZF9ldmVudF9saXN0ZW5lcnMoKTtcbn07XG5cblNpeFBhY2tIb2xkZXIucHJvdG90eXBlLmFkZF90b19ob2xkaW5nID0gZnVuY3Rpb24gKHByb2R1Y3QpIHtcbiAgdGhpcy5pdGVtcy5hZGRfaXRlbShwcm9kdWN0KTtcbiAgcmV0dXJuIHRoaXMuaXRlbXMuaXRlbV9jb3VudChwcm9kdWN0LmlkKTtcbn07XG5cblNpeFBhY2tIb2xkZXIucHJvdG90eXBlLnJlbW92ZV9mcm9tX2hvbGRpbmcgPSBmdW5jdGlvbiAocHJvZHVjdF9pZCkge1xuICB0aGlzLml0ZW1zLnJlbW92ZV9pdGVtKHByb2R1Y3RfaWQpO1xuICByZXR1cm4gdGhpcy5pdGVtcy5pdGVtX2NvdW50KHByb2R1Y3RfaWQpO1xufTtcblxuU2l4UGFja0hvbGRlci5wcm90b3R5cGUudXBkYXRlX2l0ZW1faW5faG9sZGluZyA9IGZ1bmN0aW9uIChwcm9kdWN0LCBxdHkpIHtcbiAgdGhpcy5pdGVtcy51cGRhdGVfaXRlbShwcm9kdWN0LCBxdHkpO1xuICByZXR1cm4gdGhpcy5pdGVtcy5pdGVtX2NvdW50KHByb2R1Y3QuaWQpO1xufTtcblxuLy8gUHJpdmF0ZVxuXG5TaXhQYWNrSG9sZGVyLnByb3RvdHlwZS5fYWRkX2V2ZW50X2xpc3RlbmVycyA9IGZ1bmN0aW9uICgpIHtcbiAgdmFyIF90aGlzID0gdGhpcztcbiAgXG4gIC8vIHJlbW92ZSBhbiBpdGVtIGZyb20gaG9sZGluZywgYnV0IGZyb20gaW5zaWRlIGl0cyBkaXNwbGF5XG4gIF90aGlzLml0ZW1zX2Rpc3BsYXkub24oJ1JlbW92ZURpc3BsYXlJdGVtJywgZnVuY3Rpb24gKHByb2R1Y3RfaWQpIHtcbiAgICBfdGhpcy5pdGVtcy5yZW1vdmVfaXRlbShwcm9kdWN0X2lkKTtcbiAgICB2YXIgYXJncyA9IFtcbiAgICAgIHByb2R1Y3RfaWQsXG4gICAgICB0aGlzLml0ZW1zLml0ZW1fY291bnQocHJvZHVjdF9pZClcbiAgICBdO1xuICAgIF90aGlzLnRyaWdnZXIoJ1JlbW92ZUl0ZW0nLCBhcmdzKTtcbiAgfSk7XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IFNpeFBhY2tIb2xkZXI7IiwiLypqc2hpbnQgbXVsdGlzdHI6IHRydWUgKi9cblxudmFyIEV2ZW50ZXIgPSByZXF1aXJlKCcuL19ldmVudGVyLmpzJyk7XG5cbnZhciBTaXhQYWNrSG9sZGVySXRlbXNEaXNwbGF5ID0gZnVuY3Rpb24gKCRlbGUsIGxpbWl0X211bHRpcGxlLCBpdGVtcykge1xuICB0aGlzLiRlbGUgPSAkZWxlO1xuICB0aGlzLml0ZW1zID0gaXRlbXM7XG4gIHRoaXMubGltaXRfbXVsdGlwbGUgPSBsaW1pdF9tdWx0aXBsZTtcbiAgdGhpcy50b29sdGlwX3NlbGVjdG9yID0gJ1tkYXRhLXRvZ2dsZT1cInRvb2x0aXBcIl0nO1xuICB0aGlzLmRlZmF1bHRfY29sb3IgPSAnI0UwRjBEOSc7XG4gIFxuICBuZXcgRXZlbnRlcih0aGlzKTtcbiAgXG4gIHRoaXMuX2FkZF9ldmVudF9saXN0ZW5lcnMoKTtcbiAgdGhpcy5fYnVpbGRfZW1wdHlfZGlzcGxheV9pdGVtcygpO1xuICB0aGlzLl9hZGRfdG9vbHRpcHMoKTtcbn07XG5cblNpeFBhY2tIb2xkZXJJdGVtc0Rpc3BsYXkucHJvdG90eXBlLnVwZGF0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgdGhpcy5fY2xlYXJfZGlzcGxheV9pdGVtcygpO1xuICB0aGlzLl9yZWRyYXdfZGlzcGxheV9pdGVtcygpO1xuICB0aGlzLl91cGRhdGVfZGlzcGxheV9pdGVtcygpO1xuICB0aGlzLl9hZGRfdG9vbHRpcHMoKTtcbn07XG5cblNpeFBhY2tIb2xkZXJJdGVtc0Rpc3BsYXkucHJvdG90eXBlLnJlc2V0ID0gZnVuY3Rpb24gKCkge1xuICB0aGlzLl9jbGVhcl9kaXNwbGF5X2l0ZW1zKCk7XG4gIHRoaXMuX2J1aWxkX2VtcHR5X2Rpc3BsYXlfaXRlbXMoKTtcbiAgdGhpcy5fYWRkX3Rvb2x0aXBzKCk7XG59O1xuXG4vLyBQcml2YXRlXG5cblNpeFBhY2tIb2xkZXJJdGVtc0Rpc3BsYXkucHJvdG90eXBlLl9hZGRfZXZlbnRfbGlzdGVuZXJzID0gZnVuY3Rpb24gKCkge1xuICB2YXIgX3RoaXMgPSB0aGlzO1xuICBfdGhpcy5pdGVtcy5vbignSXRlbXNVcGRhdGVkJywgZnVuY3Rpb24gKCkge1xuICAgIF90aGlzLnVwZGF0ZSgpO1xuICB9KTtcbiAgXG4gIF90aGlzLiRlbGUub24oJ2NsaWNrJywgJy5ob2xkaW5nLWl0ZW0nLCBmdW5jdGlvbiAoZSkge1xuICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICBfdGhpcy5fcmVtb3ZlX2l0ZW0oZSk7XG4gIH0pO1xufTtcblxuU2l4UGFja0hvbGRlckl0ZW1zRGlzcGxheS5wcm90b3R5cGUuX3JlZHJhd19kaXNwbGF5X2l0ZW1zID0gZnVuY3Rpb24gKCkge1xuICB2YXIgaXRlbXNfY291bnQgPSB0aGlzLml0ZW1zLnRvdGFsX2NvdW50KCk7XG4gIHZhciBsaW1pdCA9IE1hdGguZmxvb3IoaXRlbXNfY291bnQgLyB0aGlzLmxpbWl0X211bHRpcGxlKSArIDE7XG4gIGZvciAodmFyIGogPSAwOyBqIDwgbGltaXQ7IGorKykge1xuICAgIHRoaXMuX2J1aWxkX2VtcHR5X2Rpc3BsYXlfaXRlbXMoKTtcbiAgfVxufTtcblxuU2l4UGFja0hvbGRlckl0ZW1zRGlzcGxheS5wcm90b3R5cGUuX2NsZWFyX2Rpc3BsYXlfaXRlbXMgPSBmdW5jdGlvbiAoKSB7XG4gIHRoaXMuX3JlbW92ZV90b29sdGlwcygpO1xuICB0aGlzLiRlbGUuaHRtbCgnJyk7XG59O1xuXG5TaXhQYWNrSG9sZGVySXRlbXNEaXNwbGF5LnByb3RvdHlwZS5fYnVpbGRfZW1wdHlfZGlzcGxheV9pdGVtcyA9IGZ1bmN0aW9uICgpIHtcbiAgdmFyIG1hcmt1cCA9ICcnO1xuICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMubGltaXRfbXVsdGlwbGU7IGkrKykge1xuICAgIG1hcmt1cCArPSB0aGlzLl9lbXB0eV9kaXNwbGF5X2l0ZW1fbWFya3VwKCk7XG4gIH1cbiAgdGhpcy4kZWxlLmFwcGVuZCgnPGRpdiBjbGFzcz1cImhvbGRpbmctaXRlbS1ncm91cFwiPicrbWFya3VwKyc8L2Rpdj4nKTtcbn07XG5cblNpeFBhY2tIb2xkZXJJdGVtc0Rpc3BsYXkucHJvdG90eXBlLl9lbXB0eV9kaXNwbGF5X2l0ZW1fbWFya3VwID0gZnVuY3Rpb24gKCkge1xuICByZXR1cm4gJzxhIGNsYXNzPVwiaG9sZGluZy1pdGVtIGhvbGRpbmctaXRlbS1kaXNhYmxlZFwiIGRhdGEtdG9nZ2xlPVwidG9vbHRpcFwiIGRhdGEtcGxhY2VtZW50PVwicmlnaHRcIiBkYXRhLXBoZC1pdGVtLWlkIHRpdGxlPVwiRW1wdHkgaXRlbSBzbG90XCI+XFxcbiAgICA8c3BhbiBjbGFzcz1cImZhIGZhLXRpbWVzLWNpcmNsZVwiPjwvc3Bhbj5cXFxuICAgIDxzdmcgdmVyc2lvbj1cIjEuMlwiIGJhc2Vwcm9maWxlPVwidGlueVwiIGlkPVwiTGF5ZXJfMVwiIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiB4bWxuczp4bGluaz1cImh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmtcIiB4PVwiMHB4XCIgeT1cIjBweFwiIHZpZXdib3g9XCIwIDAgMTUwIDQwMFwiIHhtbDpzcGFjZT1cInByZXNlcnZlXCI+IDxwYXRoIGQ9XCJNNjQuMiw5LjZjLTQuNywwLjMtOS4zLDAuNi0xMy45LDEuOWMtMy42LDEuMS01LjYsMy43LTYsN2MtMC45LDcuNS0xLjgsMTUtMS4zLDIyLjVjMC4yLDIuMiwxLjcsNC4xLDEuNyw2LjUsYzAsMi41LDAuNCw0LjksMC43LDcuNGMwLjEsMS4yLTAuNiwxLjYtMS42LDEuOGMtMS4zLDAuMy0yLjQsMC45LTIuOCwyLjRjLTAuNywyLjktMC40LDMuNCwyLjYsMy45YzEuMiwwLjIsMS44LDAuNywxLjgsMixjLTAuMSwyLjcsMCw1LjMsMCw4YzAsMC44LTAuMSwxLjUtMC45LDJjLTguNCwzLjgtMTguMSwxNS44LTE4LjEsMTUuOGMtNS44LDcuNi05LjMsMTYuMS0xMS42LDI1LjRjLTEuMSw0LjQtMSw4LjctMS4xLDEzLjEsbC0wLjIsMjExLjRjLTAuMiwxMS41LTAuNCwyMi45LDAuMiwzNC40YzAuNCw4LDQuOCwxMi41LDEzLjUsMTQuMWM1LjUsMSwxMSwxLjMsMTYuNSwxLjZjOC4xLDAuMywxOC4xLDAuMSwyNi4yLDAuMmgxMC4yLGM4LjEsMCwxOC4xLDAuMiwyNi4yLTAuMmM1LjUtMC4yLDExLTAuNSwxNi41LTEuNmM4LjctMS42LDEzLjEtNi4xLDEzLjUtMTQuMWMwLjYtMTEuNSwwLjMtMjIuOSwwLjItMzQuNGwtMC4yLTIxMS40LGMwLTQuNCwwLjEtOC43LTEuMS0xMy4xYy0yLjMtOS4yLTUuOS0xNy43LTExLjYtMjUuNGMwLDAtOC0xMS4zLTE4LjEtMTUuOGMtMC44LTAuNS0wLjktMS4yLTAuOS0yYzAtMi43LDAtNS4zLDAtOCxjMC0xLjMsMC42LTEuOCwxLjgtMmMyLjktMC41LDMuMi0xLDIuNi0zLjljLTAuNC0xLjUtMS41LTIuMS0yLjgtMi40Yy0xLTAuMi0xLjctMC43LTEuNi0xLjhjMC4yLTIuNSwwLjYtNC45LDAuNy03LjQsYzAtMi4zLDEuNi00LjIsMS43LTYuNWMwLjUtNy42LTAuMy0xNS4xLTEuMy0yMi41Yy0wLjQtMy4zLTIuNC01LjktNi03Yy00LjYtMS4zLTkuMi0xLjYtMTMuOS0xLjlDNzUuMyw4LjUsNjQuMiw5LjYsNjQuMiw5LjYsYy00LjcsMC4zLTkuMywwLjYtMTMuOSwxLjljLTMuNiwxLjEtNS42LDMuNy02LDdjLTAuOSw3LjUtMS44LDE1LTEuMywyMi41YzAuMiwyLjIsMS43LDQuMSwxLjcsNi41YzAsMi41LDAuNCw0LjksMC43LDcuNCxjMC4xLDEuMi0wLjYsMS42LTEuNiwxLjhjLTEuMywwLjMtMi40LDAuOS0yLjgsMi40Yy0wLjcsMi45LTAuNCwzLjQsMi42LDMuOWMxLjIsMC4yLDEuOCwwLjcsMS44LDJjLTAuMSwyLjcsMCw1LjMsMCw4LGMwLDAuOC0wLjEsMS41LTAuOSwyXCI+PC9wYXRoPiA8L3N2Zz5cXFxuICA8L2E+Jztcbn07XG5cblNpeFBhY2tIb2xkZXJJdGVtc0Rpc3BsYXkucHJvdG90eXBlLl91cGRhdGVfZGlzcGxheV9pdGVtcyA9IGZ1bmN0aW9uICgpIHtcbiAgdmFyIGl0ZW1zX2NvdW50ID0gdGhpcy5pdGVtcy50b3RhbF9jb3VudCgpO1xuICBmb3IgKHZhciBpID0gMDsgaSA8IGl0ZW1zX2NvdW50OyBpKyspIHtcbiAgICB2YXIgaXRlbSA9IHRoaXMuaXRlbXMucHJvZHVjdF9ieV9pbmRleChpKTtcbiAgICB2YXIgJGl0ZW1fZWxlID0gdGhpcy4kZWxlLmZpbmQoJy5ob2xkaW5nLWl0ZW0nKS5lcShpKTtcbiAgICBcbiAgICAkaXRlbV9lbGUucmVtb3ZlQ2xhc3MoJ2hvbGRpbmctaXRlbS1kaXNhYmxlZCcpXG4gICAgLmF0dHIoJ3RpdGxlJywgJ1JlbW92ZSAnK2l0ZW0udGl0bGUpXG4gICAgLmF0dHIoJ2RhdGEtcGhkLWl0ZW0taWQnLCBpdGVtLmlkKVxuICAgIC5kYXRhKCdwaGQtaXRlbS1pZCcsIGl0ZW0uaWQpO1xuICAgIFxuICAgIGlmKGl0ZW0uY29sb3Ipe1xuICAgICAgJGl0ZW1fZWxlLmZpbmQoJ3BhdGgnKS5jc3Moe1xuICAgICAgICBmaWxsOiAoKGl0ZW0uY29sb3JbMF0gIT09ICcjJyk/ICcjJzogJycpK2l0ZW0uY29sb3JcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxufTtcblxuU2l4UGFja0hvbGRlckl0ZW1zRGlzcGxheS5wcm90b3R5cGUuX2FkZF90b29sdGlwcyA9IGZ1bmN0aW9uICgpIHtcbiAgJCh0aGlzLnRvb2x0aXBfc2VsZWN0b3IpLnRvb2x0aXAoKTtcbn07XG5cblNpeFBhY2tIb2xkZXJJdGVtc0Rpc3BsYXkucHJvdG90eXBlLl9yZW1vdmVfdG9vbHRpcHMgPSBmdW5jdGlvbiAoKSB7XG4gICQodGhpcy50b29sdGlwX3NlbGVjdG9yKS50b29sdGlwKCdkZXN0cm95Jyk7XG59O1xuXG5TaXhQYWNrSG9sZGVySXRlbXNEaXNwbGF5LnByb3RvdHlwZS5fcmVtb3ZlX2l0ZW0gPSBmdW5jdGlvbiAoZSkgeyAgXG4gIHZhciAkY3VycmVudFRhcmdldCA9ICQoZS5jdXJyZW50VGFyZ2V0KTtcbiAgaWYgKCEkY3VycmVudFRhcmdldC5oYXNDbGFzcygnaG9sZGluZy1pdGVtLWRpc2FibGVkJykpIHtcbiAgICB2YXIgYXJncyA9IFtcbiAgICAgICRjdXJyZW50VGFyZ2V0LmRhdGEoJ3BoZC1pdGVtLWlkJylcbiAgICBdO1xuICAgIHRoaXMudHJpZ2dlcignUmVtb3ZlRGlzcGxheUl0ZW0nLCBhcmdzKTtcbiAgfVxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBTaXhQYWNrSG9sZGVySXRlbXNEaXNwbGF5OyIsInZhciBFdmVudGVyID0gcmVxdWlyZSgnLi9fZXZlbnRlci5qcycpO1xuXG52YXIgU2l4UGFja0hvbGRlckl0ZW1zID0gZnVuY3Rpb24gKGxpbWl0X211bHRpcGxlKSB7XG4gIG5ldyBFdmVudGVyKHRoaXMpO1xuICBcbiAgdGhpcy5wcm9kdWN0cyA9IFtdO1xuICB0aGlzLnByb2R1Y3RzX2FyZV9hZGRhYmxlID0gZmFsc2U7XG4gIHRoaXMubGltaXRfbXVsdGlwbGUgPSBsaW1pdF9tdWx0aXBsZTtcbn07XG5cblNpeFBhY2tIb2xkZXJJdGVtcy5wcm90b3R5cGUuYWRkX2l0ZW0gPSBmdW5jdGlvbiAocHJvZHVjdCkge1xuICB0aGlzLnByb2R1Y3RzLnB1c2gocHJvZHVjdCk7XG4gIHRoaXMuX3VwZGF0ZV9pc19hZGRhYmxlX2FuZF90cmlnZ2VyKCdJdGVtQWRkZWQnKTtcbn07XG5cblNpeFBhY2tIb2xkZXJJdGVtcy5wcm90b3R5cGUucmVtb3ZlX2l0ZW0gPSBmdW5jdGlvbiAocHJvZHVjdF9pZCkge1xuICB2YXIgdG90YWxfY291bnQgPSB0aGlzLnRvdGFsX2NvdW50KCk7XG4gIGZvciAodmFyIGkgPSB0b3RhbF9jb3VudCAtIDE7IGkgPiAtMTsgaS0tKSB7IC8vIGxvb3AgYmFja3dhcmRzIHRvIHJlbW92ZSB0aGUgbGFzdCBhZGRlZCBpdGVtXG4gICAgdmFyIHJlbW92ZWQgPSB0aGlzLl9yZW1vdmVfcHJvZHVjdF9mcm9tX3N0YWNrKHByb2R1Y3RfaWQsIGkpO1xuICAgIGlmIChyZW1vdmVkKSB7XG4gICAgICBicmVhaztcbiAgICB9XG4gIH1cbiAgdGhpcy5fdXBkYXRlX2lzX2FkZGFibGVfYW5kX3RyaWdnZXIoJ0l0ZW1SZW1vdmVkJyk7XG59O1xuXG5TaXhQYWNrSG9sZGVySXRlbXMucHJvdG90eXBlLnVwZGF0ZV9pdGVtID0gZnVuY3Rpb24gKHByb2R1Y3QsIHF0eSkge1xuICAvLyByZW1vdmUgYWxsIGl0ZW1zIGZvciBhIGNsZWFuIHNsYXRlXG4gIHZhciB0b3RhbF9jb3VudCA9IHRoaXMudG90YWxfY291bnQoKTtcbiAgZm9yICh2YXIgaSA9IHRvdGFsX2NvdW50IC0gMTsgaSA+IC0xOyBpLS0pIHsgLy8gbG9vcCBiYWNrd2FyZHMgdG8gcmVtb3ZlIHRoZSBsYXN0IGFkZGVkIGl0ZW1cbiAgICB0aGlzLl9yZW1vdmVfcHJvZHVjdF9mcm9tX3N0YWNrKHByb2R1Y3QuaWQsIGkpO1xuICB9XG4gIC8vIHJlIGFkZCB0aGUgcHJvZHVjdHMgaWYgd2UgaGF2ZSB0aGVtXG4gIGlmIChxdHkgPiAwKSB7XG4gICAgZm9yICh2YXIgaiA9IDA7IGogPCBxdHk7IGorKykge1xuICAgICAgdGhpcy5wcm9kdWN0cy5wdXNoKHByb2R1Y3QpO1xuICAgIH1cbiAgfVxuICB0aGlzLl91cGRhdGVfaXNfYWRkYWJsZV9hbmRfdHJpZ2dlcignSXRlbVVwZGF0ZWQnKTtcbn07XG5cblNpeFBhY2tIb2xkZXJJdGVtcy5wcm90b3R5cGUuaXRlbV9jb3VudCA9IGZ1bmN0aW9uIChwcm9kdWN0X2lkKSB7XG4gIHZhciBjb3VudCA9IDA7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5wcm9kdWN0cy5sZW5ndGg7IGkrKykge1xuICAgIGlmICh0aGlzLnByb2R1Y3RzW2ldLmlkID09PSBwcm9kdWN0X2lkKSB7XG4gICAgICBjb3VudCsrO1xuICAgIH1cbiAgfVxuICByZXR1cm4gY291bnQ7XG59O1xuXG5TaXhQYWNrSG9sZGVySXRlbXMucHJvdG90eXBlLnRvdGFsX2NvdW50ID0gZnVuY3Rpb24gKCkge1xuICByZXR1cm4gdGhpcy5wcm9kdWN0cy5sZW5ndGg7XG59O1xuXG5TaXhQYWNrSG9sZGVySXRlbXMucHJvdG90eXBlLnByb2R1Y3RfYnlfaW5kZXggPSBmdW5jdGlvbiAoaW5kZXgpIHtcbiAgcmV0dXJuIHRoaXMucHJvZHVjdHNbaW5kZXhdO1xufTtcblxuLy8gUHJpdmF0ZVxuXG5TaXhQYWNrSG9sZGVySXRlbXMucHJvdG90eXBlLl9yZW1vdmVfcHJvZHVjdF9mcm9tX3N0YWNrID0gZnVuY3Rpb24gKHByb2R1Y3RfaWQsIGkpIHtcbiAgdmFyIHJlbW92ZWQgPSBbXTtcbiAgaWYgKHRoaXMucHJvZHVjdHNbaV0uaWQgPT09IHByb2R1Y3RfaWQpIHtcbiAgICByZW1vdmVkID0gdGhpcy5wcm9kdWN0cy5zcGxpY2UoaSwgMSk7XG4gIH1cbiAgcmV0dXJuIHJlbW92ZWQubGVuZ3RoID4gMDtcbn07XG5cblNpeFBhY2tIb2xkZXJJdGVtcy5wcm90b3R5cGUuX3VwZGF0ZV9pc19hZGRhYmxlX2FuZF90cmlnZ2VyID0gZnVuY3Rpb24gKGN1c3RvbV9ldmVudCkge1xuICB0aGlzLnByb2R1Y3RzX2FyZV9hZGRhYmxlID0gdGhpcy5faXNfYWRkYWJsZSgpO1xuICB0aGlzLnRyaWdnZXIoY3VzdG9tX2V2ZW50KTtcbiAgdGhpcy50cmlnZ2VyKCdJdGVtc1VwZGF0ZWQnKTtcbn07XG5cblNpeFBhY2tIb2xkZXJJdGVtcy5wcm90b3R5cGUuX2lzX2FkZGFibGUgPSBmdW5jdGlvbiAoKSB7XG4gIHZhciB0b3RhbF9jb3VudCA9IHRoaXMudG90YWxfY291bnQoKTtcbiAgdmFyIHByb2R1Y3RzX21vZCA9IHRvdGFsX2NvdW50ICUgdGhpcy5saW1pdF9tdWx0aXBsZTtcbiAgcmV0dXJuIHRvdGFsX2NvdW50ID4gMCAmJiBwcm9kdWN0c19tb2QgPT09IDA7XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IFNpeFBhY2tIb2xkZXJJdGVtczsiLCIvKmpzaGludCBtdWx0aXN0cjogdHJ1ZSAqL1xuXG52YXIgRXZlbnRlciA9IHJlcXVpcmUoJy4vX2V2ZW50ZXIuanMnKTtcbnZhciBNb2RhbCA9IHJlcXVpcmUoJy4vcGhkLm1vZGFsLmpzJyk7XG5cbnZhciBTaXhQYWNrSG9sZGVySXRlbVN1Ym1pdHRlciA9IGZ1bmN0aW9uICgkZWxlLCBpdGVtcykge1xuICBuZXcgRXZlbnRlcih0aGlzKTtcbiAgdGhpcy4kZWxlID0gJGVsZTtcbiAgdGhpcy5pdGVtcyA9IGl0ZW1zO1xuICB0aGlzLiRzdWJtaXQgPSAkZWxlLmZpbmQoJ1t0eXBlPVwic3VibWl0XCJdJyk7XG4gIHRoaXMubW9kYWwgPSBuZXcgTW9kYWwoe1xuICAgIG9uX29wZW46IGZ1bmN0aW9uICgpIHtcbiAgICAgIGNvbnNvbGUubG9nKCdzdWJtaXR0ZXIgbW9kYWwgb3BlbicpO1xuICAgIH0sXG4gICAgb25fY2xvc2U6IGZ1bmN0aW9uICgpIHtcbiAgICAgIGNvbnNvbGUubG9nKCdzdWJtaXR0ZXIgbW9kYWwgY2xvc2UnKTtcbiAgICB9XG4gIH0pO1xuICBcbiAgdGhpcy5fYWRkX2V2ZW50X2xpc3RlbmVycygpO1xufTtcblxuU2l4UGFja0hvbGRlckl0ZW1TdWJtaXR0ZXIucHJvdG90eXBlLl9hZGRfZXZlbnRfbGlzdGVuZXJzID0gZnVuY3Rpb24gKCkge1xuICB2YXIgX3RoaXMgPSB0aGlzO1xuICBcbiAgX3RoaXMuJGVsZS5vbignc3VibWl0JywgZnVuY3Rpb24gKGUpIHtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgX3RoaXMuX29wZW5fbW9kYWwoKTtcbiAgfSk7XG4gIFxuICBfdGhpcy5pdGVtcy5vbignSXRlbXNVcGRhdGVkJywgZnVuY3Rpb24gKCkge1xuICAgIF90aGlzLl90b2dnbGVfc3VibWl0YWJsaXR5KCk7XG4gIH0pO1xufTtcblxuU2l4UGFja0hvbGRlckl0ZW1TdWJtaXR0ZXIucHJvdG90eXBlLl90b2dnbGVfc3VibWl0YWJsaXR5ID0gZnVuY3Rpb24gKCkge1xuICBpZiAodGhpcy5pdGVtcy5wcm9kdWN0c19hcmVfYWRkYWJsZSkge1xuICAgIHRoaXMuJHN1Ym1pdC5wcm9wKCdkaXNhYmxlZCcsIGZhbHNlKTtcbiAgfSBlbHNlIHtcbiAgICB0aGlzLiRzdWJtaXQucHJvcCgnZGlzYWJsZWQnLCB0cnVlKTtcbiAgfVxufTtcblxuU2l4UGFja0hvbGRlckl0ZW1TdWJtaXR0ZXIucHJvdG90eXBlLl9vcGVuX21vZGFsID0gZnVuY3Rpb24gKCkgeyAgXG4gIHRoaXMubW9kYWwuY29udGVudCA9IHRoaXMuX21vZGFsX21hcmt1cCgpO1xuICB0aGlzLm1vZGFsLm9wZW4oKTtcbn07XG5cblNpeFBhY2tIb2xkZXJJdGVtU3VibWl0dGVyLnByb3RvdHlwZS5fbW9kYWxfbWFya3VwID0gZnVuY3Rpb24gKCkge1xuICByZXR1cm4gJzxkaXYgY2xhc3M9XCJtb2RhbC1oZWFkZXJcIj5cXFxuICAgIDxidXR0b24gdHlwZT1cImJ1dHRvblwiIGNsYXNzPVwiY2xvc2VcIiBkYXRhLWRpc21pc3M9XCJtb2RhbFwiIGFyaWEtbGFiZWw9XCJDbG9zZVwiPjxzcGFuIGNsYXNzPVwiZmEgZmEtdGltZXNcIiBhcmlhLWhpZGRlbj1cInRydWVcIj48L3NwYW4+PC9idXR0b24+XFxcbiAgICA8aDE+SG93IGRvIHlvdSB3YW50IHRvIGdldCB5b3VyIG9yZGVyPzwvaDE+XFxcbiAgPC9kaXY+XFxcbiAgPGRpdiBjbGFzcz1cIm1vZGFsLWJvZHlcIj5cXFxuICAgIDxidXR0b24gdHlwZT1cImJ1dHRvblwiIGNsYXNzPVwiYnRuIGJ0bi1kZWZhdWx0IGJ0bi1sZ1wiIGRhdGEtZGlzbWlzcz1cIm1vZGFsXCI+PHN0cm9uZz5BZGQgdG8gY2FydDwvc3Ryb25nPiBhcyBhIG9uZSBvZmYgcHVyY2Foc2U8L2J1dHRvbj5cXFxuICAgIDxidXR0b24gdHlwZT1cImJ1dHRvblwiIGNsYXNzPVwiYnRuIGJ0bi1wcmltYXJ5IGJ0bi1sZ1wiIGRhdGEtZGlzbWlzcz1cIm1vZGFsXCI+R2V0ICQxMCBvZmYgeW91ciBvcmRlciBpZiB5b3UgPHN0cm9uZz5TdWJzY3JpYmUgbm93ITwvc3Ryb25nPjwvYnV0dG9uPlxcXG4gIDwvZGl2Pic7XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IFNpeFBhY2tIb2xkZXJJdGVtU3VibWl0dGVyOyIsInZhciBFdmVudGVyID0gcmVxdWlyZSgnLi9fZXZlbnRlci5qcycpO1xudmFyIERhdGFNb2RlbCA9IHJlcXVpcmUoJy4vX2RhdGFfbW9kZWwuanMnKTtcbnZhciBNb2RhbCA9IHJlcXVpcmUoJy4vcGhkLm1vZGFsLmpzJyk7XG5cbnZhciBTaXhQYWNrSXRlbSA9IGZ1bmN0aW9uICgkZWxlLCBpZCkge1xuICB0aGlzLiRlbGUgPSAkZWxlO1xuICB0aGlzLmlkID0gaWQ7XG4gIFxuICBuZXcgRXZlbnRlcih0aGlzKTtcbiAgbmV3IERhdGFNb2RlbCh0aGlzLCB7XG4gICAgaG9sZGluZ19jb3VudDogJ1tkYXRhLXBoZC1pdGVtLScrdGhpcy5pZCsnLWNvdW50XSdcbiAgfSk7XG4gIFxuICB0aGlzLm1vZGFsID0gbmV3IE1vZGFsKCk7XG4gIFxuICB0aGlzLnZhcmlhbnRfaWQgPSB0aGlzLiRlbGUuZGF0YSgncGhkLXZhcmlhbnQtaWQnKTtcbiAgdGhpcy5wcm9kdWN0X3RpdGxlID0gdGhpcy4kZWxlLmRhdGEoJ3BoZC1wcm9kdWN0LXRpdGxlJyk7XG4gIHRoaXMucHJvZHVjdF9jb2xvciA9IHRoaXMuJGVsZS5kYXRhKCdwaGQtcHJvZHVjdC1jb2xvcicpO1xuICBcbiAgdGhpcy5wcm9kdWN0ID0ge1xuICAgIGlkOiB0aGlzLnZhcmlhbnRfaWQsXG4gICAgdGl0bGU6IHRoaXMucHJvZHVjdF90aXRsZSxcbiAgICBjb2xvcjogdGhpcy5wcm9kdWN0X2NvbG9yXG4gIH07XG4gIFxuICB0aGlzLl9hZGRfZXZlbnRfbGlzdGVuZXJzKCk7XG59O1xuXG4vLyBQcml2YXRlXG5cblNpeFBhY2tJdGVtLnByb3RvdHlwZS5fYWRkX2V2ZW50X2xpc3RlbmVycyA9IGZ1bmN0aW9uICgpIHtcbiAgdmFyIF90aGlzID0gdGhpcztcbiAgX3RoaXMuJGVsZS5vbignY2xpY2snLCAnW2RhdGEtcGhkLWFkZC1pdGVtXScsIGZ1bmN0aW9uIChlKSB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIGUuY3VycmVudFRhcmdldC5ibHVyKCk7XG4gICAgX3RoaXMuX3RyaWdnZXJfYWRkX3RvKCk7XG4gIH0pO1xuICBcbiAgX3RoaXMuJGVsZS5vbignY2xpY2snLCAnW2RhdGEtcGhkLXJlbW92ZS1pdGVtXScsIGZ1bmN0aW9uIChlKSB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIGUuY3VycmVudFRhcmdldC5ibHVyKCk7XG4gICAgX3RoaXMuX3RyaWdnZXJfcmVtb3ZlX2Zyb20oKTtcbiAgfSk7XG4gIFxuICBfdGhpcy4kZWxlLm9uKCdibHVyJywgJ1tkYXRhLXBoZC1lZGl0LWl0ZW1dJywgZnVuY3Rpb24gKGUpIHtcbiAgICB2YXIgcXR5ID0gcGFyc2VJbnQoZS5jdXJyZW50VGFyZ2V0LnZhbHVlKTtcbiAgICBfdGhpcy5fdHJpZ2dlcl91cGRhdGVfaG9sZGluZyhxdHkpO1xuICB9KTtcbiAgXG4gIF90aGlzLiRlbGUub24oJ2NsaWNrJywgJ1tkYXRhLXBoZC1tb2RhbF0nLCBmdW5jdGlvbiAoZSkge1xuICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICB2YXIgJGN1cnJlbnRfdGFyZ2V0ID0gJChlLmN1cnJlbnRUYXJnZXQpO1xuICAgIHZhciBjb250ZW50X3VybCA9ICRjdXJyZW50X3RhcmdldC5hdHRyKCdocmVmJyk7XG4gICAgX3RoaXMubW9kYWwub3BlbigpO1xuICAgICQuYWpheChjb250ZW50X3VybCkuZG9uZShmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgX3RoaXMubW9kYWwuY29udGVudCA9IGRhdGE7XG4gICAgfSk7XG4gIH0pO1xufTtcblxuU2l4UGFja0l0ZW0ucHJvdG90eXBlLl90cmlnZ2VyX2FkZF90byA9IGZ1bmN0aW9uICgpIHtcbiAgdmFyIGFyZ3MgPSBbXG4gICAgdGhpcy5wcm9kdWN0XG4gIF07XG4gIHRoaXMudHJpZ2dlcignQWRkVG9Ib2xkaW5nJywgYXJncyk7XG59O1xuXG5TaXhQYWNrSXRlbS5wcm90b3R5cGUuX3RyaWdnZXJfcmVtb3ZlX2Zyb20gPSBmdW5jdGlvbiAoKSB7XG4gIHZhciBhcmdzID0gW1xuICAgIHRoaXMudmFyaWFudF9pZFxuICBdO1xuICB0aGlzLnRyaWdnZXIoJ1JlbW92ZUZyb21Ib2xkaW5nJywgYXJncyk7XG59O1xuXG5TaXhQYWNrSXRlbS5wcm90b3R5cGUuX3RyaWdnZXJfdXBkYXRlX2hvbGRpbmcgPSBmdW5jdGlvbiAocXR5KSB7XG4gIHZhciBhcmdzID0gW1xuICAgIHRoaXMucHJvZHVjdCxcbiAgICBxdHlcbiAgXTtcbiAgdGhpcy50cmlnZ2VyKCdVcGRhdGVIb2xkaW5nJywgYXJncyk7XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IFNpeFBhY2tJdGVtOyIsInZhciBQcm9kdWN0SXRlbSA9IHJlcXVpcmUoJy4vcGhkLmNhcnQuc2l4cGFjay5pdGVtLmpzJyk7XG52YXIgUHJvZHVjdEhvbGRlciA9IHJlcXVpcmUoJy4vcGhkLmNhcnQuc2l4cGFjay5ob2xkZXIuanMnKTtcblxudmFyIFNpeFBhY2tCdWlsZGVyID0gZnVuY3Rpb24gKGNhcnQpIHtcbiAgdGhpcy5jYXJ0ID0gY2FydDtcbiAgdGhpcy5ob2xkaW5nX2VsZV9zZWxlY3RvciA9ICdbZGF0YS1waGQtc2l4LXBhY2s9XCJob2xkaW5nXCJdJztcbiAgdGhpcy5pdGVtX2VsZV9zZWxlY3RvciA9ICdbZGF0YS1waGQtc2l4LXBhY2s9XCJpdGVtXCJdJztcbiAgdGhpcy5pdGVtcyA9IHt9O1xuICBcbiAgdGhpcy5faW5pdF9ob2xkZXIoKTtcbiAgdGhpcy5faW5pdF9pdGVtcygpO1xufTtcblxuU2l4UGFja0J1aWxkZXIucHJvdG90eXBlLl9pbml0X2hvbGRlciA9IGZ1bmN0aW9uICgpIHtcbiAgdmFyIF90aGlzID0gdGhpcztcbiAgdmFyICRob2xkaW5nX2VsZW1lbnQgPSAkKHRoaXMuaG9sZGluZ19lbGVfc2VsZWN0b3IpO1xuICBfdGhpcy5wcm9kdWN0X2hvbGRlciA9IG5ldyBQcm9kdWN0SG9sZGVyKCRob2xkaW5nX2VsZW1lbnQpO1xuICBfdGhpcy5wcm9kdWN0X2hvbGRlci5vbignQWRkVG9DYXJ0JywgZnVuY3Rpb24gKHByb2R1Y3RzKSB7XG4vLyAgICAgX3RoaXMuY2FydC5cbiAgfSk7XG4gIFxuICAvLyB1cGRhdGUgYW4gaXRlbSBpZiBpdCB3YXMgcmVtb3ZlZCBmcm9tIGluc2lkZSB0aGUgaG9sZGVyXG4gIF90aGlzLnByb2R1Y3RfaG9sZGVyLm9uKCdSZW1vdmVJdGVtJywgZnVuY3Rpb24gKHByb2R1Y3RfaWQsIHByb2R1Y3RfY291bnQpIHtcbiAgICBfdGhpcy5pdGVtc1twcm9kdWN0X2lkXS5ob2xkaW5nX2NvdW50ID0gcHJvZHVjdF9jb3VudDtcbiAgfSk7XG59O1xuXG5TaXhQYWNrQnVpbGRlci5wcm90b3R5cGUuX2luaXRfaXRlbXMgPSBmdW5jdGlvbiAoKSB7XG4gIHZhciBfdGhpcyA9IHRoaXM7XG4gIHZhciAkaXRlbV9lbGVtZW50cyA9ICQodGhpcy5pdGVtX2VsZV9zZWxlY3Rvcik7XG4gICRpdGVtX2VsZW1lbnRzLmVhY2goZnVuY3Rpb24gKGksIGl0ZW1fZWxlKSB7XG4gICAgdmFyICRpdGVtID0gJChpdGVtX2VsZSk7XG4gICAgdmFyIGl0ZW0gPSBuZXcgUHJvZHVjdEl0ZW0oJGl0ZW0sIGkpO1xuICAgIFxuICAgIC8vIHN0b3JlIGl0ZW1zIGJ5IHZhcmlhbnQgaWQgZm9yIGVhc3kgYWNjZXNzIGxhdGVyXG4gICAgX3RoaXMuaXRlbXNbaXRlbS52YXJpYW50X2lkXSA9IGl0ZW07XG4gICAgXG4gICAgaXRlbS5vbignQWRkVG9Ib2xkaW5nJywgZnVuY3Rpb24gKHByb2R1Y3QpIHtcbiAgICAgIHZhciBwcm9kdWN0X2NvdW50ID0gX3RoaXMucHJvZHVjdF9ob2xkZXIuYWRkX3RvX2hvbGRpbmcocHJvZHVjdCk7XG4gICAgICBpdGVtLmhvbGRpbmdfY291bnQgPSBwcm9kdWN0X2NvdW50O1xuICAgIH0pO1xuICAgIFxuICAgIGl0ZW0ub24oJ1JlbW92ZUZyb21Ib2xkaW5nJywgZnVuY3Rpb24gKHByb2R1Y3RfaWQpIHtcbiAgICAgIHZhciBwcm9kdWN0X2NvdW50ID0gX3RoaXMucHJvZHVjdF9ob2xkZXIucmVtb3ZlX2Zyb21faG9sZGluZyhwcm9kdWN0X2lkKTtcbiAgICAgIGl0ZW0uaG9sZGluZ19jb3VudCA9IChwcm9kdWN0X2NvdW50ID4gMCkgPyBwcm9kdWN0X2NvdW50IDogJyc7XG4gICAgfSk7XG4gICAgXG4gICAgaXRlbS5vbignVXBkYXRlSG9sZGluZycsIGZ1bmN0aW9uIChwcm9kdWN0LCBxdHkpIHtcbiAgICAgIHZhciBwcm9kdWN0X2NvdW50ID0gX3RoaXMucHJvZHVjdF9ob2xkZXIudXBkYXRlX2l0ZW1faW5faG9sZGluZyhwcm9kdWN0LCBxdHkpO1xuICAgICAgaXRlbS5ob2xkaW5nX2NvdW50ID0gKHByb2R1Y3RfY291bnQgPiAwKSA/IHByb2R1Y3RfY291bnQgOiAnJztcbiAgICB9KTtcbiAgfSk7XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IFNpeFBhY2tCdWlsZGVyOyIsInZhciBTdGFuZGFyZENhcnQgPSBmdW5jdGlvbiAoKSB7XG4gIFxufTtcblxuU3RhbmRhcmRDYXJ0LnByb3RvdHlwZS5hZGRfcHJvZHVjdHMgPSBmdW5jdGlvbiAocHJvZHVjdHMpIHtcbiAgY29uc29sZS5sb2coJ1N0YW5kYXJkQ2FydDphZGRfcHJvZHVjdHMnLCBwcm9kdWN0cyk7XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IFN0YW5kYXJkQ2FydDsiLCJ2YXIgUGhkU3RpY2t5ID0gcmVxdWlyZSgnLi9waGQuc3RpY2t5LmpzJyk7XG52YXIgUGhkQ2FydCA9IHJlcXVpcmUoJy4vcGhkLmNhcnQuanMnKTtcblxudmFyIFBoZCA9IGZ1bmN0aW9uICgpIHtcbiAgbmV3IFBoZFN0aWNreSgpO1xuICBuZXcgUGhkQ2FydCgpO1xufTtcblxubW9kdWxlLmV4cG9ydHMgPSBQaGQ7IiwiLyogVG9EbzogY2hlY2sgdGhlIG1vZGFsIGlzbid0IGFscmVhZHkgb3BlbiAqL1xudmFyIERhdGFNb2RlbCA9IHJlcXVpcmUoJy4vX2RhdGFfbW9kZWwuanMnKTtcblxudmFyIFBoZE1vZGFsID0gZnVuY3Rpb24gKGNhbGxiYWNrcywgc2VsZWN0b3IpIHtcbiAgdGhpcy5jYWxsYmFja19ldmVudHMgPSBbJ29uX29wZW4nLCdvbl9jbG9zZSddO1xuICB0aGlzLnNlbGVjdG9yID0gc2VsZWN0b3IgfHwgJ1tkYXRhLWJzaWZ5LW1vZGFsXSc7XG4gIHRoaXMuJGVsZSA9ICQodGhpcy5zZWxlY3Rvcik7XG4gIHRoaXMuaWQgPSB0aGlzLl9pZCgpO1xuICBcbiAgbmV3IERhdGFNb2RlbCh0aGlzLCB7XG4gICAgY29udGVudDogdGhpcy5zZWxlY3RvcisnIC5tb2RhbC1jb250ZW50J1xuICB9KTtcbiAgXG4gIHRoaXMuX3NldF9jYWxsYmFja3MoY2FsbGJhY2tzKTtcbiAgdGhpcy5fYWRkX2V2ZW50X2xpc3RlbmVycygpO1xufTtcblxuUGhkTW9kYWwucHJvdG90eXBlLm9wZW4gPSBmdW5jdGlvbiAoKSB7XG4gIHRoaXMuJGVsZS5tb2RhbCgpO1xuICB0aGlzLiRlbGUuZGF0YSgnbW9kYWxfaWQnLCB0aGlzLmlkKTtcbiAgaWYgKHRoaXMub25fb3BlbikgdGhpcy5vbl9vcGVuKCk7XG59O1xuXG5QaGRNb2RhbC5wcm90b3R5cGUuY2xvc2UgPSBmdW5jdGlvbiAoKSB7XG4gIHRoaXMuJGVsZS5tb2RhbCgnaGlkZScpO1xuICBpZiAodGhpcy5vbl9jbG9zZSkgdGhpcy5vbl9jbG9zZSgpO1xuICB0aGlzLmRlc3Ryb3koKTtcbn07XG5cblBoZE1vZGFsLnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24gKCkge1xuICB0aGlzLmNvbnRlbnQgPSAnJztcbiAgdGhpcy4kZWxlLmRhdGEoJ2JzLm1vZGFsJywgbnVsbCk7XG4gIHRoaXMuJGVsZS5kYXRhKCdtb2RhbF9pZCcsIG51bGwpO1xufTtcblxuLy8gUHJpdmF0ZVxuXG5QaGRNb2RhbC5wcm90b3R5cGUuX2FkZF9ldmVudF9saXN0ZW5lcnMgPSBmdW5jdGlvbiAoKSB7XG4gIHZhciBfdGhpcyA9IHRoaXM7XG4gIHRoaXMuJGVsZS5vbignaGlkZGVuLmJzLm1vZGFsJywgZnVuY3Rpb24gKCkge1xuICAgIC8vIE9ubHkgdHJpZ2dlciB0aGlzIGZvciB0aGUgb25lIG9iamVjdCB0aGF0IGludm9rZWQgdGhlIG1vZGFsXG4gICAgaWYgKF90aGlzLiRlbGUuZGF0YSgnbW9kYWxfaWQnKSA9PT0gX3RoaXMuaWQpIHtcbiAgICAgIF90aGlzLmNsb3NlKCk7XG4gICAgfVxuICB9KTtcbn07XG5cblBoZE1vZGFsLnByb3RvdHlwZS5fc2V0X2NhbGxiYWNrcyA9IGZ1bmN0aW9uIChjYWxsYmFja3MpIHtcbiAgaWYgKGNhbGxiYWNrcykge1xuICAgIGZvciAodmFyIGkgaW4gdGhpcy5jYWxsYmFja19ldmVudHMpIHtcbiAgICAgIHZhciBldmVudCA9IHRoaXMuY2FsbGJhY2tfZXZlbnRzW2ldO1xuICAgICAgaWYgKGNhbGxiYWNrc1tldmVudF0pIHtcbiAgICAgICAgdGhpc1tldmVudF0gPSBjYWxsYmFja3NbZXZlbnRdO1xuICAgICAgfVxuICAgIH1cbiAgfVxufTtcblxuUGhkTW9kYWwucHJvdG90eXBlLl9pZCA9IGZ1bmN0aW9uICgpIHtcbiAgLy8gaHR0cHM6Ly9naXN0LmdpdGh1Yi5jb20vZ29yZG9uYnJhbmRlci8yMjMwMzE3XG4gIHJldHVybiAnXycgKyBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zdWJzdHIoMiwgOSk7XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IFBoZE1vZGFsOyIsIi8vIFdoZW4gdGhlIGVsZW1lbnQgaGl0cyB0aGUgdG9wIG9mIHRoZSBwYWdlIG1ha2UgaXQgc3RpY2sgdG8gaXRcbnZhciBQaGRTdGlja3kgPSBmdW5jdGlvbiAoKSB7XG4gIHZhciAkZWxlID0gJCgnW2RhdGEtcGhkPVwic3RpY2t5XCJdJyk7XG4gIHZhciAkcGFyZW50ID0gJGVsZS5wYXJlbnQoKTtcbiAgdmFyICR3aW5kb3cgPSAkKHdpbmRvdyk7XG4gIHZhciBwYXJlbnRfb3JpZ19tYXJnaW5fYm90dG9tID0gcGFyc2VJbnQoJHBhcmVudC5jc3MoJ21hcmdpbi1ib3R0b20nKSk7XG4gIFxuICB2YXIgc2V0X21hcmdpbiA9IGZ1bmN0aW9uIChtYXJnaW4pIHtcbiAgICAkZWxlLnBhcmVudCgpLmNzcyh7ICdtYXJnaW4tYm90dG9tJzogbWFyZ2luIH0pO1xuICB9O1xuICBcbiAgaWYgKCRlbGUubGVuZ3RoID4gMCkge1xuICAgIC8vIGJvb3RzdHJhcCBhZmZpeFxuICAgICRlbGUuYWZmaXgoe1xuICAgICAgb2Zmc2V0OiB7XG4gICAgICAgIHRvcDogJGVsZS5vZmZzZXQoKS50b3AsXG4gICAgICAgIGJvdHRvbTogMzBcbiAgICAgIH1cbiAgICB9KS5vbignYWZmaXhlZC5icy5hZmZpeCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciBtYXJnaW4gPSAoJGVsZS5jc3MoJ3Bvc2l0aW9uJykgIT09ICdyZWxhdGl2ZScpID8gKHBhcmVudF9vcmlnX21hcmdpbl9ib3R0b20gKyAkZWxlLmhlaWdodCgpKSA6IHBhcmVudF9vcmlnX21hcmdpbl9ib3R0b207XG4gICAgICBzZXRfbWFyZ2luKG1hcmdpbik7XG4gICAgfSkub24oJ2FmZml4ZWQtdG9wLmJzLmFmZml4JywgZnVuY3Rpb24gKCkge1xuICAgICAgc2V0X21hcmdpbihwYXJlbnRfb3JpZ19tYXJnaW5fYm90dG9tKTtcbiAgICB9KTtcbiAgfVxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBQaGRTdGlja3k7Il19
