(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
var Bsify=require("./bsify.js"),CartJS=require("./../../bower_components/shopify-cartjs/dist/cart.js"),Lookbook=require("./bsify.lookbook_gallery.js"),Phd=require("./phd.js"),App=function(){if(CartJS.init(Bsify.cart,Bsify.money_formats),Bsify.product&&(Bsify.ImageSwitcher.preload_product_thumbs(),Bsify.ImageSwitcher.image_swticher(),Bsify.VariantOptionSwitcher.image_variant_switcher(),Bsify.linked_product_options&&Bsify.product.available&&Bsify.product.options.length>1&&Bsify.LinkedProductOptions.linkOptionSelectors(Bsify.product)),Bsify.ajax_add_to_cart&&Bsify.Cart.init(),Bsify.Thumbnails.init(),Bsify.Banner.init(),$(".collection-lookbook").length>0){var o=new Lookbook({gallery_wrapper:".collection-lookbook .products.group",item_wrapper:".group-item-wrap",controls_wrapper:".lookbook-controls"});o.on_loaded=function(){var o=$(".group-item-image").height();$(".lookbook-controls").height(o),Bsify.Thumbnails.orderly()}}Bsify.SocialFeeds.init(),new Phd},app=new App;module.exports=app;


},{"./../../bower_components/shopify-cartjs/dist/cart.js":2,"./bsify.js":15,"./bsify.lookbook_gallery.js":17,"./phd.js":38}],2:[function(require,module,exports){
(function(){var t,e,r,n,a,u,i=function(t,e){return function(){return t.apply(e,arguments)}};e=function(){function t(){this.update=i(this.update,this)}return t.prototype.update=function(t){var e,r,a;for(r in t)a=t[r],"items"!==r&&(this[r]=a);return this.items=function(){var r,a,u,i;for(u=t.items,i=[],r=0,a=u.length;a>r;r++)e=u[r],i.push(new n(e));return i}()},t}(),n=function(){function t(t){this.propertyArray=i(this.propertyArray,this),this.update=i(this.update,this),this.update(t)}return t.prototype.update=function(t){var e,n;for(e in t)n=t[e],"properties"!==e&&(this[e]=n);return this.properties=r.Utils.extend({},t.properties)},t.prototype.propertyArray=function(){var t,e,r,n;r=this.properties,n=[];for(t in r)e=r[t],n.push({name:t,value:e});return n},t}(),r={settings:{dataAPI:!0,requestBodyClass:null,rivetsModels:{},moneyFormat:null,moneyWithCurrencyFormat:null},cart:new e},r.init=function(t,e){return null==e&&(e={}),r.configure(e),r.cart.update(t),r.settings.dataAPI&&r.Data.init(),r.settings.requestBodyClass&&($(document).on("cart.requestStarted",function(){return $("body").addClass(r.settings.requestBodyClass)}),$(document).on("cart.requestComplete",function(){return $("body").removeClass(r.settings.requestBodyClass)})),r.Rivets.init()},r.configure=function(t){return null==t&&(t={}),r.Utils.extend(r.settings,t)},r.Utils={wrapKeys:function(t,e,r){var n,a,u;null==e&&(e="properties"),u={};for(n in t)a=t[n],u[""+e+"["+n+"]"]=null!=r?r:a;return u},unwrapKeys:function(t,e,r){var n,a,u,i;null==e&&(e="properties"),a={};for(n in t)i=t[n],u=n.replace(""+e+"[","").replace("]",""),a[u]=null!=r?r:i;return a},extend:function(t,e){var r,n;for(r in e)n=e[r],t[r]=n;return t},clone:function(t){var e,r;if(null==t||"object"!=typeof t)return t;r=new t.constructor;for(e in t)r[e]=clone(t[e]);return r},isArray:Array.isArray||function(t){return"[object Array]"==={}.toString.call(t)},ensureArray:function(t){return r.Utils.isArray(t)?t:null!=t?[t]:[]},formatMoney:function(t,e){var r;return null!=(null!=(r=window.Shopify)?r.formatMoney:void 0)?Shopify.formatMoney(t,e):t},getSizedImageUrl:function(t,e){var r,n;return null!=(null!=(r=window.Shopify)&&null!=(n=r.Image)?n.getSizedImageUrl:void 0)?Shopify.Image.getSizedImageUrl(t,e):t}},u=[],a=!1,r.Queue={add:function(t,e,n){var i;return null==n&&(n={}),i={url:t,data:e,type:n.type||"POST",dataType:n.dataType||"json",success:r.Utils.ensureArray(n.success),error:r.Utils.ensureArray(n.error),complete:r.Utils.ensureArray(n.complete)},n.updateCart&&i.success.push(r.cart.update),u.push(i),a?void 0:(jQuery(document).trigger("cart.requestStarted",[r.cart]),r.Queue.process())},process:function(){var t;return u.length?(a=!0,t=u.shift(),t.complete=r.Queue.process,jQuery.ajax(t)):(a=!1,void jQuery(document).trigger("cart.requestComplete",[r.cart]))}},r.Core={getCart:function(t){return null==t&&(t={}),t.type="GET",t.updateCart=!0,r.Queue.add("/cart.js",{},t)},addItem:function(t,e,n,a){var u;return null==e&&(e=1),null==n&&(n={}),null==a&&(a={}),u=r.Utils.wrapKeys(n),u.id=t,u.quantity=e,r.Queue.add("/cart/add.js",u,a),r.Core.getCart()},updateItem:function(t,e,n,a){var u;return null==n&&(n={}),null==a&&(a={}),u=r.Utils.wrapKeys(n),u.line=t,null!=e&&(u.quantity=e),a.updateCart=!0,r.Queue.add("/cart/change.js",u,a)},removeItem:function(t,e){return null==e&&(e={}),r.Core.updateItem(t,0,{},e)},updateItemById:function(t,e,n,a){var u;return null==n&&(n={}),null==a&&(a={}),u=r.Utils.wrapKeys(n),u.id=t,null!=e&&(u.quantity=e),a.updateCart=!0,r.Queue.add("/cart/change.js",u,a)},updateItemQuantitiesById:function(t,e){return null==t&&(t={}),null==e&&(e={}),e.updateCart=!0,r.Queue.add("/cart/update.js",{updates:t},e)},removeItemById:function(t,e){var n;return null==e&&(e={}),n={id:t,quantity:0},e.updateCart=!0,r.Queue.add("/cart/change.js",n,e)},clear:function(t){return null==t&&(t={}),t.updateCart=!0,r.Queue.add("/cart/clear.js",{},t)},getAttribute:function(t,e){return t in r.cart.attributes?r.cart.attributes[t]:e},setAttribute:function(t,e,n){var a;return null==n&&(n={}),a={},a[t]=e,r.Core.setAttributes(a,n)},getAttributes:function(){return r.cart.attributes},setAttributes:function(t,e){return null==t&&(t={}),null==e&&(e={}),e.updateCart=!0,r.Queue.add("/cart/update.js",r.Utils.wrapKeys(t,"attributes"),e)},clearAttributes:function(t){return null==t&&(t={}),t.updateCart=!0,r.Queue.add("/cart/update.js",r.Utils.wrapKeys(r.Core.getAttributes(),"attributes",""),t)},getNote:function(){return r.cart.note},setNote:function(t,e){return null==e&&(e={}),e.updateCart=!0,r.Queue.add("/cart/update.js",{note:t},e)}},t=jQuery(document),r.Data={init:function(){return r.Data.setEventListeners("on"),r.Data.render(null,r.cart)},destroy:function(){return r.Data.setEventListeners("off")},setEventListeners:function(e){return t[e]("click","[data-cart-add]",r.Data.add),t[e]("click","[data-cart-remove]",r.Data.remove),t[e]("click","[data-cart-remove-id]",r.Data.removeById),t[e]("click","[data-cart-update]",r.Data.update),t[e]("click","[data-cart-update-id]",r.Data.updateById),t[e]("click","[data-cart-clear]",r.Data.clear),t[e]("change","[data-cart-toggle]",r.Data.toggle),t[e]("change","[data-cart-toggle-attribute]",r.Data.toggleAttribute),t[e]("submit","[data-cart-submit]",r.Data.submit),t[e]("cart.requestComplete",r.Data.render)},add:function(t){var e;return t.preventDefault(),e=jQuery(this),r.Core.addItem(e.attr("data-cart-add"),e.attr("data-cart-quantity"))},remove:function(t){var e;return t.preventDefault(),e=jQuery(this),r.Core.removeItem(e.attr("data-cart-remove"))},removeById:function(t){var e;return t.preventDefault(),e=jQuery(this),r.Core.removeItemById(e.attr("data-cart-remove-id"))},update:function(t){var e;return t.preventDefault(),e=jQuery(this),r.Core.updateItem(e.attr("data-cart-update"),e.attr("data-cart-quantity"))},updateById:function(t){var e;return t.preventDefault(),e=jQuery(this),r.Core.updateItemById(e.attr("data-cart-update-id"),e.attr("data-cart-quantity"))},clear:function(t){return t.preventDefault(),r.Core.clear()},toggle:function(t){var e,n;return e=jQuery(this),n=e.attr("data-cart-toggle"),e.is(":checked")?r.Core.addItem(n):r.Core.removeItemById(n)},toggleAttribute:function(t){var e,n;return e=jQuery(this),n=e.attr("data-cart-toggle-attribute"),r.Core.setAttribute(n,e.is(":checked")?"Yes":"")},submit:function(t){var e,n,a,u;return t.preventDefault(),e=jQuery(this).serializeArray(),n=void 0,u=void 0,a={},jQuery.each(e,function(t,e){return"id"===e.name?n=e.value:"quantity"===e.name?u=e.value:a[e.name]=e.value}),r.Core.addItem(n,u,r.Utils.unwrapKeys(a))},render:function(t,e){var n;return n={item_count:e.item_count,total_price:e.total_price,total_price_money:r.Utils.formatMoney(e.total_price,r.settings.moneyFormat),total_price_money_with_currency:r.Utils.formatMoney(e.total_price,r.settings.moneyWithCurrencyFormat)},jQuery("[data-cart-render]").each(function(){var t;return t=jQuery(this),t.text(n[t.attr("data-cart-render")])})}},"rivets"in window?(r.Rivets={views:[],init:function(){return r.Rivets.bindViews()},destroy:function(){return r.Rivets.unbindViews()},bindViews:function(){var t;return r.Rivets.unbindViews(),t=r.Utils.extend({cart:r.cart},r.settings.rivetsModels),jQuery("[data-cart-view]").each(function(){return r.Rivets.views.push(rivets.bind(this,t))})},unbindViews:function(){var t,e,n,a;for(a=r.Rivets.views,e=0,n=a.length;n>e;e++)t=a[e],t.unbind();return r.Rivets.views=[]}},rivets.formatters.eq=function(t,e){return t===e},rivets.formatters.lt=function(t,e){return e>t},rivets.formatters.gt=function(t,e){return t>e},rivets.formatters.not=function(t){return!t},rivets.formatters.empty=function(t){return!t.length},rivets.formatters.plus=function(t,e){return parseInt(t)+parseInt(e)},rivets.formatters.minus=function(t,e){return parseInt(t)-parseInt(e)},rivets.formatters.prepend=function(t,e){return e+t},rivets.formatters.append=function(t,e){return t+e},rivets.formatters.money=function(t){return r.Utils.formatMoney(t,r.settings.moneyFormat)},rivets.formatters.money_with_currency=function(t){return r.Utils.formatMoney(t,r.settings.moneyWithCurrencyFormat)},rivets.formatters.productImageSize=function(t,e){return r.Utils.getSizedImageUrl(t,e)}):r.Rivets={init:function(){},destroy:function(){}},r.factory=function(t){return t.init=r.init,t.configure=r.configure,t.cart=r.cart,t.settings=r.settings,t.addItem=r.Core.addItem,t.updateItem=r.Core.updateItem,t.updateItemById=r.Core.updateItemById,t.updateItemQuantitiesById=r.Core.updateItemQuantitiesById,t.removeItem=r.Core.removeItem,t.clear=r.Core.clear,t.getAttribute=r.Core.getAttribute,t.setAttribute=r.Core.setAttribute,t.getAttributes=r.Core.getAttributes,t.setAttributes=r.Core.setAttributes,t.clearAttributes=r.Core.clearAttributes,t.getNote=r.Core.getNote,t.setNote=r.Core.setNote},"object"==typeof exports?r.factory(exports):"function"==typeof define&&define.amd?define(["exports"],function(t){return r.factory(this.CartJS=t),t}):r.factory(this.CartJS={})}).call(this);


},{}],3:[function(require,module,exports){
!function(e,t){"use strict";"function"==typeof define&&define.amd?define(["eventEmitter/EventEmitter","eventie/eventie"],function(i,n){return t(e,i,n)}):"object"==typeof exports?module.exports=t(e,require("wolfy87-eventemitter"),require("eventie")):e.imagesLoaded=t(e,e.EventEmitter,e.eventie)}(window,function(e,t,i){"use strict";function n(e,t){for(var i in t)e[i]=t[i];return e}function o(e){return"[object Array]"===d.call(e)}function r(e){var t=[];if(o(e))t=e;else if("number"==typeof e.length)for(var i=0,n=e.length;n>i;i++)t.push(e[i]);else t.push(e);return t}function s(e,t,i){if(!(this instanceof s))return new s(e,t);"string"==typeof e&&(e=document.querySelectorAll(e)),this.elements=r(e),this.options=n({},this.options),"function"==typeof t?i=t:n(this.options,t),i&&this.on("always",i),this.getImages(),c&&(this.jqDeferred=new c.Deferred);var o=this;setTimeout(function(){o.check()})}function h(e){this.img=e}function f(e){this.src=e,p[e]=this}var c=e.jQuery,a=e.console,u="undefined"!=typeof a,d=Object.prototype.toString;s.prototype=new t,s.prototype.options={},s.prototype.getImages=function(){this.images=[];for(var e=0,t=this.elements.length;t>e;e++){var i=this.elements[e];"IMG"===i.nodeName&&this.addImage(i);var n=i.nodeType;if(n&&(1===n||9===n||11===n))for(var o=i.querySelectorAll("img"),r=0,s=o.length;s>r;r++){var h=o[r];this.addImage(h)}}},s.prototype.addImage=function(e){var t=new h(e);this.images.push(t)},s.prototype.check=function(){function e(e,o){return t.options.debug&&u&&a.log("confirm",e,o),t.progress(e),i++,i===n&&t.complete(),!0}var t=this,i=0,n=this.images.length;if(this.hasAnyBroken=!1,!n)return void this.complete();for(var o=0;n>o;o++){var r=this.images[o];r.on("confirm",e),r.check()}},s.prototype.progress=function(e){this.hasAnyBroken=this.hasAnyBroken||!e.isLoaded;var t=this;setTimeout(function(){t.emit("progress",t,e),t.jqDeferred&&t.jqDeferred.notify&&t.jqDeferred.notify(t,e)})},s.prototype.complete=function(){var e=this.hasAnyBroken?"fail":"done";this.isComplete=!0;var t=this;setTimeout(function(){if(t.emit(e,t),t.emit("always",t),t.jqDeferred){var i=t.hasAnyBroken?"reject":"resolve";t.jqDeferred[i](t)}})},c&&(c.fn.imagesLoaded=function(e,t){var i=new s(this,e,t);return i.jqDeferred.promise(c(this))}),h.prototype=new t,h.prototype.check=function(){var e=p[this.img.src]||new f(this.img.src);if(e.isConfirmed)return void this.confirm(e.isLoaded,"cached was confirmed");if(this.img.complete&&void 0!==this.img.naturalWidth)return void this.confirm(0!==this.img.naturalWidth,"naturalWidth");var t=this;e.on("confirm",function(e,i){return t.confirm(e.isLoaded,i),!0}),e.check()},h.prototype.confirm=function(e,t){this.isLoaded=e,this.emit("confirm",this,t)};var p={};return f.prototype=new t,f.prototype.check=function(){if(!this.isChecked){var e=new Image;i.bind(e,"load",this),i.bind(e,"error",this),e.src=this.src,this.isChecked=!0}},f.prototype.handleEvent=function(e){var t="on"+e.type;this[t]&&this[t](e)},f.prototype.onload=function(e){this.confirm(!0,"onload"),this.unbindProxyEvents(e)},f.prototype.onerror=function(e){this.confirm(!1,"onerror"),this.unbindProxyEvents(e)},f.prototype.confirm=function(e,t){this.isConfirmed=!0,this.isLoaded=e,this.emit("confirm",this,t)},f.prototype.unbindProxyEvents=function(e){i.unbind(e.target,"load",this),i.unbind(e.target,"error",this)},s});


},{"eventie":4,"wolfy87-eventemitter":5}],4:[function(require,module,exports){
!function(e){"use strict";function n(n){var t=e.event;return t.target=t.target||t.srcElement||n,t}var t=document.documentElement,o=function(){};t.addEventListener?o=function(e,n,t){e.addEventListener(n,t,!1)}:t.attachEvent&&(o=function(e,t,o){e[t+o]=o.handleEvent?function(){var t=n(e);o.handleEvent.call(o,t)}:function(){var t=n(e);o.call(e,t)},e.attachEvent("on"+t,e[t+o])});var c=function(){};t.removeEventListener?c=function(e,n,t){e.removeEventListener(n,t,!1)}:t.detachEvent&&(c=function(e,n,t){e.detachEvent("on"+n,e[n+t]);try{delete e[n+t]}catch(o){e[n+t]=void 0}});var i={bind:o,unbind:c};"function"==typeof define&&define.amd?define(i):"object"==typeof exports?module.exports=i:e.eventie=i}(window);


},{}],5:[function(require,module,exports){
(function(){"use strict";function e(){}function t(e,t){for(var n=e.length;n--;)if(e[n].listener===t)return n;return-1}function n(e){return function(){return this[e].apply(this,arguments)}}var r=e.prototype,i=this,s=i.EventEmitter;r.getListeners=function(e){var t,n,r=this._getEvents();if(e instanceof RegExp){t={};for(n in r)r.hasOwnProperty(n)&&e.test(n)&&(t[n]=r[n])}else t=r[e]||(r[e]=[]);return t},r.flattenListeners=function(e){var t,n=[];for(t=0;t<e.length;t+=1)n.push(e[t].listener);return n},r.getListenersAsObject=function(e){var t,n=this.getListeners(e);return n instanceof Array&&(t={},t[e]=n),t||n},r.addListener=function(e,n){var r,i=this.getListenersAsObject(e),s="object"==typeof n;for(r in i)i.hasOwnProperty(r)&&-1===t(i[r],n)&&i[r].push(s?n:{listener:n,once:!1});return this},r.on=n("addListener"),r.addOnceListener=function(e,t){return this.addListener(e,{listener:t,once:!0})},r.once=n("addOnceListener"),r.defineEvent=function(e){return this.getListeners(e),this},r.defineEvents=function(e){for(var t=0;t<e.length;t+=1)this.defineEvent(e[t]);return this},r.removeListener=function(e,n){var r,i,s=this.getListenersAsObject(e);for(i in s)s.hasOwnProperty(i)&&(r=t(s[i],n),-1!==r&&s[i].splice(r,1));return this},r.off=n("removeListener"),r.addListeners=function(e,t){return this.manipulateListeners(!1,e,t)},r.removeListeners=function(e,t){return this.manipulateListeners(!0,e,t)},r.manipulateListeners=function(e,t,n){var r,i,s=e?this.removeListener:this.addListener,o=e?this.removeListeners:this.addListeners;if("object"!=typeof t||t instanceof RegExp)for(r=n.length;r--;)s.call(this,t,n[r]);else for(r in t)t.hasOwnProperty(r)&&(i=t[r])&&("function"==typeof i?s.call(this,r,i):o.call(this,r,i));return this},r.removeEvent=function(e){var t,n=typeof e,r=this._getEvents();if("string"===n)delete r[e];else if(e instanceof RegExp)for(t in r)r.hasOwnProperty(t)&&e.test(t)&&delete r[t];else delete this._events;return this},r.removeAllListeners=n("removeEvent"),r.emitEvent=function(e,t){var n,r,i,s,o=this.getListenersAsObject(e);for(i in o)if(o.hasOwnProperty(i))for(r=o[i].length;r--;)n=o[i][r],n.once===!0&&this.removeListener(e,n.listener),s=n.listener.apply(this,t||[]),s===this._getOnceReturnValue()&&this.removeListener(e,n.listener);return this},r.trigger=n("emitEvent"),r.emit=function(e){var t=Array.prototype.slice.call(arguments,1);return this.emitEvent(e,t)},r.setOnceReturnValue=function(e){return this._onceReturnValue=e,this},r._getOnceReturnValue=function(){return this.hasOwnProperty("_onceReturnValue")?this._onceReturnValue:!0},r._getEvents=function(){return this._events||(this._events={})},e.noConflict=function(){return i.EventEmitter=s,e},"function"==typeof define&&define.amd?define(function(){return e}):"object"==typeof module&&module.exports?module.exports=e:i.EventEmitter=e}).call(this);


},{}],6:[function(require,module,exports){
!function(t){var e=function(t,e){this.__init(t,e)},n=e,i=n.prototype;n.counter=0,i.__init=function(e,n){this.$elements=e,this.options=t.extend({},this.defaults,n)},i.defaults={resetHeight:""},i.attach=function(){void 0===this.attached&&(t(window).on("resize",this.handlers().resize),this.attached=!0)},i.handlers=function(){var t=this;return{resize:function(e){t._eachRow(function(e){t._resizeElements(e)})}}},i._columnCount=function(){var e=0,n=0,i=0;return this.$elements.each(function(){return n=t(this).offset().left,i+=1,e>=n&&0!==e?(i-=1,!1):void(e=n)}),i},i._eachRow=function(t){for(var e,n,i=this._dimensions(),r=0;r<i.r;r++)e=i.c*r,n=this.$elements.slice(e,e+i.c),t(n,r)},i._dimensions=function(){var t=this._columnCount(),e=Math.ceil(this.$elements.length/t);return{c:t,r:e}},i._resizeElements=function(e){var n=this._maxHeight(e),i=this.options;e.each(function(r,s){t(s).css("height",n),t(s).trigger("orderly.resize",[s,n,r,e.length,i])})},i._maxHeight=function(e){var n,i,r,s=0,h=this.options;return e.each(function(n,o){t(o).trigger("orderly.reset",[o,h.resetHeight,n,e.length,h]),t(o).css("height",h.resetHeight),r=o.getBoundingClientRect(),i=r.bottom-r.top,i>s&&(s=i)}),n=Math.round(s).toString(),n+="px"};var r={};r._delegate=function(t){var e="_"+(t&&t.method||"register"),n=r[e];n.call(this,t)},r._register=function(t){var n=new e(this,t);n.attach(),n.handlers().resize()},r._children=function(t){var e=this[0].children.length,i=n.counter++;r._childrenData.call(this,i),r._registerChildren(e,i,t),r._register.call(this,t)},r._childrenData=function(e){this.each(function(n,i){t(i.children).each(function(n,i){t(i).attr("data-orderly",e+":"+n)})})},r._registerChildren=function(t,e,n){for(var i=0;t>i;i++)r._register.call(r._find(e,i),n)},r._find=function(e,n){return t('[data-orderly="'+e+":"+n+'"]')},t.fn.orderly=function(t){return this.length>0&&r._delegate.call(this,t),this}}(jQuery);


},{}],7:[function(require,module,exports){
var imagesLoaded=require("imagesloaded");!function(t){var i=function(t,i){this.$ele=t,this.settings=i,this.formater=new e(this.$ele,this.settings),this.fitter=new a(this.$ele,this.settings),this.imageLoaded=imagesLoaded(this.$ele),this.addEventHandlers(),this.hideImages()};i.prototype.addEventHandlers=function(){var i=this;this.imageLoaded.on("done",function(){i.formater.setImageFormat(),i.fitter.setImageFit(),i.showImages(),i.$ele.trigger("ut_imageLoaded")});var e;t(window).resize(function(){e&&clearTimeout(e),e=setTimeout(function(){i.formater.setImageFormat(),i.fitter.setImageFit()},100)})},i.prototype.hideImages=function(){this.$ele.css({opacity:0,overflow:"hidden"})},i.prototype.showImages=function(){this.$ele.fadeTo(900,1)};var e=function(t,i){this.$wrapper=t,this.settings=i,this.ratio=this.getRatio()};e.prototype.setImageFormat=function(){var t=this.$wrapper.width()/this.ratio.width,i=t*this.ratio.height;this.$wrapper.height(i)},e.prototype.getRatio=function(){var t=this._getRatioString();return this._getRatioFromString(t)},e.prototype._getRatioString=function(){switch(this.settings.format){case"square":return"1:1";case"landscape":return this.settings.landscapeRatio;case"portrait":return this.settings.portraitRatio;default:return this.settings.ratio}},e.prototype._getRatioFromString=function(t){var i=t.split(":");return{width:i[0],height:i[1]}};var a=function(t,i){this.$wrapper=t,this.$image=this.$wrapper.find("img"),this.settings=i,this.wrapperRatio,this.imageRatio,this.imageNaturalWidth,this.imageNaturalHeight};a.prototype.setImageFit=function(){switch(this._resetImageCSS(),this.settings.fit){case"crop":this._cropImage();break;case"scale":this._scaleImage()}this._alignImage()},a.prototype._cropImage=function(){this._imageRatio()>this._wrapperRatio()?this._fitHorizontal():this._fitVertical()},a.prototype._scaleImage=function(){this._imageRatio()>this._wrapperRatio()?this._fitVertical():this._fitHorizontal()},a.prototype._fitHorizontal=function(){this._getNaturalHeight(this.$image)>=this.$wrapper.height()&&this.$image.height(this.$wrapper.height())},a.prototype._fitVertical=function(){this._getNaturalWidth(this.$image)>=this.$wrapper.width()&&this.$image.width(this.$wrapper.width())},a.prototype._imageRatio=function(){return this.imageRatio=this.imageRatio||this._getNaturalWidth(this.$image)/this._getNaturalHeight(this.$image),this.imageRatio},a.prototype._wrapperRatio=function(){return this.wrapperRatio=this.wrapperRatio||this.$wrapper.width()/this.$wrapper.height(),this.wrapperRatio},a.prototype._alignImage=function(){var t={};switch(t.marginLeft=(this.$wrapper.width()-this.$image.width())/2,this.settings.align){case"top":break;case"middle":t.marginTop=(this.$wrapper.height()-this.$image.height())/2;break;case"bottom":t.marginTop=this.$wrapper.height()-this.$image.height()}this.$image.css(t)},a.prototype._getNaturalHeight=function(t){return this.imageNaturalHeight||(t.prop("naturalHeight")?this.imageNaturalHeight=t.prop("naturalHeight"):this.imageNaturalHeight=this._getNaturalSize(t).height),this.imageNaturalHeight},a.prototype._getNaturalWidth=function(t){return this.imageNaturalWidth||(t.prop("naturalWidth")?this.imageNaturalWidth=t.prop("naturalWidth"):this.imageNaturalWidth=this._getNaturalSize(t).width),this.imageNaturalWidth},a.prototype._getNaturalSize=function(t){if(t.prop("src")){var i=new Image;return i.src=t.prop("src"),{width:i.width,height:i.height}}return!1},a.prototype._resetImageCSS=function(){this.$image.css({maxWidth:"none",width:"auto",height:"auto"})};var r=0,h=function(i){r++,r===i.length&&t(i).last().trigger("ut_complete")};t.fn.uniform_thumbnails=function(e){var a=t.extend({},t.fn.uniform_thumbnails.defaults,e),r=this;return r.each(function(){var e=t(this);e.data("_uniform_thumbnails",new i(e,a)),e.on("ut_imageLoaded",function(){h(r)})})},t.fn.uniform_thumbnails.defaults={fit:"crop",ratio:"1:1",format:"ratio",align:"middle",landscapeRatio:"4:3",portraitRatio:"3:4"}}(jQuery);


},{"imagesloaded":3}],8:[function(require,module,exports){
var docCookies={getItem:function(e){return e?decodeURIComponent(document.cookie.replace(new RegExp("(?:(?:^|.*;)\\s*"+encodeURIComponent(e).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1"))||null:null},setItem:function(e,o,n,t,c,r){if(!e||/^(?:expires|max\-age|path|domain|secure)$/i.test(e))return!1;var s="";if(n)switch(n.constructor){case Number:s=n===1/0?"; expires=Fri, 31 Dec 9999 23:59:59 GMT":"; max-age="+n;break;case String:s="; expires="+n;break;case Date:s="; expires="+n.toUTCString()}return document.cookie=encodeURIComponent(e)+"="+encodeURIComponent(o)+s+(c?"; domain="+c:"")+(t?"; path="+t:"")+(r?"; secure":""),!0},removeItem:function(e,o,n){return this.hasItem(e)?(document.cookie=encodeURIComponent(e)+"=; expires=Thu, 01 Jan 1970 00:00:00 GMT"+(n?"; domain="+n:"")+(o?"; path="+o:""),!0):!1},hasItem:function(e){return e?new RegExp("(?:^|;\\s*)"+encodeURIComponent(e).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=").test(document.cookie):!1},keys:function(){for(var e=document.cookie.replace(/((?:^|\s*;)[^\=]+)(?=;|$)|^\s*|\s*(?:\=[^;]*)?(?:\1|$)/g,"").split(/\s*(?:\=[^;]*)?;\s*/),o=e.length,n=0;o>n;n++)e[n]=decodeURIComponent(e[n]);return e}};module.exports=docCookies;


},{}],9:[function(require,module,exports){
var DataModel=function(e,t){this.obj=e,this._build_properties(t)};DataModel.prototype._build_properties=function(e){var t=this;for(var o in e)e.hasOwnProperty(o)&&t._build_property_methods(o,e[o])},DataModel.prototype._build_property_methods=function(e,t){var o=e+"_selector";Object.defineProperty(this.obj,o,{value:t});var r,a=this;Object.defineProperty(this.obj,e,{enumerable:!0,configurable:!0,get:function(){return r},set:function(e){r!==e&&(r=e,a._update_elements(t,r))}})},DataModel.prototype._update_elements=function(e,t){var o=this;$(e).each(function(e,r){o._set_element_value(r,t)})},DataModel.prototype._set_element_value=function(e,t){var o=$(e);this._is_input(e)?o.val(t):o.html(t)},DataModel.prototype._is_input=function(e){var t=e.tagName.toLowerCase();return"input"===t||"select"===t||"textarea"===t},module.exports=DataModel;


},{}],10:[function(require,module,exports){
var Eventer=function(t){this.caller=t,this.caller._events={},this.caller.on=this.on,this.caller.off=this.off,this.caller.trigger=this.trigger};Eventer.prototype.on=function(t,e){return this._events[t]||(this._events[t]=[]),this._events[t].push(e),this._events[t].length-1},Eventer.prototype.off=function(t,e){t&&e?this._events[t][e]&&(this._events[t][e]=null):t?this._events[t]&&(this._events[t]=null):this._events={}},Eventer.prototype.trigger=function(t,e){"object"!=typeof e&&(e=[e]);for(var n in this._events[t]){var s=this._events[t][n];this._events[t].hasOwnProperty(n)&&"function"==typeof s&&s.apply(this,e)}},module.exports=Eventer;


},{}],11:[function(require,module,exports){
module.exports.getComputedStyle=function(){window.getComputedStyle||(window.getComputedStyle=function(t,e){return this.el=t,this.getPropertyValue=function(e){var r=/(\-([a-z]){1})/g;return"float"==e&&(e="styleFloat"),r.test(e)&&(e=e.replace(r,function(){return arguments[2].toUpperCase()})),t.currentStyle[e]?t.currentStyle[e]:null},this})},module.exports.objectKeys=function(){Object.keys||(Object.keys=function(){"use strict";var t=Object.prototype.hasOwnProperty,e=!{toString:null}.propertyIsEnumerable("toString"),r=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],o=r.length;return function(n){if("object"!=typeof n&&("function"!=typeof n||null===n))throw new TypeError("Object.keys called on non-object");var u,l,c=[];for(u in n)t.call(n,u)&&c.push(u);if(e)for(l=0;o>l;l++)t.call(n,r[l])&&c.push(r[l]);return c}}())};


},{}],12:[function(require,module,exports){
Banner={};var $banner=$("[data-banner]");Banner.init=function(){$banner.length>0&&Banner.add_event_handlers()},Banner.add_event_handlers=function(){$banner.on("slide.bs.carousel",function(n){var a=$(n.relatedTarget);$banner.attr("data-banner",a.data("slide"))}),$banner.on("slid.bs.carousel",function(){})},module.exports=Banner;


},{}],13:[function(require,module,exports){
var CartJS=require("./../../bower_components/shopify-cartjs/dist/cart.js"),Cart={},message_count=0,$cart_display_ele=$("[data-cart-display]"),$cart_total_ele=$("[data-cart-total]"),$cart_form_ele=$(Bsify.selectors.cart.form_selector),$cart_message_ele=$(Bsify.selectors.cart.message_selector);if(Bsify.product)var $product_form_ele=$(Bsify.selectors.product.form_selector),$product_form_button=$product_form_ele.find("input[type=submit]"),$product_form_message_ele=$(Bsify.selectors.product.form_message_selector);Cart.init=function(){$(document).on("cart.requestComplete",function(t,e){Cart.update_cart_display(),Cart.update_cart_table()}),Bsify.product&&$(document).on("submit",Bsify.selectors.product.form_selector,function(t){t.preventDefault();var e=$(t.currentTarget);Cart.add_item_to_cart(e)}),$(document).on("click","[data-remove-item]",function(t){t.preventDefault();var e=$(t.currentTarget);Cart.remove_item_from_cart(e)})},Cart.add_item_to_cart=function(t){var e=Cart.form_values(t.serializeArray()),r={},a=Bsify.get_variant_by_id(e.id),s=Bsify.product.title+Bsify.translations.product.item_title_seperator+a.title;$product_form_button.val(Bsify.translations.product.adding_to_cart_button_text),CartJS.addItem(e.id,e.quantity,r,{success:function(t,e,r){var a=Bsify.translations.product.after_product_added_message_html.replace("[item_title]",s);Cart.show_message($product_form_message_ele,"success",a),$product_form_button.val(Bsify.translations.product.added_to_cart_button_text)},error:function(t,e,r){console.log("[ERROR] - Add to cart:",t,e,r);var a=Bsify.translations.product.after_product_added_error_message_html.replace("[item_title]",s).replace("[error_message]",r);Cart.show_message($product_form_message_ele,"error",a),$product_form_button.val(Bsify.translations.product.unavailable_button_text)}})},Cart.remove_item_from_cart=function(t){var e=t.closest(Bsify.selectors.cart.item_selector),r=Cart.get_item_by_id(e.data("cart-item")),a=r.product_title+Bsify.translations.product.item_title_seperator+r.variant_title;CartJS.removeItem(t.data("remove-item"),{success:function(t,r,s){e.hide();var o=Bsify.translations.cart.remove_item_message.replace("[item_title]",a);Cart.show_message($cart_message_ele,"success",o)},error:function(t,e,r){console.log("[ERROR] - Remove item from cart:",t,e,r);var s=Bsify.translations.cart.remove_item_error_message.replace("[item_title]",a).replace("[error_message]",r);Cart.show_message($cart_message_ele,"success",s)}})},Cart.update_cart_display=function(){var t=Shopify.formatMoney(CartJS.cart.total_price,Bsify.money_formats.moneyFormat),e=Shopify.formatMoney(CartJS.cart.total_price,Bsify.money_formats.moneyWithCurrencyFormat),r=Bsify.translations.cart.cart_display_text.replace("[item_count]",CartJS.cart.item_count).replace("[cart_total_price]",t).replace("[cart_total_price_with_currency]",e);$cart_display_ele.html(r);var a=Bsify.translations.cart.cart_total.replace("[cart_total_price]",t).replace("[cart_total_price_with_currency]",e);$cart_total_ele.html(a)},Cart.update_cart_table=function(){0===CartJS.cart.item_count&&($cart_form_ele.hide(),$cart_message_ele.removeClass("hidden").html(Bsify.translations.cart.empty_cart_text))},Cart.show_message=function(t,e,r){message_count++,t.removeClass("hidden").html('<div class="note '+e+" message"+message_count+'">'+r+"</div>"),Cart.remove_message(message_count)},Cart.remove_message=function(t){setTimeout(function(){$(".message"+t).fadeOut(function(){$(this).remove()})},Bsify.message_timeout)},Cart.form_values=function(t){for(var e={},r=0;r<t.length;r++){var a=t[r];e[a.name]=a.value}return e},Cart.get_item_by_id=function(t){"string"==typeof t&&(t=parseInt(t));var e;if(CartJS)for(var r=0;r<CartJS.cart.items.length;r++){var a=CartJS.cart.items[r];a.variant_id===t&&(e=a)}return e},Cart.has_variant=function(t){"string"==typeof t&&(t=parseInt(t));var e=!1;if(CartJS)for(var r=0;r<CartJS.cart.items.length;r++){var a=CartJS.cart.items[r];a.variant_id===t&&(e=!0)}return e},module.exports=Cart;


},{"./../../bower_components/shopify-cartjs/dist/cart.js":2}],14:[function(require,module,exports){
var ImageSwitcher={};ImageSwitcher.preload_product_thumbs=function(){var e=$("[data-gallery-main]");if(e.length>0){var a=$(e.data("gallery-main"))[0],i=Shopify.Image.imageSize(a.src);e.length>0&&e.each(function(){var e=new Image,a=$(this).attr("href"),r=Shopify.Image.getSizedImageUrl(a,i);e.src=r})}},ImageSwitcher.image_swticher=function(){$(document).on("click","[data-gallery-main]",function(e){e.preventDefault();var a=$(e.currentTarget),i=$(a.data("gallery-main"))[0],r=a.attr("href");ImageSwitcher.switch_image(i,r)})},ImageSwitcher.switch_image=function(e,a){if(e&&a){var i=Shopify.Image.imageSize(e.src),r=Shopify.Image.getSizedImageUrl(a,i);e.src!==r&&(e.src=r)}},module.exports=ImageSwitcher;


},{}],15:[function(require,module,exports){
var Bsify=window.Bsify||{};Bsify.get_variant_by_id=function(i){var r;"string"==typeof i&&(i=parseInt(i));for(var s=0;s<Bsify.product.variants.length;s++){var e=Bsify.product.variants[s];e.id===i&&(r=e)}return r},Bsify.Cart=require("./bsify.cart.js"),Bsify.ImageSwitcher=require("./bsify.image_switcher.js"),Bsify.VariantOptionSwitcher=require("./bsify.variant_option_switcher.js"),Bsify.LinkedProductOptions=require("./bsify.linked_product_options.js"),Bsify.Banner=require("./bsify.banner.js"),Bsify.Thumbnails=require("./bsify.thumbnails.js"),Bsify.SocialFeeds=require("./bsify.social_feeds.js"),module.exports=Bsify;


},{"./bsify.banner.js":12,"./bsify.cart.js":13,"./bsify.image_switcher.js":14,"./bsify.linked_product_options.js":16,"./bsify.social_feeds.js":20,"./bsify.thumbnails.js":21,"./bsify.variant_option_switcher.js":23}],16:[function(require,module,exports){
var LinkedProductOptions={};LinkedProductOptions.optionsMap={},LinkedProductOptions.updateOptionsInSelector=function(o){var t,n;switch(o){case 0:t="root",n=jQuery(".single-option-selector:eq(0)");break;case 1:t=jQuery(".single-option-selector:eq(0)").val(),n=jQuery(".single-option-selector:eq(1)");break;case 2:t=jQuery(".single-option-selector:eq(0)").val(),t+=" / "+jQuery(".single-option-selector:eq(1)").val(),n=jQuery(".single-option-selector:eq(2)")}var i=n.val();n.empty();var e=LinkedProductOptions.optionsMap[t];if(void 0!==e){for(var p=0;p<e.length;p++){var s=e[p],r=jQuery("<option></option>").val(s).html(s);n.append(r)}jQuery('.swatch[data-option-index="'+o+'"] .swatch-element').each(function(){-1!==jQuery.inArray($(this).attr("data-value"),e)?$(this).removeClass("soldout").show().find(":radio").removeAttr("disabled","disabled").removeAttr("checked"):$(this).addClass("soldout").hide().find(":radio").removeAttr("checked").attr("disabled","disabled")}),-1!==jQuery.inArray(i,e)&&n.val(i),n.trigger("change")}},LinkedProductOptions.linkOptionSelectors=function(o){for(var t=0;t<o.variants.length;t++){var n=o.variants[t];if(n.available){var i;LinkedProductOptions.optionsMap.root=LinkedProductOptions.optionsMap.root||[],LinkedProductOptions.optionsMap.root.push(n.option1),LinkedProductOptions.optionsMap.root=Shopify.uniq(LinkedProductOptions.optionsMap.root),o.options.length>1&&(i=n.option1,LinkedProductOptions.optionsMap[i]=LinkedProductOptions.optionsMap[i]||[],LinkedProductOptions.optionsMap[i].push(n.option2),LinkedProductOptions.optionsMap[i]=Shopify.uniq(LinkedProductOptions.optionsMap[i])),3===o.options.length&&(i=n.option1+" / "+n.option2,LinkedProductOptions.optionsMap[i]=LinkedProductOptions.optionsMap[i]||[],LinkedProductOptions.optionsMap[i].push(n.option3),LinkedProductOptions.optionsMap[i]=Shopify.uniq(LinkedProductOptions.optionsMap[i]))}}LinkedProductOptions.updateOptionsInSelector(0),o.options.length>1&&LinkedProductOptions.updateOptionsInSelector(1),3===o.options.length&&LinkedProductOptions.updateOptionsInSelector(2),jQuery(".single-option-selector:eq(0)").change(function(){return LinkedProductOptions.updateOptionsInSelector(1),3===o.options.length&&LinkedProductOptions.updateOptionsInSelector(2),!0}),jQuery(".single-option-selector:eq(1)").change(function(){return 3===o.options.length&&LinkedProductOptions.updateOptionsInSelector(2),!0})},module.exports=LinkedProductOptions;


},{}],17:[function(require,module,exports){
var imgl=require("imagesloaded"),mq=require("./bsify.media_queries.js");require("./bsify.touch.js");var GalleryLoader=function(e,t){this.ele=e,this.parent_ele=t,this.onLoaded=function(){}};GalleryLoader.prototype.init=function(){this.$ele=$(this.ele),this.carousel_width=0,this.imgLoad=new imgl(this.ele);var e=this;this.imgLoad.on("progress",function(t,i){e._collect_image_width(i)}).on("done",function(){e._set_carousel_width(),e.onLoaded.apply(e)})},GalleryLoader.prototype._collect_image_width=function(e){if(e.isLoaded){var t=$(e.img),i=t.closest(this.parent_ele);this.carousel_width+=this._image_parents_width(i)}else $(e.img).hide()},GalleryLoader.prototype._image_parents_width=function(e){return e.width()+this._padding_to_num(e,"paddingLeft")+this._padding_to_num(e,"paddingRight")+1},GalleryLoader.prototype._padding_to_num=function(e,t){return parseInt(e.css(t).replace("px",""))},GalleryLoader.prototype._set_carousel_width=function(){this.$ele.width(this.carousel_width)};var Gallery=function(e){this.options=e,this.ele=this.options.gallery_wrapper,this.item_wrapper=this.options.item_wrapper,this.controls_wrapper=this.options.controls_wrapper,this.loader=new GalleryLoader(this.ele,this.options.item_wrapper),this.on_loaded=!1,this._init()};Gallery.prototype.update=function(){this.$ele.parent().animate({opacity:0},"slow"),this._remove_event_handlers(),this._init()},Gallery.prototype._init=function(){this.$ele=$(this.ele),this.$ele.length>0&&(this._add_event_handlers(),this.loader.init(),this._set_current_image())},Gallery.prototype._add_event_handlers=function(){var e=this;this.loader.onLoaded=function(){e.$ele.parent().animate({opacity:1},"slow"),e.on_loaded&&e.on_loaded.apply(e)},$(document).on("swipeLeft",this.controls_wrapper,function(t){e._next_img()}),$(document).on("swipeRight",this.controls_wrapper,function(t){e._prev_img()}),$(document).on("click","[data-gallery-direction]",function(t){t.preventDefault();var i=$(t.currentTarget);"left"===i.data("gallery-direction")?e._prev_img():e._next_img()})},Gallery.prototype._remove_event_handlers=function(){this.loader.onLoaded=!1,$(document).off("swipeLeft",this.controls_wrapper),$(document).off("swipeRight",this.controls_wrapper),$(document).off("click","[data-gallery-direction]")},Gallery.prototype._set_current_image=function(){var e=this.$ele.find(this.item_wrapper+".is_current");e.length>0?this.$current_image=e.first():this.$current_image=this.$ele.find(this.item_wrapper).first(),this.$current_image.addClass("is_current"),this._check_for_end()},Gallery.prototype._prev_img=function(){var e=this.$current_image.prev();e.length>0&&(e.css({marginLeft:"0"}).addClass("is_current"),this.$current_image.removeClass("is_current"),this.$current_image=e,this._check_for_end())},Gallery.prototype._next_img=function(){var e=this.$current_image.next();if(e.length>0){var t=this.loader._image_parents_width(this.$current_image);this.$current_image.css({marginLeft:-1*t}).removeClass("is_current"),e.addClass("is_current"),this.$current_image=e,this._check_for_end()}},Gallery.prototype._check_for_end=function(){$("[data-gallery-direction]").removeClass("disabled"),0===this.$current_image.prev().length?$('[data-gallery-direction="left"]').addClass("disabled"):0===this.$current_image.next().length&&$('[data-gallery-direction="right"]').addClass("disabled")},module.exports=Gallery;


},{"./bsify.media_queries.js":18,"./bsify.touch.js":22,"imagesloaded":3}],18:[function(require,module,exports){
require("./_polyfills.js").getComputedStyle(),module.exports.size=function(){return window.getComputedStyle(document.body,":after").getPropertyValue("content").replace(/['"]/g,"")};


},{"./_polyfills.js":11}],19:[function(require,module,exports){
var InstagramFeed=function(t){this.ele=t,this.$ele=$(this.ele),this.api_url="https://api.instagram.com/v1",this.request_queue=[],this.requesting=!1,this.image_count_default=12,this.image_count_buffer=10,this._get_data(),this._load_feed()};InstagramFeed.prototype._get_data=function(){this.client_id=this.$ele.data("client-id"),this.image_count=this.$ele.data("image-count")||this.image_count_default,this.image_total=this.image_count+this.image_count_buffer,this.hashtag=this.$ele.data("hashtag"),this.user=this.$ele.data("user"),this._get_user_id()},InstagramFeed.prototype._get_user_id=function(){this.user&&(this.request_queue.push("user_id"),this._start_requests())},InstagramFeed.prototype._load_feed=function(){var t;void 0!==this.hashtag?t="hashtag":void 0!==this.user&&(t="user"),this.request_queue.push(t),this._start_requests()},InstagramFeed.prototype._build_request=function(t){if(null===this.client_id)throw"[ERROR] Instagram: You must provide a client id";var e={};switch(e.data={client_id:this.client_id},t){case"user_id":e.url=this.api_url+"/users/search?q="+this.user,e.callback=function(t){this.user_id=t.data[0].id};break;case"user":e.url=this.api_url+"/users/"+this.user_id+"/media/recent",e.data=$.extend(e.data,{count:this.image_total}),e.callback=function(t){this._build_feed(t.data)};break;case"hashtag":e.url=this.api_url+"/tags/"+this.hashtag+"/media/recent",e.data=$.extend(e.data,{count:this.image_total}),e.callback=function(t){this._build_feed(t.data)}}return e},InstagramFeed.prototype._start_requests=function(){this.requesting||(this.requesting=!0,this._request())},InstagramFeed.prototype._request=function(){if(this.request_queue.length>0){var t=this,e=this.request_queue.shift(),a=this._build_request(e);$.ajax({dataType:"jsonp",url:a.url,data:a.data}).done(function(e){a.callback.apply(t,[e]),t._request()}).fail(function(t,e,a){console.log("fail",t,e,a)})}else this.requesting=!1},InstagramFeed.prototype._build_feed=function(t){var e,a=this._filter_data(t);a.length>0?(e=this._build_feed_markup(a),this.$ele.addClass("group").attr("data-group-size",a.length)):e=this._build_error_markup(),this.$ele.append(e)},InstagramFeed.prototype._filter_data=function(t){return t},InstagramFeed.prototype._build_feed_markup=function(t){for(var e="",a=t.length<this.image_count?t.length:this.image_count,i=0;a>i;i++){var s=t[i];s&&(e+=this._build_item_markup(s))}return e},InstagramFeed.prototype._build_item_markup=function(t){return'<div class="group-item-wrap">    <figure class="group-item thumbnail">      <a href="'+t.link+'">        <div class="group-item-image">          <img src="'+t.images.standard_resolution.url+'" alt="'+t.caption.text+'">        </div>        <figcaption class="group-item-details caption">          <p><span class="user">'+t.caption.from.username+"</span> "+t.caption.text+"</p>        </figcaption>      </a>    </figure>  </div>"},InstagramFeed.prototype._build_error_markup=function(t){return"<p>"+this.$ele.data("empty-message")+"</p>"},module.exports=InstagramFeed;


},{}],20:[function(require,module,exports){
var Instagram=require("./bsify.social_feed_instagram.js"),SocialFeeds={};SocialFeeds.init=function(){SocialFeeds.instagram()},SocialFeeds.instagram=function(){var e=SocialFeeds._get_elements("instagram");e.length>0&&e.each(function(){new Instagram(this)})},SocialFeeds._get_elements=function(e){var a='[data-social-feed="'+e+'"]';return $(a)},module.exports=SocialFeeds;


},{"./bsify.social_feed_instagram.js":19}],21:[function(require,module,exports){
require("uniformThumbnails"),require("jquery-orderly");var Thumbnails={};Thumbnails.init=function(){if(Bsify.thumbnail_settings.constrain_images){var i={};i.fit=Bsify.thumbnail_settings.crop_images?"crop":"scale",i.align=Bsify.thumbnail_settings.image_alignment.toLowerCase();var e=Bsify.thumbnail_settings.image_ratio.toLowerCase();"square"===e||"landscape"===e||"portrait"===e?i.format=e:i.ratio=e,$(Bsify.thumbnail_selectors.image_wrapper).uniform_thumbnails(i).on("ut_complete",function(){Thumbnails.orderly()})}else Thumbnails.orderly()},Thumbnails.orderly=function(){$(Bsify.thumbnail_selectors.details_wrapper).orderly({method:"children"})},module.exports=Thumbnails;


},{"jquery-orderly":6,"uniformThumbnails":7}],22:[function(require,module,exports){
var Swipe=function(){this.threshold=5,this.xDown=null,this.yDown=null,this.add_event_listeners()};Swipe.prototype.add_event_listeners=function(){var t=this;Element.prototype.addEventListener&&(document.addEventListener("touchstart",function(e){t.handleTouchStart(e)},!1),document.addEventListener("touchmove",function(e){t.handleTouchMove(e)},!1))},Swipe.prototype.handleTouchStart=function(t){this.xDown=t.touches[0].clientX,this.yDown=t.touches[0].clientY},Swipe.prototype.handleTouchMove=function(t){if(this.xDown&&this.yDown){var e=t.targetTouches[0].target,n=t.touches[0].clientX,i=t.touches[0].clientY,o=this.xDown-n,h=this.yDown-i;Math.abs(o)>Math.abs(h)?o>0?o>this.threshold&&$(e).trigger("swipeLeft"):-1*o>this.threshold&&$(e).trigger("swipeRight"):h>0?h>this.threshold&&$(e).trigger("swipeUp"):-1*h>this.threshold&&$(e).trigger("swipeDown"),this.xDown=null,this.yDown=null}},new Swipe;


},{}],23:[function(require,module,exports){
var VariantOptionSwitcher={};VariantOptionSwitcher.image_variant_switcher=function(){var t=$(Bsify.selectors.product.select_selector);$(document).on("click","[data-variant-id]",function(i){i.preventDefault();var r=$(i.currentTarget);t.val(r.data("variant-id")),VariantOptionSwitcher.update_product_selector_options(t)})},VariantOptionSwitcher.update_product_selector_options=function(t){var i=t.val(),r=Bsify.get_variant_by_id(i);if(r)for(var a=0;a<Bsify.product.options.length;a++){var e="option"+(a+1),n=r[e];$(".single-option-selector:eq("+a+")").val(n).trigger("change")}},module.exports=VariantOptionSwitcher;


},{}],24:[function(require,module,exports){
var SixPackBuilder=require("./phd.cart.sixpack.js"),MultiStepBuilder=require("./phd.cart.multistep.js"),StandardCart=require("./phd.cart.standard.js"),PhdCart=function(){var r=new StandardCart;new SixPackBuilder(r),new MultiStepBuilder(r)};module.exports=PhdCart;


},{"./phd.cart.multistep.js":25,"./phd.cart.sixpack.js":32,"./phd.cart.standard.js":33}],25:[function(require,module,exports){
var MultiStepBuilder=function(t){this.standard_cart=t};module.exports=MultiStepBuilder;


},{}],26:[function(require,module,exports){
var Eventer=require("./_eventer.js"),ItemsTotal=require("./phd.cart.sixpack.holder_total.js"),ItemsHolder=require("./phd.cart.sixpack.holder_items.js"),ItemsDisplay=require("./phd.cart.sixpack.holder_display.js"),ItemSubmitter=require("./phd.cart.sixpack.holder_submitter.js"),SixPackHolder=function(t){this.$ele=t,new Eventer(this);var e=this.$ele.data("phd-holding-limit-multiple")||6,i=this.$ele.data("phd-subscription-id"),r=this.$ele.data("phd-shipping-interval-frequency"),s=this.$ele.data("phd-shipping-interval-unit-type"),o=this.$ele.find("[data-phd-holding-items]"),d=this.$ele.find("form");this.items=new ItemsHolder("sixpack builder",e,i,r,s),this.items_display=new ItemsDisplay(o,e,this.items),this.total_display=new ItemsTotal(this.items),this.submitter=new ItemSubmitter(d,this.items),this._add_event_listeners()};SixPackHolder.prototype.add_to_holding=function(t){return this.items.add_item(t),this.items.item_count(t.id)},SixPackHolder.prototype.remove_from_holding=function(t){return this.items.remove_item(t),this.items.item_count(t)},SixPackHolder.prototype.update_item_in_holding=function(t,e){return this.items.update_item(t,e),this.items.item_count(t.id)},SixPackHolder.prototype._add_event_listeners=function(){var t=this;t.items_display.on("RemoveDisplayItem",function(e){t.items.remove_item(e);var i=[e,this.items.item_count(e)];t.trigger("RemoveItem",i)}),t.submitter.on("AddToCart",function(e){var i=t._build_products_for_cart(e);t.trigger("AddToCart",[i])}),t.items.on("ItemsCleared",function(){t.trigger("ItemsCleared")})},SixPackHolder.prototype._build_products_for_cart=function(t){var e="subscription"===t;return this.items.all_products_by_id(e)},module.exports=SixPackHolder;


},{"./_eventer.js":10,"./phd.cart.sixpack.holder_display.js":27,"./phd.cart.sixpack.holder_items.js":28,"./phd.cart.sixpack.holder_submitter.js":29,"./phd.cart.sixpack.holder_total.js":30}],27:[function(require,module,exports){
var Eventer=require("./_eventer.js"),SixPackHolderItemsDisplay=function(t,i,e){this.$ele=t,this.items=e,this.limit_multiple=i,this.tooltip_selector='[data-toggle="tooltip"]',this.default_color="#E0F0D9",new Eventer(this),this._add_event_listeners(),this.reset()};SixPackHolderItemsDisplay.prototype.update=function(t){this._clear_display_items(),this._redraw_display_items(),this._update_display_items(),this._add_tooltips(),t&&"added"===t&&this._scroll_container()},SixPackHolderItemsDisplay.prototype.reset=function(){this._clear_display_items(),this._build_empty_display_items(),this._add_tooltips()},SixPackHolderItemsDisplay.prototype._add_event_listeners=function(){var t=this;t.items.on("ItemsUpdated",function(i,e){t.update(e)}),t.$ele.on("click",".holding-item",function(i){i.preventDefault(),t._remove_item(i)})},SixPackHolderItemsDisplay.prototype._redraw_display_items=function(){for(var t=this.items.total_count(),i=Math.floor(t/this.limit_multiple)+1,e=0;i>e;e++)this._build_empty_display_items()},SixPackHolderItemsDisplay.prototype._clear_display_items=function(){this._remove_tooltips(),this.$ele.html("")},SixPackHolderItemsDisplay.prototype._build_empty_display_items=function(){for(var t="",i=0;i<this.limit_multiple;i++)t+=this._empty_display_item_markup();this.$ele.append('<div class="holding-item-group">'+t+"</div>")},SixPackHolderItemsDisplay.prototype._empty_display_item_markup=function(){return'<a class="holding-item holding-item-disabled" data-toggle="tooltip" data-placement="right" data-phd-item-id title="Empty item slot">    <span class="fa fa-times-circle"></span>    <svg version="1.2" baseprofile="tiny" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewbox="0 0 150 400" xml:space="preserve"> <path d="M64.2,9.6c-4.7,0.3-9.3,0.6-13.9,1.9c-3.6,1.1-5.6,3.7-6,7c-0.9,7.5-1.8,15-1.3,22.5c0.2,2.2,1.7,4.1,1.7,6.5,c0,2.5,0.4,4.9,0.7,7.4c0.1,1.2-0.6,1.6-1.6,1.8c-1.3,0.3-2.4,0.9-2.8,2.4c-0.7,2.9-0.4,3.4,2.6,3.9c1.2,0.2,1.8,0.7,1.8,2,c-0.1,2.7,0,5.3,0,8c0,0.8-0.1,1.5-0.9,2c-8.4,3.8-18.1,15.8-18.1,15.8c-5.8,7.6-9.3,16.1-11.6,25.4c-1.1,4.4-1,8.7-1.1,13.1,l-0.2,211.4c-0.2,11.5-0.4,22.9,0.2,34.4c0.4,8,4.8,12.5,13.5,14.1c5.5,1,11,1.3,16.5,1.6c8.1,0.3,18.1,0.1,26.2,0.2h10.2,c8.1,0,18.1,0.2,26.2-0.2c5.5-0.2,11-0.5,16.5-1.6c8.7-1.6,13.1-6.1,13.5-14.1c0.6-11.5,0.3-22.9,0.2-34.4l-0.2-211.4,c0-4.4,0.1-8.7-1.1-13.1c-2.3-9.2-5.9-17.7-11.6-25.4c0,0-8-11.3-18.1-15.8c-0.8-0.5-0.9-1.2-0.9-2c0-2.7,0-5.3,0-8,c0-1.3,0.6-1.8,1.8-2c2.9-0.5,3.2-1,2.6-3.9c-0.4-1.5-1.5-2.1-2.8-2.4c-1-0.2-1.7-0.7-1.6-1.8c0.2-2.5,0.6-4.9,0.7-7.4,c0-2.3,1.6-4.2,1.7-6.5c0.5-7.6-0.3-15.1-1.3-22.5c-0.4-3.3-2.4-5.9-6-7c-4.6-1.3-9.2-1.6-13.9-1.9C75.3,8.5,64.2,9.6,64.2,9.6,c-4.7,0.3-9.3,0.6-13.9,1.9c-3.6,1.1-5.6,3.7-6,7c-0.9,7.5-1.8,15-1.3,22.5c0.2,2.2,1.7,4.1,1.7,6.5c0,2.5,0.4,4.9,0.7,7.4,c0.1,1.2-0.6,1.6-1.6,1.8c-1.3,0.3-2.4,0.9-2.8,2.4c-0.7,2.9-0.4,3.4,2.6,3.9c1.2,0.2,1.8,0.7,1.8,2c-0.1,2.7,0,5.3,0,8,c0,0.8-0.1,1.5-0.9,2"></path> </svg>  </a>'},SixPackHolderItemsDisplay.prototype._update_display_items=function(){for(var t=this.items.total_count(),i=0;t>i;i++){var e=this.items.product_by_index(i),s=this.$ele.find(".holding-item").eq(i);s.removeClass("holding-item-disabled").attr("title","Remove "+e.title).attr("data-phd-item-id",e.id).data("phd-item-id",e.id),e.color&&s.find("path").css({fill:("#"!==e.color[0]?"#":"")+e.color})}},SixPackHolderItemsDisplay.prototype._scroll_container=function(){var t=$(".holding-item-group"),i=parseInt(t.css("margin-left"))+parseInt(t.css("margin-right")),e=(t.width()+i)*t.length,s=t.parent(),l=e-s.width();this.$ele.animate({scrollLeft:l},186)},SixPackHolderItemsDisplay.prototype._add_tooltips=function(){$(this.tooltip_selector).tooltip()},SixPackHolderItemsDisplay.prototype._remove_tooltips=function(){$(this.tooltip_selector).tooltip("destroy")},SixPackHolderItemsDisplay.prototype._remove_item=function(t){var i=$(t.currentTarget);if(!i.hasClass("holding-item-disabled")){var e=[i.data("phd-item-id")];this.trigger("RemoveDisplayItem",e)}},module.exports=SixPackHolderItemsDisplay;


},{"./_eventer.js":10}],28:[function(require,module,exports){
var Eventer=require("./_eventer.js"),SixPackHolderItems=function(t,i,e,r,o){new Eventer(this),this.id=t,this.products=[],this.products_are_addable=!1,this.limit_multiple=i,this.subscription_id=e,this.shipping_interval_frequency=r,this.shipping_interval_unit_type=o};SixPackHolderItems.prototype.add_item=function(t){this.products.push(t),this._update_is_addable_and_trigger("ItemAdded",[t.id,"added"])},SixPackHolderItems.prototype.remove_item=function(t){for(var i=this.total_count(),e=i-1;e>-1;e--){var r=this._remove_product_from_stack(t,e);if(r)break}this._update_is_addable_and_trigger("ItemRemoved",[t,"removed"])},SixPackHolderItems.prototype.update_item=function(t,i){for(var e=this.item_count(t.id),r=this.total_count(),o=r-1;o>-1;o--)this._remove_product_from_stack(t.id,o);if(i>0)for(var s=0;i>s;s++)this.products.push(t);var d=e>i?"removed":"added";this._update_is_addable_and_trigger("ItemUpdated",[t.id,d])},SixPackHolderItems.prototype.clear=function(){var t=this.all_products_by_id();for(var i in t)if(t.hasOwnProperty(i)){var e=t[i];this.update_item(e,0)}this.trigger("ItemsCleared")},SixPackHolderItems.prototype.item_count=function(t){for(var i=0,e=0;e<this.products.length;e++)this.products[e].id===t&&i++;return i},SixPackHolderItems.prototype.total_count=function(){return this.products.length},SixPackHolderItems.prototype.total_price=function(){for(var t=0,i=0;i<this.products.length;i++){var e=this.products[i];t+=e.price}return Shopify.formatMoney(t,Bsify.money_formats.moneyFormat)},SixPackHolderItems.prototype.product_by_index=function(t){return this.products[t]},SixPackHolderItems.prototype.all_products_by_id=function(t){for(var i={},e=0;e<this.products.length;e++){var r=this.products[e];i[r.id]?i[r.id].qty++:(i[r.id]={id:r.id,title:r.title,price:r.price,qty:1,properties:{added_by:this.id}},t&&(i[r.id].properties.shipping_interval_frequency=this.shipping_interval_frequency,i[r.id].properties.shipping_interval_unit_type=this.shipping_interval_unit_type,i[r.id].properties.subscription_id=this.subscription_id))}return i},SixPackHolderItems.prototype._remove_product_from_stack=function(t,i){var e=[];return this.products[i].id===t&&(e=this.products.splice(i,1)),e.length>0},SixPackHolderItems.prototype._update_is_addable_and_trigger=function(t,i){this.products_are_addable=this._is_addable(),this.trigger(t,i),this.trigger("ItemsUpdated",i)},SixPackHolderItems.prototype._is_addable=function(){var t=this.total_count(),i=t%this.limit_multiple;return t>0&&0===i},module.exports=SixPackHolderItems;


},{"./_eventer.js":10}],29:[function(require,module,exports){
var Eventer=require("./_eventer.js"),Modal=require("./phd.modal.js"),SixPackHolderItemSubmitter=function(t,e){new Eventer(this),this.$ele=t,this.items=e,this.$submit=t.find('[type="submit"]'),this.modal=new Modal,this._add_event_listeners()};SixPackHolderItemSubmitter.prototype._add_event_listeners=function(){var t=this;t.$ele.on("submit",function(e){e.preventDefault(),t._open_modal()}),$(document).on("click","[data-phd-add-to-cart-as]",function(e){var a=$(e.currentTarget),o=a.data("phd-add-to-cart-as");t.trigger("AddToCart",[o]),t.modal.close()}),t.items.on("ItemsUpdated",function(){t._toggle_submitablity()})},SixPackHolderItemSubmitter.prototype._toggle_submitablity=function(){this.items.products_are_addable?this.$submit.prop("disabled",!1):this.$submit.prop("disabled",!0)},SixPackHolderItemSubmitter.prototype._open_modal=function(){this.modal.content=this._add_to_cart_modal_markup(),this.modal.open()},SixPackHolderItemSubmitter.prototype._add_to_cart_modal_markup=function(){return'<div class="modal-header">    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span class="fa fa-times" aria-hidden="true"></span></button>    <h1>How do you want to get your order?</h1>  </div>  <div class="modal-body">    <button type="button" class="btn btn-default btn-lg" data-phd-add-to-cart-as="single"><strong>Add to cart</strong> as a one off purcahse</button>    <button type="button" class="btn btn-primary btn-lg" data-phd-add-to-cart-as="subscription">Get $10 off your order if you <strong>Subscribe now!</strong></button>  </div>'},SixPackHolderItemSubmitter.prototype._completed_modal_markup=function(t){return'<div class="modal-header">    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span class="fa fa-times" aria-hidden="true"></span></button>    <h1>Thanks, your order is being added to the cart</h1>  </div>  <div class="modal-body">    <p>'+t+"</p>  </div>"},module.exports=SixPackHolderItemSubmitter;


},{"./_eventer.js":10,"./phd.modal.js":39}],30:[function(require,module,exports){
var DataModel=require("./_data_model.js"),SixPackHolderTotal=function(t){this.items=t,new DataModel(this,{limit:"[data-phd-holding-items-limit]",total_items:"[data-phd-holding-total-items]",total_price:"[data-phd-holding-total-price]"}),this._add_event_listeners(),this.update()};SixPackHolderTotal.prototype.update=function(){this.total_items=this.items.total_count(),this.total_price=this.items.total_price();var t=this.items.limit_multiple*Math.ceil(this.total_items/this.items.limit_multiple);this.limit=t>0?t:this.items.limit_multiple},SixPackHolderTotal.prototype._add_event_listeners=function(){var t=this;t.items.on("ItemsUpdated",function(){t.update()})},module.exports=SixPackHolderTotal;


},{"./_data_model.js":9}],31:[function(require,module,exports){
var Eventer=require("./_eventer.js"),DataModel=require("./_data_model.js"),Modal=require("./phd.modal.js"),SixPackItem=function(t,e){this.$ele=t,this.id=e,new Eventer(this),new DataModel(this,{count:"[data-phd-item-"+this.id+"-count]"}),this.modal=new Modal,this.variant_id=this.$ele.data("phd-variant-id"),this.product_title=this.$ele.data("phd-product-title"),this.product_price=this.$ele.data("phd-product-price"),this.product_color=this.$ele.data("phd-product-color"),this.product={id:this.variant_id,title:this.product_title,price:this.product_price,color:this.product_color},this._add_event_listeners()};SixPackItem.prototype._add_event_listeners=function(){var t=this;t.$ele.on("click","[data-phd-add-item]",function(e){e.preventDefault(),e.currentTarget.blur(),t._trigger_add_to()}),t.$ele.on("click","[data-phd-remove-item]",function(e){e.preventDefault(),e.currentTarget.blur(),t._trigger_remove_from()}),t.$ele.on("blur","[data-phd-edit-item]",function(e){var r=parseInt(e.currentTarget.value);t._trigger_update_holding(r)}),t.$ele.on("keyup","[data-phd-edit-item]",function(e){if(13===e.keyCode){var r=parseInt(e.currentTarget.value);t._trigger_update_holding(r)}}),t.$ele.on("click","[data-phd-modal]",function(e){e.preventDefault();var r=$(e.currentTarget),i=r.attr("href");t.modal.open(),$.ajax(i).done(function(e){t.modal.content=e})})},SixPackItem.prototype._trigger_add_to=function(){var t=[this.product];this.trigger("AddToHolding",t)},SixPackItem.prototype._trigger_remove_from=function(){var t=[this.variant_id];this.trigger("RemoveFromHolding",t)},SixPackItem.prototype._trigger_update_holding=function(t){var e=[this.product,t];this.trigger("UpdateHolding",e)},module.exports=SixPackItem;


},{"./_data_model.js":9,"./_eventer.js":10,"./phd.modal.js":39}],32:[function(require,module,exports){
var ProductItem=require("./phd.cart.sixpack.item.js"),ProductHolder=require("./phd.cart.sixpack.holder.js"),SixPackBuilder=function(t){this.cart=t,this.holding_ele_selector='[data-phd-six-pack="holding"]',this.item_ele_selector='[data-phd-six-pack="item"]',this.items={},this._init_holder(),this._init_items()};SixPackBuilder.prototype._init_holder=function(){var t=this,o=$(this.holding_ele_selector);t.product_holder=new ProductHolder(o),t.product_holder.on("AddToCart",function(o){t.cart.add_products(o),t.product_holder.items.clear()}),t.product_holder.on("RemoveItem",function(o,e){t.items[o].holding_count=e}),t.product_holder.on("ItemsCleared",function(){for(var o in t.items){var e=t.items[o];e.count=""}})},SixPackBuilder.prototype._init_items=function(){var t=this,o=$(this.item_ele_selector);o.each(function(o,e){var i=$(e),r=new ProductItem(i,o);t.items[r.variant_id]=r,r.on("AddToHolding",function(o){var e=t.product_holder.add_to_holding(o);r.count=e}),r.on("RemoveFromHolding",function(o){var e=t.product_holder.remove_from_holding(o);r.count=e>0?e:""}),r.on("UpdateHolding",function(o,e){var i=t.product_holder.update_item_in_holding(o,e);r.count=i>0?i:""})})},module.exports=SixPackBuilder;


},{"./phd.cart.sixpack.holder.js":26,"./phd.cart.sixpack.item.js":31}],33:[function(require,module,exports){
var CartJS=require("./../../bower_components/shopify-cartjs/dist/cart.js"),CartDisplay=require("./phd.cart.standard_display.js"),CartOffCanvas=require("./phd.cart.standard_offcanvas.js"),StandardCart=function(){var t='a[href="/cart"]';this.off_canvas=new CartOffCanvas(t),this.display=new CartDisplay,this._add_event_listeners()};StandardCart.prototype.add_products=function(t){for(var a in t)if(t.hasOwnProperty(a)){var r=t[a];this.add_product(r)}},StandardCart.prototype.add_product=function(t){var a=this;a.display.update_cart_item(t),CartJS.addItem(t.id,t.qty,t.properties,{success:function(t,r,d){a._item_added_success(t,r,d)},error:function(t,r,d){a._item_added_error(t,r,d)}})},StandardCart.prototype._add_event_listeners=function(){var t=this;$(document).on("cart.requestComplete",function(a,r){console.log("cart.requestComplete",a,r),t.display.update(r)})},StandardCart.prototype._item_added_success=function(t,a,r){},StandardCart.prototype._item_added_error=function(t,a,r){console.log("Item added: error",t,a,r)},module.exports=StandardCart,window.CartJS=CartJS;


},{"./../../bower_components/shopify-cartjs/dist/cart.js":2,"./phd.cart.standard_display.js":34,"./phd.cart.standard_offcanvas.js":37}],34:[function(require,module,exports){
var DataModel=require("./_data_model.js"),CartItems=require("./phd.cart.standard_display_items.js"),StandardCartDisplay=function(){this.$details=$(".side-cart-details"),this.$empty_message=$(".side-cart-empty"),this.section_empty_message_selector=".side-cart-section-empty";var t=".phd-side-cart-item-template",e="[data-phd-side-cart-item]",s="[data-phd-side-cart-items-subscription]",a="[data-phd-side-cart-items-one-off]";this.subscription_items=new CartItems(s,e,t),this.one_off_items=new CartItems(a,e,t),this.item_groups=[this.subscription_items,this.one_off_items]};StandardCartDisplay.prototype.update=function(t){this.clear();for(var e=0;e<t.items.length;e++){var s=t.items[e];this.update_cart_item(s)}this._update_cart_empty_state()},StandardCartDisplay.prototype.update_cart_item=function(t){console.log("update_cart_item",t),void 0!==t.properties.subscription_id?this.subscription_items.update_cart_item(t):this.one_off_items.update_cart_item(t)},StandardCartDisplay.prototype.clear=function(){this._each(function(t,e){e.clear_items()})},StandardCartDisplay.prototype._update_cart_empty_state=function(){var t=0;this._each(function(e,s){var a=s.count();a>0?(s.$items_wrapper.next(this.section_empty_message_selector).hide(),t+=a):s.$items_wrapper.next(this.section_empty_message_selector).show()}),t>0?(this.$empty_message.hide(),this.$details.show()):(this.$empty_message.show(),this.$details.hide())},StandardCartDisplay.prototype._each=function(t){for(var e=0;e<this.item_groups.length;e++){var s=this.item_groups[e];t(e,s)}},module.exports=StandardCartDisplay;


},{"./_data_model.js":9,"./phd.cart.standard_display_items.js":36}],35:[function(require,module,exports){
var DataModel=require("./_data_model.js"),StandardCartDisplayItem=function(t,e,i){this.id=i,this.item_selector=e.replace("]",'="'+this.id+'"]'),this.items_wrapper_selector=t,this.selector=this.items_wrapper_selector+" "+this.item_selector,this.$ele=$(this.item_selector),this.price_tempate=this.$ele.find(".phd-side-cart-item-price-template").html(),new DataModel(this,{title:this.selector+" [data-phd-side-cart-item-title]",quantity:this.selector+" [data-phd-side-cart-item-qty]",price:this.selector+" [data-phd-side-cart-item-price]",line_price:this.selector+" [data-phd-side-cart-item-line-price]"})};StandardCartDisplayItem.prototype.update=function(t){this.quantity=t.quantity,this.price=this._price_markup(t.price),this.line_price=this._price_markup(t.line_price),void 0===this.title&&(this.title=t.title)},StandardCartDisplayItem.prototype._price_markup=function(t){var e=Shopify.formatMoney(t,Bsify.money_formats.moneyFormat),i=Shopify.formatMoney(t,Bsify.money_formats.moneyWithCurrencyFormat);return this.price_tempate.replace("[ITEM_PRICE_DATA]",t).replace("[ITEM_PRICE]",e).replace("[ITEM_PRICE_WITH_CURRENCY]",i)},module.exports=StandardCartDisplayItem;


},{"./_data_model.js":9}],36:[function(require,module,exports){
require("./_polyfills.js").objectKeys();var CartItem=require("./phd.cart.standard_display_item.js"),StandardCartDisplayItems=function(t,e,i){this.items={},this.item_selector=e,this.items_wrapper_selector=t,this.$items=$(e),this.$items_wrapper=$(t),this.$item_template=$(i),this.item_id_data_attr=e.replace(/\[|\]/g,""),this.item_id_data=this.item_id_data_attr.replace("data-",""),this._collect_items_from_dom()};StandardCartDisplayItems.prototype.update_cart_item=function(t){this.has_item(t.id)?this.items[t.id].update(t):this._build_new_item(t)},StandardCartDisplayItems.prototype.has_item=function(t){var e=!1;for(var i in this.items)if(i===t.toString()){e=!0;break}return e},StandardCartDisplayItems.prototype.count=function(){return Object.keys(this.items).length},StandardCartDisplayItems.prototype.clear_items=function(){this.items={},this.$items_wrapper.html("")},StandardCartDisplayItems.prototype._add_new_item=function(t){this.items[t]=new CartItem(this.items_wrapper_selector,this.item_selector,t)},StandardCartDisplayItems.prototype._collect_items_from_dom=function(){var t=this;this.$items.each(function(e,i){var a=$(i),s=a.data(t.item_id_data);t.has_item(s)||t._add_new_item(s)})},StandardCartDisplayItems.prototype._build_new_item=function(t){var e=$(this.$item_template.html());e.data(this.item_id_data,t.id).attr(this.item_id_data_attr,t.id),this.$items_wrapper.append(e),this._add_new_item(t.id),this.items[t.id].update(t)},module.exports=StandardCartDisplayItems;


},{"./_polyfills.js":11,"./phd.cart.standard_display_item.js":35}],37:[function(require,module,exports){
var Cookies=require("./_cookies.js"),StandardCartOffCanvas=function(t){if(this.cart_action_selector=t,this.offcanavs_class="offcanvas-open",this.$body=$("body"),this._add_event_listenters(),Cookies.hasItem("cart_state")){var a=Cookies.getItem("cart_state");this.toggle_draw(a)}};StandardCartOffCanvas.prototype.toggle_draw=function(t){void 0!==t&&void 0!==this[t+"_draw"]?this[t+"_draw"].apply(this):this.$body.hasClass(this.offcanavs_class)?this.close_draw():this.open_draw()},StandardCartOffCanvas.prototype.open_draw=function(){this.$body.addClass(this.offcanavs_class),Cookies.setItem("cart_state","open"),$(window).trigger("resize")},StandardCartOffCanvas.prototype.close_draw=function(){this.$body.removeClass(this.offcanavs_class),Cookies.setItem("cart_state","close"),$(window).trigger("resize")},StandardCartOffCanvas.prototype._add_event_listenters=function(){var t=this;$(document).on("click",this.cart_action_selector,function(a){a.preventDefault(),t.toggle_draw()})},module.exports=StandardCartOffCanvas;


},{"./_cookies.js":8}],38:[function(require,module,exports){
var PhdSticky=require("./phd.sticky.js"),PhdCart=require("./phd.cart.js"),Phd=function(){new PhdSticky,new PhdCart};module.exports=Phd;


},{"./phd.cart.js":24,"./phd.sticky.js":40}],39:[function(require,module,exports){
var DataModel=require("./_data_model.js"),PhdModal=function(t,e){this.callback_events=["on_open","on_close"],this.selector=e||"[data-bsify-modal]",this.$ele=$(this.selector),this.id=this._id(),new DataModel(this,{content:this.selector+" .modal-content"}),this._set_callbacks(t),this._add_event_listeners()};PhdModal.prototype.open=function(){this.$ele.modal(),this.$ele.data("modal_id",this.id),this.on_open&&this.on_open()},PhdModal.prototype.close=function(){this.$ele.modal("hide"),this.destroy()},PhdModal.prototype.destroy=function(){this.on_close&&this.on_close(),this.content="",this.$ele.data("bs.modal",null),this.$ele.data("modal_id",null)},PhdModal.prototype._add_event_listeners=function(){var t=this;this.$ele.on("hidden.bs.modal",function(){t.$ele.data("modal_id")===t.id&&t.destroy()})},PhdModal.prototype._set_callbacks=function(t){if(t)for(var e in this.callback_events){var o=this.callback_events[e];t[o]&&(this[o]=t[o])}},PhdModal.prototype._id=function(){return"_"+Math.random().toString(36).substr(2,9)},module.exports=PhdModal;


},{"./_data_model.js":9}],40:[function(require,module,exports){
var PhdSticky=function(){var t=$('[data-phd="sticky"]'),o=t.parent(),a=($(window),parseInt(o.css("margin-bottom"))),i=function(o){t.parent().css({"margin-bottom":o})};t.length>0&&(console.log("Make sticky"),t.affix({offset:{top:t.offset().top,bottom:30},target:".offcanvas-main"}).on("affixed.bs.affix",function(){var o="relative"!==t.css("position")?a+t.height():a;i(o)}).on("affixed-top.bs.affix",function(){i(a)}))};module.exports=PhdSticky;


},{}]},{},[1])
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyaWZ5L25vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCIvVXNlcnMvc3Rld2FydGtuYXBtYW4vRGV2ZWxvcG1lbnQvU2hvcGlmeS9DbGllbnRzL3BoZC9zcmMvanMvYXBwLmpzIiwiL1VzZXJzL3N0ZXdhcnRrbmFwbWFuL0RldmVsb3BtZW50L1Nob3BpZnkvQ2xpZW50cy9waGQvYm93ZXJfY29tcG9uZW50cy9zaG9waWZ5LWNhcnRqcy9kaXN0L2NhcnQuanMiLCIvVXNlcnMvc3Rld2FydGtuYXBtYW4vRGV2ZWxvcG1lbnQvU2hvcGlmeS9DbGllbnRzL3BoZC9ub2RlX21vZHVsZXMvaW1hZ2VzbG9hZGVkL2ltYWdlc2xvYWRlZC5qcyIsIi9Vc2Vycy9zdGV3YXJ0a25hcG1hbi9EZXZlbG9wbWVudC9TaG9waWZ5L0NsaWVudHMvcGhkL25vZGVfbW9kdWxlcy9pbWFnZXNsb2FkZWQvbm9kZV9tb2R1bGVzL2V2ZW50aWUvZXZlbnRpZS5qcyIsIi9Vc2Vycy9zdGV3YXJ0a25hcG1hbi9EZXZlbG9wbWVudC9TaG9waWZ5L0NsaWVudHMvcGhkL25vZGVfbW9kdWxlcy9pbWFnZXNsb2FkZWQvbm9kZV9tb2R1bGVzL3dvbGZ5ODctZXZlbnRlbWl0dGVyL0V2ZW50RW1pdHRlci5qcyIsIi9Vc2Vycy9zdGV3YXJ0a25hcG1hbi9EZXZlbG9wbWVudC9TaG9waWZ5L0NsaWVudHMvcGhkL25vZGVfbW9kdWxlcy9qcXVlcnktb3JkZXJseS9zcmMvanF1ZXJ5Lm9yZGVybHkuanMiLCIvVXNlcnMvc3Rld2FydGtuYXBtYW4vRGV2ZWxvcG1lbnQvU2hvcGlmeS9DbGllbnRzL3BoZC9ub2RlX21vZHVsZXMvdW5pZm9ybVRodW1ibmFpbHMvc3JjL2pxdWVyeS51bmlmb3JtX3RodW1ibmFpbHMuanMiLCIvVXNlcnMvc3Rld2FydGtuYXBtYW4vRGV2ZWxvcG1lbnQvU2hvcGlmeS9DbGllbnRzL3BoZC9zcmMvanMvX2Nvb2tpZXMuanMiLCIvVXNlcnMvc3Rld2FydGtuYXBtYW4vRGV2ZWxvcG1lbnQvU2hvcGlmeS9DbGllbnRzL3BoZC9zcmMvanMvX2RhdGFfbW9kZWwuanMiLCIvVXNlcnMvc3Rld2FydGtuYXBtYW4vRGV2ZWxvcG1lbnQvU2hvcGlmeS9DbGllbnRzL3BoZC9zcmMvanMvX2V2ZW50ZXIuanMiLCIvVXNlcnMvc3Rld2FydGtuYXBtYW4vRGV2ZWxvcG1lbnQvU2hvcGlmeS9DbGllbnRzL3BoZC9zcmMvanMvX3BvbHlmaWxscy5qcyIsIi9Vc2Vycy9zdGV3YXJ0a25hcG1hbi9EZXZlbG9wbWVudC9TaG9waWZ5L0NsaWVudHMvcGhkL3NyYy9qcy9ic2lmeS5iYW5uZXIuanMiLCIvVXNlcnMvc3Rld2FydGtuYXBtYW4vRGV2ZWxvcG1lbnQvU2hvcGlmeS9DbGllbnRzL3BoZC9zcmMvanMvYnNpZnkuY2FydC5qcyIsIi9Vc2Vycy9zdGV3YXJ0a25hcG1hbi9EZXZlbG9wbWVudC9TaG9waWZ5L0NsaWVudHMvcGhkL3NyYy9qcy9ic2lmeS5pbWFnZV9zd2l0Y2hlci5qcyIsIi9Vc2Vycy9zdGV3YXJ0a25hcG1hbi9EZXZlbG9wbWVudC9TaG9waWZ5L0NsaWVudHMvcGhkL3NyYy9qcy9ic2lmeS5qcyIsIi9Vc2Vycy9zdGV3YXJ0a25hcG1hbi9EZXZlbG9wbWVudC9TaG9waWZ5L0NsaWVudHMvcGhkL3NyYy9qcy9ic2lmeS5saW5rZWRfcHJvZHVjdF9vcHRpb25zLmpzIiwiL1VzZXJzL3N0ZXdhcnRrbmFwbWFuL0RldmVsb3BtZW50L1Nob3BpZnkvQ2xpZW50cy9waGQvc3JjL2pzL2JzaWZ5Lmxvb2tib29rX2dhbGxlcnkuanMiLCIvVXNlcnMvc3Rld2FydGtuYXBtYW4vRGV2ZWxvcG1lbnQvU2hvcGlmeS9DbGllbnRzL3BoZC9zcmMvanMvYnNpZnkubWVkaWFfcXVlcmllcy5qcyIsIi9Vc2Vycy9zdGV3YXJ0a25hcG1hbi9EZXZlbG9wbWVudC9TaG9waWZ5L0NsaWVudHMvcGhkL3NyYy9qcy9ic2lmeS5zb2NpYWxfZmVlZF9pbnN0YWdyYW0uanMiLCIvVXNlcnMvc3Rld2FydGtuYXBtYW4vRGV2ZWxvcG1lbnQvU2hvcGlmeS9DbGllbnRzL3BoZC9zcmMvanMvYnNpZnkuc29jaWFsX2ZlZWRzLmpzIiwiL1VzZXJzL3N0ZXdhcnRrbmFwbWFuL0RldmVsb3BtZW50L1Nob3BpZnkvQ2xpZW50cy9waGQvc3JjL2pzL2JzaWZ5LnRodW1ibmFpbHMuanMiLCIvVXNlcnMvc3Rld2FydGtuYXBtYW4vRGV2ZWxvcG1lbnQvU2hvcGlmeS9DbGllbnRzL3BoZC9zcmMvanMvYnNpZnkudG91Y2guanMiLCIvVXNlcnMvc3Rld2FydGtuYXBtYW4vRGV2ZWxvcG1lbnQvU2hvcGlmeS9DbGllbnRzL3BoZC9zcmMvanMvYnNpZnkudmFyaWFudF9vcHRpb25fc3dpdGNoZXIuanMiLCIvVXNlcnMvc3Rld2FydGtuYXBtYW4vRGV2ZWxvcG1lbnQvU2hvcGlmeS9DbGllbnRzL3BoZC9zcmMvanMvcGhkLmNhcnQuanMiLCIvVXNlcnMvc3Rld2FydGtuYXBtYW4vRGV2ZWxvcG1lbnQvU2hvcGlmeS9DbGllbnRzL3BoZC9zcmMvanMvcGhkLmNhcnQubXVsdGlzdGVwLmpzIiwiL1VzZXJzL3N0ZXdhcnRrbmFwbWFuL0RldmVsb3BtZW50L1Nob3BpZnkvQ2xpZW50cy9waGQvc3JjL2pzL3BoZC5jYXJ0LnNpeHBhY2suaG9sZGVyLmpzIiwiL1VzZXJzL3N0ZXdhcnRrbmFwbWFuL0RldmVsb3BtZW50L1Nob3BpZnkvQ2xpZW50cy9waGQvc3JjL2pzL3BoZC5jYXJ0LnNpeHBhY2suaG9sZGVyX2Rpc3BsYXkuanMiLCIvVXNlcnMvc3Rld2FydGtuYXBtYW4vRGV2ZWxvcG1lbnQvU2hvcGlmeS9DbGllbnRzL3BoZC9zcmMvanMvcGhkLmNhcnQuc2l4cGFjay5ob2xkZXJfaXRlbXMuanMiLCIvVXNlcnMvc3Rld2FydGtuYXBtYW4vRGV2ZWxvcG1lbnQvU2hvcGlmeS9DbGllbnRzL3BoZC9zcmMvanMvcGhkLmNhcnQuc2l4cGFjay5ob2xkZXJfc3VibWl0dGVyLmpzIiwiL1VzZXJzL3N0ZXdhcnRrbmFwbWFuL0RldmVsb3BtZW50L1Nob3BpZnkvQ2xpZW50cy9waGQvc3JjL2pzL3BoZC5jYXJ0LnNpeHBhY2suaG9sZGVyX3RvdGFsLmpzIiwiL1VzZXJzL3N0ZXdhcnRrbmFwbWFuL0RldmVsb3BtZW50L1Nob3BpZnkvQ2xpZW50cy9waGQvc3JjL2pzL3BoZC5jYXJ0LnNpeHBhY2suaXRlbS5qcyIsIi9Vc2Vycy9zdGV3YXJ0a25hcG1hbi9EZXZlbG9wbWVudC9TaG9waWZ5L0NsaWVudHMvcGhkL3NyYy9qcy9waGQuY2FydC5zaXhwYWNrLmpzIiwiL1VzZXJzL3N0ZXdhcnRrbmFwbWFuL0RldmVsb3BtZW50L1Nob3BpZnkvQ2xpZW50cy9waGQvc3JjL2pzL3BoZC5jYXJ0LnN0YW5kYXJkLmpzIiwiL1VzZXJzL3N0ZXdhcnRrbmFwbWFuL0RldmVsb3BtZW50L1Nob3BpZnkvQ2xpZW50cy9waGQvc3JjL2pzL3BoZC5jYXJ0LnN0YW5kYXJkX2Rpc3BsYXkuanMiLCIvVXNlcnMvc3Rld2FydGtuYXBtYW4vRGV2ZWxvcG1lbnQvU2hvcGlmeS9DbGllbnRzL3BoZC9zcmMvanMvcGhkLmNhcnQuc3RhbmRhcmRfZGlzcGxheV9pdGVtLmpzIiwiL1VzZXJzL3N0ZXdhcnRrbmFwbWFuL0RldmVsb3BtZW50L1Nob3BpZnkvQ2xpZW50cy9waGQvc3JjL2pzL3BoZC5jYXJ0LnN0YW5kYXJkX2Rpc3BsYXlfaXRlbXMuanMiLCIvVXNlcnMvc3Rld2FydGtuYXBtYW4vRGV2ZWxvcG1lbnQvU2hvcGlmeS9DbGllbnRzL3BoZC9zcmMvanMvcGhkLmNhcnQuc3RhbmRhcmRfb2ZmY2FudmFzLmpzIiwiL1VzZXJzL3N0ZXdhcnRrbmFwbWFuL0RldmVsb3BtZW50L1Nob3BpZnkvQ2xpZW50cy9waGQvc3JjL2pzL3BoZC5qcyIsIi9Vc2Vycy9zdGV3YXJ0a25hcG1hbi9EZXZlbG9wbWVudC9TaG9waWZ5L0NsaWVudHMvcGhkL3NyYy9qcy9waGQubW9kYWwuanMiLCIvVXNlcnMvc3Rld2FydGtuYXBtYW4vRGV2ZWxvcG1lbnQvU2hvcGlmeS9DbGllbnRzL3BoZC9zcmMvanMvcGhkLnN0aWNreS5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQ0lBLEdBQUksT0FBUSxRQUFRLGNBQ2hCLE9BQVMsUUFBUSx3REFDakIsU0FBVyxRQUFRLCtCQUNuQixJQUFNLFFBQVEsWUFFZCxJQUFNLFdBa0NSLEdBaENBLE9BQU8sS0FBSyxNQUFNLEtBQU0sTUFBTSxlQUcxQixNQUFNLFVBRVIsTUFBTSxjQUFjLHlCQUNwQixNQUFNLGNBQWMsaUJBRXBCLE1BQU0sc0JBQXNCLHlCQUl4QixNQUFNLHdCQUVKLE1BQU0sUUFBUSxXQUFhLE1BQU0sUUFBUSxRQUFRLE9BQVMsR0FDNUQsTUFBTSxxQkFBcUIsb0JBQW9CLE1BQU0sVUFNdkQsTUFBTSxrQkFDUixNQUFNLEtBQUssT0FJYixNQUFNLFdBQVcsT0FHakIsTUFBTSxPQUFPLE9BR1QsRUFBRSx3QkFBd0IsT0FBUyxFQUFHLENBQ3hDLEdBQUksR0FBVyxHQUFJLFdBQ2pCLGdCQUFpQix1Q0FDakIsYUFBYyxtQkFDZCxpQkFBa0Isc0JBR3BCLEdBQVMsVUFBWSxXQUNuQixHQUFJLEdBQWMsRUFBRSxxQkFBcUIsUUFDekMsR0FBRSxzQkFBc0IsT0FBTyxHQUUvQixNQUFNLFdBQVcsV0FLckIsTUFBTSxZQUFZLE9BR2xCLEdBQUksTUFJRixJQUFNLEdBQUksSUFDZCxRQUFPLFFBQVU7Ozs7Q0NuRWpCLFdBQ0UsR0FBSSxHQUFXLEVBQU0sRUFBUSxFQUFNLEVBQVksRUFDN0MsRUFBUyxTQUFTLEVBQUksR0FBSyxNQUFPLFlBQVksTUFBTyxHQUFHLE1BQU0sRUFBSSxZQUVwRSxHQUFPLFdBQ0wsUUFBUyxLQUNQLEtBQUssT0FBUyxFQUFPLEtBQUssT0FBUSxNQXVCcEMsTUFwQkEsR0FBSyxVQUFVLE9BQVMsU0FBUyxHQUMvQixHQUFJLEdBQU0sRUFBSyxDQUNmLEtBQUssSUFBTyxHQUNWLEVBQVEsRUFBSyxHQUNELFVBQVIsSUFDRixLQUFLLEdBQU8sRUFHaEIsT0FB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QixFQUFXLE1BS2pCLFFBQU8sUUFBVSIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIGUodCxuLHIpe2Z1bmN0aW9uIHMobyx1KXtpZighbltvXSl7aWYoIXRbb10pe3ZhciBhPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK28rXCInXCIpO3Rocm93IGYuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKylzKHJbb10pO3JldHVybiBzfSkiLCIvKlxuICBNYWluIGFwcCBmb3IgQm9vdHN0cmFwaWZ5XG4qL1xuXG52YXIgQnNpZnkgPSByZXF1aXJlKCcuL2JzaWZ5LmpzJyk7XG52YXIgQ2FydEpTID0gcmVxdWlyZShcIi4vLi4vLi4vYm93ZXJfY29tcG9uZW50cy9zaG9waWZ5LWNhcnRqcy9kaXN0L2NhcnQuanNcIik7XG52YXIgTG9va2Jvb2sgPSByZXF1aXJlKCcuL2JzaWZ5Lmxvb2tib29rX2dhbGxlcnkuanMnKTtcbnZhciBQaGQgPSByZXF1aXJlKCcuL3BoZC5qcycpO1xuXG52YXIgQXBwID0gZnVuY3Rpb24gKCkge1xuICAvLyBpbml0IENhcnRKU1xuICBDYXJ0SlMuaW5pdChCc2lmeS5jYXJ0LCBCc2lmeS5tb25leV9mb3JtYXRzKTtcblxuICAvLyBpbml0IHByb2R1Y3QgdGVtcGxhdGUganNcbiAgaWYgKEJzaWZ5LnByb2R1Y3QpIHtcbiAgICAvLyBQcmVsb2FkIGltYWdlcyBhbmQgY2FsbCBpbWFnZSBzd2l0Y2hlciBpbml0XG4gICAgQnNpZnkuSW1hZ2VTd2l0Y2hlci5wcmVsb2FkX3Byb2R1Y3RfdGh1bWJzKCk7XG4gICAgQnNpZnkuSW1hZ2VTd2l0Y2hlci5pbWFnZV9zd3RpY2hlcigpO1xuICAgIC8vIEluaXRpYWxpc2UgdGhlIGltYWdlX3ZhcmlhbnRfc3dpdGNoZXJcbiAgICBCc2lmeS5WYXJpYW50T3B0aW9uU3dpdGNoZXIuaW1hZ2VfdmFyaWFudF9zd2l0Y2hlcigpO1xuXG4gICAgLy8gQ2FsbCBsaW5rT3B0aW9uU2VsZWN0b3JzXG4gICAgLy8gQ2hlY2sgdGhhdCB3ZSB3YW50IHRvIHVzZSB0aGUgbGlua2VkIHByb2R1Y3Qgb3B0aW9uc1xuICAgIGlmIChCc2lmeS5saW5rZWRfcHJvZHVjdF9vcHRpb25zKSB7XG4gICAgICAvLyBNYWtlIHN1cmUgdGhlIHByb2R1Y3QgbWVldHMgdGhlIGNvcnJlY3QgY2l0ZXJpYSBmb3IgbGlua2VkIHByb2R1Y3Qgb3B0aW9ucyBhbmQgdGhlbiBpbml0aWFsaXNlXG4gICAgICBpZiAoQnNpZnkucHJvZHVjdC5hdmFpbGFibGUgJiYgQnNpZnkucHJvZHVjdC5vcHRpb25zLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgQnNpZnkuTGlua2VkUHJvZHVjdE9wdGlvbnMubGlua09wdGlvblNlbGVjdG9ycyhCc2lmeS5wcm9kdWN0KTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvLyBpbml0IGFqYXggYWRkIHRvIGNhcnRcbiAgaWYgKEJzaWZ5LmFqYXhfYWRkX3RvX2NhcnQpIHtcbiAgICBCc2lmeS5DYXJ0LmluaXQoKTtcbiAgfVxuXG4gIC8vIGxvYWQgdW5pZm9ybSB0aHVtYnMgYW5kIG9yZGVybHlcbiAgQnNpZnkuVGh1bWJuYWlscy5pbml0KCk7XG5cbiAgLy8gaW5pdCBldmVudCBsaXN0ZW5lcnMgZm9yIGJhbm5lclxuICBCc2lmeS5CYW5uZXIuaW5pdCgpO1xuXG4gIC8vIGluaXQgbG9va2Jvb2sgZ2FsbGVyeVxuICBpZiAoJCgnLmNvbGxlY3Rpb24tbG9va2Jvb2snKS5sZW5ndGggPiAwKSB7XG4gICAgdmFyIGxvb2tib29rID0gbmV3IExvb2tib29rKHtcbiAgICAgIGdhbGxlcnlfd3JhcHBlcjogJy5jb2xsZWN0aW9uLWxvb2tib29rIC5wcm9kdWN0cy5ncm91cCcsXG4gICAgICBpdGVtX3dyYXBwZXI6ICcuZ3JvdXAtaXRlbS13cmFwJyxcbiAgICAgIGNvbnRyb2xzX3dyYXBwZXI6ICcubG9va2Jvb2stY29udHJvbHMnXG4gICAgfSk7XG5cbiAgICBsb29rYm9vay5vbl9sb2FkZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgaXRlbV9oZWlnaHQgPSAkKCcuZ3JvdXAtaXRlbS1pbWFnZScpLmhlaWdodCgpO1xuICAgICAgJCgnLmxvb2tib29rLWNvbnRyb2xzJykuaGVpZ2h0KGl0ZW1faGVpZ2h0KTtcblxuICAgICAgQnNpZnkuVGh1bWJuYWlscy5vcmRlcmx5KCk7XG4gICAgfTtcbiAgfVxuXG4gIC8vIGluaXQgc29jaWFsIGZlZWRzXG4gIEJzaWZ5LlNvY2lhbEZlZWRzLmluaXQoKTtcbiAgXG4gIC8vIGN1c3RvbSBwaGQgY29kZVxuICBuZXcgUGhkKCk7XG59O1xuXG4vLyBpbml0aWF0ZSB0aGUgYXBwIGFuZCBleHBvc2UgaXQgdG8gdGhlIGJyb3dzZXJcbnZhciBhcHAgPSBuZXcgQXBwKCk7XG5tb2R1bGUuZXhwb3J0cyA9IGFwcDtcbiIsIihmdW5jdGlvbigpIHtcbiAgdmFyICRkb2N1bWVudCwgQ2FydCwgQ2FydEpTLCBJdGVtLCBwcm9jZXNzaW5nLCBxdWV1ZSxcbiAgICBfX2JpbmQgPSBmdW5jdGlvbihmbiwgbWUpeyByZXR1cm4gZnVuY3Rpb24oKXsgcmV0dXJuIGZuLmFwcGx5KG1lLCBhcmd1bWVudHMpOyB9OyB9O1xuXG4gIENhcnQgPSAoZnVuY3Rpb24oKSB7XG4gICAgZnVuY3Rpb24gQ2FydCgpIHtcbiAgICAgIHRoaXMudXBkYXRlID0gX19iaW5kKHRoaXMudXBkYXRlLCB0aGlzKTtcbiAgICB9XG5cbiAgICBDYXJ0LnByb3RvdHlwZS51cGRhdGUgPSBmdW5jdGlvbihjYXJ0KSB7XG4gICAgICB2YXIgaXRlbSwga2V5LCB2YWx1ZTtcbiAgICAgIGZvciAoa2V5IGluIGNhcnQpIHtcbiAgICAgICAgdmFsdWUgPSBjYXJ0W2tleV07XG4gICAgICAgIGlmIChrZXkgIT09ICdpdGVtcycpIHtcbiAgICAgICAgICB0aGlzW2tleV0gPSB2YWx1ZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIHRoaXMuaXRlbXMgPSAoZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBfaSwgX2xlbiwgX3JlZiwgX3Jlc3VsdHM7XG4gICAgICAgIF9yZWYgPSBjYXJ0Lml0ZW1zO1xuICAgICAgICBfcmVzdWx0cyA9IFtdO1xuICAgICAgICBmb3IgKF9pID0gMCwgX2xlbiA9IF9yZWYubGVuZ3RoOyBfaSA8IF9sZW47IF9pKyspIHtcbiAgICAgICAgICBpdGVtID0gX3JlZltfaV07XG4gICAgICAgICAgX3Jlc3VsdHMucHVzaChuZXcgSXRlbShpdGVtKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIF9yZXN1bHRzO1xuICAgICAgfSkoKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIENhcnQ7XG5cbiAgfSkoKTtcblxuICBJdGVtID0gKGZ1bmN0aW9uKCkge1xuICAgIGZ1bmN0aW9uIEl0ZW0oaXRlbSkge1xuICAgICAgdGhpcy5wcm9wZXJ0eUFycmF5ID0gX19iaW5kKHRoaXMucHJvcGVydHlBcnJheSwgdGhpcyk7XG4gICAgICB0aGlzLnVwZGF0ZSA9IF9fYmluZCh0aGlzLnVwZGF0ZSwgdGhpcyk7XG4gICAgICB0aGlzLnVwZGF0ZShpdGVtKTtcbiAgICB9XG5cbiAgICBJdGVtLnByb3RvdHlwZS51cGRhdGUgPSBmdW5jdGlvbihpdGVtKSB7XG4gICAgICB2YXIga2V5LCB2YWx1ZTtcbiAgICAgIGZvciAoa2V5IGluIGl0ZW0pIHtcbiAgICAgICAgdmFsdWUgPSBpdGVtW2tleV07XG4gICAgICAgIGlmIChrZXkgIT09ICdwcm9wZXJ0aWVzJykge1xuICAgICAgICAgIHRoaXNba2V5XSA9IHZhbHVlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gdGhpcy5wcm9wZXJ0aWVzID0gQ2FydEpTLlV0aWxzLmV4dGVuZCh7fSwgaXRlbS5wcm9wZXJ0aWVzKTtcbiAgICB9O1xuXG4gICAgSXRlbS5wcm90b3R5cGUucHJvcGVydHlBcnJheSA9IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIG5hbWUsIHZhbHVlLCBfcmVmLCBfcmVzdWx0cztcbiAgICAgIF9yZWYgPSB0aGlzLnByb3BlcnRpZXM7XG4gICAgICBfcmVzdWx0cyA9IFtdO1xuICAgICAgZm9yIChuYW1lIGluIF9yZWYpIHtcbiAgICAgICAgdmFsdWUgPSBfcmVmW25hbWVdO1xuICAgICAgICBfcmVzdWx0cy5wdXNoKHtcbiAgICAgICAgICBuYW1lOiBuYW1lLFxuICAgICAgICAgIHZhbHVlOiB2YWx1ZVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBfcmVzdWx0cztcbiAgICB9O1xuXG4gICAgcmV0dXJuIEl0ZW07XG5cbiAgfSkoKTtcblxuICBDYXJ0SlMgPSB7XG4gICAgc2V0dGluZ3M6IHtcbiAgICAgIGRhdGFBUEk6IHRydWUsXG4gICAgICByZXF1ZXN0Qm9keUNsYXNzOiBudWxsLFxuICAgICAgcml2ZXRzTW9kZWxzOiB7fSxcbiAgICAgIG1vbmV5Rm9ybWF0OiBudWxsLFxuICAgICAgbW9uZXlXaXRoQ3VycmVuY3lGb3JtYXQ6IG51bGxcbiAgICB9LFxuICAgIGNhcnQ6IG5ldyBDYXJ0KClcbiAgfTtcblxuICBDYXJ0SlMuaW5pdCA9IGZ1bmN0aW9uKGNhcnQsIHNldHRpbmdzKSB7XG4gICAgaWYgKHNldHRpbmdzID09IG51bGwpIHtcbiAgICAgIHNldHRpbmdzID0ge307XG4gICAgfVxuICAgIENhcnRKUy5jb25maWd1cmUoc2V0dGluZ3MpO1xuICAgIENhcnRKUy5jYXJ0LnVwZGF0ZShjYXJ0KTtcbiAgICBpZiAoQ2FydEpTLnNldHRpbmdzLmRhdGFBUEkpIHtcbiAgICAgIENhcnRKUy5EYXRhLmluaXQoKTtcbiAgICB9XG4gICAgaWYgKENhcnRKUy5zZXR0aW5ncy5yZXF1ZXN0Qm9keUNsYXNzKSB7XG4gICAgICAkKGRvY3VtZW50KS5vbignY2FydC5yZXF1ZXN0U3RhcnRlZCcsIGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gJCgnYm9keScpLmFkZENsYXNzKENhcnRKUy5zZXR0aW5ncy5yZXF1ZXN0Qm9keUNsYXNzKTtcbiAgICAgIH0pO1xuICAgICAgJChkb2N1bWVudCkub24oJ2NhcnQucmVxdWVzdENvbXBsZXRlJywgZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiAkKCdib2R5JykucmVtb3ZlQ2xhc3MoQ2FydEpTLnNldHRpbmdzLnJlcXVlc3RCb2R5Q2xhc3MpO1xuICAgICAgfSk7XG4gICAgfVxuICAgIHJldHVybiBDYXJ0SlMuUml2ZXRzLmluaXQoKTtcbiAgfTtcblxuICBDYXJ0SlMuY29uZmlndXJlID0gZnVuY3Rpb24oc2V0dGluZ3MpIHtcbiAgICBpZiAoc2V0dGluZ3MgPT0gbnVsbCkge1xuICAgICAgc2V0dGluZ3MgPSB7fTtcbiAgICB9XG4gICAgcmV0dXJuIENhcnRKUy5VdGlscy5leHRlbmQoQ2FydEpTLnNldHRpbmdzLCBzZXR0aW5ncyk7XG4gIH07XG5cbiAgQ2FydEpTLlV0aWxzID0ge1xuICAgIHdyYXBLZXlzOiBmdW5jdGlvbihvYmosIHR5cGUsIG92ZXJyaWRlKSB7XG4gICAgICB2YXIga2V5LCB2YWx1ZSwgd3JhcHBlZDtcbiAgICAgIGlmICh0eXBlID09IG51bGwpIHtcbiAgICAgICAgdHlwZSA9ICdwcm9wZXJ0aWVzJztcbiAgICAgIH1cbiAgICAgIHdyYXBwZWQgPSB7fTtcbiAgICAgIGZvciAoa2V5IGluIG9iaikge1xuICAgICAgICB2YWx1ZSA9IG9ialtrZXldO1xuICAgICAgICB3cmFwcGVkW1wiXCIgKyB0eXBlICsgXCJbXCIgKyBrZXkgKyBcIl1cIl0gPSBvdmVycmlkZSAhPSBudWxsID8gb3ZlcnJpZGUgOiB2YWx1ZTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB3cmFwcGVkO1xuICAgIH0sXG4gICAgdW53cmFwS2V5czogZnVuY3Rpb24ob2JqLCB0eXBlLCBvdmVycmlkZSkge1xuICAgICAgdmFyIGtleSwgdW53cmFwcGVkLCB1bndyYXBwZWRLZXksIHZhbHVlO1xuICAgICAgaWYgKHR5cGUgPT0gbnVsbCkge1xuICAgICAgICB0eXBlID0gJ3Byb3BlcnRpZXMnO1xuICAgICAgfVxuICAgICAgdW53cmFwcGVkID0ge307XG4gICAgICBmb3IgKGtleSBpbiBvYmopIHtcbiAgICAgICAgdmFsdWUgPSBvYmpba2V5XTtcbiAgICAgICAgdW53cmFwcGVkS2V5ID0ga2V5LnJlcGxhY2UoXCJcIiArIHR5cGUgKyBcIltcIiwgXCJcIikucmVwbGFjZShcIl1cIiwgXCJcIik7XG4gICAgICAgIHVud3JhcHBlZFt1bndyYXBwZWRLZXldID0gb3ZlcnJpZGUgIT0gbnVsbCA/IG92ZXJyaWRlIDogdmFsdWU7XG4gICAgICB9XG4gICAgICByZXR1cm4gdW53cmFwcGVkO1xuICAgIH0sXG4gICAgZXh0ZW5kOiBmdW5jdGlvbihvYmplY3QsIHByb3BlcnRpZXMpIHtcbiAgICAgIHZhciBrZXksIHZhbDtcbiAgICAgIGZvciAoa2V5IGluIHByb3BlcnRpZXMpIHtcbiAgICAgICAgdmFsID0gcHJvcGVydGllc1trZXldO1xuICAgICAgICBvYmplY3Rba2V5XSA9IHZhbDtcbiAgICAgIH1cbiAgICAgIHJldHVybiBvYmplY3Q7XG4gICAgfSxcbiAgICBjbG9uZTogZnVuY3Rpb24ob2JqZWN0KSB7XG4gICAgICB2YXIga2V5LCBuZXdJbnN0YW5jZTtcbiAgICAgIGlmICgob2JqZWN0ID09IG51bGwpIHx8IHR5cGVvZiBvYmplY3QgIT09ICdvYmplY3QnKSB7XG4gICAgICAgIHJldHVybiBvYmplY3Q7XG4gICAgICB9XG4gICAgICBuZXdJbnN0YW5jZSA9IG5ldyBvYmplY3QuY29uc3RydWN0b3IoKTtcbiAgICAgIGZvciAoa2V5IGluIG9iamVjdCkge1xuICAgICAgICBuZXdJbnN0YW5jZVtrZXldID0gY2xvbmUob2JqZWN0W2tleV0pO1xuICAgICAgfVxuICAgICAgcmV0dXJuIG5ld0luc3RhbmNlO1xuICAgIH0sXG4gICAgaXNBcnJheTogQXJyYXkuaXNBcnJheSB8fCBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgcmV0dXJuIHt9LnRvU3RyaW5nLmNhbGwodmFsdWUpID09PSAnW29iamVjdCBBcnJheV0nO1xuICAgIH0sXG4gICAgZW5zdXJlQXJyYXk6IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICBpZiAoQ2FydEpTLlV0aWxzLmlzQXJyYXkodmFsdWUpKSB7XG4gICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICAgIH1cbiAgICAgIGlmICh2YWx1ZSAhPSBudWxsKSB7XG4gICAgICAgIHJldHVybiBbdmFsdWVdO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIFtdO1xuICAgICAgfVxuICAgIH0sXG4gICAgZm9ybWF0TW9uZXk6IGZ1bmN0aW9uKHZhbHVlLCBmb3JtYXQpIHtcbiAgICAgIHZhciBfcmVmO1xuICAgICAgaWYgKCgoX3JlZiA9IHdpbmRvdy5TaG9waWZ5KSAhPSBudWxsID8gX3JlZi5mb3JtYXRNb25leSA6IHZvaWQgMCkgIT0gbnVsbCkge1xuICAgICAgICByZXR1cm4gU2hvcGlmeS5mb3JtYXRNb25leSh2YWx1ZSwgZm9ybWF0KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICAgIH1cbiAgICB9LFxuICAgIGdldFNpemVkSW1hZ2VVcmw6IGZ1bmN0aW9uKHNyYywgc2l6ZSkge1xuICAgICAgdmFyIF9yZWYsIF9yZWYxO1xuICAgICAgaWYgKCgoX3JlZiA9IHdpbmRvdy5TaG9waWZ5KSAhPSBudWxsID8gKF9yZWYxID0gX3JlZi5JbWFnZSkgIT0gbnVsbCA/IF9yZWYxLmdldFNpemVkSW1hZ2VVcmwgOiB2b2lkIDAgOiB2b2lkIDApICE9IG51bGwpIHtcbiAgICAgICAgcmV0dXJuIFNob3BpZnkuSW1hZ2UuZ2V0U2l6ZWRJbWFnZVVybChzcmMsIHNpemUpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHNyYztcbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgcXVldWUgPSBbXTtcblxuICBwcm9jZXNzaW5nID0gZmFsc2U7XG5cbiAgQ2FydEpTLlF1ZXVlID0ge1xuICAgIGFkZDogZnVuY3Rpb24odXJsLCBkYXRhLCBvcHRpb25zKSB7XG4gICAgICB2YXIgcmVxdWVzdDtcbiAgICAgIGlmIChvcHRpb25zID09IG51bGwpIHtcbiAgICAgICAgb3B0aW9ucyA9IHt9O1xuICAgICAgfVxuICAgICAgcmVxdWVzdCA9IHtcbiAgICAgICAgdXJsOiB1cmwsXG4gICAgICAgIGRhdGE6IGRhdGEsXG4gICAgICAgIHR5cGU6IG9wdGlvbnMudHlwZSB8fCAnUE9TVCcsXG4gICAgICAgIGRhdGFUeXBlOiBvcHRpb25zLmRhdGFUeXBlIHx8ICdqc29uJyxcbiAgICAgICAgc3VjY2VzczogQ2FydEpTLlV0aWxzLmVuc3VyZUFycmF5KG9wdGlvbnMuc3VjY2VzcyksXG4gICAgICAgIGVycm9yOiBDYXJ0SlMuVXRpbHMuZW5zdXJlQXJyYXkob3B0aW9ucy5lcnJvciksXG4gICAgICAgIGNvbXBsZXRlOiBDYXJ0SlMuVXRpbHMuZW5zdXJlQXJyYXkob3B0aW9ucy5jb21wbGV0ZSlcbiAgICAgIH07XG4gICAgICBpZiAob3B0aW9ucy51cGRhdGVDYXJ0KSB7XG4gICAgICAgIHJlcXVlc3Quc3VjY2Vzcy5wdXNoKENhcnRKUy5jYXJ0LnVwZGF0ZSk7XG4gICAgICB9XG4gICAgICBxdWV1ZS5wdXNoKHJlcXVlc3QpO1xuICAgICAgaWYgKHByb2Nlc3NpbmcpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgalF1ZXJ5KGRvY3VtZW50KS50cmlnZ2VyKCdjYXJ0LnJlcXVlc3RTdGFydGVkJywgW0NhcnRKUy5jYXJ0XSk7XG4gICAgICByZXR1cm4gQ2FydEpTLlF1ZXVlLnByb2Nlc3MoKTtcbiAgICB9LFxuICAgIHByb2Nlc3M6IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHBhcmFtcztcbiAgICAgIGlmICghcXVldWUubGVuZ3RoKSB7XG4gICAgICAgIHByb2Nlc3NpbmcgPSBmYWxzZTtcbiAgICAgICAgalF1ZXJ5KGRvY3VtZW50KS50cmlnZ2VyKCdjYXJ0LnJlcXVlc3RDb21wbGV0ZScsIFtDYXJ0SlMuY2FydF0pO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBwcm9jZXNzaW5nID0gdHJ1ZTtcbiAgICAgIHBhcmFtcyA9IHF1ZXVlLnNoaWZ0KCk7XG4gICAgICBwYXJhbXMuY29tcGxldGUgPSBDYXJ0SlMuUXVldWUucHJvY2VzcztcbiAgICAgIHJldHVybiBqUXVlcnkuYWpheChwYXJhbXMpO1xuICAgIH1cbiAgfTtcblxuICBDYXJ0SlMuQ29yZSA9IHtcbiAgICBnZXRDYXJ0OiBmdW5jdGlvbihvcHRpb25zKSB7XG4gICAgICBpZiAob3B0aW9ucyA9PSBudWxsKSB7XG4gICAgICAgIG9wdGlvbnMgPSB7fTtcbiAgICAgIH1cbiAgICAgIG9wdGlvbnMudHlwZSA9ICdHRVQnO1xuICAgICAgb3B0aW9ucy51cGRhdGVDYXJ0ID0gdHJ1ZTtcbiAgICAgIHJldHVybiBDYXJ0SlMuUXVldWUuYWRkKCcvY2FydC5qcycsIHt9LCBvcHRpb25zKTtcbiAgICB9LFxuICAgIGFkZEl0ZW06IGZ1bmN0aW9uKGlkLCBxdWFudGl0eSwgcHJvcGVydGllcywgb3B0aW9ucykge1xuICAgICAgdmFyIGRhdGE7XG4gICAgICBpZiAocXVhbnRpdHkgPT0gbnVsbCkge1xuICAgICAgICBxdWFudGl0eSA9IDE7XG4gICAgICB9XG4gICAgICBpZiAocHJvcGVydGllcyA9PSBudWxsKSB7XG4gICAgICAgIHByb3BlcnRpZXMgPSB7fTtcbiAgICAgIH1cbiAgICAgIGlmIChvcHRpb25zID09IG51bGwpIHtcbiAgICAgICAgb3B0aW9ucyA9IHt9O1xuICAgICAgfVxuICAgICAgZGF0YSA9IENhcnRKUy5VdGlscy53cmFwS2V5cyhwcm9wZXJ0aWVzKTtcbiAgICAgIGRhdGEuaWQgPSBpZDtcbiAgICAgIGRhdGEucXVhbnRpdHkgPSBxdWFudGl0eTtcbiAgICAgIENhcnRKUy5RdWV1ZS5hZGQoJy9jYXJ0L2FkZC5qcycsIGRhdGEsIG9wdGlvbnMpO1xuICAgICAgcmV0dXJuIENhcnRKUy5Db3JlLmdldENhcnQoKTtcbiAgICB9LFxuICAgIHVwZGF0ZUl0ZW06IGZ1bmN0aW9uKGxpbmUsIHF1YW50aXR5LCBwcm9wZXJ0aWVzLCBvcHRpb25zKSB7XG4gICAgICB2YXIgZGF0YTtcbiAgICAgIGlmIChwcm9wZXJ0aWVzID09IG51bGwpIHtcbiAgICAgICAgcHJvcGVydGllcyA9IHt9O1xuICAgICAgfVxuICAgICAgaWYgKG9wdGlvbnMgPT0gbnVsbCkge1xuICAgICAgICBvcHRpb25zID0ge307XG4gICAgICB9XG4gICAgICBkYXRhID0gQ2FydEpTLlV0aWxzLndyYXBLZXlzKHByb3BlcnRpZXMpO1xuICAgICAgZGF0YS5saW5lID0gbGluZTtcbiAgICAgIGlmIChxdWFudGl0eSAhPSBudWxsKSB7XG4gICAgICAgIGRhdGEucXVhbnRpdHkgPSBxdWFudGl0eTtcbiAgICAgIH1cbiAgICAgIG9wdGlvbnMudXBkYXRlQ2FydCA9IHRydWU7XG4gICAgICByZXR1cm4gQ2FydEpTLlF1ZXVlLmFkZCgnL2NhcnQvY2hhbmdlLmpzJywgZGF0YSwgb3B0aW9ucyk7XG4gICAgfSxcbiAgICByZW1vdmVJdGVtOiBmdW5jdGlvbihsaW5lLCBvcHRpb25zKSB7XG4gICAgICBpZiAob3B0aW9ucyA9PSBudWxsKSB7XG4gICAgICAgIG9wdGlvbnMgPSB7fTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBDYXJ0SlMuQ29yZS51cGRhdGVJdGVtKGxpbmUsIDAsIHt9LCBvcHRpb25zKTtcbiAgICB9LFxuICAgIHVwZGF0ZUl0ZW1CeUlkOiBmdW5jdGlvbihpZCwgcXVhbnRpdHksIHByb3BlcnRpZXMsIG9wdGlvbnMpIHtcbiAgICAgIHZhciBkYXRhO1xuICAgICAgaWYgKHByb3BlcnRpZXMgPT0gbnVsbCkge1xuICAgICAgICBwcm9wZXJ0aWVzID0ge307XG4gICAgICB9XG4gICAgICBpZiAob3B0aW9ucyA9PSBudWxsKSB7XG4gICAgICAgIG9wdGlvbnMgPSB7fTtcbiAgICAgIH1cbiAgICAgIGRhdGEgPSBDYXJ0SlMuVXRpbHMud3JhcEtleXMocHJvcGVydGllcyk7XG4gICAgICBkYXRhLmlkID0gaWQ7XG4gICAgICBpZiAocXVhbnRpdHkgIT0gbnVsbCkge1xuICAgICAgICBkYXRhLnF1YW50aXR5ID0gcXVhbnRpdHk7XG4gICAgICB9XG4gICAgICBvcHRpb25zLnVwZGF0ZUNhcnQgPSB0cnVlO1xuICAgICAgcmV0dXJuIENhcnRKUy5RdWV1ZS5hZGQoJy9jYXJ0L2NoYW5nZS5qcycsIGRhdGEsIG9wdGlvbnMpO1xuICAgIH0sXG4gICAgdXBkYXRlSXRlbVF1YW50aXRpZXNCeUlkOiBmdW5jdGlvbih1cGRhdGVzLCBvcHRpb25zKSB7XG4gICAgICBpZiAodXBkYXRlcyA9PSBudWxsKSB7XG4gICAgICAgIHVwZGF0ZXMgPSB7fTtcbiAgICAgIH1cbiAgICAgIGlmIChvcHRpb25zID09IG51bGwpIHtcbiAgICAgICAgb3B0aW9ucyA9IHt9O1xuICAgICAgfVxuICAgICAgb3B0aW9ucy51cGRhdGVDYXJ0ID0gdHJ1ZTtcbiAgICAgIHJldHVybiBDYXJ0SlMuUXVldWUuYWRkKCcvY2FydC91cGRhdGUuanMnLCB7XG4gICAgICAgIHVwZGF0ZXM6IHVwZGF0ZXNcbiAgICAgIH0sIG9wdGlvbnMpO1xuICAgIH0sXG4gICAgcmVtb3ZlSXRlbUJ5SWQ6IGZ1bmN0aW9uKGlkLCBvcHRpb25zKSB7XG4gICAgICB2YXIgZGF0YTtcbiAgICAgIGlmIChvcHRpb25zID09IG51bGwpIHtcbiAgICAgICAgb3B0aW9ucyA9IHt9O1xuICAgICAgfVxuICAgICAgZGF0YSA9IHtcbiAgICAgICAgaWQ6IGlkLFxuICAgICAgICBxdWFudGl0eTogMFxuICAgICAgfTtcbiAgICAgIG9wdGlvbnMudXBkYXRlQ2FydCA9IHRydWU7XG4gICAgICByZXR1cm4gQ2FydEpTLlF1ZXVlLmFkZCgnL2NhcnQvY2hhbmdlLmpzJywgZGF0YSwgb3B0aW9ucyk7XG4gICAgfSxcbiAgICBjbGVhcjogZnVuY3Rpb24ob3B0aW9ucykge1xuICAgICAgaWYgKG9wdGlvbnMgPT0gbnVsbCkge1xuICAgICAgICBvcHRpb25zID0ge307XG4gICAgICB9XG4gICAgICBvcHRpb25zLnVwZGF0ZUNhcnQgPSB0cnVlO1xuICAgICAgcmV0dXJuIENhcnRKUy5RdWV1ZS5hZGQoJy9jYXJ0L2NsZWFyLmpzJywge30sIG9wdGlvbnMpO1xuICAgIH0sXG4gICAgZ2V0QXR0cmlidXRlOiBmdW5jdGlvbihhdHRyaWJ1dGVOYW1lLCBkZWZhdWx0VmFsdWUpIHtcbiAgICAgIGlmIChhdHRyaWJ1dGVOYW1lIGluIENhcnRKUy5jYXJ0LmF0dHJpYnV0ZXMpIHtcbiAgICAgICAgcmV0dXJuIENhcnRKUy5jYXJ0LmF0dHJpYnV0ZXNbYXR0cmlidXRlTmFtZV07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gZGVmYXVsdFZhbHVlO1xuICAgICAgfVxuICAgIH0sXG4gICAgc2V0QXR0cmlidXRlOiBmdW5jdGlvbihhdHRyaWJ1dGVOYW1lLCB2YWx1ZSwgb3B0aW9ucykge1xuICAgICAgdmFyIGF0dHJpYnV0ZXM7XG4gICAgICBpZiAob3B0aW9ucyA9PSBudWxsKSB7XG4gICAgICAgIG9wdGlvbnMgPSB7fTtcbiAgICAgIH1cbiAgICAgIGF0dHJpYnV0ZXMgPSB7fTtcbiAgICAgIGF0dHJpYnV0ZXNbYXR0cmlidXRlTmFtZV0gPSB2YWx1ZTtcbiAgICAgIHJldHVybiBDYXJ0SlMuQ29yZS5zZXRBdHRyaWJ1dGVzKGF0dHJpYnV0ZXMsIG9wdGlvbnMpO1xuICAgIH0sXG4gICAgZ2V0QXR0cmlidXRlczogZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gQ2FydEpTLmNhcnQuYXR0cmlidXRlcztcbiAgICB9LFxuICAgIHNldEF0dHJpYnV0ZXM6IGZ1bmN0aW9uKGF0dHJpYnV0ZXMsIG9wdGlvbnMpIHtcbiAgICAgIGlmIChhdHRyaWJ1dGVzID09IG51bGwpIHtcbiAgICAgICAgYXR0cmlidXRlcyA9IHt9O1xuICAgICAgfVxuICAgICAgaWYgKG9wdGlvbnMgPT0gbnVsbCkge1xuICAgICAgICBvcHRpb25zID0ge307XG4gICAgICB9XG4gICAgICBvcHRpb25zLnVwZGF0ZUNhcnQgPSB0cnVlO1xuICAgICAgcmV0dXJuIENhcnRKUy5RdWV1ZS5hZGQoJy9jYXJ0L3VwZGF0ZS5qcycsIENhcnRKUy5VdGlscy53cmFwS2V5cyhhdHRyaWJ1dGVzLCAnYXR0cmlidXRlcycpLCBvcHRpb25zKTtcbiAgICB9LFxuICAgIGNsZWFyQXR0cmlidXRlczogZnVuY3Rpb24ob3B0aW9ucykge1xuICAgICAgaWYgKG9wdGlvbnMgPT0gbnVsbCkge1xuICAgICAgICBvcHRpb25zID0ge307XG4gICAgICB9XG4gICAgICBvcHRpb25zLnVwZGF0ZUNhcnQgPSB0cnVlO1xuICAgICAgcmV0dXJuIENhcnRKUy5RdWV1ZS5hZGQoJy9jYXJ0L3VwZGF0ZS5qcycsIENhcnRKUy5VdGlscy53cmFwS2V5cyhDYXJ0SlMuQ29yZS5nZXRBdHRyaWJ1dGVzKCksICdhdHRyaWJ1dGVzJywgJycpLCBvcHRpb25zKTtcbiAgICB9LFxuICAgIGdldE5vdGU6IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIENhcnRKUy5jYXJ0Lm5vdGU7XG4gICAgfSxcbiAgICBzZXROb3RlOiBmdW5jdGlvbihub3RlLCBvcHRpb25zKSB7XG4gICAgICBpZiAob3B0aW9ucyA9PSBudWxsKSB7XG4gICAgICAgIG9wdGlvbnMgPSB7fTtcbiAgICAgIH1cbiAgICAgIG9wdGlvbnMudXBkYXRlQ2FydCA9IHRydWU7XG4gICAgICByZXR1cm4gQ2FydEpTLlF1ZXVlLmFkZCgnL2NhcnQvdXBkYXRlLmpzJywge1xuICAgICAgICBub3RlOiBub3RlXG4gICAgICB9LCBvcHRpb25zKTtcbiAgICB9XG4gIH07XG5cbiAgJGRvY3VtZW50ID0galF1ZXJ5KGRvY3VtZW50KTtcblxuICBDYXJ0SlMuRGF0YSA9IHtcbiAgICBpbml0OiBmdW5jdGlvbigpIHtcbiAgICAgIENhcnRKUy5EYXRhLnNldEV2ZW50TGlzdGVuZXJzKCdvbicpO1xuICAgICAgcmV0dXJuIENhcnRKUy5EYXRhLnJlbmRlcihudWxsLCBDYXJ0SlMuY2FydCk7XG4gICAgfSxcbiAgICBkZXN0cm95OiBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBDYXJ0SlMuRGF0YS5zZXRFdmVudExpc3RlbmVycygnb2ZmJyk7XG4gICAgfSxcbiAgICBzZXRFdmVudExpc3RlbmVyczogZnVuY3Rpb24obWV0aG9kKSB7XG4gICAgICAkZG9jdW1lbnRbbWV0aG9kXSgnY2xpY2snLCAnW2RhdGEtY2FydC1hZGRdJywgQ2FydEpTLkRhdGEuYWRkKTtcbiAgICAgICRkb2N1bWVudFttZXRob2RdKCdjbGljaycsICdbZGF0YS1jYXJ0LXJlbW92ZV0nLCBDYXJ0SlMuRGF0YS5yZW1vdmUpO1xuICAgICAgJGRvY3VtZW50W21ldGhvZF0oJ2NsaWNrJywgJ1tkYXRhLWNhcnQtcmVtb3ZlLWlkXScsIENhcnRKUy5EYXRhLnJlbW92ZUJ5SWQpO1xuICAgICAgJGRvY3VtZW50W21ldGhvZF0oJ2NsaWNrJywgJ1tkYXRhLWNhcnQtdXBkYXRlXScsIENhcnRKUy5EYXRhLnVwZGF0ZSk7XG4gICAgICAkZG9jdW1lbnRbbWV0aG9kXSgnY2xpY2snLCAnW2RhdGEtY2FydC11cGRhdGUtaWRdJywgQ2FydEpTLkRhdGEudXBkYXRlQnlJZCk7XG4gICAgICAkZG9jdW1lbnRbbWV0aG9kXSgnY2xpY2snLCAnW2RhdGEtY2FydC1jbGVhcl0nLCBDYXJ0SlMuRGF0YS5jbGVhcik7XG4gICAgICAkZG9jdW1lbnRbbWV0aG9kXSgnY2hhbmdlJywgJ1tkYXRhLWNhcnQtdG9nZ2xlXScsIENhcnRKUy5EYXRhLnRvZ2dsZSk7XG4gICAgICAkZG9jdW1lbnRbbWV0aG9kXSgnY2hhbmdlJywgJ1tkYXRhLWNhcnQtdG9nZ2xlLWF0dHJpYnV0ZV0nLCBDYXJ0SlMuRGF0YS50b2dnbGVBdHRyaWJ1dGUpO1xuICAgICAgJGRvY3VtZW50W21ldGhvZF0oJ3N1Ym1pdCcsICdbZGF0YS1jYXJ0LXN1Ym1pdF0nLCBDYXJ0SlMuRGF0YS5zdWJtaXQpO1xuICAgICAgcmV0dXJuICRkb2N1bWVudFttZXRob2RdKCdjYXJ0LnJlcXVlc3RDb21wbGV0ZScsIENhcnRKUy5EYXRhLnJlbmRlcik7XG4gICAgfSxcbiAgICBhZGQ6IGZ1bmN0aW9uKGUpIHtcbiAgICAgIHZhciAkdGhpcztcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICR0aGlzID0galF1ZXJ5KHRoaXMpO1xuICAgICAgcmV0dXJuIENhcnRKUy5Db3JlLmFkZEl0ZW0oJHRoaXMuYXR0cignZGF0YS1jYXJ0LWFkZCcpLCAkdGhpcy5hdHRyKCdkYXRhLWNhcnQtcXVhbnRpdHknKSk7XG4gICAgfSxcbiAgICByZW1vdmU6IGZ1bmN0aW9uKGUpIHtcbiAgICAgIHZhciAkdGhpcztcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICR0aGlzID0galF1ZXJ5KHRoaXMpO1xuICAgICAgcmV0dXJuIENhcnRKUy5Db3JlLnJlbW92ZUl0ZW0oJHRoaXMuYXR0cignZGF0YS1jYXJ0LXJlbW92ZScpKTtcbiAgICB9LFxuICAgIHJlbW92ZUJ5SWQ6IGZ1bmN0aW9uKGUpIHtcbiAgICAgIHZhciAkdGhpcztcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICR0aGlzID0galF1ZXJ5KHRoaXMpO1xuICAgICAgcmV0dXJuIENhcnRKUy5Db3JlLnJlbW92ZUl0ZW1CeUlkKCR0aGlzLmF0dHIoJ2RhdGEtY2FydC1yZW1vdmUtaWQnKSk7XG4gICAgfSxcbiAgICB1cGRhdGU6IGZ1bmN0aW9uKGUpIHtcbiAgICAgIHZhciAkdGhpcztcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICR0aGlzID0galF1ZXJ5KHRoaXMpO1xuICAgICAgcmV0dXJuIENhcnRKUy5Db3JlLnVwZGF0ZUl0ZW0oJHRoaXMuYXR0cignZGF0YS1jYXJ0LXVwZGF0ZScpLCAkdGhpcy5hdHRyKCdkYXRhLWNhcnQtcXVhbnRpdHknKSk7XG4gICAgfSxcbiAgICB1cGRhdGVCeUlkOiBmdW5jdGlvbihlKSB7XG4gICAgICB2YXIgJHRoaXM7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAkdGhpcyA9IGpRdWVyeSh0aGlzKTtcbiAgICAgIHJldHVybiBDYXJ0SlMuQ29yZS51cGRhdGVJdGVtQnlJZCgkdGhpcy5hdHRyKCdkYXRhLWNhcnQtdXBkYXRlLWlkJyksICR0aGlzLmF0dHIoJ2RhdGEtY2FydC1xdWFudGl0eScpKTtcbiAgICB9LFxuICAgIGNsZWFyOiBmdW5jdGlvbihlKSB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICByZXR1cm4gQ2FydEpTLkNvcmUuY2xlYXIoKTtcbiAgICB9LFxuICAgIHRvZ2dsZTogZnVuY3Rpb24oZSkge1xuICAgICAgdmFyICRpbnB1dCwgaWQ7XG4gICAgICAkaW5wdXQgPSBqUXVlcnkodGhpcyk7XG4gICAgICBpZCA9ICRpbnB1dC5hdHRyKCdkYXRhLWNhcnQtdG9nZ2xlJyk7XG4gICAgICBpZiAoJGlucHV0LmlzKCc6Y2hlY2tlZCcpKSB7XG4gICAgICAgIHJldHVybiBDYXJ0SlMuQ29yZS5hZGRJdGVtKGlkKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBDYXJ0SlMuQ29yZS5yZW1vdmVJdGVtQnlJZChpZCk7XG4gICAgICB9XG4gICAgfSxcbiAgICB0b2dnbGVBdHRyaWJ1dGU6IGZ1bmN0aW9uKGUpIHtcbiAgICAgIHZhciAkaW5wdXQsIGF0dHJpYnV0ZTtcbiAgICAgICRpbnB1dCA9IGpRdWVyeSh0aGlzKTtcbiAgICAgIGF0dHJpYnV0ZSA9ICRpbnB1dC5hdHRyKCdkYXRhLWNhcnQtdG9nZ2xlLWF0dHJpYnV0ZScpO1xuICAgICAgcmV0dXJuIENhcnRKUy5Db3JlLnNldEF0dHJpYnV0ZShhdHRyaWJ1dGUsICRpbnB1dC5pcygnOmNoZWNrZWQnKSA/ICdZZXMnIDogJycpO1xuICAgIH0sXG4gICAgc3VibWl0OiBmdW5jdGlvbihlKSB7XG4gICAgICB2YXIgZGF0YUFycmF5LCBpZCwgcHJvcGVydGllcywgcXVhbnRpdHk7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICBkYXRhQXJyYXkgPSBqUXVlcnkodGhpcykuc2VyaWFsaXplQXJyYXkoKTtcbiAgICAgIGlkID0gdm9pZCAwO1xuICAgICAgcXVhbnRpdHkgPSB2b2lkIDA7XG4gICAgICBwcm9wZXJ0aWVzID0ge307XG4gICAgICBqUXVlcnkuZWFjaChkYXRhQXJyYXksIGZ1bmN0aW9uKGksIGl0ZW0pIHtcbiAgICAgICAgaWYgKGl0ZW0ubmFtZSA9PT0gJ2lkJykge1xuICAgICAgICAgIHJldHVybiBpZCA9IGl0ZW0udmFsdWU7XG4gICAgICAgIH0gZWxzZSBpZiAoaXRlbS5uYW1lID09PSAncXVhbnRpdHknKSB7XG4gICAgICAgICAgcmV0dXJuIHF1YW50aXR5ID0gaXRlbS52YWx1ZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXR1cm4gcHJvcGVydGllc1tpdGVtLm5hbWVdID0gaXRlbS52YWx1ZTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICByZXR1cm4gQ2FydEpTLkNvcmUuYWRkSXRlbShpZCwgcXVhbnRpdHksIENhcnRKUy5VdGlscy51bndyYXBLZXlzKHByb3BlcnRpZXMpKTtcbiAgICB9LFxuICAgIHJlbmRlcjogZnVuY3Rpb24oZSwgY2FydCkge1xuICAgICAgdmFyIGNvbnRleHQ7XG4gICAgICBjb250ZXh0ID0ge1xuICAgICAgICAnaXRlbV9jb3VudCc6IGNhcnQuaXRlbV9jb3VudCxcbiAgICAgICAgJ3RvdGFsX3ByaWNlJzogY2FydC50b3RhbF9wcmljZSxcbiAgICAgICAgJ3RvdGFsX3ByaWNlX21vbmV5JzogQ2FydEpTLlV0aWxzLmZvcm1hdE1vbmV5KGNhcnQudG90YWxfcHJpY2UsIENhcnRKUy5zZXR0aW5ncy5tb25leUZvcm1hdCksXG4gICAgICAgICd0b3RhbF9wcmljZV9tb25leV93aXRoX2N1cnJlbmN5JzogQ2FydEpTLlV0aWxzLmZvcm1hdE1vbmV5KGNhcnQudG90YWxfcHJpY2UsIENhcnRKUy5zZXR0aW5ncy5tb25leVdpdGhDdXJyZW5jeUZvcm1hdClcbiAgICAgIH07XG4gICAgICByZXR1cm4galF1ZXJ5KCdbZGF0YS1jYXJ0LXJlbmRlcl0nKS5lYWNoKGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgJHRoaXM7XG4gICAgICAgICR0aGlzID0galF1ZXJ5KHRoaXMpO1xuICAgICAgICByZXR1cm4gJHRoaXMudGV4dChjb250ZXh0WyR0aGlzLmF0dHIoJ2RhdGEtY2FydC1yZW5kZXInKV0pO1xuICAgICAgfSk7XG4gICAgfVxuICB9O1xuXG4gIGlmICgncml2ZXRzJyBpbiB3aW5kb3cpIHtcbiAgICBDYXJ0SlMuUml2ZXRzID0ge1xuICAgICAgdmlld3M6IFtdLFxuICAgICAgaW5pdDogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBDYXJ0SlMuUml2ZXRzLmJpbmRWaWV3cygpO1xuICAgICAgfSxcbiAgICAgIGRlc3Ryb3k6IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gQ2FydEpTLlJpdmV0cy51bmJpbmRWaWV3cygpO1xuICAgICAgfSxcbiAgICAgIGJpbmRWaWV3czogZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBtb2RlbHM7XG4gICAgICAgIENhcnRKUy5SaXZldHMudW5iaW5kVmlld3MoKTtcbiAgICAgICAgbW9kZWxzID0gQ2FydEpTLlV0aWxzLmV4dGVuZCh7XG4gICAgICAgICAgY2FydDogQ2FydEpTLmNhcnRcbiAgICAgICAgfSwgQ2FydEpTLnNldHRpbmdzLnJpdmV0c01vZGVscyk7XG4gICAgICAgIHJldHVybiBqUXVlcnkoJ1tkYXRhLWNhcnQtdmlld10nKS5lYWNoKGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHJldHVybiBDYXJ0SlMuUml2ZXRzLnZpZXdzLnB1c2gocml2ZXRzLmJpbmQodGhpcywgbW9kZWxzKSk7XG4gICAgICAgIH0pO1xuICAgICAgfSxcbiAgICAgIHVuYmluZFZpZXdzOiBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIHZpZXcsIF9pLCBfbGVuLCBfcmVmO1xuICAgICAgICBfcmVmID0gQ2FydEpTLlJpdmV0cy52aWV3cztcbiAgICAgICAgZm9yIChfaSA9IDAsIF9sZW4gPSBfcmVmLmxlbmd0aDsgX2kgPCBfbGVuOyBfaSsrKSB7XG4gICAgICAgICAgdmlldyA9IF9yZWZbX2ldO1xuICAgICAgICAgIHZpZXcudW5iaW5kKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIENhcnRKUy5SaXZldHMudmlld3MgPSBbXTtcbiAgICAgIH1cbiAgICB9O1xuICAgIHJpdmV0cy5mb3JtYXR0ZXJzLmVxID0gZnVuY3Rpb24oYSwgYikge1xuICAgICAgcmV0dXJuIGEgPT09IGI7XG4gICAgfTtcbiAgICByaXZldHMuZm9ybWF0dGVycy5sdCA9IGZ1bmN0aW9uKGEsIGIpIHtcbiAgICAgIHJldHVybiBhIDwgYjtcbiAgICB9O1xuICAgIHJpdmV0cy5mb3JtYXR0ZXJzLmd0ID0gZnVuY3Rpb24oYSwgYikge1xuICAgICAgcmV0dXJuIGEgPiBiO1xuICAgIH07XG4gICAgcml2ZXRzLmZvcm1hdHRlcnMubm90ID0gZnVuY3Rpb24oYSkge1xuICAgICAgcmV0dXJuICFhO1xuICAgIH07XG4gICAgcml2ZXRzLmZvcm1hdHRlcnMuZW1wdHkgPSBmdW5jdGlvbihhKSB7XG4gICAgICByZXR1cm4gIWEubGVuZ3RoO1xuICAgIH07XG4gICAgcml2ZXRzLmZvcm1hdHRlcnMucGx1cyA9IGZ1bmN0aW9uKGEsIGIpIHtcbiAgICAgIHJldHVybiBwYXJzZUludChhKSArIHBhcnNlSW50KGIpO1xuICAgIH07XG4gICAgcml2ZXRzLmZvcm1hdHRlcnMubWludXMgPSBmdW5jdGlvbihhLCBiKSB7XG4gICAgICByZXR1cm4gcGFyc2VJbnQoYSkgLSBwYXJzZUludChiKTtcbiAgICB9O1xuICAgIHJpdmV0cy5mb3JtYXR0ZXJzLnByZXBlbmQgPSBmdW5jdGlvbihhLCBiKSB7XG4gICAgICByZXR1cm4gYiArIGE7XG4gICAgfTtcbiAgICByaXZldHMuZm9ybWF0dGVycy5hcHBlbmQgPSBmdW5jdGlvbihhLCBiKSB7XG4gICAgICByZXR1cm4gYSArIGI7XG4gICAgfTtcbiAgICByaXZldHMuZm9ybWF0dGVycy5tb25leSA9IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICByZXR1cm4gQ2FydEpTLlV0aWxzLmZvcm1hdE1vbmV5KHZhbHVlLCBDYXJ0SlMuc2V0dGluZ3MubW9uZXlGb3JtYXQpO1xuICAgIH07XG4gICAgcml2ZXRzLmZvcm1hdHRlcnMubW9uZXlfd2l0aF9jdXJyZW5jeSA9IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICByZXR1cm4gQ2FydEpTLlV0aWxzLmZvcm1hdE1vbmV5KHZhbHVlLCBDYXJ0SlMuc2V0dGluZ3MubW9uZXlXaXRoQ3VycmVuY3lGb3JtYXQpO1xuICAgIH07XG4gICAgcml2ZXRzLmZvcm1hdHRlcnMucHJvZHVjdEltYWdlU2l6ZSA9IGZ1bmN0aW9uKHNyYywgc2l6ZSkge1xuICAgICAgcmV0dXJuIENhcnRKUy5VdGlscy5nZXRTaXplZEltYWdlVXJsKHNyYywgc2l6ZSk7XG4gICAgfTtcbiAgfSBlbHNlIHtcbiAgICBDYXJ0SlMuUml2ZXRzID0ge1xuICAgICAgaW5pdDogZnVuY3Rpb24oKSB7fSxcbiAgICAgIGRlc3Ryb3k6IGZ1bmN0aW9uKCkge31cbiAgICB9O1xuICB9XG5cbiAgQ2FydEpTLmZhY3RvcnkgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gICAgZXhwb3J0cy5pbml0ID0gQ2FydEpTLmluaXQ7XG4gICAgZXhwb3J0cy5jb25maWd1cmUgPSBDYXJ0SlMuY29uZmlndXJlO1xuICAgIGV4cG9ydHMuY2FydCA9IENhcnRKUy5jYXJ0O1xuICAgIGV4cG9ydHMuc2V0dGluZ3MgPSBDYXJ0SlMuc2V0dGluZ3M7XG4gICAgZXhwb3J0cy5hZGRJdGVtID0gQ2FydEpTLkNvcmUuYWRkSXRlbTtcbiAgICBleHBvcnRzLnVwZGF0ZUl0ZW0gPSBDYXJ0SlMuQ29yZS51cGRhdGVJdGVtO1xuICAgIGV4cG9ydHMudXBkYXRlSXRlbUJ5SWQgPSBDYXJ0SlMuQ29yZS51cGRhdGVJdGVtQnlJZDtcbiAgICBleHBvcnRzLnVwZGF0ZUl0ZW1RdWFudGl0aWVzQnlJZCA9IENhcnRKUy5Db3JlLnVwZGF0ZUl0ZW1RdWFudGl0aWVzQnlJZDtcbiAgICBleHBvcnRzLnJlbW92ZUl0ZW0gPSBDYXJ0SlMuQ29yZS5yZW1vdmVJdGVtO1xuICAgIGV4cG9ydHMuY2xlYXIgPSBDYXJ0SlMuQ29yZS5jbGVhcjtcbiAgICBleHBvcnRzLmdldEF0dHJpYnV0ZSA9IENhcnRKUy5Db3JlLmdldEF0dHJpYnV0ZTtcbiAgICBleHBvcnRzLnNldEF0dHJpYnV0ZSA9IENhcnRKUy5Db3JlLnNldEF0dHJpYnV0ZTtcbiAgICBleHBvcnRzLmdldEF0dHJpYnV0ZXMgPSBDYXJ0SlMuQ29yZS5nZXRBdHRyaWJ1dGVzO1xuICAgIGV4cG9ydHMuc2V0QXR0cmlidXRlcyA9IENhcnRKUy5Db3JlLnNldEF0dHJpYnV0ZXM7XG4gICAgZXhwb3J0cy5jbGVhckF0dHJpYnV0ZXMgPSBDYXJ0SlMuQ29yZS5jbGVhckF0dHJpYnV0ZXM7XG4gICAgZXhwb3J0cy5nZXROb3RlID0gQ2FydEpTLkNvcmUuZ2V0Tm90ZTtcbiAgICByZXR1cm4gZXhwb3J0cy5zZXROb3RlID0gQ2FydEpTLkNvcmUuc2V0Tm90ZTtcbiAgfTtcblxuICBpZiAodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnKSB7XG4gICAgQ2FydEpTLmZhY3RvcnkoZXhwb3J0cyk7XG4gIH0gZWxzZSBpZiAodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKSB7XG4gICAgZGVmaW5lKFsnZXhwb3J0cyddLCBmdW5jdGlvbihleHBvcnRzKSB7XG4gICAgICBDYXJ0SlMuZmFjdG9yeSh0aGlzLkNhcnRKUyA9IGV4cG9ydHMpO1xuICAgICAgcmV0dXJuIGV4cG9ydHM7XG4gICAgfSk7XG4gIH0gZWxzZSB7XG4gICAgQ2FydEpTLmZhY3RvcnkodGhpcy5DYXJ0SlMgPSB7fSk7XG4gIH1cblxufSkuY2FsbCh0aGlzKTtcbiIsIi8qIVxuICogaW1hZ2VzTG9hZGVkIHYzLjEuOFxuICogSmF2YVNjcmlwdCBpcyBhbGwgbGlrZSBcIllvdSBpbWFnZXMgYXJlIGRvbmUgeWV0IG9yIHdoYXQ/XCJcbiAqIE1JVCBMaWNlbnNlXG4gKi9cblxuKCBmdW5jdGlvbiggd2luZG93LCBmYWN0b3J5ICkgeyAndXNlIHN0cmljdCc7XG4gIC8vIHVuaXZlcnNhbCBtb2R1bGUgZGVmaW5pdGlvblxuXG4gIC8qZ2xvYmFsIGRlZmluZTogZmFsc2UsIG1vZHVsZTogZmFsc2UsIHJlcXVpcmU6IGZhbHNlICovXG5cbiAgaWYgKCB0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQgKSB7XG4gICAgLy8gQU1EXG4gICAgZGVmaW5lKCBbXG4gICAgICAnZXZlbnRFbWl0dGVyL0V2ZW50RW1pdHRlcicsXG4gICAgICAnZXZlbnRpZS9ldmVudGllJ1xuICAgIF0sIGZ1bmN0aW9uKCBFdmVudEVtaXR0ZXIsIGV2ZW50aWUgKSB7XG4gICAgICByZXR1cm4gZmFjdG9yeSggd2luZG93LCBFdmVudEVtaXR0ZXIsIGV2ZW50aWUgKTtcbiAgICB9KTtcbiAgfSBlbHNlIGlmICggdHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnICkge1xuICAgIC8vIENvbW1vbkpTXG4gICAgbW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KFxuICAgICAgd2luZG93LFxuICAgICAgcmVxdWlyZSgnd29sZnk4Ny1ldmVudGVtaXR0ZXInKSxcbiAgICAgIHJlcXVpcmUoJ2V2ZW50aWUnKVxuICAgICk7XG4gIH0gZWxzZSB7XG4gICAgLy8gYnJvd3NlciBnbG9iYWxcbiAgICB3aW5kb3cuaW1hZ2VzTG9hZGVkID0gZmFjdG9yeShcbiAgICAgIHdpbmRvdyxcbiAgICAgIHdpbmRvdy5FdmVudEVtaXR0ZXIsXG4gICAgICB3aW5kb3cuZXZlbnRpZVxuICAgICk7XG4gIH1cblxufSkoIHdpbmRvdyxcblxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gIGZhY3RvcnkgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gLy9cblxuZnVuY3Rpb24gZmFjdG9yeSggd2luZG93LCBFdmVudEVtaXR0ZXIsIGV2ZW50aWUgKSB7XG5cbid1c2Ugc3RyaWN0JztcblxudmFyICQgPSB3aW5kb3cualF1ZXJ5O1xudmFyIGNvbnNvbGUgPSB3aW5kb3cuY29uc29sZTtcbnZhciBoYXNDb25zb2xlID0gdHlwZW9mIGNvbnNvbGUgIT09ICd1bmRlZmluZWQnO1xuXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSBoZWxwZXJzIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIC8vXG5cbi8vIGV4dGVuZCBvYmplY3RzXG5mdW5jdGlvbiBleHRlbmQoIGEsIGIgKSB7XG4gIGZvciAoIHZhciBwcm9wIGluIGIgKSB7XG4gICAgYVsgcHJvcCBdID0gYlsgcHJvcCBdO1xuICB9XG4gIHJldHVybiBhO1xufVxuXG52YXIgb2JqVG9TdHJpbmcgPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nO1xuZnVuY3Rpb24gaXNBcnJheSggb2JqICkge1xuICByZXR1cm4gb2JqVG9TdHJpbmcuY2FsbCggb2JqICkgPT09ICdbb2JqZWN0IEFycmF5XSc7XG59XG5cbi8vIHR1cm4gZWxlbWVudCBvciBub2RlTGlzdCBpbnRvIGFuIGFycmF5XG5mdW5jdGlvbiBtYWtlQXJyYXkoIG9iaiApIHtcbiAgdmFyIGFyeSA9IFtdO1xuICBpZiAoIGlzQXJyYXkoIG9iaiApICkge1xuICAgIC8vIHVzZSBvYmplY3QgaWYgYWxyZWFkeSBhbiBhcnJheVxuICAgIGFyeSA9IG9iajtcbiAgfSBlbHNlIGlmICggdHlwZW9mIG9iai5sZW5ndGggPT09ICdudW1iZXInICkge1xuICAgIC8vIGNvbnZlcnQgbm9kZUxpc3QgdG8gYXJyYXlcbiAgICBmb3IgKCB2YXIgaT0wLCBsZW4gPSBvYmoubGVuZ3RoOyBpIDwgbGVuOyBpKysgKSB7XG4gICAgICBhcnkucHVzaCggb2JqW2ldICk7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIC8vIGFycmF5IG9mIHNpbmdsZSBpbmRleFxuICAgIGFyeS5wdXNoKCBvYmogKTtcbiAgfVxuICByZXR1cm4gYXJ5O1xufVxuXG4gIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIGltYWdlc0xvYWRlZCAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAvL1xuXG4gIC8qKlxuICAgKiBAcGFyYW0ge0FycmF5LCBFbGVtZW50LCBOb2RlTGlzdCwgU3RyaW5nfSBlbGVtXG4gICAqIEBwYXJhbSB7T2JqZWN0IG9yIEZ1bmN0aW9ufSBvcHRpb25zIC0gaWYgZnVuY3Rpb24sIHVzZSBhcyBjYWxsYmFja1xuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBvbkFsd2F5cyAtIGNhbGxiYWNrIGZ1bmN0aW9uXG4gICAqL1xuICBmdW5jdGlvbiBJbWFnZXNMb2FkZWQoIGVsZW0sIG9wdGlvbnMsIG9uQWx3YXlzICkge1xuICAgIC8vIGNvZXJjZSBJbWFnZXNMb2FkZWQoKSB3aXRob3V0IG5ldywgdG8gYmUgbmV3IEltYWdlc0xvYWRlZCgpXG4gICAgaWYgKCAhKCB0aGlzIGluc3RhbmNlb2YgSW1hZ2VzTG9hZGVkICkgKSB7XG4gICAgICByZXR1cm4gbmV3IEltYWdlc0xvYWRlZCggZWxlbSwgb3B0aW9ucyApO1xuICAgIH1cbiAgICAvLyB1c2UgZWxlbSBhcyBzZWxlY3RvciBzdHJpbmdcbiAgICBpZiAoIHR5cGVvZiBlbGVtID09PSAnc3RyaW5nJyApIHtcbiAgICAgIGVsZW0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCBlbGVtICk7XG4gICAgfVxuXG4gICAgdGhpcy5lbGVtZW50cyA9IG1ha2VBcnJheSggZWxlbSApO1xuICAgIHRoaXMub3B0aW9ucyA9IGV4dGVuZCgge30sIHRoaXMub3B0aW9ucyApO1xuXG4gICAgaWYgKCB0eXBlb2Ygb3B0aW9ucyA9PT0gJ2Z1bmN0aW9uJyApIHtcbiAgICAgIG9uQWx3YXlzID0gb3B0aW9ucztcbiAgICB9IGVsc2Uge1xuICAgICAgZXh0ZW5kKCB0aGlzLm9wdGlvbnMsIG9wdGlvbnMgKTtcbiAgICB9XG5cbiAgICBpZiAoIG9uQWx3YXlzICkge1xuICAgICAgdGhpcy5vbiggJ2Fsd2F5cycsIG9uQWx3YXlzICk7XG4gICAgfVxuXG4gICAgdGhpcy5nZXRJbWFnZXMoKTtcblxuICAgIGlmICggJCApIHtcbiAgICAgIC8vIGFkZCBqUXVlcnkgRGVmZXJyZWQgb2JqZWN0XG4gICAgICB0aGlzLmpxRGVmZXJyZWQgPSBuZXcgJC5EZWZlcnJlZCgpO1xuICAgIH1cblxuICAgIC8vIEhBQ0sgY2hlY2sgYXN5bmMgdG8gYWxsb3cgdGltZSB0byBiaW5kIGxpc3RlbmVyc1xuICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgc2V0VGltZW91dCggZnVuY3Rpb24oKSB7XG4gICAgICBfdGhpcy5jaGVjaygpO1xuICAgIH0pO1xuICB9XG5cbiAgSW1hZ2VzTG9hZGVkLnByb3RvdHlwZSA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcblxuICBJbWFnZXNMb2FkZWQucHJvdG90eXBlLm9wdGlvbnMgPSB7fTtcblxuICBJbWFnZXNMb2FkZWQucHJvdG90eXBlLmdldEltYWdlcyA9IGZ1bmN0aW9uKCkge1xuICAgIHRoaXMuaW1hZ2VzID0gW107XG5cbiAgICAvLyBmaWx0ZXIgJiBmaW5kIGl0ZW1zIGlmIHdlIGhhdmUgYW4gaXRlbSBzZWxlY3RvclxuICAgIGZvciAoIHZhciBpPTAsIGxlbiA9IHRoaXMuZWxlbWVudHMubGVuZ3RoOyBpIDwgbGVuOyBpKysgKSB7XG4gICAgICB2YXIgZWxlbSA9IHRoaXMuZWxlbWVudHNbaV07XG4gICAgICAvLyBmaWx0ZXIgc2libGluZ3NcbiAgICAgIGlmICggZWxlbS5ub2RlTmFtZSA9PT0gJ0lNRycgKSB7XG4gICAgICAgIHRoaXMuYWRkSW1hZ2UoIGVsZW0gKTtcbiAgICAgIH1cbiAgICAgIC8vIGZpbmQgY2hpbGRyZW5cbiAgICAgIC8vIG5vIG5vbi1lbGVtZW50IG5vZGVzLCAjMTQzXG4gICAgICB2YXIgbm9kZVR5cGUgPSBlbGVtLm5vZGVUeXBlO1xuICAgICAgaWYgKCAhbm9kZVR5cGUgfHwgISggbm9kZVR5cGUgPT09IDEgfHwgbm9kZVR5cGUgPT09IDkgfHwgbm9kZVR5cGUgPT09IDExICkgKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgICAgdmFyIGNoaWxkRWxlbXMgPSBlbGVtLnF1ZXJ5U2VsZWN0b3JBbGwoJ2ltZycpO1xuICAgICAgLy8gY29uY2F0IGNoaWxkRWxlbXMgdG8gZmlsdGVyRm91bmQgYXJyYXlcbiAgICAgIGZvciAoIHZhciBqPTAsIGpMZW4gPSBjaGlsZEVsZW1zLmxlbmd0aDsgaiA8IGpMZW47IGorKyApIHtcbiAgICAgICAgdmFyIGltZyA9IGNoaWxkRWxlbXNbal07XG4gICAgICAgIHRoaXMuYWRkSW1hZ2UoIGltZyApO1xuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogQHBhcmFtIHtJbWFnZX0gaW1nXG4gICAqL1xuICBJbWFnZXNMb2FkZWQucHJvdG90eXBlLmFkZEltYWdlID0gZnVuY3Rpb24oIGltZyApIHtcbiAgICB2YXIgbG9hZGluZ0ltYWdlID0gbmV3IExvYWRpbmdJbWFnZSggaW1nICk7XG4gICAgdGhpcy5pbWFnZXMucHVzaCggbG9hZGluZ0ltYWdlICk7XG4gIH07XG5cbiAgSW1hZ2VzTG9hZGVkLnByb3RvdHlwZS5jaGVjayA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgdmFyIGNoZWNrZWRDb3VudCA9IDA7XG4gICAgdmFyIGxlbmd0aCA9IHRoaXMuaW1hZ2VzLmxlbmd0aDtcbiAgICB0aGlzLmhhc0FueUJyb2tlbiA9IGZhbHNlO1xuICAgIC8vIGNvbXBsZXRlIGlmIG5vIGltYWdlc1xuICAgIGlmICggIWxlbmd0aCApIHtcbiAgICAgIHRoaXMuY29tcGxldGUoKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBvbkNvbmZpcm0oIGltYWdlLCBtZXNzYWdlICkge1xuICAgICAgaWYgKCBfdGhpcy5vcHRpb25zLmRlYnVnICYmIGhhc0NvbnNvbGUgKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCAnY29uZmlybScsIGltYWdlLCBtZXNzYWdlICk7XG4gICAgICB9XG5cbiAgICAgIF90aGlzLnByb2dyZXNzKCBpbWFnZSApO1xuICAgICAgY2hlY2tlZENvdW50Kys7XG4gICAgICBpZiAoIGNoZWNrZWRDb3VudCA9PT0gbGVuZ3RoICkge1xuICAgICAgICBfdGhpcy5jb21wbGV0ZSgpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHRydWU7IC8vIGJpbmQgb25jZVxuICAgIH1cblxuICAgIGZvciAoIHZhciBpPTA7IGkgPCBsZW5ndGg7IGkrKyApIHtcbiAgICAgIHZhciBsb2FkaW5nSW1hZ2UgPSB0aGlzLmltYWdlc1tpXTtcbiAgICAgIGxvYWRpbmdJbWFnZS5vbiggJ2NvbmZpcm0nLCBvbkNvbmZpcm0gKTtcbiAgICAgIGxvYWRpbmdJbWFnZS5jaGVjaygpO1xuICAgIH1cbiAgfTtcblxuICBJbWFnZXNMb2FkZWQucHJvdG90eXBlLnByb2dyZXNzID0gZnVuY3Rpb24oIGltYWdlICkge1xuICAgIHRoaXMuaGFzQW55QnJva2VuID0gdGhpcy5oYXNBbnlCcm9rZW4gfHwgIWltYWdlLmlzTG9hZGVkO1xuICAgIC8vIEhBQ0sgLSBDaHJvbWUgdHJpZ2dlcnMgZXZlbnQgYmVmb3JlIG9iamVjdCBwcm9wZXJ0aWVzIGhhdmUgY2hhbmdlZC4gIzgzXG4gICAgdmFyIF90aGlzID0gdGhpcztcbiAgICBzZXRUaW1lb3V0KCBmdW5jdGlvbigpIHtcbiAgICAgIF90aGlzLmVtaXQoICdwcm9ncmVzcycsIF90aGlzLCBpbWFnZSApO1xuICAgICAgaWYgKCBfdGhpcy5qcURlZmVycmVkICYmIF90aGlzLmpxRGVmZXJyZWQubm90aWZ5ICkge1xuICAgICAgICBfdGhpcy5qcURlZmVycmVkLm5vdGlmeSggX3RoaXMsIGltYWdlICk7XG4gICAgICB9XG4gICAgfSk7XG4gIH07XG5cbiAgSW1hZ2VzTG9hZGVkLnByb3RvdHlwZS5jb21wbGV0ZSA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBldmVudE5hbWUgPSB0aGlzLmhhc0FueUJyb2tlbiA/ICdmYWlsJyA6ICdkb25lJztcbiAgICB0aGlzLmlzQ29tcGxldGUgPSB0cnVlO1xuICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgLy8gSEFDSyAtIGFub3RoZXIgc2V0VGltZW91dCBzbyB0aGF0IGNvbmZpcm0gaGFwcGVucyBhZnRlciBwcm9ncmVzc1xuICAgIHNldFRpbWVvdXQoIGZ1bmN0aW9uKCkge1xuICAgICAgX3RoaXMuZW1pdCggZXZlbnROYW1lLCBfdGhpcyApO1xuICAgICAgX3RoaXMuZW1pdCggJ2Fsd2F5cycsIF90aGlzICk7XG4gICAgICBpZiAoIF90aGlzLmpxRGVmZXJyZWQgKSB7XG4gICAgICAgIHZhciBqcU1ldGhvZCA9IF90aGlzLmhhc0FueUJyb2tlbiA/ICdyZWplY3QnIDogJ3Jlc29sdmUnO1xuICAgICAgICBfdGhpcy5qcURlZmVycmVkWyBqcU1ldGhvZCBdKCBfdGhpcyApO1xuICAgICAgfVxuICAgIH0pO1xuICB9O1xuXG4gIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIGpxdWVyeSAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAvL1xuXG4gIGlmICggJCApIHtcbiAgICAkLmZuLmltYWdlc0xvYWRlZCA9IGZ1bmN0aW9uKCBvcHRpb25zLCBjYWxsYmFjayApIHtcbiAgICAgIHZhciBpbnN0YW5jZSA9IG5ldyBJbWFnZXNMb2FkZWQoIHRoaXMsIG9wdGlvbnMsIGNhbGxiYWNrICk7XG4gICAgICByZXR1cm4gaW5zdGFuY2UuanFEZWZlcnJlZC5wcm9taXNlKCAkKHRoaXMpICk7XG4gICAgfTtcbiAgfVxuXG5cbiAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIC8vXG5cbiAgZnVuY3Rpb24gTG9hZGluZ0ltYWdlKCBpbWcgKSB7XG4gICAgdGhpcy5pbWcgPSBpbWc7XG4gIH1cblxuICBMb2FkaW5nSW1hZ2UucHJvdG90eXBlID0gbmV3IEV2ZW50RW1pdHRlcigpO1xuXG4gIExvYWRpbmdJbWFnZS5wcm90b3R5cGUuY2hlY2sgPSBmdW5jdGlvbigpIHtcbiAgICAvLyBmaXJzdCBjaGVjayBjYWNoZWQgYW55IHByZXZpb3VzIGltYWdlcyB0aGF0IGhhdmUgc2FtZSBzcmNcbiAgICB2YXIgcmVzb3VyY2UgPSBjYWNoZVsgdGhpcy5pbWcuc3JjIF0gfHwgbmV3IFJlc291cmNlKCB0aGlzLmltZy5zcmMgKTtcbiAgICBpZiAoIHJlc291cmNlLmlzQ29uZmlybWVkICkge1xuICAgICAgdGhpcy5jb25maXJtKCByZXNvdXJjZS5pc0xvYWRlZCwgJ2NhY2hlZCB3YXMgY29uZmlybWVkJyApO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIElmIGNvbXBsZXRlIGlzIHRydWUgYW5kIGJyb3dzZXIgc3VwcG9ydHMgbmF0dXJhbCBzaXplcyxcbiAgICAvLyB0cnkgdG8gY2hlY2sgZm9yIGltYWdlIHN0YXR1cyBtYW51YWxseS5cbiAgICBpZiAoIHRoaXMuaW1nLmNvbXBsZXRlICYmIHRoaXMuaW1nLm5hdHVyYWxXaWR0aCAhPT0gdW5kZWZpbmVkICkge1xuICAgICAgLy8gcmVwb3J0IGJhc2VkIG9uIG5hdHVyYWxXaWR0aFxuICAgICAgdGhpcy5jb25maXJtKCB0aGlzLmltZy5uYXR1cmFsV2lkdGggIT09IDAsICduYXR1cmFsV2lkdGgnICk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gSWYgbm9uZSBvZiB0aGUgY2hlY2tzIGFib3ZlIG1hdGNoZWQsIHNpbXVsYXRlIGxvYWRpbmcgb24gZGV0YWNoZWQgZWxlbWVudC5cbiAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgIHJlc291cmNlLm9uKCAnY29uZmlybScsIGZ1bmN0aW9uKCByZXNyYywgbWVzc2FnZSApIHtcbiAgICAgIF90aGlzLmNvbmZpcm0oIHJlc3JjLmlzTG9hZGVkLCBtZXNzYWdlICk7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9KTtcblxuICAgIHJlc291cmNlLmNoZWNrKCk7XG4gIH07XG5cbiAgTG9hZGluZ0ltYWdlLnByb3RvdHlwZS5jb25maXJtID0gZnVuY3Rpb24oIGlzTG9hZGVkLCBtZXNzYWdlICkge1xuICAgIHRoaXMuaXNMb2FkZWQgPSBpc0xvYWRlZDtcbiAgICB0aGlzLmVtaXQoICdjb25maXJtJywgdGhpcywgbWVzc2FnZSApO1xuICB9O1xuXG4gIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIFJlc291cmNlIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIC8vXG5cbiAgLy8gUmVzb3VyY2UgY2hlY2tzIGVhY2ggc3JjLCBvbmx5IG9uY2VcbiAgLy8gc2VwYXJhdGUgY2xhc3MgZnJvbSBMb2FkaW5nSW1hZ2UgdG8gcHJldmVudCBtZW1vcnkgbGVha3MuIFNlZSAjMTE1XG5cbiAgdmFyIGNhY2hlID0ge307XG5cbiAgZnVuY3Rpb24gUmVzb3VyY2UoIHNyYyApIHtcbiAgICB0aGlzLnNyYyA9IHNyYztcbiAgICAvLyBhZGQgdG8gY2FjaGVcbiAgICBjYWNoZVsgc3JjIF0gPSB0aGlzO1xuICB9XG5cbiAgUmVzb3VyY2UucHJvdG90eXBlID0gbmV3IEV2ZW50RW1pdHRlcigpO1xuXG4gIFJlc291cmNlLnByb3RvdHlwZS5jaGVjayA9IGZ1bmN0aW9uKCkge1xuICAgIC8vIG9ubHkgdHJpZ2dlciBjaGVja2luZyBvbmNlXG4gICAgaWYgKCB0aGlzLmlzQ2hlY2tlZCApIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgLy8gc2ltdWxhdGUgbG9hZGluZyBvbiBkZXRhY2hlZCBlbGVtZW50XG4gICAgdmFyIHByb3h5SW1hZ2UgPSBuZXcgSW1hZ2UoKTtcbiAgICBldmVudGllLmJpbmQoIHByb3h5SW1hZ2UsICdsb2FkJywgdGhpcyApO1xuICAgIGV2ZW50aWUuYmluZCggcHJveHlJbWFnZSwgJ2Vycm9yJywgdGhpcyApO1xuICAgIHByb3h5SW1hZ2Uuc3JjID0gdGhpcy5zcmM7XG4gICAgLy8gc2V0IGZsYWdcbiAgICB0aGlzLmlzQ2hlY2tlZCA9IHRydWU7XG4gIH07XG5cbiAgLy8gLS0tLS0gZXZlbnRzIC0tLS0tIC8vXG5cbiAgLy8gdHJpZ2dlciBzcGVjaWZpZWQgaGFuZGxlciBmb3IgZXZlbnQgdHlwZVxuICBSZXNvdXJjZS5wcm90b3R5cGUuaGFuZGxlRXZlbnQgPSBmdW5jdGlvbiggZXZlbnQgKSB7XG4gICAgdmFyIG1ldGhvZCA9ICdvbicgKyBldmVudC50eXBlO1xuICAgIGlmICggdGhpc1sgbWV0aG9kIF0gKSB7XG4gICAgICB0aGlzWyBtZXRob2QgXSggZXZlbnQgKTtcbiAgICB9XG4gIH07XG5cbiAgUmVzb3VyY2UucHJvdG90eXBlLm9ubG9hZCA9IGZ1bmN0aW9uKCBldmVudCApIHtcbiAgICB0aGlzLmNvbmZpcm0oIHRydWUsICdvbmxvYWQnICk7XG4gICAgdGhpcy51bmJpbmRQcm94eUV2ZW50cyggZXZlbnQgKTtcbiAgfTtcblxuICBSZXNvdXJjZS5wcm90b3R5cGUub25lcnJvciA9IGZ1bmN0aW9uKCBldmVudCApIHtcbiAgICB0aGlzLmNvbmZpcm0oIGZhbHNlLCAnb25lcnJvcicgKTtcbiAgICB0aGlzLnVuYmluZFByb3h5RXZlbnRzKCBldmVudCApO1xuICB9O1xuXG4gIC8vIC0tLS0tIGNvbmZpcm0gLS0tLS0gLy9cblxuICBSZXNvdXJjZS5wcm90b3R5cGUuY29uZmlybSA9IGZ1bmN0aW9uKCBpc0xvYWRlZCwgbWVzc2FnZSApIHtcbiAgICB0aGlzLmlzQ29uZmlybWVkID0gdHJ1ZTtcbiAgICB0aGlzLmlzTG9hZGVkID0gaXNMb2FkZWQ7XG4gICAgdGhpcy5lbWl0KCAnY29uZmlybScsIHRoaXMsIG1lc3NhZ2UgKTtcbiAgfTtcblxuICBSZXNvdXJjZS5wcm90b3R5cGUudW5iaW5kUHJveHlFdmVudHMgPSBmdW5jdGlvbiggZXZlbnQgKSB7XG4gICAgZXZlbnRpZS51bmJpbmQoIGV2ZW50LnRhcmdldCwgJ2xvYWQnLCB0aGlzICk7XG4gICAgZXZlbnRpZS51bmJpbmQoIGV2ZW50LnRhcmdldCwgJ2Vycm9yJywgdGhpcyApO1xuICB9O1xuXG4gIC8vIC0tLS0tICAtLS0tLSAvL1xuXG4gIHJldHVybiBJbWFnZXNMb2FkZWQ7XG5cbn0pO1xuIiwiLyohXG4gKiBldmVudGllIHYxLjAuNlxuICogZXZlbnQgYmluZGluZyBoZWxwZXJcbiAqICAgZXZlbnRpZS5iaW5kKCBlbGVtLCAnY2xpY2snLCBteUZuIClcbiAqICAgZXZlbnRpZS51bmJpbmQoIGVsZW0sICdjbGljaycsIG15Rm4gKVxuICogTUlUIGxpY2Vuc2VcbiAqL1xuXG4vKmpzaGludCBicm93c2VyOiB0cnVlLCB1bmRlZjogdHJ1ZSwgdW51c2VkOiB0cnVlICovXG4vKmdsb2JhbCBkZWZpbmU6IGZhbHNlLCBtb2R1bGU6IGZhbHNlICovXG5cbiggZnVuY3Rpb24oIHdpbmRvdyApIHtcblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgZG9jRWxlbSA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudDtcblxudmFyIGJpbmQgPSBmdW5jdGlvbigpIHt9O1xuXG5mdW5jdGlvbiBnZXRJRUV2ZW50KCBvYmogKSB7XG4gIHZhciBldmVudCA9IHdpbmRvdy5ldmVudDtcbiAgLy8gYWRkIGV2ZW50LnRhcmdldFxuICBldmVudC50YXJnZXQgPSBldmVudC50YXJnZXQgfHwgZXZlbnQuc3JjRWxlbWVudCB8fCBvYmo7XG4gIHJldHVybiBldmVudDtcbn1cblxuaWYgKCBkb2NFbGVtLmFkZEV2ZW50TGlzdGVuZXIgKSB7XG4gIGJpbmQgPSBmdW5jdGlvbiggb2JqLCB0eXBlLCBmbiApIHtcbiAgICBvYmouYWRkRXZlbnRMaXN0ZW5lciggdHlwZSwgZm4sIGZhbHNlICk7XG4gIH07XG59IGVsc2UgaWYgKCBkb2NFbGVtLmF0dGFjaEV2ZW50ICkge1xuICBiaW5kID0gZnVuY3Rpb24oIG9iaiwgdHlwZSwgZm4gKSB7XG4gICAgb2JqWyB0eXBlICsgZm4gXSA9IGZuLmhhbmRsZUV2ZW50ID9cbiAgICAgIGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgZXZlbnQgPSBnZXRJRUV2ZW50KCBvYmogKTtcbiAgICAgICAgZm4uaGFuZGxlRXZlbnQuY2FsbCggZm4sIGV2ZW50ICk7XG4gICAgICB9IDpcbiAgICAgIGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgZXZlbnQgPSBnZXRJRUV2ZW50KCBvYmogKTtcbiAgICAgICAgZm4uY2FsbCggb2JqLCBldmVudCApO1xuICAgICAgfTtcbiAgICBvYmouYXR0YWNoRXZlbnQoIFwib25cIiArIHR5cGUsIG9ialsgdHlwZSArIGZuIF0gKTtcbiAgfTtcbn1cblxudmFyIHVuYmluZCA9IGZ1bmN0aW9uKCkge307XG5cbmlmICggZG9jRWxlbS5yZW1vdmVFdmVudExpc3RlbmVyICkge1xuICB1bmJpbmQgPSBmdW5jdGlvbiggb2JqLCB0eXBlLCBmbiApIHtcbiAgICBvYmoucmVtb3ZlRXZlbnRMaXN0ZW5lciggdHlwZSwgZm4sIGZhbHNlICk7XG4gIH07XG59IGVsc2UgaWYgKCBkb2NFbGVtLmRldGFjaEV2ZW50ICkge1xuICB1bmJpbmQgPSBmdW5jdGlvbiggb2JqLCB0eXBlLCBmbiApIHtcbiAgICBvYmouZGV0YWNoRXZlbnQoIFwib25cIiArIHR5cGUsIG9ialsgdHlwZSArIGZuIF0gKTtcbiAgICB0cnkge1xuICAgICAgZGVsZXRlIG9ialsgdHlwZSArIGZuIF07XG4gICAgfSBjYXRjaCAoIGVyciApIHtcbiAgICAgIC8vIGNhbid0IGRlbGV0ZSB3aW5kb3cgb2JqZWN0IHByb3BlcnRpZXNcbiAgICAgIG9ialsgdHlwZSArIGZuIF0gPSB1bmRlZmluZWQ7XG4gICAgfVxuICB9O1xufVxuXG52YXIgZXZlbnRpZSA9IHtcbiAgYmluZDogYmluZCxcbiAgdW5iaW5kOiB1bmJpbmRcbn07XG5cbi8vIC0tLS0tIG1vZHVsZSBkZWZpbml0aW9uIC0tLS0tIC8vXG5cbmlmICggdHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kICkge1xuICAvLyBBTURcbiAgZGVmaW5lKCBldmVudGllICk7XG59IGVsc2UgaWYgKCB0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcgKSB7XG4gIC8vIENvbW1vbkpTXG4gIG1vZHVsZS5leHBvcnRzID0gZXZlbnRpZTtcbn0gZWxzZSB7XG4gIC8vIGJyb3dzZXIgZ2xvYmFsXG4gIHdpbmRvdy5ldmVudGllID0gZXZlbnRpZTtcbn1cblxufSkoIHdpbmRvdyApO1xuIiwiLyohXG4gKiBFdmVudEVtaXR0ZXIgdjQuMi4xMSAtIGdpdC5pby9lZVxuICogVW5saWNlbnNlIC0gaHR0cDovL3VubGljZW5zZS5vcmcvXG4gKiBPbGl2ZXIgQ2FsZHdlbGwgLSBodHRwOi8vb2xpLm1lLnVrL1xuICogQHByZXNlcnZlXG4gKi9cblxuOyhmdW5jdGlvbiAoKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgLyoqXG4gICAgICogQ2xhc3MgZm9yIG1hbmFnaW5nIGV2ZW50cy5cbiAgICAgKiBDYW4gYmUgZXh0ZW5kZWQgdG8gcHJvdmlkZSBldmVudCBmdW5jdGlvbmFsaXR5IGluIG90aGVyIGNsYXNzZXMuXG4gICAgICpcbiAgICAgKiBAY2xhc3MgRXZlbnRFbWl0dGVyIE1hbmFnZXMgZXZlbnQgcmVnaXN0ZXJpbmcgYW5kIGVtaXR0aW5nLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIEV2ZW50RW1pdHRlcigpIHt9XG5cbiAgICAvLyBTaG9ydGN1dHMgdG8gaW1wcm92ZSBzcGVlZCBhbmQgc2l6ZVxuICAgIHZhciBwcm90byA9IEV2ZW50RW1pdHRlci5wcm90b3R5cGU7XG4gICAgdmFyIGV4cG9ydHMgPSB0aGlzO1xuICAgIHZhciBvcmlnaW5hbEdsb2JhbFZhbHVlID0gZXhwb3J0cy5FdmVudEVtaXR0ZXI7XG5cbiAgICAvKipcbiAgICAgKiBGaW5kcyB0aGUgaW5kZXggb2YgdGhlIGxpc3RlbmVyIGZvciB0aGUgZXZlbnQgaW4gaXRzIHN0b3JhZ2UgYXJyYXkuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9uW119IGxpc3RlbmVycyBBcnJheSBvZiBsaXN0ZW5lcnMgdG8gc2VhcmNoIHRocm91Z2guXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gbGlzdGVuZXIgTWV0aG9kIHRvIGxvb2sgZm9yLlxuICAgICAqIEByZXR1cm4ge051bWJlcn0gSW5kZXggb2YgdGhlIHNwZWNpZmllZCBsaXN0ZW5lciwgLTEgaWYgbm90IGZvdW5kXG4gICAgICogQGFwaSBwcml2YXRlXG4gICAgICovXG4gICAgZnVuY3Rpb24gaW5kZXhPZkxpc3RlbmVyKGxpc3RlbmVycywgbGlzdGVuZXIpIHtcbiAgICAgICAgdmFyIGkgPSBsaXN0ZW5lcnMubGVuZ3RoO1xuICAgICAgICB3aGlsZSAoaS0tKSB7XG4gICAgICAgICAgICBpZiAobGlzdGVuZXJzW2ldLmxpc3RlbmVyID09PSBsaXN0ZW5lcikge1xuICAgICAgICAgICAgICAgIHJldHVybiBpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIC0xO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEFsaWFzIGEgbWV0aG9kIHdoaWxlIGtlZXBpbmcgdGhlIGNvbnRleHQgY29ycmVjdCwgdG8gYWxsb3cgZm9yIG92ZXJ3cml0aW5nIG9mIHRhcmdldCBtZXRob2QuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gbmFtZSBUaGUgbmFtZSBvZiB0aGUgdGFyZ2V0IG1ldGhvZC5cbiAgICAgKiBAcmV0dXJuIHtGdW5jdGlvbn0gVGhlIGFsaWFzZWQgbWV0aG9kXG4gICAgICogQGFwaSBwcml2YXRlXG4gICAgICovXG4gICAgZnVuY3Rpb24gYWxpYXMobmFtZSkge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gYWxpYXNDbG9zdXJlKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXNbbmFtZV0uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBsaXN0ZW5lciBhcnJheSBmb3IgdGhlIHNwZWNpZmllZCBldmVudC5cbiAgICAgKiBXaWxsIGluaXRpYWxpc2UgdGhlIGV2ZW50IG9iamVjdCBhbmQgbGlzdGVuZXIgYXJyYXlzIGlmIHJlcXVpcmVkLlxuICAgICAqIFdpbGwgcmV0dXJuIGFuIG9iamVjdCBpZiB5b3UgdXNlIGEgcmVnZXggc2VhcmNoLiBUaGUgb2JqZWN0IGNvbnRhaW5zIGtleXMgZm9yIGVhY2ggbWF0Y2hlZCBldmVudC4gU28gL2JhW3J6XS8gbWlnaHQgcmV0dXJuIGFuIG9iamVjdCBjb250YWluaW5nIGJhciBhbmQgYmF6LiBCdXQgb25seSBpZiB5b3UgaGF2ZSBlaXRoZXIgZGVmaW5lZCB0aGVtIHdpdGggZGVmaW5lRXZlbnQgb3IgYWRkZWQgc29tZSBsaXN0ZW5lcnMgdG8gdGhlbS5cbiAgICAgKiBFYWNoIHByb3BlcnR5IGluIHRoZSBvYmplY3QgcmVzcG9uc2UgaXMgYW4gYXJyYXkgb2YgbGlzdGVuZXIgZnVuY3Rpb25zLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtTdHJpbmd8UmVnRXhwfSBldnQgTmFtZSBvZiB0aGUgZXZlbnQgdG8gcmV0dXJuIHRoZSBsaXN0ZW5lcnMgZnJvbS5cbiAgICAgKiBAcmV0dXJuIHtGdW5jdGlvbltdfE9iamVjdH0gQWxsIGxpc3RlbmVyIGZ1bmN0aW9ucyBmb3IgdGhlIGV2ZW50LlxuICAgICAqL1xuICAgIHByb3RvLmdldExpc3RlbmVycyA9IGZ1bmN0aW9uIGdldExpc3RlbmVycyhldnQpIHtcbiAgICAgICAgdmFyIGV2ZW50cyA9IHRoaXMuX2dldEV2ZW50cygpO1xuICAgICAgICB2YXIgcmVzcG9uc2U7XG4gICAgICAgIHZhciBrZXk7XG5cbiAgICAgICAgLy8gUmV0dXJuIGEgY29uY2F0ZW5hdGVkIGFycmF5IG9mIGFsbCBtYXRjaGluZyBldmVudHMgaWZcbiAgICAgICAgLy8gdGhlIHNlbGVjdG9yIGlzIGEgcmVndWxhciBleHByZXNzaW9uLlxuICAgICAgICBpZiAoZXZ0IGluc3RhbmNlb2YgUmVnRXhwKSB7XG4gICAgICAgICAgICByZXNwb25zZSA9IHt9O1xuICAgICAgICAgICAgZm9yIChrZXkgaW4gZXZlbnRzKSB7XG4gICAgICAgICAgICAgICAgaWYgKGV2ZW50cy5oYXNPd25Qcm9wZXJ0eShrZXkpICYmIGV2dC50ZXN0KGtleSkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2Vba2V5XSA9IGV2ZW50c1trZXldO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJlc3BvbnNlID0gZXZlbnRzW2V2dF0gfHwgKGV2ZW50c1tldnRdID0gW10pO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHJlc3BvbnNlO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBUYWtlcyBhIGxpc3Qgb2YgbGlzdGVuZXIgb2JqZWN0cyBhbmQgZmxhdHRlbnMgaXQgaW50byBhIGxpc3Qgb2YgbGlzdGVuZXIgZnVuY3Rpb25zLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtPYmplY3RbXX0gbGlzdGVuZXJzIFJhdyBsaXN0ZW5lciBvYmplY3RzLlxuICAgICAqIEByZXR1cm4ge0Z1bmN0aW9uW119IEp1c3QgdGhlIGxpc3RlbmVyIGZ1bmN0aW9ucy5cbiAgICAgKi9cbiAgICBwcm90by5mbGF0dGVuTGlzdGVuZXJzID0gZnVuY3Rpb24gZmxhdHRlbkxpc3RlbmVycyhsaXN0ZW5lcnMpIHtcbiAgICAgICAgdmFyIGZsYXRMaXN0ZW5lcnMgPSBbXTtcbiAgICAgICAgdmFyIGk7XG5cbiAgICAgICAgZm9yIChpID0gMDsgaSA8IGxpc3RlbmVycy5sZW5ndGg7IGkgKz0gMSkge1xuICAgICAgICAgICAgZmxhdExpc3RlbmVycy5wdXNoKGxpc3RlbmVyc1tpXS5saXN0ZW5lcik7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gZmxhdExpc3RlbmVycztcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogRmV0Y2hlcyB0aGUgcmVxdWVzdGVkIGxpc3RlbmVycyB2aWEgZ2V0TGlzdGVuZXJzIGJ1dCB3aWxsIGFsd2F5cyByZXR1cm4gdGhlIHJlc3VsdHMgaW5zaWRlIGFuIG9iamVjdC4gVGhpcyBpcyBtYWlubHkgZm9yIGludGVybmFsIHVzZSBidXQgb3RoZXJzIG1heSBmaW5kIGl0IHVzZWZ1bC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7U3RyaW5nfFJlZ0V4cH0gZXZ0IE5hbWUgb2YgdGhlIGV2ZW50IHRvIHJldHVybiB0aGUgbGlzdGVuZXJzIGZyb20uXG4gICAgICogQHJldHVybiB7T2JqZWN0fSBBbGwgbGlzdGVuZXIgZnVuY3Rpb25zIGZvciBhbiBldmVudCBpbiBhbiBvYmplY3QuXG4gICAgICovXG4gICAgcHJvdG8uZ2V0TGlzdGVuZXJzQXNPYmplY3QgPSBmdW5jdGlvbiBnZXRMaXN0ZW5lcnNBc09iamVjdChldnQpIHtcbiAgICAgICAgdmFyIGxpc3RlbmVycyA9IHRoaXMuZ2V0TGlzdGVuZXJzKGV2dCk7XG4gICAgICAgIHZhciByZXNwb25zZTtcblxuICAgICAgICBpZiAobGlzdGVuZXJzIGluc3RhbmNlb2YgQXJyYXkpIHtcbiAgICAgICAgICAgIHJlc3BvbnNlID0ge307XG4gICAgICAgICAgICByZXNwb25zZVtldnRdID0gbGlzdGVuZXJzO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHJlc3BvbnNlIHx8IGxpc3RlbmVycztcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogQWRkcyBhIGxpc3RlbmVyIGZ1bmN0aW9uIHRvIHRoZSBzcGVjaWZpZWQgZXZlbnQuXG4gICAgICogVGhlIGxpc3RlbmVyIHdpbGwgbm90IGJlIGFkZGVkIGlmIGl0IGlzIGEgZHVwbGljYXRlLlxuICAgICAqIElmIHRoZSBsaXN0ZW5lciByZXR1cm5zIHRydWUgdGhlbiBpdCB3aWxsIGJlIHJlbW92ZWQgYWZ0ZXIgaXQgaXMgY2FsbGVkLlxuICAgICAqIElmIHlvdSBwYXNzIGEgcmVndWxhciBleHByZXNzaW9uIGFzIHRoZSBldmVudCBuYW1lIHRoZW4gdGhlIGxpc3RlbmVyIHdpbGwgYmUgYWRkZWQgdG8gYWxsIGV2ZW50cyB0aGF0IG1hdGNoIGl0LlxuICAgICAqXG4gICAgICogQHBhcmFtIHtTdHJpbmd8UmVnRXhwfSBldnQgTmFtZSBvZiB0aGUgZXZlbnQgdG8gYXR0YWNoIHRoZSBsaXN0ZW5lciB0by5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBsaXN0ZW5lciBNZXRob2QgdG8gYmUgY2FsbGVkIHdoZW4gdGhlIGV2ZW50IGlzIGVtaXR0ZWQuIElmIHRoZSBmdW5jdGlvbiByZXR1cm5zIHRydWUgdGhlbiBpdCB3aWxsIGJlIHJlbW92ZWQgYWZ0ZXIgY2FsbGluZy5cbiAgICAgKiBAcmV0dXJuIHtPYmplY3R9IEN1cnJlbnQgaW5zdGFuY2Ugb2YgRXZlbnRFbWl0dGVyIGZvciBjaGFpbmluZy5cbiAgICAgKi9cbiAgICBwcm90by5hZGRMaXN0ZW5lciA9IGZ1bmN0aW9uIGFkZExpc3RlbmVyKGV2dCwgbGlzdGVuZXIpIHtcbiAgICAgICAgdmFyIGxpc3RlbmVycyA9IHRoaXMuZ2V0TGlzdGVuZXJzQXNPYmplY3QoZXZ0KTtcbiAgICAgICAgdmFyIGxpc3RlbmVySXNXcmFwcGVkID0gdHlwZW9mIGxpc3RlbmVyID09PSAnb2JqZWN0JztcbiAgICAgICAgdmFyIGtleTtcblxuICAgICAgICBmb3IgKGtleSBpbiBsaXN0ZW5lcnMpIHtcbiAgICAgICAgICAgIGlmIChsaXN0ZW5lcnMuaGFzT3duUHJvcGVydHkoa2V5KSAmJiBpbmRleE9mTGlzdGVuZXIobGlzdGVuZXJzW2tleV0sIGxpc3RlbmVyKSA9PT0gLTEpIHtcbiAgICAgICAgICAgICAgICBsaXN0ZW5lcnNba2V5XS5wdXNoKGxpc3RlbmVySXNXcmFwcGVkID8gbGlzdGVuZXIgOiB7XG4gICAgICAgICAgICAgICAgICAgIGxpc3RlbmVyOiBsaXN0ZW5lcixcbiAgICAgICAgICAgICAgICAgICAgb25jZTogZmFsc2VcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBBbGlhcyBvZiBhZGRMaXN0ZW5lclxuICAgICAqL1xuICAgIHByb3RvLm9uID0gYWxpYXMoJ2FkZExpc3RlbmVyJyk7XG5cbiAgICAvKipcbiAgICAgKiBTZW1pLWFsaWFzIG9mIGFkZExpc3RlbmVyLiBJdCB3aWxsIGFkZCBhIGxpc3RlbmVyIHRoYXQgd2lsbCBiZVxuICAgICAqIGF1dG9tYXRpY2FsbHkgcmVtb3ZlZCBhZnRlciBpdHMgZmlyc3QgZXhlY3V0aW9uLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtTdHJpbmd8UmVnRXhwfSBldnQgTmFtZSBvZiB0aGUgZXZlbnQgdG8gYXR0YWNoIHRoZSBsaXN0ZW5lciB0by5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBsaXN0ZW5lciBNZXRob2QgdG8gYmUgY2FsbGVkIHdoZW4gdGhlIGV2ZW50IGlzIGVtaXR0ZWQuIElmIHRoZSBmdW5jdGlvbiByZXR1cm5zIHRydWUgdGhlbiBpdCB3aWxsIGJlIHJlbW92ZWQgYWZ0ZXIgY2FsbGluZy5cbiAgICAgKiBAcmV0dXJuIHtPYmplY3R9IEN1cnJlbnQgaW5zdGFuY2Ugb2YgRXZlbnRFbWl0dGVyIGZvciBjaGFpbmluZy5cbiAgICAgKi9cbiAgICBwcm90by5hZGRPbmNlTGlzdGVuZXIgPSBmdW5jdGlvbiBhZGRPbmNlTGlzdGVuZXIoZXZ0LCBsaXN0ZW5lcikge1xuICAgICAgICByZXR1cm4gdGhpcy5hZGRMaXN0ZW5lcihldnQsIHtcbiAgICAgICAgICAgIGxpc3RlbmVyOiBsaXN0ZW5lcixcbiAgICAgICAgICAgIG9uY2U6IHRydWVcbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIEFsaWFzIG9mIGFkZE9uY2VMaXN0ZW5lci5cbiAgICAgKi9cbiAgICBwcm90by5vbmNlID0gYWxpYXMoJ2FkZE9uY2VMaXN0ZW5lcicpO1xuXG4gICAgLyoqXG4gICAgICogRGVmaW5lcyBhbiBldmVudCBuYW1lLiBUaGlzIGlzIHJlcXVpcmVkIGlmIHlvdSB3YW50IHRvIHVzZSBhIHJlZ2V4IHRvIGFkZCBhIGxpc3RlbmVyIHRvIG11bHRpcGxlIGV2ZW50cyBhdCBvbmNlLiBJZiB5b3UgZG9uJ3QgZG8gdGhpcyB0aGVuIGhvdyBkbyB5b3UgZXhwZWN0IGl0IHRvIGtub3cgd2hhdCBldmVudCB0byBhZGQgdG8/IFNob3VsZCBpdCBqdXN0IGFkZCB0byBldmVyeSBwb3NzaWJsZSBtYXRjaCBmb3IgYSByZWdleD8gTm8uIFRoYXQgaXMgc2NhcnkgYW5kIGJhZC5cbiAgICAgKiBZb3UgbmVlZCB0byB0ZWxsIGl0IHdoYXQgZXZlbnQgbmFtZXMgc2hvdWxkIGJlIG1hdGNoZWQgYnkgYSByZWdleC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBldnQgTmFtZSBvZiB0aGUgZXZlbnQgdG8gY3JlYXRlLlxuICAgICAqIEByZXR1cm4ge09iamVjdH0gQ3VycmVudCBpbnN0YW5jZSBvZiBFdmVudEVtaXR0ZXIgZm9yIGNoYWluaW5nLlxuICAgICAqL1xuICAgIHByb3RvLmRlZmluZUV2ZW50ID0gZnVuY3Rpb24gZGVmaW5lRXZlbnQoZXZ0KSB7XG4gICAgICAgIHRoaXMuZ2V0TGlzdGVuZXJzKGV2dCk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBVc2VzIGRlZmluZUV2ZW50IHRvIGRlZmluZSBtdWx0aXBsZSBldmVudHMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1N0cmluZ1tdfSBldnRzIEFuIGFycmF5IG9mIGV2ZW50IG5hbWVzIHRvIGRlZmluZS5cbiAgICAgKiBAcmV0dXJuIHtPYmplY3R9IEN1cnJlbnQgaW5zdGFuY2Ugb2YgRXZlbnRFbWl0dGVyIGZvciBjaGFpbmluZy5cbiAgICAgKi9cbiAgICBwcm90by5kZWZpbmVFdmVudHMgPSBmdW5jdGlvbiBkZWZpbmVFdmVudHMoZXZ0cykge1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGV2dHMubGVuZ3RoOyBpICs9IDEpIHtcbiAgICAgICAgICAgIHRoaXMuZGVmaW5lRXZlbnQoZXZ0c1tpXSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIFJlbW92ZXMgYSBsaXN0ZW5lciBmdW5jdGlvbiBmcm9tIHRoZSBzcGVjaWZpZWQgZXZlbnQuXG4gICAgICogV2hlbiBwYXNzZWQgYSByZWd1bGFyIGV4cHJlc3Npb24gYXMgdGhlIGV2ZW50IG5hbWUsIGl0IHdpbGwgcmVtb3ZlIHRoZSBsaXN0ZW5lciBmcm9tIGFsbCBldmVudHMgdGhhdCBtYXRjaCBpdC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7U3RyaW5nfFJlZ0V4cH0gZXZ0IE5hbWUgb2YgdGhlIGV2ZW50IHRvIHJlbW92ZSB0aGUgbGlzdGVuZXIgZnJvbS5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBsaXN0ZW5lciBNZXRob2QgdG8gcmVtb3ZlIGZyb20gdGhlIGV2ZW50LlxuICAgICAqIEByZXR1cm4ge09iamVjdH0gQ3VycmVudCBpbnN0YW5jZSBvZiBFdmVudEVtaXR0ZXIgZm9yIGNoYWluaW5nLlxuICAgICAqL1xuICAgIHByb3RvLnJlbW92ZUxpc3RlbmVyID0gZnVuY3Rpb24gcmVtb3ZlTGlzdGVuZXIoZXZ0LCBsaXN0ZW5lcikge1xuICAgICAgICB2YXIgbGlzdGVuZXJzID0gdGhpcy5nZXRMaXN0ZW5lcnNBc09iamVjdChldnQpO1xuICAgICAgICB2YXIgaW5kZXg7XG4gICAgICAgIHZhciBrZXk7XG5cbiAgICAgICAgZm9yIChrZXkgaW4gbGlzdGVuZXJzKSB7XG4gICAgICAgICAgICBpZiAobGlzdGVuZXJzLmhhc093blByb3BlcnR5KGtleSkpIHtcbiAgICAgICAgICAgICAgICBpbmRleCA9IGluZGV4T2ZMaXN0ZW5lcihsaXN0ZW5lcnNba2V5XSwgbGlzdGVuZXIpO1xuXG4gICAgICAgICAgICAgICAgaWYgKGluZGV4ICE9PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICBsaXN0ZW5lcnNba2V5XS5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBBbGlhcyBvZiByZW1vdmVMaXN0ZW5lclxuICAgICAqL1xuICAgIHByb3RvLm9mZiA9IGFsaWFzKCdyZW1vdmVMaXN0ZW5lcicpO1xuXG4gICAgLyoqXG4gICAgICogQWRkcyBsaXN0ZW5lcnMgaW4gYnVsayB1c2luZyB0aGUgbWFuaXB1bGF0ZUxpc3RlbmVycyBtZXRob2QuXG4gICAgICogSWYgeW91IHBhc3MgYW4gb2JqZWN0IGFzIHRoZSBzZWNvbmQgYXJndW1lbnQgeW91IGNhbiBhZGQgdG8gbXVsdGlwbGUgZXZlbnRzIGF0IG9uY2UuIFRoZSBvYmplY3Qgc2hvdWxkIGNvbnRhaW4ga2V5IHZhbHVlIHBhaXJzIG9mIGV2ZW50cyBhbmQgbGlzdGVuZXJzIG9yIGxpc3RlbmVyIGFycmF5cy4gWW91IGNhbiBhbHNvIHBhc3MgaXQgYW4gZXZlbnQgbmFtZSBhbmQgYW4gYXJyYXkgb2YgbGlzdGVuZXJzIHRvIGJlIGFkZGVkLlxuICAgICAqIFlvdSBjYW4gYWxzbyBwYXNzIGl0IGEgcmVndWxhciBleHByZXNzaW9uIHRvIGFkZCB0aGUgYXJyYXkgb2YgbGlzdGVuZXJzIHRvIGFsbCBldmVudHMgdGhhdCBtYXRjaCBpdC5cbiAgICAgKiBZZWFoLCB0aGlzIGZ1bmN0aW9uIGRvZXMgcXVpdGUgYSBiaXQuIFRoYXQncyBwcm9iYWJseSBhIGJhZCB0aGluZy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7U3RyaW5nfE9iamVjdHxSZWdFeHB9IGV2dCBBbiBldmVudCBuYW1lIGlmIHlvdSB3aWxsIHBhc3MgYW4gYXJyYXkgb2YgbGlzdGVuZXJzIG5leHQuIEFuIG9iamVjdCBpZiB5b3Ugd2lzaCB0byBhZGQgdG8gbXVsdGlwbGUgZXZlbnRzIGF0IG9uY2UuXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbltdfSBbbGlzdGVuZXJzXSBBbiBvcHRpb25hbCBhcnJheSBvZiBsaXN0ZW5lciBmdW5jdGlvbnMgdG8gYWRkLlxuICAgICAqIEByZXR1cm4ge09iamVjdH0gQ3VycmVudCBpbnN0YW5jZSBvZiBFdmVudEVtaXR0ZXIgZm9yIGNoYWluaW5nLlxuICAgICAqL1xuICAgIHByb3RvLmFkZExpc3RlbmVycyA9IGZ1bmN0aW9uIGFkZExpc3RlbmVycyhldnQsIGxpc3RlbmVycykge1xuICAgICAgICAvLyBQYXNzIHRocm91Z2ggdG8gbWFuaXB1bGF0ZUxpc3RlbmVyc1xuICAgICAgICByZXR1cm4gdGhpcy5tYW5pcHVsYXRlTGlzdGVuZXJzKGZhbHNlLCBldnQsIGxpc3RlbmVycyk7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIFJlbW92ZXMgbGlzdGVuZXJzIGluIGJ1bGsgdXNpbmcgdGhlIG1hbmlwdWxhdGVMaXN0ZW5lcnMgbWV0aG9kLlxuICAgICAqIElmIHlvdSBwYXNzIGFuIG9iamVjdCBhcyB0aGUgc2Vjb25kIGFyZ3VtZW50IHlvdSBjYW4gcmVtb3ZlIGZyb20gbXVsdGlwbGUgZXZlbnRzIGF0IG9uY2UuIFRoZSBvYmplY3Qgc2hvdWxkIGNvbnRhaW4ga2V5IHZhbHVlIHBhaXJzIG9mIGV2ZW50cyBhbmQgbGlzdGVuZXJzIG9yIGxpc3RlbmVyIGFycmF5cy5cbiAgICAgKiBZb3UgY2FuIGFsc28gcGFzcyBpdCBhbiBldmVudCBuYW1lIGFuZCBhbiBhcnJheSBvZiBsaXN0ZW5lcnMgdG8gYmUgcmVtb3ZlZC5cbiAgICAgKiBZb3UgY2FuIGFsc28gcGFzcyBpdCBhIHJlZ3VsYXIgZXhwcmVzc2lvbiB0byByZW1vdmUgdGhlIGxpc3RlbmVycyBmcm9tIGFsbCBldmVudHMgdGhhdCBtYXRjaCBpdC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7U3RyaW5nfE9iamVjdHxSZWdFeHB9IGV2dCBBbiBldmVudCBuYW1lIGlmIHlvdSB3aWxsIHBhc3MgYW4gYXJyYXkgb2YgbGlzdGVuZXJzIG5leHQuIEFuIG9iamVjdCBpZiB5b3Ugd2lzaCB0byByZW1vdmUgZnJvbSBtdWx0aXBsZSBldmVudHMgYXQgb25jZS5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9uW119IFtsaXN0ZW5lcnNdIEFuIG9wdGlvbmFsIGFycmF5IG9mIGxpc3RlbmVyIGZ1bmN0aW9ucyB0byByZW1vdmUuXG4gICAgICogQHJldHVybiB7T2JqZWN0fSBDdXJyZW50IGluc3RhbmNlIG9mIEV2ZW50RW1pdHRlciBmb3IgY2hhaW5pbmcuXG4gICAgICovXG4gICAgcHJvdG8ucmVtb3ZlTGlzdGVuZXJzID0gZnVuY3Rpb24gcmVtb3ZlTGlzdGVuZXJzKGV2dCwgbGlzdGVuZXJzKSB7XG4gICAgICAgIC8vIFBhc3MgdGhyb3VnaCB0byBtYW5pcHVsYXRlTGlzdGVuZXJzXG4gICAgICAgIHJldHVybiB0aGlzLm1hbmlwdWxhdGVMaXN0ZW5lcnModHJ1ZSwgZXZ0LCBsaXN0ZW5lcnMpO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBFZGl0cyBsaXN0ZW5lcnMgaW4gYnVsay4gVGhlIGFkZExpc3RlbmVycyBhbmQgcmVtb3ZlTGlzdGVuZXJzIG1ldGhvZHMgYm90aCB1c2UgdGhpcyB0byBkbyB0aGVpciBqb2IuIFlvdSBzaG91bGQgcmVhbGx5IHVzZSB0aG9zZSBpbnN0ZWFkLCB0aGlzIGlzIGEgbGl0dGxlIGxvd2VyIGxldmVsLlxuICAgICAqIFRoZSBmaXJzdCBhcmd1bWVudCB3aWxsIGRldGVybWluZSBpZiB0aGUgbGlzdGVuZXJzIGFyZSByZW1vdmVkICh0cnVlKSBvciBhZGRlZCAoZmFsc2UpLlxuICAgICAqIElmIHlvdSBwYXNzIGFuIG9iamVjdCBhcyB0aGUgc2Vjb25kIGFyZ3VtZW50IHlvdSBjYW4gYWRkL3JlbW92ZSBmcm9tIG11bHRpcGxlIGV2ZW50cyBhdCBvbmNlLiBUaGUgb2JqZWN0IHNob3VsZCBjb250YWluIGtleSB2YWx1ZSBwYWlycyBvZiBldmVudHMgYW5kIGxpc3RlbmVycyBvciBsaXN0ZW5lciBhcnJheXMuXG4gICAgICogWW91IGNhbiBhbHNvIHBhc3MgaXQgYW4gZXZlbnQgbmFtZSBhbmQgYW4gYXJyYXkgb2YgbGlzdGVuZXJzIHRvIGJlIGFkZGVkL3JlbW92ZWQuXG4gICAgICogWW91IGNhbiBhbHNvIHBhc3MgaXQgYSByZWd1bGFyIGV4cHJlc3Npb24gdG8gbWFuaXB1bGF0ZSB0aGUgbGlzdGVuZXJzIG9mIGFsbCBldmVudHMgdGhhdCBtYXRjaCBpdC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7Qm9vbGVhbn0gcmVtb3ZlIFRydWUgaWYgeW91IHdhbnQgdG8gcmVtb3ZlIGxpc3RlbmVycywgZmFsc2UgaWYgeW91IHdhbnQgdG8gYWRkLlxuICAgICAqIEBwYXJhbSB7U3RyaW5nfE9iamVjdHxSZWdFeHB9IGV2dCBBbiBldmVudCBuYW1lIGlmIHlvdSB3aWxsIHBhc3MgYW4gYXJyYXkgb2YgbGlzdGVuZXJzIG5leHQuIEFuIG9iamVjdCBpZiB5b3Ugd2lzaCB0byBhZGQvcmVtb3ZlIGZyb20gbXVsdGlwbGUgZXZlbnRzIGF0IG9uY2UuXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbltdfSBbbGlzdGVuZXJzXSBBbiBvcHRpb25hbCBhcnJheSBvZiBsaXN0ZW5lciBmdW5jdGlvbnMgdG8gYWRkL3JlbW92ZS5cbiAgICAgKiBAcmV0dXJuIHtPYmplY3R9IEN1cnJlbnQgaW5zdGFuY2Ugb2YgRXZlbnRFbWl0dGVyIGZvciBjaGFpbmluZy5cbiAgICAgKi9cbiAgICBwcm90by5tYW5pcHVsYXRlTGlzdGVuZXJzID0gZnVuY3Rpb24gbWFuaXB1bGF0ZUxpc3RlbmVycyhyZW1vdmUsIGV2dCwgbGlzdGVuZXJzKSB7XG4gICAgICAgIHZhciBpO1xuICAgICAgICB2YXIgdmFsdWU7XG4gICAgICAgIHZhciBzaW5nbGUgPSByZW1vdmUgPyB0aGlzLnJlbW92ZUxpc3RlbmVyIDogdGhpcy5hZGRMaXN0ZW5lcjtcbiAgICAgICAgdmFyIG11bHRpcGxlID0gcmVtb3ZlID8gdGhpcy5yZW1vdmVMaXN0ZW5lcnMgOiB0aGlzLmFkZExpc3RlbmVycztcblxuICAgICAgICAvLyBJZiBldnQgaXMgYW4gb2JqZWN0IHRoZW4gcGFzcyBlYWNoIG9mIGl0cyBwcm9wZXJ0aWVzIHRvIHRoaXMgbWV0aG9kXG4gICAgICAgIGlmICh0eXBlb2YgZXZ0ID09PSAnb2JqZWN0JyAmJiAhKGV2dCBpbnN0YW5jZW9mIFJlZ0V4cCkpIHtcbiAgICAgICAgICAgIGZvciAoaSBpbiBldnQpIHtcbiAgICAgICAgICAgICAgICBpZiAoZXZ0Lmhhc093blByb3BlcnR5KGkpICYmICh2YWx1ZSA9IGV2dFtpXSkpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gUGFzcyB0aGUgc2luZ2xlIGxpc3RlbmVyIHN0cmFpZ2h0IHRocm91Z2ggdG8gdGhlIHNpbmd1bGFyIG1ldGhvZFxuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHZhbHVlID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzaW5nbGUuY2FsbCh0aGlzLCBpLCB2YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBPdGhlcndpc2UgcGFzcyBiYWNrIHRvIHRoZSBtdWx0aXBsZSBmdW5jdGlvblxuICAgICAgICAgICAgICAgICAgICAgICAgbXVsdGlwbGUuY2FsbCh0aGlzLCBpLCB2YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAvLyBTbyBldnQgbXVzdCBiZSBhIHN0cmluZ1xuICAgICAgICAgICAgLy8gQW5kIGxpc3RlbmVycyBtdXN0IGJlIGFuIGFycmF5IG9mIGxpc3RlbmVyc1xuICAgICAgICAgICAgLy8gTG9vcCBvdmVyIGl0IGFuZCBwYXNzIGVhY2ggb25lIHRvIHRoZSBtdWx0aXBsZSBtZXRob2RcbiAgICAgICAgICAgIGkgPSBsaXN0ZW5lcnMubGVuZ3RoO1xuICAgICAgICAgICAgd2hpbGUgKGktLSkge1xuICAgICAgICAgICAgICAgIHNpbmdsZS5jYWxsKHRoaXMsIGV2dCwgbGlzdGVuZXJzW2ldKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBSZW1vdmVzIGFsbCBsaXN0ZW5lcnMgZnJvbSBhIHNwZWNpZmllZCBldmVudC5cbiAgICAgKiBJZiB5b3UgZG8gbm90IHNwZWNpZnkgYW4gZXZlbnQgdGhlbiBhbGwgbGlzdGVuZXJzIHdpbGwgYmUgcmVtb3ZlZC5cbiAgICAgKiBUaGF0IG1lYW5zIGV2ZXJ5IGV2ZW50IHdpbGwgYmUgZW1wdGllZC5cbiAgICAgKiBZb3UgY2FuIGFsc28gcGFzcyBhIHJlZ2V4IHRvIHJlbW92ZSBhbGwgZXZlbnRzIHRoYXQgbWF0Y2ggaXQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1N0cmluZ3xSZWdFeHB9IFtldnRdIE9wdGlvbmFsIG5hbWUgb2YgdGhlIGV2ZW50IHRvIHJlbW92ZSBhbGwgbGlzdGVuZXJzIGZvci4gV2lsbCByZW1vdmUgZnJvbSBldmVyeSBldmVudCBpZiBub3QgcGFzc2VkLlxuICAgICAqIEByZXR1cm4ge09iamVjdH0gQ3VycmVudCBpbnN0YW5jZSBvZiBFdmVudEVtaXR0ZXIgZm9yIGNoYWluaW5nLlxuICAgICAqL1xuICAgIHByb3RvLnJlbW92ZUV2ZW50ID0gZnVuY3Rpb24gcmVtb3ZlRXZlbnQoZXZ0KSB7XG4gICAgICAgIHZhciB0eXBlID0gdHlwZW9mIGV2dDtcbiAgICAgICAgdmFyIGV2ZW50cyA9IHRoaXMuX2dldEV2ZW50cygpO1xuICAgICAgICB2YXIga2V5O1xuXG4gICAgICAgIC8vIFJlbW92ZSBkaWZmZXJlbnQgdGhpbmdzIGRlcGVuZGluZyBvbiB0aGUgc3RhdGUgb2YgZXZ0XG4gICAgICAgIGlmICh0eXBlID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgLy8gUmVtb3ZlIGFsbCBsaXN0ZW5lcnMgZm9yIHRoZSBzcGVjaWZpZWQgZXZlbnRcbiAgICAgICAgICAgIGRlbGV0ZSBldmVudHNbZXZ0XTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChldnQgaW5zdGFuY2VvZiBSZWdFeHApIHtcbiAgICAgICAgICAgIC8vIFJlbW92ZSBhbGwgZXZlbnRzIG1hdGNoaW5nIHRoZSByZWdleC5cbiAgICAgICAgICAgIGZvciAoa2V5IGluIGV2ZW50cykge1xuICAgICAgICAgICAgICAgIGlmIChldmVudHMuaGFzT3duUHJvcGVydHkoa2V5KSAmJiBldnQudGVzdChrZXkpKSB7XG4gICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBldmVudHNba2V5XTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAvLyBSZW1vdmUgYWxsIGxpc3RlbmVycyBpbiBhbGwgZXZlbnRzXG4gICAgICAgICAgICBkZWxldGUgdGhpcy5fZXZlbnRzO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIEFsaWFzIG9mIHJlbW92ZUV2ZW50LlxuICAgICAqXG4gICAgICogQWRkZWQgdG8gbWlycm9yIHRoZSBub2RlIEFQSS5cbiAgICAgKi9cbiAgICBwcm90by5yZW1vdmVBbGxMaXN0ZW5lcnMgPSBhbGlhcygncmVtb3ZlRXZlbnQnKTtcblxuICAgIC8qKlxuICAgICAqIEVtaXRzIGFuIGV2ZW50IG9mIHlvdXIgY2hvaWNlLlxuICAgICAqIFdoZW4gZW1pdHRlZCwgZXZlcnkgbGlzdGVuZXIgYXR0YWNoZWQgdG8gdGhhdCBldmVudCB3aWxsIGJlIGV4ZWN1dGVkLlxuICAgICAqIElmIHlvdSBwYXNzIHRoZSBvcHRpb25hbCBhcmd1bWVudCBhcnJheSB0aGVuIHRob3NlIGFyZ3VtZW50cyB3aWxsIGJlIHBhc3NlZCB0byBldmVyeSBsaXN0ZW5lciB1cG9uIGV4ZWN1dGlvbi5cbiAgICAgKiBCZWNhdXNlIGl0IHVzZXMgYGFwcGx5YCwgeW91ciBhcnJheSBvZiBhcmd1bWVudHMgd2lsbCBiZSBwYXNzZWQgYXMgaWYgeW91IHdyb3RlIHRoZW0gb3V0IHNlcGFyYXRlbHkuXG4gICAgICogU28gdGhleSB3aWxsIG5vdCBhcnJpdmUgd2l0aGluIHRoZSBhcnJheSBvbiB0aGUgb3RoZXIgc2lkZSwgdGhleSB3aWxsIGJlIHNlcGFyYXRlLlxuICAgICAqIFlvdSBjYW4gYWxzbyBwYXNzIGEgcmVndWxhciBleHByZXNzaW9uIHRvIGVtaXQgdG8gYWxsIGV2ZW50cyB0aGF0IG1hdGNoIGl0LlxuICAgICAqXG4gICAgICogQHBhcmFtIHtTdHJpbmd8UmVnRXhwfSBldnQgTmFtZSBvZiB0aGUgZXZlbnQgdG8gZW1pdCBhbmQgZXhlY3V0ZSBsaXN0ZW5lcnMgZm9yLlxuICAgICAqIEBwYXJhbSB7QXJyYXl9IFthcmdzXSBPcHRpb25hbCBhcnJheSBvZiBhcmd1bWVudHMgdG8gYmUgcGFzc2VkIHRvIGVhY2ggbGlzdGVuZXIuXG4gICAgICogQHJldHVybiB7T2JqZWN0fSBDdXJyZW50IGluc3RhbmNlIG9mIEV2ZW50RW1pdHRlciBmb3IgY2hhaW5pbmcuXG4gICAgICovXG4gICAgcHJvdG8uZW1pdEV2ZW50ID0gZnVuY3Rpb24gZW1pdEV2ZW50KGV2dCwgYXJncykge1xuICAgICAgICB2YXIgbGlzdGVuZXJzID0gdGhpcy5nZXRMaXN0ZW5lcnNBc09iamVjdChldnQpO1xuICAgICAgICB2YXIgbGlzdGVuZXI7XG4gICAgICAgIHZhciBpO1xuICAgICAgICB2YXIga2V5O1xuICAgICAgICB2YXIgcmVzcG9uc2U7XG5cbiAgICAgICAgZm9yIChrZXkgaW4gbGlzdGVuZXJzKSB7XG4gICAgICAgICAgICBpZiAobGlzdGVuZXJzLmhhc093blByb3BlcnR5KGtleSkpIHtcbiAgICAgICAgICAgICAgICBpID0gbGlzdGVuZXJzW2tleV0ubGVuZ3RoO1xuXG4gICAgICAgICAgICAgICAgd2hpbGUgKGktLSkge1xuICAgICAgICAgICAgICAgICAgICAvLyBJZiB0aGUgbGlzdGVuZXIgcmV0dXJucyB0cnVlIHRoZW4gaXQgc2hhbGwgYmUgcmVtb3ZlZCBmcm9tIHRoZSBldmVudFxuICAgICAgICAgICAgICAgICAgICAvLyBUaGUgZnVuY3Rpb24gaXMgZXhlY3V0ZWQgZWl0aGVyIHdpdGggYSBiYXNpYyBjYWxsIG9yIGFuIGFwcGx5IGlmIHRoZXJlIGlzIGFuIGFyZ3MgYXJyYXlcbiAgICAgICAgICAgICAgICAgICAgbGlzdGVuZXIgPSBsaXN0ZW5lcnNba2V5XVtpXTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAobGlzdGVuZXIub25jZSA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW1vdmVMaXN0ZW5lcihldnQsIGxpc3RlbmVyLmxpc3RlbmVyKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlID0gbGlzdGVuZXIubGlzdGVuZXIuYXBwbHkodGhpcywgYXJncyB8fCBbXSk7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlID09PSB0aGlzLl9nZXRPbmNlUmV0dXJuVmFsdWUoKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW1vdmVMaXN0ZW5lcihldnQsIGxpc3RlbmVyLmxpc3RlbmVyKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBBbGlhcyBvZiBlbWl0RXZlbnRcbiAgICAgKi9cbiAgICBwcm90by50cmlnZ2VyID0gYWxpYXMoJ2VtaXRFdmVudCcpO1xuXG4gICAgLyoqXG4gICAgICogU3VidGx5IGRpZmZlcmVudCBmcm9tIGVtaXRFdmVudCBpbiB0aGF0IGl0IHdpbGwgcGFzcyBpdHMgYXJndW1lbnRzIG9uIHRvIHRoZSBsaXN0ZW5lcnMsIGFzIG9wcG9zZWQgdG8gdGFraW5nIGEgc2luZ2xlIGFycmF5IG9mIGFyZ3VtZW50cyB0byBwYXNzIG9uLlxuICAgICAqIEFzIHdpdGggZW1pdEV2ZW50LCB5b3UgY2FuIHBhc3MgYSByZWdleCBpbiBwbGFjZSBvZiB0aGUgZXZlbnQgbmFtZSB0byBlbWl0IHRvIGFsbCBldmVudHMgdGhhdCBtYXRjaCBpdC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7U3RyaW5nfFJlZ0V4cH0gZXZ0IE5hbWUgb2YgdGhlIGV2ZW50IHRvIGVtaXQgYW5kIGV4ZWN1dGUgbGlzdGVuZXJzIGZvci5cbiAgICAgKiBAcGFyYW0gey4uLip9IE9wdGlvbmFsIGFkZGl0aW9uYWwgYXJndW1lbnRzIHRvIGJlIHBhc3NlZCB0byBlYWNoIGxpc3RlbmVyLlxuICAgICAqIEByZXR1cm4ge09iamVjdH0gQ3VycmVudCBpbnN0YW5jZSBvZiBFdmVudEVtaXR0ZXIgZm9yIGNoYWluaW5nLlxuICAgICAqL1xuICAgIHByb3RvLmVtaXQgPSBmdW5jdGlvbiBlbWl0KGV2dCkge1xuICAgICAgICB2YXIgYXJncyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMSk7XG4gICAgICAgIHJldHVybiB0aGlzLmVtaXRFdmVudChldnQsIGFyZ3MpO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBTZXRzIHRoZSBjdXJyZW50IHZhbHVlIHRvIGNoZWNrIGFnYWluc3Qgd2hlbiBleGVjdXRpbmcgbGlzdGVuZXJzLiBJZiBhXG4gICAgICogbGlzdGVuZXJzIHJldHVybiB2YWx1ZSBtYXRjaGVzIHRoZSBvbmUgc2V0IGhlcmUgdGhlbiBpdCB3aWxsIGJlIHJlbW92ZWRcbiAgICAgKiBhZnRlciBleGVjdXRpb24uIFRoaXMgdmFsdWUgZGVmYXVsdHMgdG8gdHJ1ZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIG5ldyB2YWx1ZSB0byBjaGVjayBmb3Igd2hlbiBleGVjdXRpbmcgbGlzdGVuZXJzLlxuICAgICAqIEByZXR1cm4ge09iamVjdH0gQ3VycmVudCBpbnN0YW5jZSBvZiBFdmVudEVtaXR0ZXIgZm9yIGNoYWluaW5nLlxuICAgICAqL1xuICAgIHByb3RvLnNldE9uY2VSZXR1cm5WYWx1ZSA9IGZ1bmN0aW9uIHNldE9uY2VSZXR1cm5WYWx1ZSh2YWx1ZSkge1xuICAgICAgICB0aGlzLl9vbmNlUmV0dXJuVmFsdWUgPSB2YWx1ZTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIEZldGNoZXMgdGhlIGN1cnJlbnQgdmFsdWUgdG8gY2hlY2sgYWdhaW5zdCB3aGVuIGV4ZWN1dGluZyBsaXN0ZW5lcnMuIElmXG4gICAgICogdGhlIGxpc3RlbmVycyByZXR1cm4gdmFsdWUgbWF0Y2hlcyB0aGlzIG9uZSB0aGVuIGl0IHNob3VsZCBiZSByZW1vdmVkXG4gICAgICogYXV0b21hdGljYWxseS4gSXQgd2lsbCByZXR1cm4gdHJ1ZSBieSBkZWZhdWx0LlxuICAgICAqXG4gICAgICogQHJldHVybiB7KnxCb29sZWFufSBUaGUgY3VycmVudCB2YWx1ZSB0byBjaGVjayBmb3Igb3IgdGhlIGRlZmF1bHQsIHRydWUuXG4gICAgICogQGFwaSBwcml2YXRlXG4gICAgICovXG4gICAgcHJvdG8uX2dldE9uY2VSZXR1cm5WYWx1ZSA9IGZ1bmN0aW9uIF9nZXRPbmNlUmV0dXJuVmFsdWUoKSB7XG4gICAgICAgIGlmICh0aGlzLmhhc093blByb3BlcnR5KCdfb25jZVJldHVyblZhbHVlJykpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9vbmNlUmV0dXJuVmFsdWU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBGZXRjaGVzIHRoZSBldmVudHMgb2JqZWN0IGFuZCBjcmVhdGVzIG9uZSBpZiByZXF1aXJlZC5cbiAgICAgKlxuICAgICAqIEByZXR1cm4ge09iamVjdH0gVGhlIGV2ZW50cyBzdG9yYWdlIG9iamVjdC5cbiAgICAgKiBAYXBpIHByaXZhdGVcbiAgICAgKi9cbiAgICBwcm90by5fZ2V0RXZlbnRzID0gZnVuY3Rpb24gX2dldEV2ZW50cygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2V2ZW50cyB8fCAodGhpcy5fZXZlbnRzID0ge30pO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBSZXZlcnRzIHRoZSBnbG9iYWwge0BsaW5rIEV2ZW50RW1pdHRlcn0gdG8gaXRzIHByZXZpb3VzIHZhbHVlIGFuZCByZXR1cm5zIGEgcmVmZXJlbmNlIHRvIHRoaXMgdmVyc2lvbi5cbiAgICAgKlxuICAgICAqIEByZXR1cm4ge0Z1bmN0aW9ufSBOb24gY29uZmxpY3RpbmcgRXZlbnRFbWl0dGVyIGNsYXNzLlxuICAgICAqL1xuICAgIEV2ZW50RW1pdHRlci5ub0NvbmZsaWN0ID0gZnVuY3Rpb24gbm9Db25mbGljdCgpIHtcbiAgICAgICAgZXhwb3J0cy5FdmVudEVtaXR0ZXIgPSBvcmlnaW5hbEdsb2JhbFZhbHVlO1xuICAgICAgICByZXR1cm4gRXZlbnRFbWl0dGVyO1xuICAgIH07XG5cbiAgICAvLyBFeHBvc2UgdGhlIGNsYXNzIGVpdGhlciB2aWEgQU1ELCBDb21tb25KUyBvciB0aGUgZ2xvYmFsIG9iamVjdFxuICAgIGlmICh0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpIHtcbiAgICAgICAgZGVmaW5lKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBFdmVudEVtaXR0ZXI7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBlbHNlIGlmICh0eXBlb2YgbW9kdWxlID09PSAnb2JqZWN0JyAmJiBtb2R1bGUuZXhwb3J0cyl7XG4gICAgICAgIG1vZHVsZS5leHBvcnRzID0gRXZlbnRFbWl0dGVyO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgZXhwb3J0cy5FdmVudEVtaXR0ZXIgPSBFdmVudEVtaXR0ZXI7XG4gICAgfVxufS5jYWxsKHRoaXMpKTtcbiIsIiggZnVuY3Rpb24oICQgKSB7XG5cbiAgICB2YXIgT3JkZXJseSA9IGZ1bmN0aW9uKCAkZWxlbWVudHMsIG9wdGlvbnMgKSB7XG4gICAgICAgIHRoaXMuX19pbml0KCAkZWxlbWVudHMsIG9wdGlvbnMgKTtcbiAgICB9O1xuXG4gICAgdmFyIG8gPSBPcmRlcmx5LCBwID0gby5wcm90b3R5cGU7XG5cbiAgICBvLmNvdW50ZXIgPSAwO1xuXG4gICAgLy8gLS0gQ29uc3RydWN0b3IgLS1cblxuICAgIHAuX19pbml0ID0gZnVuY3Rpb24oICRlbGVtZW50cywgb3B0aW9ucyApIHtcbiAgICAgICAgdGhpcy4kZWxlbWVudHMgPSAkZWxlbWVudHM7XG4gICAgICAgIHRoaXMub3B0aW9ucyAgID0gJC5leHRlbmQoIHt9LCB0aGlzLmRlZmF1bHRzLCBvcHRpb25zICk7XG4gICAgfTtcblxuICAgIHAuZGVmYXVsdHMgPSB7XG4gICAgICAgIHJlc2V0SGVpZ2h0OiAnJyAvLyBlZy4gJ2F1dG8nLCAnMzZweCcgLi4uXG4gICAgfTtcblxuICAgIC8vIC0tIEV2ZW50IEhhbmRsZXJzIC0tXG5cbiAgICBwLmF0dGFjaCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBpZiAoIHRoaXMuYXR0YWNoZWQgPT09IHVuZGVmaW5lZCApIHtcbiAgICAgICAgICAgICQoIHdpbmRvdyApLm9uKCAncmVzaXplJywgdGhpcy5oYW5kbGVycygpLnJlc2l6ZSApO1xuXG4gICAgICAgICAgICB0aGlzLmF0dGFjaGVkID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICBwLmhhbmRsZXJzID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciB0aGF0ID0gdGhpcztcblxuICAgICAgICByZXR1cm4geyByZXNpemU6IGZ1bmN0aW9uKCBlICkge1xuICAgICAgICAgICAgdGhhdC5fZWFjaFJvdyggZnVuY3Rpb24oICRlbGVtZW50cyApIHtcbiAgICAgICAgICAgICAgICB0aGF0Ll9yZXNpemVFbGVtZW50cyggJGVsZW1lbnRzICk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfX07XG4gICAgfTtcblxuICAgIC8vIC0tIFByaXZhdGUoLWlzaCkgLS1cblxuICAgIHAuX2NvbHVtbkNvdW50ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBsYXN0UG9zID0gMCwgcG9zID0gMCwgY291bnQgPSAwO1xuXG4gICAgICAgIHRoaXMuJGVsZW1lbnRzLmVhY2goIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcG9zID0gJCggdGhpcyApLm9mZnNldCgpLmxlZnQsIGNvdW50ICs9IDE7XG5cbiAgICAgICAgICAgIGlmICggcG9zIDw9IGxhc3RQb3MgJiYgbGFzdFBvcyAhPT0gMCApIHtcbiAgICAgICAgICAgICAgICBjb3VudCAtPSAxOyByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGxhc3RQb3MgPSBwb3M7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiBjb3VudDtcbiAgICB9O1xuXG4gICAgcC5fZWFjaFJvdyA9IGZ1bmN0aW9uKCBjYWxsYmFjayApIHtcbiAgICAgICAgdmFyIGQgPSB0aGlzLl9kaW1lbnNpb25zKCk7XG5cbiAgICAgICAgZm9yICggdmFyIHN0YXJ0LCAkcm93LCBpID0gMDsgaSA8IGQucjsgaSsrICkge1xuICAgICAgICAgICAgc3RhcnQgPSBkLmMgKiBpO1xuICAgICAgICAgICAgJHJvdyAgPSB0aGlzLiRlbGVtZW50cy5zbGljZSggc3RhcnQsIHN0YXJ0ICsgZC5jICk7XG5cbiAgICAgICAgICAgIGNhbGxiYWNrKCAkcm93LCBpICk7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgcC5fZGltZW5zaW9ucyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgY29sdW1ucyA9IHRoaXMuX2NvbHVtbkNvdW50KClcbiAgICAgICAgICAsIHJvd3MgICAgPSBNYXRoLmNlaWwoIHRoaXMuJGVsZW1lbnRzLmxlbmd0aCAvIGNvbHVtbnMgKTtcblxuICAgICAgICByZXR1cm4geyBjOiBjb2x1bW5zLCByOiByb3dzIH07XG4gICAgfTtcblxuICAgIHAuX3Jlc2l6ZUVsZW1lbnRzID0gZnVuY3Rpb24oICRlbGVtZW50cyApIHtcbiAgICAgICAgdmFyIGhlaWdodCAgPSB0aGlzLl9tYXhIZWlnaHQoICRlbGVtZW50cyApXG4gICAgICAgICAgLCBvcHRpb25zID0gdGhpcy5vcHRpb25zO1xuXG4gICAgICAgICRlbGVtZW50cy5lYWNoKCBmdW5jdGlvbiggaSwgZWxlbWVudCApIHtcbiAgICAgICAgICAgICQoIGVsZW1lbnQgKS5jc3MoICdoZWlnaHQnLCBoZWlnaHQgKTtcbiAgICAgICAgICAgICQoIGVsZW1lbnQgKS50cmlnZ2VyKCAnb3JkZXJseS5yZXNpemUnLCBbXG4gICAgICAgICAgICAgICAgZWxlbWVudFxuICAgICAgICAgICAgICAsIGhlaWdodFxuICAgICAgICAgICAgICAsIGlcbiAgICAgICAgICAgICAgLCAkZWxlbWVudHMubGVuZ3RoXG4gICAgICAgICAgICAgICwgb3B0aW9uc1xuICAgICAgICAgICAgXSk7XG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICBwLl9tYXhIZWlnaHQgPSBmdW5jdGlvbiggJGVsZW1lbnRzICkge1xuICAgICAgICB2YXIgdmFsdWUsIGN1cnJlbnQsIG1heCA9IDAsIG9wdGlvbnMgPSB0aGlzLm9wdGlvbnMsIGJveDtcblxuICAgICAgICAkZWxlbWVudHMuZWFjaCggZnVuY3Rpb24oIGksIGVsZW1lbnQgKSB7XG4gICAgICAgICAgICAkKCBlbGVtZW50ICkudHJpZ2dlciggJ29yZGVybHkucmVzZXQnLCBbXG4gICAgICAgICAgICAgICAgZWxlbWVudFxuICAgICAgICAgICAgICAsIG9wdGlvbnMucmVzZXRIZWlnaHRcbiAgICAgICAgICAgICAgLCBpXG4gICAgICAgICAgICAgICwgJGVsZW1lbnRzLmxlbmd0aFxuICAgICAgICAgICAgICAsIG9wdGlvbnNcbiAgICAgICAgICAgIF0pO1xuXG4gICAgICAgICAgICAkKCBlbGVtZW50ICkuY3NzKCAnaGVpZ2h0Jywgb3B0aW9ucy5yZXNldEhlaWdodCApO1xuICAgICAgICAgICAgYm94ICAgICA9IGVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgICAgICBjdXJyZW50ID0gYm94LmJvdHRvbSAtIGJveC50b3A7XG5cbiAgICAgICAgICAgIGlmICggY3VycmVudCA+IG1heCApIHtcbiAgICAgICAgICAgICAgICBtYXggPSBjdXJyZW50O1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICB2YWx1ZSA9IE1hdGgucm91bmQoIG1heCApLnRvU3RyaW5nKCk7IC8vIGJyb3dzZXIgY29uc2lzdGVudCByb3VuZGluZ1xuXG4gICAgICAgIHJldHVybiB2YWx1ZSArPSAncHgnO1xuICAgIH07XG5cbiAgICAvLyAtLSBqUXVlcnkgUGx1Z2luIC0tXG5cbiAgICB2YXIgZyA9IHt9O1xuXG4gICAgZy5fZGVsZWdhdGUgPSBmdW5jdGlvbiggb3B0aW9ucyApIHtcbiAgICAgICAgdmFyIG1ldGhvZCA9ICdfJyArICggb3B0aW9ucyAmJiBvcHRpb25zLm1ldGhvZCB8fCAncmVnaXN0ZXInIClcbiAgICAgICAgICAsIG0gICAgICA9IGdbbWV0aG9kXTtcblxuICAgICAgICBtLmNhbGwoIHRoaXMsIG9wdGlvbnMgKTtcbiAgICB9O1xuXG4gICAgLy8gQ2FsbCBmb3IgZWFjaCBzcGVjaWZpYyBjb2xsZWN0aW9uIG9mIGVsZW1lbnRzIHRvIGFsaWduIHBlciByb3cuXG5cbiAgICBnLl9yZWdpc3RlciA9IGZ1bmN0aW9uKCBvcHRpb25zICkge1xuICAgICAgICB2YXIgbyA9IG5ldyBPcmRlcmx5KCB0aGlzLCBvcHRpb25zICk7XG5cbiAgICAgICAgby5hdHRhY2goKTtcbiAgICAgICAgby5oYW5kbGVycygpLnJlc2l6ZSgpO1xuICAgIH07XG5cbiAgICAvLyBDYWxsIG9uIGEgY29sbGVjdGlvbiBvZiBwYXJlbnQgY29udGFpbmVycy4gRWFjaCBkaXJlY3QgY2hpbGQgZWxlbWVudFxuICAgIC8vIHdpbGwgYmUgZ2l2ZW4gb3JkZXJseSgpLlxuXG4gICAgZy5fY2hpbGRyZW4gPSBmdW5jdGlvbiggb3B0aW9ucyApIHtcbiAgICAgICAgdmFyIGxlbmd0aCAgPSB0aGlzWzBdLmNoaWxkcmVuLmxlbmd0aFxuICAgICAgICAgICwgY291bnRlciA9IG8uY291bnRlcisrOyAvLyBlbnN1cmVzIHVuaXF1ZSBzZWxlY3RvcnNcblxuICAgICAgICBnLl9jaGlsZHJlbkRhdGEuY2FsbCggdGhpcywgY291bnRlciApO1xuICAgICAgICBnLl9yZWdpc3RlckNoaWxkcmVuKCBsZW5ndGgsIGNvdW50ZXIsIG9wdGlvbnMgKTtcbiAgICAgICAgZy5fcmVnaXN0ZXIuY2FsbCggdGhpcywgb3B0aW9ucyApO1xuICAgIH07XG5cbiAgICBnLl9jaGlsZHJlbkRhdGEgPSBmdW5jdGlvbiggY291bnRlciApIHtcbiAgICAgICAgdGhpcy5lYWNoKCBmdW5jdGlvbiggaSwgZWxlbWVudCApIHtcbiAgICAgICAgICAgICQoIGVsZW1lbnQuY2hpbGRyZW4gKS5lYWNoKCBmdW5jdGlvbiggaSwgY2hpbGQgKSB7XG4gICAgICAgICAgICAgICAgJCggY2hpbGQgKS5hdHRyKCAnZGF0YS1vcmRlcmx5JywgY291bnRlciArICc6JyArIGkgKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgZy5fcmVnaXN0ZXJDaGlsZHJlbiA9IGZ1bmN0aW9uKCBsZW5ndGgsIGNvdW50ZXIsIG9wdGlvbnMgKSB7XG4gICAgICAgIGZvciAoIHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSsrICkge1xuICAgICAgICAgICAgZy5fcmVnaXN0ZXIuY2FsbCggZy5fZmluZCggY291bnRlciwgaSApLCBvcHRpb25zICk7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgZy5fZmluZCA9IGZ1bmN0aW9uKCBjb3VudGVyLCBpICkge1xuICAgICAgICByZXR1cm4gJCggJ1tkYXRhLW9yZGVybHk9XCInICsgY291bnRlciArICc6JyArIGkgKyAnXCJdJyApO1xuICAgIH07XG5cbiAgICAvLyAtLS1cblxuICAgICQuZm4ub3JkZXJseSA9IGZ1bmN0aW9uKCBvcHRpb25zICkge1xuICAgICAgICBpZiAoIHRoaXMubGVuZ3RoID4gMCApIHtcbiAgICAgICAgICAgIGcuX2RlbGVnYXRlLmNhbGwoIHRoaXMsIG9wdGlvbnMgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG5cbn0pKCBqUXVlcnkgKTtcbiIsInZhciBpbWFnZXNMb2FkZWQgPSByZXF1aXJlKCdpbWFnZXNsb2FkZWQnKTtcblxuKGZ1bmN0aW9uKCQpIHtcbiAgXG4gIC8qKipcbiAgICogTWFpblxuICAgKioqL1xuICAgXG4gIHZhciBVbmlmb3JtVGh1bWJzID0gZnVuY3Rpb24oJGVsZSwgc2V0dGluZ3Mpe1xuICAgIHRoaXMuJGVsZSA9ICRlbGU7XG4gICAgdGhpcy5zZXR0aW5ncyA9IHNldHRpbmdzO1xuICAgIFxuICAgIHRoaXMuZm9ybWF0ZXIgPSBuZXcgVW5pZm9ybVRodW1ic0Zvcm1hdGVyKHRoaXMuJGVsZSwgdGhpcy5zZXR0aW5ncyk7XG4gICAgdGhpcy5maXR0ZXIgPSBuZXcgVW5pZm9ybVRodW1ic0ZpdHRlcih0aGlzLiRlbGUsIHRoaXMuc2V0dGluZ3MpO1xuICAgIHRoaXMuaW1hZ2VMb2FkZWQgPSBpbWFnZXNMb2FkZWQodGhpcy4kZWxlKTtcbiAgICBcbiAgICB0aGlzLmFkZEV2ZW50SGFuZGxlcnMoKTtcbiAgICB0aGlzLmhpZGVJbWFnZXMoKTtcbiAgfTtcbiAgXG4gIFVuaWZvcm1UaHVtYnMucHJvdG90eXBlLmFkZEV2ZW50SGFuZGxlcnMgPSBmdW5jdGlvbigpe1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICBcbiAgICB0aGlzLmltYWdlTG9hZGVkLm9uKCdkb25lJywgZnVuY3Rpb24oKXtcbiAgICAgIHNlbGYuZm9ybWF0ZXIuc2V0SW1hZ2VGb3JtYXQoKTtcbiAgICAgIHNlbGYuZml0dGVyLnNldEltYWdlRml0KCk7XG4gICAgICBzZWxmLnNob3dJbWFnZXMoKTtcbiAgICAgIHNlbGYuJGVsZS50cmlnZ2VyKCd1dF9pbWFnZUxvYWRlZCcpO1xuICAgIH0pO1xuICAgIFxuICAgIC8vIHJlc2l6ZSBpbWFnZXMgb24gd2luZG93IHJlc2l6ZVxuICAgIHZhciB0aW1lb3V0O1xuICAgICQod2luZG93KS5yZXNpemUoZnVuY3Rpb24oKSB7XG4gICAgICBpZiAodGltZW91dCkge1xuICAgICAgICBjbGVhclRpbWVvdXQodGltZW91dCk7XG4gICAgICB9XG4gICAgICB0aW1lb3V0ID0gc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgc2VsZi5mb3JtYXRlci5zZXRJbWFnZUZvcm1hdCgpO1xuICAgICAgICBzZWxmLmZpdHRlci5zZXRJbWFnZUZpdCgpO1xuICAgICAgfSwgMTAwKTtcbiAgICB9KTtcbiAgfTtcbiAgXG4gIFVuaWZvcm1UaHVtYnMucHJvdG90eXBlLmhpZGVJbWFnZXMgPSBmdW5jdGlvbigpe1xuICAgIHRoaXMuJGVsZS5jc3Moe1xuICAgICAgb3BhY2l0eTogMCxcbiAgICAgIG92ZXJmbG93OiAnaGlkZGVuJ1xuICAgIH0pO1xuICB9O1xuICBcbiAgVW5pZm9ybVRodW1icy5wcm90b3R5cGUuc2hvd0ltYWdlcyA9IGZ1bmN0aW9uKCl7XG4gICAgdGhpcy4kZWxlLmZhZGVUbyg5MDAsIDEpO1xuICB9O1xuICBcbiAgLyoqKlxuICAgKiBJbWFnZSBmb3JtYXRlclxuICAgKioqL1xuICAgXG4gIHZhciBVbmlmb3JtVGh1bWJzRm9ybWF0ZXIgPSBmdW5jdGlvbigkd3JhcHBlciwgc2V0dGluZ3Mpe1xuICAgIHRoaXMuJHdyYXBwZXIgPSAkd3JhcHBlcjtcbiAgICB0aGlzLnNldHRpbmdzID0gc2V0dGluZ3M7XG4gICAgdGhpcy5yYXRpbyA9IHRoaXMuZ2V0UmF0aW8oKTtcbiAgfTtcbiAgXG4gIFVuaWZvcm1UaHVtYnNGb3JtYXRlci5wcm90b3R5cGUuc2V0SW1hZ2VGb3JtYXQgPSBmdW5jdGlvbigpe1xuICAgIHZhciB3aWR0aFJhdGlvID0gdGhpcy4kd3JhcHBlci53aWR0aCgpIC8gdGhpcy5yYXRpby53aWR0aDtcbiAgICB2YXIgaGVpZ2h0UmF0aW8gPSB3aWR0aFJhdGlvICogdGhpcy5yYXRpby5oZWlnaHQ7XG4gICAgdGhpcy4kd3JhcHBlci5oZWlnaHQoaGVpZ2h0UmF0aW8pO1xuICB9O1xuICBcbiAgVW5pZm9ybVRodW1ic0Zvcm1hdGVyLnByb3RvdHlwZS5nZXRSYXRpbyA9IGZ1bmN0aW9uKCl7XG4gICAgdmFyIHJhdGlvU3RyID0gdGhpcy5fZ2V0UmF0aW9TdHJpbmcoKTtcbiAgICByZXR1cm4gdGhpcy5fZ2V0UmF0aW9Gcm9tU3RyaW5nKHJhdGlvU3RyKTtcbiAgfTtcbiAgXG4gIFVuaWZvcm1UaHVtYnNGb3JtYXRlci5wcm90b3R5cGUuX2dldFJhdGlvU3RyaW5nID0gZnVuY3Rpb24oKXtcbiAgICBzd2l0Y2ggKHRoaXMuc2V0dGluZ3MuZm9ybWF0KSB7XG4gICAgICBjYXNlICdzcXVhcmUnOlxuICAgICAgICByZXR1cm4gJzE6MSc7XG4gICAgICBjYXNlICdsYW5kc2NhcGUnOlxuICAgICAgICByZXR1cm4gdGhpcy5zZXR0aW5ncy5sYW5kc2NhcGVSYXRpbztcbiAgICAgIGNhc2UgJ3BvcnRyYWl0JzpcbiAgICAgICAgcmV0dXJuIHRoaXMuc2V0dGluZ3MucG9ydHJhaXRSYXRpbztcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiB0aGlzLnNldHRpbmdzLnJhdGlvO1xuICAgIH1cbiAgfTtcbiAgXG4gIFVuaWZvcm1UaHVtYnNGb3JtYXRlci5wcm90b3R5cGUuX2dldFJhdGlvRnJvbVN0cmluZyA9IGZ1bmN0aW9uKHJhdGlvU3RyKXtcbiAgICB2YXIgcmF0aW9BcnIgPSByYXRpb1N0ci5zcGxpdCgnOicpO1xuICAgIHJldHVybiB7XG4gICAgICAgd2lkdGg6IHJhdGlvQXJyWzBdLFxuICAgICAgaGVpZ2h0OiByYXRpb0FyclsxXVxuICAgIH07XG4gIH07XG4gIFxuICAvKioqXG4gICAqIEltYWdlIGZpdHRlclxuICAgKioqL1xuICBcbiAgdmFyIFVuaWZvcm1UaHVtYnNGaXR0ZXIgPSBmdW5jdGlvbigkd3JhcHBlciwgc2V0dGluZ3Mpe1xuICAgIHRoaXMuJHdyYXBwZXIgPSAkd3JhcHBlcjtcbiAgICB0aGlzLiRpbWFnZSA9IHRoaXMuJHdyYXBwZXIuZmluZCgnaW1nJyk7XG4gICAgdGhpcy5zZXR0aW5ncyA9IHNldHRpbmdzO1xuICAgIHRoaXMud3JhcHBlclJhdGlvO1xuICAgIHRoaXMuaW1hZ2VSYXRpbztcbiAgICB0aGlzLmltYWdlTmF0dXJhbFdpZHRoO1xuICAgIHRoaXMuaW1hZ2VOYXR1cmFsSGVpZ2h0O1xuICB9O1xuICBcbiAgVW5pZm9ybVRodW1ic0ZpdHRlci5wcm90b3R5cGUuc2V0SW1hZ2VGaXQgPSBmdW5jdGlvbigpe1xuICAgIHRoaXMuX3Jlc2V0SW1hZ2VDU1MoKTtcbiAgICBzd2l0Y2ggKHRoaXMuc2V0dGluZ3MuZml0KSB7XG4gICAgICBjYXNlICdjcm9wJzpcbiAgICAgICAgdGhpcy5fY3JvcEltYWdlKCk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnc2NhbGUnOlxuICAgICAgICB0aGlzLl9zY2FsZUltYWdlKCk7XG4gICAgICAgIGJyZWFrO1xuICAgIH1cbiAgICB0aGlzLl9hbGlnbkltYWdlKCk7XG4gIH07XG4gIFxuICBVbmlmb3JtVGh1bWJzRml0dGVyLnByb3RvdHlwZS5fY3JvcEltYWdlID0gZnVuY3Rpb24oKXtcbiAgICBpZih0aGlzLl9pbWFnZVJhdGlvKCkgPiB0aGlzLl93cmFwcGVyUmF0aW8oKSl7XG4gICAgICB0aGlzLl9maXRIb3Jpem9udGFsKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX2ZpdFZlcnRpY2FsKCk7XG4gICAgfVxuICB9O1xuICBcbiAgVW5pZm9ybVRodW1ic0ZpdHRlci5wcm90b3R5cGUuX3NjYWxlSW1hZ2UgPSBmdW5jdGlvbigpe1xuICAgIGlmKHRoaXMuX2ltYWdlUmF0aW8oKSA+IHRoaXMuX3dyYXBwZXJSYXRpbygpKXtcbiAgICAgIHRoaXMuX2ZpdFZlcnRpY2FsKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX2ZpdEhvcml6b250YWwoKTtcbiAgICB9XG4gIH07XG4gIFxuICBVbmlmb3JtVGh1bWJzRml0dGVyLnByb3RvdHlwZS5fZml0SG9yaXpvbnRhbCA9IGZ1bmN0aW9uKCkge1xuICAgIGlmICh0aGlzLl9nZXROYXR1cmFsSGVpZ2h0KHRoaXMuJGltYWdlKSA+PSB0aGlzLiR3cmFwcGVyLmhlaWdodCgpKSB7XG4gICAgICB0aGlzLiRpbWFnZS5oZWlnaHQodGhpcy4kd3JhcHBlci5oZWlnaHQoKSk7XG4gICAgfVxuICB9O1xuICBcbiAgVW5pZm9ybVRodW1ic0ZpdHRlci5wcm90b3R5cGUuX2ZpdFZlcnRpY2FsID0gZnVuY3Rpb24oKSB7XG4gICAgaWYgKHRoaXMuX2dldE5hdHVyYWxXaWR0aCh0aGlzLiRpbWFnZSkgPj0gdGhpcy4kd3JhcHBlci53aWR0aCgpKSB7XG4gICAgICB0aGlzLiRpbWFnZS53aWR0aCh0aGlzLiR3cmFwcGVyLndpZHRoKCkpO1xuICAgIH1cbiAgfTtcblxuICBVbmlmb3JtVGh1bWJzRml0dGVyLnByb3RvdHlwZS5faW1hZ2VSYXRpbyA9IGZ1bmN0aW9uKCl7XG4gICAgLy8gY2FjaGUgdGhlIGltYWdlcyByYXRpbyBiZWNhdXNlIHdlIGRvbid0IG5lZWQgdG8gY2FsY3VsYXRlIGl0IGV2ZXJ5IHRpbWVcbiAgICB0aGlzLmltYWdlUmF0aW8gPSB0aGlzLmltYWdlUmF0aW8gfHwgdGhpcy5fZ2V0TmF0dXJhbFdpZHRoKHRoaXMuJGltYWdlKSAvIHRoaXMuX2dldE5hdHVyYWxIZWlnaHQodGhpcy4kaW1hZ2UpO1xuICAgIHJldHVybiB0aGlzLmltYWdlUmF0aW87XG4gIH07XG5cbiAgVW5pZm9ybVRodW1ic0ZpdHRlci5wcm90b3R5cGUuX3dyYXBwZXJSYXRpbyA9IGZ1bmN0aW9uKCl7XG4gICAgLy8gY2FjaGUgdGhlIHdyYXBwZXJzIHJhdGlvIGJlY2F1c2Ugd2UgZG9uJ3QgbmVlZCB0byBjYWxjdWxhdGUgaXQgZXZlcnkgdGltZVxuICAgIHRoaXMud3JhcHBlclJhdGlvID0gdGhpcy53cmFwcGVyUmF0aW8gfHwgdGhpcy4kd3JhcHBlci53aWR0aCgpIC8gdGhpcy4kd3JhcHBlci5oZWlnaHQoKTtcbiAgICByZXR1cm4gdGhpcy53cmFwcGVyUmF0aW87XG4gIH07XG4gIFxuICBVbmlmb3JtVGh1bWJzRml0dGVyLnByb3RvdHlwZS5fYWxpZ25JbWFnZSA9IGZ1bmN0aW9uKCl7XG4gICAgdmFyIHN0eWxlID0ge307XG4gICAgc3R5bGUubWFyZ2luTGVmdCA9ICh0aGlzLiR3cmFwcGVyLndpZHRoKCkgLSB0aGlzLiRpbWFnZS53aWR0aCgpKSAvIDI7XG4gICAgc3dpdGNoICh0aGlzLnNldHRpbmdzLmFsaWduKSB7XG4gICAgICBjYXNlICd0b3AnOlxuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ21pZGRsZSc6XG4gICAgICAgIHN0eWxlLm1hcmdpblRvcCA9ICh0aGlzLiR3cmFwcGVyLmhlaWdodCgpIC0gdGhpcy4kaW1hZ2UuaGVpZ2h0KCkpIC8gMjtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdib3R0b20nOlxuICAgICAgICBzdHlsZS5tYXJnaW5Ub3AgPSB0aGlzLiR3cmFwcGVyLmhlaWdodCgpIC0gdGhpcy4kaW1hZ2UuaGVpZ2h0KCk7XG4gICAgICAgIGJyZWFrO1xuICAgIH1cbiAgICB0aGlzLiRpbWFnZS5jc3Moc3R5bGUpO1xuICB9O1xuICBcbiAgVW5pZm9ybVRodW1ic0ZpdHRlci5wcm90b3R5cGUuX2dldE5hdHVyYWxIZWlnaHQgPSBmdW5jdGlvbigkaW1hZ2Upe1xuICAgIGlmICghdGhpcy5pbWFnZU5hdHVyYWxIZWlnaHQpIHtcbiAgICAgIGlmICgkaW1hZ2UucHJvcCgnbmF0dXJhbEhlaWdodCcpKSB7XG4gICAgICAgIHRoaXMuaW1hZ2VOYXR1cmFsSGVpZ2h0ID0gJGltYWdlLnByb3AoJ25hdHVyYWxIZWlnaHQnKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuaW1hZ2VOYXR1cmFsSGVpZ2h0ID0gdGhpcy5fZ2V0TmF0dXJhbFNpemUoJGltYWdlKS5oZWlnaHQ7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0aGlzLmltYWdlTmF0dXJhbEhlaWdodDtcbiAgfTtcbiAgXG4gIFVuaWZvcm1UaHVtYnNGaXR0ZXIucHJvdG90eXBlLl9nZXROYXR1cmFsV2lkdGggPSBmdW5jdGlvbigkaW1hZ2Upe1xuICAgIGlmICghdGhpcy5pbWFnZU5hdHVyYWxXaWR0aCkge1xuICAgICAgaWYgKCRpbWFnZS5wcm9wKCduYXR1cmFsV2lkdGgnKSkge1xuICAgICAgICB0aGlzLmltYWdlTmF0dXJhbFdpZHRoID0gJGltYWdlLnByb3AoJ25hdHVyYWxXaWR0aCcpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5pbWFnZU5hdHVyYWxXaWR0aCA9IHRoaXMuX2dldE5hdHVyYWxTaXplKCRpbWFnZSkud2lkdGg7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0aGlzLmltYWdlTmF0dXJhbFdpZHRoO1xuICB9O1xuICBcbiAgVW5pZm9ybVRodW1ic0ZpdHRlci5wcm90b3R5cGUuX2dldE5hdHVyYWxTaXplID0gZnVuY3Rpb24oJGltYWdlKXtcbiAgICBpZiAoJGltYWdlLnByb3AoJ3NyYycpKSB7XG4gICAgICB2YXIgaW1nID0gbmV3IEltYWdlKCk7XG4gICAgICBpbWcuc3JjID0gJGltYWdlLnByb3AoJ3NyYycpO1xuICAgICAgcmV0dXJuIHsgd2lkdGg6IGltZy53aWR0aCwgaGVpZ2h0OiBpbWcuaGVpZ2h0IH07XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH07XG4gIFxuICBVbmlmb3JtVGh1bWJzRml0dGVyLnByb3RvdHlwZS5fcmVzZXRJbWFnZUNTUyA9IGZ1bmN0aW9uKCl7XG4gICAgdGhpcy4kaW1hZ2UuY3NzKHtcbiAgICAgIG1heFdpZHRoOiAnbm9uZScsXG4gICAgICB3aWR0aDogJ2F1dG8nLFxuICAgICAgaGVpZ2h0OiAnYXV0bydcbiAgICB9KTtcbiAgfTtcblxuICAvKioqXG4gICAqIGpRdWVyeS1pZnlcbiAgICoqKi9cbiAgIFxuICB2YXIgdGh1bWJuYWlsQ29tcGxldGVDb3VudCA9IDA7XG4gIHZhciBpbnZva2VGaW5hbFRyaWdnZXIgPSBmdW5jdGlvbihzZWxmKXtcbiAgICB0aHVtYm5haWxDb21wbGV0ZUNvdW50Kys7XG4gICAgaWYgKHRodW1ibmFpbENvbXBsZXRlQ291bnQgPT09IHNlbGYubGVuZ3RoKSB7XG4gICAgICAkKHNlbGYpLmxhc3QoKS50cmlnZ2VyKCd1dF9jb21wbGV0ZScpO1xuICAgIH1cbiAgfTtcbiAgIFxuICAkLmZuLnVuaWZvcm1fdGh1bWJuYWlscyA9IGZ1bmN0aW9uKCBvcHRpb25zICkge1xuICAgIC8vIGNvbGxlY3Qgc2V0dGluZ3NcbiAgICB2YXIgc2V0dGluZ3MgPSAkLmV4dGVuZCgge30sICQuZm4udW5pZm9ybV90aHVtYm5haWxzLmRlZmF1bHRzLCBvcHRpb25zICk7XG4gICAgLy8gYnVpbGQgcGx1Z2luXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIHJldHVybiBzZWxmLmVhY2goZnVuY3Rpb24oKXtcbiAgICAgIHZhciAkZWxlID0gJCh0aGlzKTtcbiAgICAgICRlbGUuZGF0YSgnX3VuaWZvcm1fdGh1bWJuYWlscycsIG5ldyBVbmlmb3JtVGh1bWJzKCRlbGUsIHNldHRpbmdzKSk7XG4gICAgICAkZWxlLm9uKCd1dF9pbWFnZUxvYWRlZCcsIGZ1bmN0aW9uKCl7XG4gICAgICAgIGludm9rZUZpbmFsVHJpZ2dlcihzZWxmKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9O1xuICBcbiAgLy8gRGVmYXVsdCBzZXR0aW5nc1xuICAkLmZuLnVuaWZvcm1fdGh1bWJuYWlscy5kZWZhdWx0cyA9IHtcbiAgICAgICAgICAgICAgIGZpdDogJ2Nyb3AnLCAgIC8vIGNyb3B8c2NhbGVcbiAgICAgICAgICAgICByYXRpbzogJzE6MScsICAgIC8vIGFzcGVjdCByYXRpbyBmb3IgaW1hZ2UgY29udGFpbmVyXG4gICAgICAgICAgICBmb3JtYXQ6ICdyYXRpbycsICAvLyByYXRpb3xzcXVhcmV8bGFuZHNjYXBlfHBvcnRyYWl0XG4gICAgICAgICAgICAgYWxpZ246ICdtaWRkbGUnLCAvLyB0b3B8bWlkZGxlfGJvdHRvbVxuICAgIGxhbmRzY2FwZVJhdGlvOiAnNDozJywgICAgLy8gZGVmYXVsdCByYXRpbyBmb3IgbGFuZHNjYXBlXG4gICAgIHBvcnRyYWl0UmF0aW86ICczOjQnICAgICAvLyBkZWZhdWx0IHJhdGlvIGZvciBwb3J0cmFpdFxuICB9O1xuXG59KGpRdWVyeSkpOyIsIi8qXFxcbnwqfFxufCp8ICA6OiBjb29raWVzLmpzIDo6XG58KnxcbnwqfCAgQSBjb21wbGV0ZSBjb29raWVzIHJlYWRlci93cml0ZXIgZnJhbWV3b3JrIHdpdGggZnVsbCB1bmljb2RlIHN1cHBvcnQuXG58KnxcbnwqfCAgUmV2aXNpb24gIzEgLSBTZXB0ZW1iZXIgNCwgMjAxNFxufCp8XG58KnwgIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9kb2N1bWVudC5jb29raWVcbnwqfCAgaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvVXNlcjpmdXNpb25jaGVzc1xufCp8XG58KnwgIFRoaXMgZnJhbWV3b3JrIGlzIHJlbGVhc2VkIHVuZGVyIHRoZSBHTlUgUHVibGljIExpY2Vuc2UsIHZlcnNpb24gMyBvciBsYXRlci5cbnwqfCAgaHR0cDovL3d3dy5nbnUub3JnL2xpY2Vuc2VzL2dwbC0zLjAtc3RhbmRhbG9uZS5odG1sXG58KnxcbnwqfCAgU3ludGF4ZXM6XG58KnxcbnwqfCAgKiBkb2NDb29raWVzLnNldEl0ZW0obmFtZSwgdmFsdWVbLCBlbmRbLCBwYXRoWywgZG9tYWluWywgc2VjdXJlXV1dXSlcbnwqfCAgKiBkb2NDb29raWVzLmdldEl0ZW0obmFtZSlcbnwqfCAgKiBkb2NDb29raWVzLnJlbW92ZUl0ZW0obmFtZVssIHBhdGhbLCBkb21haW5dXSlcbnwqfCAgKiBkb2NDb29raWVzLmhhc0l0ZW0obmFtZSlcbnwqfCAgKiBkb2NDb29raWVzLmtleXMoKVxufCp8XG5cXCovXG5cbnZhciBkb2NDb29raWVzID0ge1xuICBnZXRJdGVtOiBmdW5jdGlvbiAoc0tleSkge1xuICAgIGlmICghc0tleSkgeyByZXR1cm4gbnVsbDsgfVxuICAgIHJldHVybiBkZWNvZGVVUklDb21wb25lbnQoZG9jdW1lbnQuY29va2llLnJlcGxhY2UobmV3IFJlZ0V4cChcIig/Oig/Ol58Lio7KVxcXFxzKlwiICsgZW5jb2RlVVJJQ29tcG9uZW50KHNLZXkpLnJlcGxhY2UoL1tcXC1cXC5cXCtcXCpdL2csIFwiXFxcXCQmXCIpICsgXCJcXFxccypcXFxcPVxcXFxzKihbXjtdKikuKiQpfF4uKiRcIiksIFwiJDFcIikpIHx8IG51bGw7XG4gIH0sXG4gIHNldEl0ZW06IGZ1bmN0aW9uIChzS2V5LCBzVmFsdWUsIHZFbmQsIHNQYXRoLCBzRG9tYWluLCBiU2VjdXJlKSB7XG4gICAgaWYgKCFzS2V5IHx8IC9eKD86ZXhwaXJlc3xtYXhcXC1hZ2V8cGF0aHxkb21haW58c2VjdXJlKSQvaS50ZXN0KHNLZXkpKSB7IHJldHVybiBmYWxzZTsgfVxuICAgIHZhciBzRXhwaXJlcyA9IFwiXCI7XG4gICAgaWYgKHZFbmQpIHtcbiAgICAgIHN3aXRjaCAodkVuZC5jb25zdHJ1Y3Rvcikge1xuICAgICAgICBjYXNlIE51bWJlcjpcbiAgICAgICAgICBzRXhwaXJlcyA9IHZFbmQgPT09IEluZmluaXR5ID8gXCI7IGV4cGlyZXM9RnJpLCAzMSBEZWMgOTk5OSAyMzo1OTo1OSBHTVRcIiA6IFwiOyBtYXgtYWdlPVwiICsgdkVuZDtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBTdHJpbmc6XG4gICAgICAgICAgc0V4cGlyZXMgPSBcIjsgZXhwaXJlcz1cIiArIHZFbmQ7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgRGF0ZTpcbiAgICAgICAgICBzRXhwaXJlcyA9IFwiOyBleHBpcmVzPVwiICsgdkVuZC50b1VUQ1N0cmluZygpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cbiAgICBkb2N1bWVudC5jb29raWUgPSBlbmNvZGVVUklDb21wb25lbnQoc0tleSkgKyBcIj1cIiArIGVuY29kZVVSSUNvbXBvbmVudChzVmFsdWUpICsgc0V4cGlyZXMgKyAoc0RvbWFpbiA/IFwiOyBkb21haW49XCIgKyBzRG9tYWluIDogXCJcIikgKyAoc1BhdGggPyBcIjsgcGF0aD1cIiArIHNQYXRoIDogXCJcIikgKyAoYlNlY3VyZSA/IFwiOyBzZWN1cmVcIiA6IFwiXCIpO1xuICAgIHJldHVybiB0cnVlO1xuICB9LFxuICByZW1vdmVJdGVtOiBmdW5jdGlvbiAoc0tleSwgc1BhdGgsIHNEb21haW4pIHtcbiAgICBpZiAoIXRoaXMuaGFzSXRlbShzS2V5KSkgeyByZXR1cm4gZmFsc2U7IH1cbiAgICBkb2N1bWVudC5jb29raWUgPSBlbmNvZGVVUklDb21wb25lbnQoc0tleSkgKyBcIj07IGV4cGlyZXM9VGh1LCAwMSBKYW4gMTk3MCAwMDowMDowMCBHTVRcIiArIChzRG9tYWluID8gXCI7IGRvbWFpbj1cIiArIHNEb21haW4gOiBcIlwiKSArIChzUGF0aCA/IFwiOyBwYXRoPVwiICsgc1BhdGggOiBcIlwiKTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfSxcbiAgaGFzSXRlbTogZnVuY3Rpb24gKHNLZXkpIHtcbiAgICBpZiAoIXNLZXkpIHsgcmV0dXJuIGZhbHNlOyB9XG4gICAgcmV0dXJuIChuZXcgUmVnRXhwKFwiKD86Xnw7XFxcXHMqKVwiICsgZW5jb2RlVVJJQ29tcG9uZW50KHNLZXkpLnJlcGxhY2UoL1tcXC1cXC5cXCtcXCpdL2csIFwiXFxcXCQmXCIpICsgXCJcXFxccypcXFxcPVwiKSkudGVzdChkb2N1bWVudC5jb29raWUpO1xuICB9LFxuICBrZXlzOiBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGFLZXlzID0gZG9jdW1lbnQuY29va2llLnJlcGxhY2UoLygoPzpefFxccyo7KVteXFw9XSspKD89O3wkKXxeXFxzKnxcXHMqKD86XFw9W147XSopPyg/OlxcMXwkKS9nLCBcIlwiKS5zcGxpdCgvXFxzKig/OlxcPVteO10qKT87XFxzKi8pO1xuICAgIGZvciAodmFyIG5MZW4gPSBhS2V5cy5sZW5ndGgsIG5JZHggPSAwOyBuSWR4IDwgbkxlbjsgbklkeCsrKSB7IGFLZXlzW25JZHhdID0gZGVjb2RlVVJJQ29tcG9uZW50KGFLZXlzW25JZHhdKTsgfVxuICAgIHJldHVybiBhS2V5cztcbiAgfVxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBkb2NDb29raWVzOyIsIi8qXG4gIFRPRE86IG1ha2UgcHJvdG90eXBsZSBpbmhlcml0ZW5jZVxuKi9cblxudmFyIERhdGFNb2RlbCA9IGZ1bmN0aW9uIChvYmosIHByb3BlcnRpZXMpIHtcbiAgdGhpcy5vYmogPSBvYmo7XG4gIHRoaXMuX2J1aWxkX3Byb3BlcnRpZXMocHJvcGVydGllcyk7XG59O1xuXG5EYXRhTW9kZWwucHJvdG90eXBlLl9idWlsZF9wcm9wZXJ0aWVzID0gZnVuY3Rpb24gKHByb3BlcnRpZXMpIHtcbiAgdmFyIF90aGlzID0gdGhpcztcbiAgXG4gIGZvciAodmFyIGtleSBpbiBwcm9wZXJ0aWVzKSB7XG4gICAgaWYgKHByb3BlcnRpZXMuaGFzT3duUHJvcGVydHkoa2V5KSkge1xuICAgICAgX3RoaXMuX2J1aWxkX3Byb3BlcnR5X21ldGhvZHMoa2V5LCBwcm9wZXJ0aWVzW2tleV0pO1xuICAgIH1cbiAgfVxufTtcblxuRGF0YU1vZGVsLnByb3RvdHlwZS5fYnVpbGRfcHJvcGVydHlfbWV0aG9kcyA9IGZ1bmN0aW9uIChrZXksIHNlbGVjdG9yKSB7XG4gIHZhciBzZWxlY3Rvcl9rZXkgPSBrZXkrJ19zZWxlY3Rvcic7XG4gIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLm9iaiwgc2VsZWN0b3Jfa2V5LCB7XG4gICAgdmFsdWU6IHNlbGVjdG9yXG4gIH0pO1xuICBcbiAgdmFyIHZhbHVlO1xuICB2YXIgX3RoaXMgPSB0aGlzO1xuICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcy5vYmosIGtleSwge1xuICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH0sXG4gICAgc2V0OiBmdW5jdGlvbiAobmV3X3ZhbHVlKSB7XG4gICAgICBpZiAodmFsdWUgIT09IG5ld192YWx1ZSkge1xuICAgICAgICB2YWx1ZSA9IG5ld192YWx1ZTtcbiAgICAgICAgX3RoaXMuX3VwZGF0ZV9lbGVtZW50cyhzZWxlY3RvciwgdmFsdWUpO1xuICAgICAgfVxuICAgIH1cbiAgfSk7XG59O1xuXG5EYXRhTW9kZWwucHJvdG90eXBlLl91cGRhdGVfZWxlbWVudHMgPSBmdW5jdGlvbiAoc2VsZWN0b3IsIHZhbHVlKSB7XG4gIHZhciBfdGhpcyA9IHRoaXM7XG4gICQoc2VsZWN0b3IpLmVhY2goZnVuY3Rpb24gKGksIGVsZW1lbnQpIHtcbiAgICBfdGhpcy5fc2V0X2VsZW1lbnRfdmFsdWUoZWxlbWVudCwgdmFsdWUpO1xuICB9KTtcbn07XG5cbkRhdGFNb2RlbC5wcm90b3R5cGUuX3NldF9lbGVtZW50X3ZhbHVlID0gZnVuY3Rpb24gKGVsZW1lbnQsIHZhbHVlKSB7XG4gIHZhciAkZWxlbWVudCA9ICQoZWxlbWVudCk7XG4gIGlmICh0aGlzLl9pc19pbnB1dChlbGVtZW50KSkge1xuICAgICRlbGVtZW50LnZhbCh2YWx1ZSk7XG4gIH0gZWxzZSB7XG4gICAgJGVsZW1lbnQuaHRtbCh2YWx1ZSk7XG4gIH1cbn07XG5cbkRhdGFNb2RlbC5wcm90b3R5cGUuX2lzX2lucHV0ID0gZnVuY3Rpb24gKGVsZW1lbnQpIHtcbiAgdmFyIHRhZ19uYW1lID0gZWxlbWVudC50YWdOYW1lLnRvTG93ZXJDYXNlKCk7XG4gIHJldHVybiB0YWdfbmFtZSA9PT0gJ2lucHV0JyB8fCB0YWdfbmFtZSA9PT0gJ3NlbGVjdCcgfHwgdGFnX25hbWUgPT09ICd0ZXh0YXJlYSc7XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IERhdGFNb2RlbDsiLCIvKlxuICBUT0RPOiBtYWtlIHByb3RvdHlwbGUgaW5oZXJpdGVuY2VcbiovXG5cbnZhciBFdmVudGVyID0gZnVuY3Rpb24gKGNhbGxlcikge1xuICB0aGlzLmNhbGxlciA9IGNhbGxlcjtcbiAgdGhpcy5jYWxsZXIuX2V2ZW50cyA9IHt9O1xuICB0aGlzLmNhbGxlci5vbiA9IHRoaXMub247XG4gIHRoaXMuY2FsbGVyLm9mZiA9IHRoaXMub2ZmO1xuICB0aGlzLmNhbGxlci50cmlnZ2VyID0gdGhpcy50cmlnZ2VyO1xufTtcbiBcbi8vIHRoaXMgPT09IGNhbGxlciBub3QgRXZlbnRlclxuRXZlbnRlci5wcm90b3R5cGUub24gPSBmdW5jdGlvbiAoZXZlbnQsIGNhbGxiYWNrKSB7XG4gIGlmICghdGhpcy5fZXZlbnRzW2V2ZW50XSkgdGhpcy5fZXZlbnRzW2V2ZW50XSA9IFtdO1xuICB0aGlzLl9ldmVudHNbZXZlbnRdLnB1c2goY2FsbGJhY2spO1xuICByZXR1cm4gdGhpcy5fZXZlbnRzW2V2ZW50XS5sZW5ndGggLSAxO1xufTtcbiBcbkV2ZW50ZXIucHJvdG90eXBlLm9mZiA9IGZ1bmN0aW9uIChldmVudCwgaWQpIHtcbiAgaWYgKGV2ZW50ICYmIGlkKSB7XG4gICAgaWYgKHRoaXMuX2V2ZW50c1tldmVudF1baWRdKSB0aGlzLl9ldmVudHNbZXZlbnRdW2lkXSA9IG51bGw7XG4gIH0gZWxzZSBpZiAoZXZlbnQpIHtcbiAgICBpZiAodGhpcy5fZXZlbnRzW2V2ZW50XSkgdGhpcy5fZXZlbnRzW2V2ZW50XSA9IG51bGw7XG4gIH0gZWxzZSB7XG4gICAgdGhpcy5fZXZlbnRzID0ge307XG4gIH1cbn07XG4gXG5FdmVudGVyLnByb3RvdHlwZS50cmlnZ2VyID0gZnVuY3Rpb24gKGV2ZW50LCBhcmdzKSB7XG4gIGlmICh0eXBlb2YgYXJncyAhPT0gJ29iamVjdCcpIGFyZ3MgPSBbYXJnc107IFxuICBmb3IgKHZhciBpIGluIHRoaXMuX2V2ZW50c1tldmVudF0pIHtcbiAgICB2YXIgZSA9IHRoaXMuX2V2ZW50c1tldmVudF1baV07XG4gICAgaWYgKHRoaXMuX2V2ZW50c1tldmVudF0uaGFzT3duUHJvcGVydHkoaSkgJiYgdHlwZW9mIGUgPT09ICdmdW5jdGlvbicpIGUuYXBwbHkodGhpcywgYXJncyk7XG4gIH1cbn07XG4gXG5tb2R1bGUuZXhwb3J0cyA9IEV2ZW50ZXI7IiwiLypcbiAgQSBjb2xsZWN0aW9uIG9mIHBvbHlmaWxscyBmb3IgSUU4XG4qL1xuXG5tb2R1bGUuZXhwb3J0cy5nZXRDb21wdXRlZFN0eWxlID0gZnVuY3Rpb24gKCkge1xuICBpZiAoIXdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKSB7XG4gICAgd2luZG93LmdldENvbXB1dGVkU3R5bGUgPSBmdW5jdGlvbihlbCwgcHNldWRvKSB7XG4gICAgICB0aGlzLmVsID0gZWw7XG4gICAgICB0aGlzLmdldFByb3BlcnR5VmFsdWUgPSBmdW5jdGlvbihwcm9wKSB7XG4gICAgICAgIHZhciByZSA9IC8oXFwtKFthLXpdKXsxfSkvZztcbiAgICAgICAgaWYgKHByb3AgPT0gJ2Zsb2F0JykgcHJvcCA9ICdzdHlsZUZsb2F0JztcbiAgICAgICAgaWYgKHJlLnRlc3QocHJvcCkpIHtcbiAgICAgICAgICBwcm9wID0gcHJvcC5yZXBsYWNlKHJlLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gYXJndW1lbnRzWzJdLnRvVXBwZXJDYXNlKCk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGVsLmN1cnJlbnRTdHlsZVtwcm9wXSA/IGVsLmN1cnJlbnRTdHlsZVtwcm9wXSA6IG51bGw7XG4gICAgICB9O1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcbiAgfVxufTtcblxubW9kdWxlLmV4cG9ydHMub2JqZWN0S2V5cyA9IGZ1bmN0aW9uICgpIHtcbiAgLy8gRnJvbSBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9KYXZhU2NyaXB0L1JlZmVyZW5jZS9HbG9iYWxfT2JqZWN0cy9PYmplY3Qva2V5c1xuICBpZiAoIU9iamVjdC5rZXlzKSB7XG4gICAgT2JqZWN0LmtleXMgPSAoZnVuY3Rpb24oKSB7XG4gICAgICAndXNlIHN0cmljdCc7XG4gICAgICB2YXIgaGFzT3duUHJvcGVydHkgPSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LFxuICAgICAgICAgIGhhc0RvbnRFbnVtQnVnID0gISh7IHRvU3RyaW5nOiBudWxsIH0pLnByb3BlcnR5SXNFbnVtZXJhYmxlKCd0b1N0cmluZycpLFxuICAgICAgICAgIGRvbnRFbnVtcyA9IFtcbiAgICAgICAgICAgICd0b1N0cmluZycsXG4gICAgICAgICAgICAndG9Mb2NhbGVTdHJpbmcnLFxuICAgICAgICAgICAgJ3ZhbHVlT2YnLFxuICAgICAgICAgICAgJ2hhc093blByb3BlcnR5JyxcbiAgICAgICAgICAgICdpc1Byb3RvdHlwZU9mJyxcbiAgICAgICAgICAgICdwcm9wZXJ0eUlzRW51bWVyYWJsZScsXG4gICAgICAgICAgICAnY29uc3RydWN0b3InXG4gICAgICAgICAgXSxcbiAgICAgICAgICBkb250RW51bXNMZW5ndGggPSBkb250RW51bXMubGVuZ3RoO1xuICBcbiAgICAgIHJldHVybiBmdW5jdGlvbihvYmopIHtcbiAgICAgICAgaWYgKHR5cGVvZiBvYmogIT09ICdvYmplY3QnICYmICh0eXBlb2Ygb2JqICE9PSAnZnVuY3Rpb24nIHx8IG9iaiA9PT0gbnVsbCkpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdPYmplY3Qua2V5cyBjYWxsZWQgb24gbm9uLW9iamVjdCcpO1xuICAgICAgICB9XG4gIFxuICAgICAgICB2YXIgcmVzdWx0ID0gW10sIHByb3AsIGk7XG4gIFxuICAgICAgICBmb3IgKHByb3AgaW4gb2JqKSB7XG4gICAgICAgICAgaWYgKGhhc093blByb3BlcnR5LmNhbGwob2JqLCBwcm9wKSkge1xuICAgICAgICAgICAgcmVzdWx0LnB1c2gocHJvcCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gIFxuICAgICAgICBpZiAoaGFzRG9udEVudW1CdWcpIHtcbiAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgZG9udEVudW1zTGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGlmIChoYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgZG9udEVudW1zW2ldKSkge1xuICAgICAgICAgICAgICByZXN1bHQucHVzaChkb250RW51bXNbaV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgfTtcbiAgICB9KCkpO1xuICB9XG59OyIsIkJhbm5lciA9IHt9O1xuXG52YXIgJGJhbm5lciA9ICQoJ1tkYXRhLWJhbm5lcl0nKTtcblxuQmFubmVyLmluaXQgPSBmdW5jdGlvbiAoKSB7XG4gIGlmICgkYmFubmVyLmxlbmd0aCA+IDApIHtcbiAgICBCYW5uZXIuYWRkX2V2ZW50X2hhbmRsZXJzKCk7XG4gIH1cbn07XG5cbkJhbm5lci5hZGRfZXZlbnRfaGFuZGxlcnMgPSBmdW5jdGlvbiAoKSB7XG4gIC8vIFRoaXMgZXZlbnQgZmlyZXMgaW1tZWRpYXRlbHkgd2hlbiB0aGUgc2xpZGUgaW5zdGFuY2UgbWV0aG9kIGlzIGludm9rZWQuXG4gICRiYW5uZXIub24oJ3NsaWRlLmJzLmNhcm91c2VsJywgZnVuY3Rpb24gKGUpIHtcbiAgICB2YXIgJHJlbGF0ZWRfdGFyZ2V0ID0gJChlLnJlbGF0ZWRUYXJnZXQpO1xuICAgIC8vIFNldCB0aGUgZGF0YS1iYW5uZXIgYXR0ciB0byB0aGUgY3VycmVudCBzbGlkZXMgaW5kZXggc28gdGhhdCB3ZSBjYW4gZG8gYXdlc29tZSBzY3NzIHN0dWZmc1xuICAgICRiYW5uZXIuYXR0cignZGF0YS1iYW5uZXInLCAkcmVsYXRlZF90YXJnZXQuZGF0YSgnc2xpZGUnKSk7XG4gIH0pO1xuICBcbiAgLy8gVGhpcyBldmVudCBpcyBmaXJlZCB3aGVuIHRoZSBjYXJvdXNlbCBoYXMgY29tcGxldGVkIGl0cyBzbGlkZSB0cmFuc2l0aW9uLlxuICAkYmFubmVyLm9uKCdzbGlkLmJzLmNhcm91c2VsJywgZnVuY3Rpb24gKCkge1xuICB9KTtcbn07XG4gICAgXG5tb2R1bGUuZXhwb3J0cyA9IEJhbm5lcjsiLCJ2YXIgQ2FydEpTID0gcmVxdWlyZShcIi4vLi4vLi4vYm93ZXJfY29tcG9uZW50cy9zaG9waWZ5LWNhcnRqcy9kaXN0L2NhcnQuanNcIik7XG5cbnZhciBDYXJ0ID0ge307XG52YXIgbWVzc2FnZV9jb3VudCA9IDA7XG5cbi8vIENhcnQgdmFyc1xudmFyICRjYXJ0X2Rpc3BsYXlfZWxlID0gJCgnW2RhdGEtY2FydC1kaXNwbGF5XScpO1xudmFyICRjYXJ0X3RvdGFsX2VsZSA9ICQoJ1tkYXRhLWNhcnQtdG90YWxdJyk7XG52YXIgJGNhcnRfZm9ybV9lbGUgPSAkKEJzaWZ5LnNlbGVjdG9ycy5jYXJ0LmZvcm1fc2VsZWN0b3IpO1xudmFyICRjYXJ0X21lc3NhZ2VfZWxlID0gJChCc2lmeS5zZWxlY3RvcnMuY2FydC5tZXNzYWdlX3NlbGVjdG9yKTtcblxuLy8gcHJvZHVjdCB2YXJzXG5pZiAoQnNpZnkucHJvZHVjdCkge1xuICB2YXIgJHByb2R1Y3RfZm9ybV9lbGUgPSAkKEJzaWZ5LnNlbGVjdG9ycy5wcm9kdWN0LmZvcm1fc2VsZWN0b3IpO1xuICB2YXIgJHByb2R1Y3RfZm9ybV9idXR0b24gPSAkcHJvZHVjdF9mb3JtX2VsZS5maW5kKCdpbnB1dFt0eXBlPXN1Ym1pdF0nKTtcbiAgdmFyICRwcm9kdWN0X2Zvcm1fbWVzc2FnZV9lbGUgPSAkKEJzaWZ5LnNlbGVjdG9ycy5wcm9kdWN0LmZvcm1fbWVzc2FnZV9zZWxlY3Rvcik7XG59XG5cbi8vIFNldCB1cCBjYXJ0IGV2ZW50IGhhbmRsZXJzXG5DYXJ0LmluaXQgPSBmdW5jdGlvbiAoKSB7XG4gIFxuICAvLyBmaXJlZCB3aGVuIHRoZSBDYXJ0SlMgb2JqZWN0IGhhcyBmaW5pc2hlZCB1cGRhdGluZyB0aGUgY2FydFxuICAkKGRvY3VtZW50KS5vbignY2FydC5yZXF1ZXN0Q29tcGxldGUnLCBmdW5jdGlvbihldmVudCwgY2FydCkge1xuICAgIC8vIHVwZGF0ZSB0aGUgY2FydCBub3RlIGluIHRoZSBuYXZiYXJcbiAgICBDYXJ0LnVwZGF0ZV9jYXJ0X2Rpc3BsYXkoKTtcbiAgICBDYXJ0LnVwZGF0ZV9jYXJ0X3RhYmxlKCk7XG4gIH0pO1xuICBcbiAgLy8gQWpheCBhZGQgdG8gY2FydCBmcm9tIHByb2R1Y3QgdGVtcGxhdGVcbiAgaWYgKEJzaWZ5LnByb2R1Y3QpIHtcbiAgICAvLyBDYXB0dXJlIHRoZSBmb3JtIHN1Ym1pdFxuICAgICQoZG9jdW1lbnQpLm9uKCdzdWJtaXQnLCBCc2lmeS5zZWxlY3RvcnMucHJvZHVjdC5mb3JtX3NlbGVjdG9yLCBmdW5jdGlvbiAoZSkge1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgdmFyICRjdXJyZW50X3RhcmdldCA9ICQoZS5jdXJyZW50VGFyZ2V0KTtcbiAgICAgIENhcnQuYWRkX2l0ZW1fdG9fY2FydCgkY3VycmVudF90YXJnZXQpO1xuICAgIH0pO1xuICB9XG4gIFxuICAvLyByZW1vdmUgaXRlbSBmcm9tIGNhcnRcbiAgJChkb2N1bWVudCkub24oJ2NsaWNrJywgJ1tkYXRhLXJlbW92ZS1pdGVtXScsIGZ1bmN0aW9uIChlKSB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIHZhciAkY3VycmVudF90YXJnZXQgPSAkKGUuY3VycmVudFRhcmdldCk7XG4gICAgQ2FydC5yZW1vdmVfaXRlbV9mcm9tX2NhcnQoJGN1cnJlbnRfdGFyZ2V0KTtcbiAgfSk7XG59O1xuXG4vKlxuICBDYXJ0IG1ldGhvZHNcbiovXG5cbkNhcnQuYWRkX2l0ZW1fdG9fY2FydCA9IGZ1bmN0aW9uICgkY3VycmVudF90YXJnZXQpIHtcbiAgdmFyIHZhbHVlcyA9IENhcnQuZm9ybV92YWx1ZXMoJGN1cnJlbnRfdGFyZ2V0LnNlcmlhbGl6ZUFycmF5KCkpO1xuICB2YXIgcHJvcGVydGllcyA9IHt9OyAvLyBUT0RPOiBkZWFsIHdpdGggaXRlbSBwcm9wZXJ0aWVzIHdoZW4gYWRkaW5nIHRvIGNhcnRcbiAgXG4gIHZhciB2YXJpYW50ID0gQnNpZnkuZ2V0X3ZhcmlhbnRfYnlfaWQodmFsdWVzLmlkKTtcbiAgdmFyIGl0ZW1fdGl0bGUgPSBCc2lmeS5wcm9kdWN0LnRpdGxlICsgQnNpZnkudHJhbnNsYXRpb25zLnByb2R1Y3QuaXRlbV90aXRsZV9zZXBlcmF0b3IgKyB2YXJpYW50LnRpdGxlO1xuICBcbiAgLy8gdXBkYXRlIHRoZSB1c2VyIHRoYXQgd2UgYXJlIHdvcmtpbmcgb24gaXRcbiAgJHByb2R1Y3RfZm9ybV9idXR0b24udmFsKEJzaWZ5LnRyYW5zbGF0aW9ucy5wcm9kdWN0LmFkZGluZ190b19jYXJ0X2J1dHRvbl90ZXh0KTtcbiAgXG4gIC8vIGFkZCB0aGUgaXRlbSB0byB0aGUgY2FydFxuICBDYXJ0SlMuYWRkSXRlbSh2YWx1ZXMuaWQsIHZhbHVlcy5xdWFudGl0eSwgcHJvcGVydGllcywge1xuICAgIFwic3VjY2Vzc1wiIDogZnVuY3Rpb24gKGRhdGEsIHRleHRfc3RhdHVzLCBqcVhIUikge1xuICAgICAgXG4gICAgICAvLyBjcmVhdGUgYW5kIGRpc3BsYXkgY29tcGxldGVkIG1lc3NhZ2VcbiAgICAgIHZhciBtZXNzYWdlID0gQnNpZnkudHJhbnNsYXRpb25zLnByb2R1Y3QuYWZ0ZXJfcHJvZHVjdF9hZGRlZF9tZXNzYWdlX2h0bWwucmVwbGFjZSgnW2l0ZW1fdGl0bGVdJywgaXRlbV90aXRsZSk7XG4gICAgICBDYXJ0LnNob3dfbWVzc2FnZSgkcHJvZHVjdF9mb3JtX21lc3NhZ2VfZWxlLCAnc3VjY2VzcycsIG1lc3NhZ2UpO1xuICAgICAgXG4gICAgICAvLyB1cGRhdGUgYWRkIHRvIGNhcnQgYnV0dG9uIHRleHRcbiAgICAgICRwcm9kdWN0X2Zvcm1fYnV0dG9uLnZhbChCc2lmeS50cmFuc2xhdGlvbnMucHJvZHVjdC5hZGRlZF90b19jYXJ0X2J1dHRvbl90ZXh0KTtcbiAgICAgIFxuICAgIH0sXG4gICAgXCJlcnJvclwiOiBmdW5jdGlvbihqcVhIUiwgdGV4dF9zdGF0dXMsIGVycm9yX3Rocm93bikge1xuICAgICAgY29uc29sZS5sb2coJ1tFUlJPUl0gLSBBZGQgdG8gY2FydDonLCBqcVhIUiwgdGV4dF9zdGF0dXMsIGVycm9yX3Rocm93bik7XG4gICAgICBcbiAgICAgIC8vIGNyZWF0ZSBhbmQgZGlzcGxheSBlcnJvciBtZXNzYWdlXG4gICAgICB2YXIgbWVzc2FnZSA9IEJzaWZ5LnRyYW5zbGF0aW9ucy5wcm9kdWN0LmFmdGVyX3Byb2R1Y3RfYWRkZWRfZXJyb3JfbWVzc2FnZV9odG1sLnJlcGxhY2UoJ1tpdGVtX3RpdGxlXScsIGl0ZW1fdGl0bGUpLnJlcGxhY2UoJ1tlcnJvcl9tZXNzYWdlXScsIGVycm9yX3Rocm93bik7XG4gICAgICBDYXJ0LnNob3dfbWVzc2FnZSgkcHJvZHVjdF9mb3JtX21lc3NhZ2VfZWxlLCAnZXJyb3InLCBtZXNzYWdlKTtcbiAgICAgIFxuICAgICAgLy8gdXBkYXRlIGFkZCB0byBjYXJ0IGJ1dHRvbiB0ZXh0XG4gICAgICAkcHJvZHVjdF9mb3JtX2J1dHRvbi52YWwoQnNpZnkudHJhbnNsYXRpb25zLnByb2R1Y3QudW5hdmFpbGFibGVfYnV0dG9uX3RleHQpO1xuICAgIH1cbiAgfSk7XG59O1xuXG5DYXJ0LnJlbW92ZV9pdGVtX2Zyb21fY2FydCA9IGZ1bmN0aW9uICgkY3VycmVudF90YXJnZXQpIHtcbiAgdmFyICRjYXJ0X2l0ZW1fZWxlID0gJGN1cnJlbnRfdGFyZ2V0LmNsb3Nlc3QoQnNpZnkuc2VsZWN0b3JzLmNhcnQuaXRlbV9zZWxlY3Rvcik7XG4gIFxuICB2YXIgaXRlbSA9IENhcnQuZ2V0X2l0ZW1fYnlfaWQoJGNhcnRfaXRlbV9lbGUuZGF0YSgnY2FydC1pdGVtJykpO1xuICB2YXIgaXRlbV90aXRsZSA9IGl0ZW0ucHJvZHVjdF90aXRsZSArIEJzaWZ5LnRyYW5zbGF0aW9ucy5wcm9kdWN0Lml0ZW1fdGl0bGVfc2VwZXJhdG9yICsgaXRlbS52YXJpYW50X3RpdGxlO1xuICBcbiAgQ2FydEpTLnJlbW92ZUl0ZW0oJGN1cnJlbnRfdGFyZ2V0LmRhdGEoJ3JlbW92ZS1pdGVtJyksIHtcbiAgICBcInN1Y2Nlc3NcIjogZnVuY3Rpb24gKGRhdGEsIHRleHRfc3RhdHVzLCBqcVhIUikge1xuICAgICAgLy8gaGlkZSBpdGVtIHJvd1xuICAgICAgJGNhcnRfaXRlbV9lbGUuaGlkZSgpO1xuICAgICAgXG4gICAgICAvLyBTaG93IHVzZXIgYSBuaWNlIG1lc3NhZ2VcbiAgICAgIHZhciBtZXNzYWdlID0gQnNpZnkudHJhbnNsYXRpb25zLmNhcnQucmVtb3ZlX2l0ZW1fbWVzc2FnZS5yZXBsYWNlKCdbaXRlbV90aXRsZV0nLCBpdGVtX3RpdGxlKTtcbiAgICAgIENhcnQuc2hvd19tZXNzYWdlKCRjYXJ0X21lc3NhZ2VfZWxlLCAnc3VjY2VzcycsIG1lc3NhZ2UpO1xuICAgICAgXG4gICAgfSxcbiAgICBcImVycm9yXCI6IGZ1bmN0aW9uIChqcVhIUiwgdGV4dF9zdGF0dXMsIGVycm9yX3Rocm93bikge1xuICAgICAgY29uc29sZS5sb2coJ1tFUlJPUl0gLSBSZW1vdmUgaXRlbSBmcm9tIGNhcnQ6JywganFYSFIsIHRleHRfc3RhdHVzLCBlcnJvcl90aHJvd24pO1xuICAgICAgXG4gICAgICAvLyBTaG93IHVzZXIgYSBuaWNlIG1lc3NhZ2VcbiAgICAgIHZhciBtZXNzYWdlID0gQnNpZnkudHJhbnNsYXRpb25zLmNhcnQucmVtb3ZlX2l0ZW1fZXJyb3JfbWVzc2FnZS5yZXBsYWNlKCdbaXRlbV90aXRsZV0nLCBpdGVtX3RpdGxlKS5yZXBsYWNlKCdbZXJyb3JfbWVzc2FnZV0nLCBlcnJvcl90aHJvd24pO1xuICAgICAgQ2FydC5zaG93X21lc3NhZ2UoJGNhcnRfbWVzc2FnZV9lbGUsICdzdWNjZXNzJywgbWVzc2FnZSk7XG4gICAgfSBcbiAgfSk7XG59O1xuXG4vKlxuICBEaXNwbGF5IG1ldGhvZHNcbiovXG5cbi8vIFVwZGF0ZSBjYXJ0IGRpc3BsYXkgd2l0aCB0aGUgY3VycmVudCBjYXJ0IGRldGFpbHNcbkNhcnQudXBkYXRlX2NhcnRfZGlzcGxheSA9IGZ1bmN0aW9uICgpIHtcbiAgdmFyIGNhcnRfdG90YWxfcHJpY2UgPSBTaG9waWZ5LmZvcm1hdE1vbmV5KENhcnRKUy5jYXJ0LnRvdGFsX3ByaWNlLCBCc2lmeS5tb25leV9mb3JtYXRzLm1vbmV5Rm9ybWF0KTtcbiAgdmFyIGNhcnRfdG90YWxfcHJpY2Vfd2l0aF9jdXJyZW5jeSA9IFNob3BpZnkuZm9ybWF0TW9uZXkoQ2FydEpTLmNhcnQudG90YWxfcHJpY2UsIEJzaWZ5Lm1vbmV5X2Zvcm1hdHMubW9uZXlXaXRoQ3VycmVuY3lGb3JtYXQpO1xuICBcbiAgdmFyIGNhcnRfZGlzcGxheV90ZXh0ID0gQnNpZnkudHJhbnNsYXRpb25zLmNhcnQuY2FydF9kaXNwbGF5X3RleHQucmVwbGFjZSgnW2l0ZW1fY291bnRdJywgQ2FydEpTLmNhcnQuaXRlbV9jb3VudCkucmVwbGFjZSgnW2NhcnRfdG90YWxfcHJpY2VdJywgY2FydF90b3RhbF9wcmljZSkucmVwbGFjZSgnW2NhcnRfdG90YWxfcHJpY2Vfd2l0aF9jdXJyZW5jeV0nLCBjYXJ0X3RvdGFsX3ByaWNlX3dpdGhfY3VycmVuY3kpO1xuICAkY2FydF9kaXNwbGF5X2VsZS5odG1sKGNhcnRfZGlzcGxheV90ZXh0KTtcbiAgXG4gIHZhciBjYXJ0X3RvdGFsX3RleHQgPSBCc2lmeS50cmFuc2xhdGlvbnMuY2FydC5jYXJ0X3RvdGFsLnJlcGxhY2UoJ1tjYXJ0X3RvdGFsX3ByaWNlXScsIGNhcnRfdG90YWxfcHJpY2UpLnJlcGxhY2UoJ1tjYXJ0X3RvdGFsX3ByaWNlX3dpdGhfY3VycmVuY3ldJywgY2FydF90b3RhbF9wcmljZV93aXRoX2N1cnJlbmN5KTtcbiAgJGNhcnRfdG90YWxfZWxlLmh0bWwoY2FydF90b3RhbF90ZXh0KTtcbn07XG5cbi8vIGhpZGUgdGhlIGNhcnQgdGFibGUgaWYgdGhlIGNhcnQgaXMgZW1wdHlcbkNhcnQudXBkYXRlX2NhcnRfdGFibGUgPSBmdW5jdGlvbiAoKSB7XG4gIGlmIChDYXJ0SlMuY2FydC5pdGVtX2NvdW50ID09PSAwKSB7XG4gICAgJGNhcnRfZm9ybV9lbGUuaGlkZSgpO1xuICAgICRjYXJ0X21lc3NhZ2VfZWxlLnJlbW92ZUNsYXNzKCdoaWRkZW4nKS5odG1sKEJzaWZ5LnRyYW5zbGF0aW9ucy5jYXJ0LmVtcHR5X2NhcnRfdGV4dCk7XG4gIH1cbn07XG5cbi8vIHNob3cgYW5kIGhpZGUgZmVlZGJhY2sgbWVzYWdlcyBmb3IgY2FydCBhY3Rpb25zXG5DYXJ0LnNob3dfbWVzc2FnZSA9IGZ1bmN0aW9uICgkbWVzc2FnZV9lbGUsIG1lc3NhZ2VfY2xhc3MsIG1lc3NhZ2UpIHtcbiAgbWVzc2FnZV9jb3VudCsrO1xuICAkbWVzc2FnZV9lbGUucmVtb3ZlQ2xhc3MoJ2hpZGRlbicpLmh0bWwoJzxkaXYgY2xhc3M9XCJub3RlICcrbWVzc2FnZV9jbGFzcysnIG1lc3NhZ2UnK21lc3NhZ2VfY291bnQrJ1wiPicrbWVzc2FnZSsnPC9kaXY+Jyk7XG4gIENhcnQucmVtb3ZlX21lc3NhZ2UobWVzc2FnZV9jb3VudCk7XG59O1xuXG5DYXJ0LnJlbW92ZV9tZXNzYWdlID0gZnVuY3Rpb24gKG1lc3NhZ2VfaWQpIHtcbiAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgJCgnLm1lc3NhZ2UnK21lc3NhZ2VfaWQpLmZhZGVPdXQoZnVuY3Rpb24gKCkge1xuICAgICAgJCh0aGlzKS5yZW1vdmUoKTtcbiAgICB9KTtcbiAgfSwgQnNpZnkubWVzc2FnZV90aW1lb3V0KTtcbn07XG5cbi8vIGNvbnZlcnQgalF1ZXJ5IHNlcmlhbGl6ZUFycmF5IHJlc3VsdHMgaW50byBzb21ldGhpbmcgdXNlZnVsIFxuQ2FydC5mb3JtX3ZhbHVlcyA9IGZ1bmN0aW9uIChhcnIpIHtcbiAgdmFyIHZhbHMgPSB7fTtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcnIubGVuZ3RoOyBpKyspIHtcbiAgICB2YXIgaXRlbSA9IGFycltpXTtcbiAgICB2YWxzW2l0ZW0ubmFtZV0gPSBpdGVtLnZhbHVlO1xuICB9XG4gIHJldHVybiB2YWxzO1xufTtcblxuLypcbiAgQ2FydCB1dGlsaXR5IGZ1bmN0aW9uc1xuKi9cblxuLy8gR2V0IGl0ZW0gZnJvbSBDYXJ0SlMgYnkgdmFyaWFudCBpZFxuQ2FydC5nZXRfaXRlbV9ieV9pZCA9IGZ1bmN0aW9uICh2YXJpYW50X2lkKSB7XG4gIGlmICh0eXBlb2YgdmFyaWFudF9pZCA9PT0gJ3N0cmluZycpIHZhcmlhbnRfaWQgPSBwYXJzZUludCh2YXJpYW50X2lkKTtcbiAgdmFyIGxpbmVfaXRlbTtcbiAgaWYgKENhcnRKUykge1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgQ2FydEpTLmNhcnQuaXRlbXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciBpdGVtID0gQ2FydEpTLmNhcnQuaXRlbXNbaV07XG4gICAgICBpZiAoaXRlbS52YXJpYW50X2lkID09PSB2YXJpYW50X2lkKSB7XG4gICAgICAgIGxpbmVfaXRlbSA9IGl0ZW07XG4gICAgICB9XG4gICAgfVxuICB9XG4gIHJldHVybiBsaW5lX2l0ZW07XG59O1xuXG4vLyBDaGVjayBjYXJ0IGZvciB2YXJpYW50XG5DYXJ0Lmhhc192YXJpYW50ID0gZnVuY3Rpb24gKHZhcmlhbnRfaWQpIHtcbiAgaWYgKHR5cGVvZiB2YXJpYW50X2lkID09PSAnc3RyaW5nJykgdmFyaWFudF9pZCA9IHBhcnNlSW50KHZhcmlhbnRfaWQpO1xuICB2YXIgaGFzX3ZhcmlhbnQgPSBmYWxzZTtcbiAgaWYgKENhcnRKUykge1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgQ2FydEpTLmNhcnQuaXRlbXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciBpdGVtID0gQ2FydEpTLmNhcnQuaXRlbXNbaV07XG4gICAgICBpZiAoaXRlbS52YXJpYW50X2lkID09PSB2YXJpYW50X2lkKSB7XG4gICAgICAgIGhhc192YXJpYW50ID0gdHJ1ZTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgcmV0dXJuIGhhc192YXJpYW50O1xufTtcblxubW9kdWxlLmV4cG9ydHMgPSBDYXJ0OyIsInZhciBJbWFnZVN3aXRjaGVyID0ge307XG5cbi8vIE5PVEU6IGhvdyB3aWxsIHRoaXMgYWxsIHdvcmsgd2l0aCBzcmNzZXQgPz8hIVxuLy8gVE9ETzogc3dpcGUgYmV0d2VlbiBpbWFnZXMgb24gbW9iaWxlXG5cbi8vIFByZWxvYWQgaW1hZ2VzIGZvciBnYWxsZXJ5XG4vLyBVc2VkIHRoZSBzaXplZCBzcmNcbkltYWdlU3dpdGNoZXIucHJlbG9hZF9wcm9kdWN0X3RodW1icyA9IGZ1bmN0aW9uKCl7XG4gIHZhciAkdGh1bWJzID0gJCgnW2RhdGEtZ2FsbGVyeS1tYWluXScpO1xuICBpZiAoJHRodW1icy5sZW5ndGggPiAwKSB7XG4gICAgdmFyIG1haW5faW1hZ2VfZWxlbWVudCA9ICQoJHRodW1icy5kYXRhKCdnYWxsZXJ5LW1haW4nKSlbMF07XG4gICAgdmFyIG1haW5faW1hZ2Vfc2l6ZSA9IFNob3BpZnkuSW1hZ2UuaW1hZ2VTaXplKG1haW5faW1hZ2VfZWxlbWVudC5zcmMpO1xuICAgIFxuICAgIGlmKCR0aHVtYnMubGVuZ3RoID4gMCl7XG4gICAgICAkdGh1bWJzLmVhY2goZnVuY3Rpb24oKXtcbiAgICAgICAgdmFyIGltYWdlID0gbmV3IEltYWdlKCk7XG4gICAgICAgIHZhciBzcmMgPSAkKHRoaXMpLmF0dHIoJ2hyZWYnKTtcbiAgICAgICAgdmFyIHNpemVkX3NyYyA9IFNob3BpZnkuSW1hZ2UuZ2V0U2l6ZWRJbWFnZVVybChzcmMsIG1haW5faW1hZ2Vfc2l6ZSk7XG4gICAgICAgIGltYWdlLnNyYyA9IHNpemVkX3NyYztcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxufTtcblxuLy8gSW5pdGlhbGlzZSB0aGUgaW1hZ2Ugc3dpdGNoZXIgZm9yIGdhbGxlcnkgdGh1bWJzXG5JbWFnZVN3aXRjaGVyLmltYWdlX3N3dGljaGVyID0gZnVuY3Rpb24gKCkge1xuICAkKGRvY3VtZW50KS5vbignY2xpY2snLCAnW2RhdGEtZ2FsbGVyeS1tYWluXScsIGZ1bmN0aW9uIChlKSB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIHZhciAkY3VycmVudF90YXJnZXQgPSAkKGUuY3VycmVudFRhcmdldCk7XG4gICAgdmFyIG1haW5faW1hZ2VfZWxlbWVudCA9ICQoJGN1cnJlbnRfdGFyZ2V0LmRhdGEoJ2dhbGxlcnktbWFpbicpKVswXTtcbiAgICB2YXIgaW1hZ2Vfc3JjID0gJGN1cnJlbnRfdGFyZ2V0LmF0dHIoJ2hyZWYnKTtcbiAgICBJbWFnZVN3aXRjaGVyLnN3aXRjaF9pbWFnZShtYWluX2ltYWdlX2VsZW1lbnQsIGltYWdlX3NyYyk7XG4gIH0pO1xufTtcblxuLy8gU3dpdGNoIGltYWdlXG4vLyAtIHRha2VzIHRoZSBtYWluIGltYWdlIGVsZW1lbnQgdGhhdCB3aWxsIGhhdmUgaXQncyBzcmMgY2hhbmdlZFxuLy8gLSBhbmQgdGhlIG5ldyBzcmMgdG8gY2hhbmdlIGl0IHRvXG5JbWFnZVN3aXRjaGVyLnN3aXRjaF9pbWFnZSA9IGZ1bmN0aW9uIChtYWluX2ltYWdlX2VsZW1lbnQsIGltYWdlX3NyYykge1xuICBpZiAoIW1haW5faW1hZ2VfZWxlbWVudCB8fCAhaW1hZ2Vfc3JjKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIC8vIGdldCB0aGUgbmV3IGltYWdlIHNyYyBhdCB0aGUgY29ycmVjdCBzaXplXG4gIHZhciBtYWluX2ltYWdlX3NpemUgPSBTaG9waWZ5LkltYWdlLmltYWdlU2l6ZShtYWluX2ltYWdlX2VsZW1lbnQuc3JjKTtcbiAgdmFyIG5ld19pbWFnZV9zcmMgPSBTaG9waWZ5LkltYWdlLmdldFNpemVkSW1hZ2VVcmwoaW1hZ2Vfc3JjLCBtYWluX2ltYWdlX3NpemUpO1xuICAvLyBzd2l0Y2ggdGhlIG1haW4gaW1hZ2UgdG8gdGhlIG5ldyBzcmNcbiAgaWYgKG1haW5faW1hZ2VfZWxlbWVudC5zcmMgIT09IG5ld19pbWFnZV9zcmMpIHtcbiAgICBtYWluX2ltYWdlX2VsZW1lbnQuc3JjID0gbmV3X2ltYWdlX3NyYztcbiAgfVxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBJbWFnZVN3aXRjaGVyOyIsIi8vIENvbGxlY3QgdGhlIEJzaWZ5IG9iamVjdCBmcm9tIHRoZSB3aW5kb3cgd2l0aCBvdXIgdHJhbnNsYXRpb25zIGFuZCBsaXF1aWQgdmFyaWFibGVzIGFsbCBzZXQgdXBcbnZhciBCc2lmeSA9IHdpbmRvdy5Cc2lmeSB8fCB7fTtcblxuLypcbiAgQm9vdHN0cmFwaWZ5IHV0aWxpdHkgbWV0aG9kc1xuKi9cblxuQnNpZnkuZ2V0X3ZhcmlhbnRfYnlfaWQgPSBmdW5jdGlvbiAodmFyaWFudF9pZCkge1xuICB2YXIgc2VsZWN0ZWRfdmFyaWFudDtcbiAgaWYgKHR5cGVvZiB2YXJpYW50X2lkID09PSAnc3RyaW5nJykgdmFyaWFudF9pZCA9IHBhcnNlSW50KHZhcmlhbnRfaWQpO1xuICBcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBCc2lmeS5wcm9kdWN0LnZhcmlhbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgdmFyIHZhcmlhbnQgPSBCc2lmeS5wcm9kdWN0LnZhcmlhbnRzW2ldO1xuICAgIGlmICh2YXJpYW50LmlkID09PSB2YXJpYW50X2lkKSB7XG4gICAgICBzZWxlY3RlZF92YXJpYW50ID0gdmFyaWFudDtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHNlbGVjdGVkX3ZhcmlhbnQ7XG59O1xuXG4vLyBhZGQgYnNpZnkgY2xhc3NlcyB0byB0aGUgQnNpZnkgb2JqZWN0XG5Cc2lmeS5DYXJ0ID0gcmVxdWlyZSgnLi9ic2lmeS5jYXJ0LmpzJyk7XG5Cc2lmeS5JbWFnZVN3aXRjaGVyID0gcmVxdWlyZSgnLi9ic2lmeS5pbWFnZV9zd2l0Y2hlci5qcycpO1xuQnNpZnkuVmFyaWFudE9wdGlvblN3aXRjaGVyID0gcmVxdWlyZSgnLi9ic2lmeS52YXJpYW50X29wdGlvbl9zd2l0Y2hlci5qcycpO1xuQnNpZnkuTGlua2VkUHJvZHVjdE9wdGlvbnMgPSByZXF1aXJlKCcuL2JzaWZ5LmxpbmtlZF9wcm9kdWN0X29wdGlvbnMuanMnKTtcbkJzaWZ5LkJhbm5lciA9IHJlcXVpcmUoJy4vYnNpZnkuYmFubmVyLmpzJyk7XG5Cc2lmeS5UaHVtYm5haWxzID0gcmVxdWlyZSgnLi9ic2lmeS50aHVtYm5haWxzLmpzJyk7XG5Cc2lmeS5Tb2NpYWxGZWVkcyA9IHJlcXVpcmUoJy4vYnNpZnkuc29jaWFsX2ZlZWRzLmpzJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gQnNpZnk7IiwiLy8gKGMpIENvcHlyaWdodCAyMDE0IENhcm9saW5lIFNjaG5hcHAuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuIENvbnRhY3Q6IG1sbGVnZW9yZ2VzYW5kQGdtYWlsLmNvbVxuLy8gU2VlIGh0dHA6Ly9kb2NzLnNob3BpZnkuY29tL21hbnVhbC9jb25maWd1cmF0aW9uL3N0b3JlLWN1c3RvbWl6YXRpb24vYWR2YW5jZWQtbmF2aWdhdGlvbi9saW5rZWQtcHJvZHVjdC1vcHRpb25zXG4vLyBNb2RpZmllZCBmb3IgdXNlIHdpdGggQm9vdHN0cmFwaWZ5NCBieSBMdWNpZCAtIDAzLzIwMTVcblxudmFyIExpbmtlZFByb2R1Y3RPcHRpb25zID0ge307XG5MaW5rZWRQcm9kdWN0T3B0aW9ucy5vcHRpb25zTWFwID0ge307XG5cbkxpbmtlZFByb2R1Y3RPcHRpb25zLnVwZGF0ZU9wdGlvbnNJblNlbGVjdG9yID0gZnVuY3Rpb24oc2VsZWN0b3JJbmRleCkge1xuICB2YXIga2V5LCBzZWxlY3RvcjtcbiAgICBcbiAgc3dpdGNoIChzZWxlY3RvckluZGV4KSB7XG4gICAgY2FzZSAwOlxuICAgICAga2V5ID0gJ3Jvb3QnO1xuICAgICAgc2VsZWN0b3IgPSBqUXVlcnkoJy5zaW5nbGUtb3B0aW9uLXNlbGVjdG9yOmVxKDApJyk7XG4gICAgICBicmVhaztcbiAgICBjYXNlIDE6XG4gICAgICBrZXkgPSBqUXVlcnkoJy5zaW5nbGUtb3B0aW9uLXNlbGVjdG9yOmVxKDApJykudmFsKCk7XG4gICAgICBzZWxlY3RvciA9IGpRdWVyeSgnLnNpbmdsZS1vcHRpb24tc2VsZWN0b3I6ZXEoMSknKTtcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgMjpcbiAgICAgIGtleSA9IGpRdWVyeSgnLnNpbmdsZS1vcHRpb24tc2VsZWN0b3I6ZXEoMCknKS52YWwoKTsgIFxuICAgICAga2V5ICs9ICcgLyAnICsgalF1ZXJ5KCcuc2luZ2xlLW9wdGlvbi1zZWxlY3RvcjplcSgxKScpLnZhbCgpO1xuICAgICAgc2VsZWN0b3IgPSBqUXVlcnkoJy5zaW5nbGUtb3B0aW9uLXNlbGVjdG9yOmVxKDIpJyk7XG4gIH1cbiAgXG4gIHZhciBpbml0aWFsVmFsdWUgPSBzZWxlY3Rvci52YWwoKTtcbiAgc2VsZWN0b3IuZW1wdHkoKTsgICAgXG4gIHZhciBhdmFpbGFibGVPcHRpb25zID0gTGlua2VkUHJvZHVjdE9wdGlvbnMub3B0aW9uc01hcFtrZXldO1xuICBpZiAoYXZhaWxhYmxlT3B0aW9ucyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgZm9yICh2YXIgaT0wOyBpPGF2YWlsYWJsZU9wdGlvbnMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciBvcHRpb24gPSBhdmFpbGFibGVPcHRpb25zW2ldO1xuICAgICAgdmFyIG5ld09wdGlvbiA9IGpRdWVyeSgnPG9wdGlvbj48L29wdGlvbj4nKS52YWwob3B0aW9uKS5odG1sKG9wdGlvbik7XG4gICAgICBzZWxlY3Rvci5hcHBlbmQobmV3T3B0aW9uKTtcbiAgICB9XG4gICAgalF1ZXJ5KCcuc3dhdGNoW2RhdGEtb3B0aW9uLWluZGV4PVwiJyArIHNlbGVjdG9ySW5kZXggKyAnXCJdIC5zd2F0Y2gtZWxlbWVudCcpLmVhY2goZnVuY3Rpb24oKSB7XG4gICAgICBpZiAoalF1ZXJ5LmluQXJyYXkoJCh0aGlzKS5hdHRyKCdkYXRhLXZhbHVlJyksIGF2YWlsYWJsZU9wdGlvbnMpICE9PSAtMSkge1xuICAgICAgICAkKHRoaXMpLnJlbW92ZUNsYXNzKCdzb2xkb3V0Jykuc2hvdygpLmZpbmQoJzpyYWRpbycpLnJlbW92ZUF0dHIoJ2Rpc2FibGVkJywnZGlzYWJsZWQnKS5yZW1vdmVBdHRyKCdjaGVja2VkJyk7XG4gICAgICB9XG4gICAgICBlbHNlIHtcbiAgICAgICAgJCh0aGlzKS5hZGRDbGFzcygnc29sZG91dCcpLmhpZGUoKS5maW5kKCc6cmFkaW8nKS5yZW1vdmVBdHRyKCdjaGVja2VkJykuYXR0cignZGlzYWJsZWQnLCdkaXNhYmxlZCcpO1xuICAgICAgfVxuICAgIH0pO1xuICAgIGlmIChqUXVlcnkuaW5BcnJheShpbml0aWFsVmFsdWUsIGF2YWlsYWJsZU9wdGlvbnMpICE9PSAtMSkge1xuICAgICAgc2VsZWN0b3IudmFsKGluaXRpYWxWYWx1ZSk7XG4gICAgfVxuICAgIHNlbGVjdG9yLnRyaWdnZXIoJ2NoYW5nZScpO1xuICB9XG59O1xuXG5MaW5rZWRQcm9kdWN0T3B0aW9ucy5saW5rT3B0aW9uU2VsZWN0b3JzID0gZnVuY3Rpb24ocHJvZHVjdCkge1xuICAvLyBCdWlsZGluZyBvdXIgbWFwcGluZyBvYmplY3QuXG4gIGZvciAodmFyIGk9MDsgaTxwcm9kdWN0LnZhcmlhbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgdmFyIHZhcmlhbnQgPSBwcm9kdWN0LnZhcmlhbnRzW2ldO1xuICAgIGlmICh2YXJpYW50LmF2YWlsYWJsZSkge1xuICAgICAgdmFyIGtleTtcbiAgICAgIC8vIEdhdGhlcmluZyB2YWx1ZXMgZm9yIHRoZSAxc3QgZHJvcC1kb3duLlxuICAgICAgTGlua2VkUHJvZHVjdE9wdGlvbnMub3B0aW9uc01hcC5yb290ID0gTGlua2VkUHJvZHVjdE9wdGlvbnMub3B0aW9uc01hcC5yb290IHx8IFtdO1xuICAgICAgTGlua2VkUHJvZHVjdE9wdGlvbnMub3B0aW9uc01hcC5yb290LnB1c2godmFyaWFudC5vcHRpb24xKTtcbiAgICAgIExpbmtlZFByb2R1Y3RPcHRpb25zLm9wdGlvbnNNYXAucm9vdCA9IFNob3BpZnkudW5pcShMaW5rZWRQcm9kdWN0T3B0aW9ucy5vcHRpb25zTWFwLnJvb3QpO1xuICAgICAgLy8gR2F0aGVyaW5nIHZhbHVlcyBmb3IgdGhlIDJuZCBkcm9wLWRvd24uXG4gICAgICBpZiAocHJvZHVjdC5vcHRpb25zLmxlbmd0aCA+IDEpIHtcbiAgICAgICAga2V5ID0gdmFyaWFudC5vcHRpb24xO1xuICAgICAgICBMaW5rZWRQcm9kdWN0T3B0aW9ucy5vcHRpb25zTWFwW2tleV0gPSBMaW5rZWRQcm9kdWN0T3B0aW9ucy5vcHRpb25zTWFwW2tleV0gfHwgW107XG4gICAgICAgIExpbmtlZFByb2R1Y3RPcHRpb25zLm9wdGlvbnNNYXBba2V5XS5wdXNoKHZhcmlhbnQub3B0aW9uMik7XG4gICAgICAgIExpbmtlZFByb2R1Y3RPcHRpb25zLm9wdGlvbnNNYXBba2V5XSA9IFNob3BpZnkudW5pcShMaW5rZWRQcm9kdWN0T3B0aW9ucy5vcHRpb25zTWFwW2tleV0pO1xuICAgICAgfVxuICAgICAgLy8gR2F0aGVyaW5nIHZhbHVlcyBmb3IgdGhlIDNyZCBkcm9wLWRvd24uXG4gICAgICBpZiAocHJvZHVjdC5vcHRpb25zLmxlbmd0aCA9PT0gMykge1xuICAgICAgICBrZXkgPSB2YXJpYW50Lm9wdGlvbjEgKyAnIC8gJyArIHZhcmlhbnQub3B0aW9uMjtcbiAgICAgICAgTGlua2VkUHJvZHVjdE9wdGlvbnMub3B0aW9uc01hcFtrZXldID0gTGlua2VkUHJvZHVjdE9wdGlvbnMub3B0aW9uc01hcFtrZXldIHx8IFtdO1xuICAgICAgICBMaW5rZWRQcm9kdWN0T3B0aW9ucy5vcHRpb25zTWFwW2tleV0ucHVzaCh2YXJpYW50Lm9wdGlvbjMpO1xuICAgICAgICBMaW5rZWRQcm9kdWN0T3B0aW9ucy5vcHRpb25zTWFwW2tleV0gPSBTaG9waWZ5LnVuaXEoTGlua2VkUHJvZHVjdE9wdGlvbnMub3B0aW9uc01hcFtrZXldKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgLy8gVXBkYXRlIG9wdGlvbnMgcmlnaHQgYXdheS5cbiAgTGlua2VkUHJvZHVjdE9wdGlvbnMudXBkYXRlT3B0aW9uc0luU2VsZWN0b3IoMCk7XG4gIGlmIChwcm9kdWN0Lm9wdGlvbnMubGVuZ3RoID4gMSkgTGlua2VkUHJvZHVjdE9wdGlvbnMudXBkYXRlT3B0aW9uc0luU2VsZWN0b3IoMSk7XG4gIGlmIChwcm9kdWN0Lm9wdGlvbnMubGVuZ3RoID09PSAzKSBMaW5rZWRQcm9kdWN0T3B0aW9ucy51cGRhdGVPcHRpb25zSW5TZWxlY3RvcigyKTtcbiAgLy8gV2hlbiB0aGVyZSBpcyBhbiB1cGRhdGUgaW4gdGhlIGZpcnN0IGRyb3Bkb3duLlxuICBqUXVlcnkoXCIuc2luZ2xlLW9wdGlvbi1zZWxlY3RvcjplcSgwKVwiKS5jaGFuZ2UoZnVuY3Rpb24oKSB7XG4gICAgTGlua2VkUHJvZHVjdE9wdGlvbnMudXBkYXRlT3B0aW9uc0luU2VsZWN0b3IoMSk7XG4gICAgaWYgKHByb2R1Y3Qub3B0aW9ucy5sZW5ndGggPT09IDMpIExpbmtlZFByb2R1Y3RPcHRpb25zLnVwZGF0ZU9wdGlvbnNJblNlbGVjdG9yKDIpO1xuICAgIHJldHVybiB0cnVlO1xuICB9KTtcbiAgLy8gV2hlbiB0aGVyZSBpcyBhbiB1cGRhdGUgaW4gdGhlIHNlY29uZCBkcm9wZG93bi5cbiAgalF1ZXJ5KFwiLnNpbmdsZS1vcHRpb24tc2VsZWN0b3I6ZXEoMSlcIikuY2hhbmdlKGZ1bmN0aW9uKCkge1xuICAgIGlmIChwcm9kdWN0Lm9wdGlvbnMubGVuZ3RoID09PSAzKSBMaW5rZWRQcm9kdWN0T3B0aW9ucy51cGRhdGVPcHRpb25zSW5TZWxlY3RvcigyKTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfSk7XG4gIFxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBMaW5rZWRQcm9kdWN0T3B0aW9uczsiLCJ2YXIgaW1nbCAgICA9IHJlcXVpcmUoJ2ltYWdlc2xvYWRlZCcpO1xudmFyIG1xICAgICAgPSByZXF1aXJlKCcuL2JzaWZ5Lm1lZGlhX3F1ZXJpZXMuanMnKTtcbnJlcXVpcmUoJy4vYnNpZnkudG91Y2guanMnKTtcblxuLyogTG9hZGVyICovXG52YXIgR2FsbGVyeUxvYWRlciA9IGZ1bmN0aW9uIChlbGUsIHBhcmVudF9lbGUpIHtcbiAgdGhpcy5lbGUgPSBlbGU7XG4gIHRoaXMucGFyZW50X2VsZSA9IHBhcmVudF9lbGU7XG4gIHRoaXMub25Mb2FkZWQgPSBmdW5jdGlvbigpe307XG59O1xuXG5HYWxsZXJ5TG9hZGVyLnByb3RvdHlwZS5pbml0ID0gZnVuY3Rpb24oKXtcbiAgdGhpcy4kZWxlID0gJCh0aGlzLmVsZSk7XG4gIHRoaXMuY2Fyb3VzZWxfd2lkdGggPSAwO1xuICB0aGlzLmltZ0xvYWQgPSBuZXcgaW1nbCh0aGlzLmVsZSk7XG4gIFxuICB2YXIgX3RoaXMgPSB0aGlzO1xuICB0aGlzLmltZ0xvYWQub24oJ3Byb2dyZXNzJywgZnVuY3Rpb24oaW5zdGFuY2UsIGltYWdlKXtcbiAgICBfdGhpcy5fY29sbGVjdF9pbWFnZV93aWR0aChpbWFnZSk7XG4gIH0pLm9uKCdkb25lJywgZnVuY3Rpb24oKXtcbiAgICBfdGhpcy5fc2V0X2Nhcm91c2VsX3dpZHRoKCk7XG4gICAgX3RoaXMub25Mb2FkZWQuYXBwbHkoX3RoaXMpO1xuICB9KTtcbn07XG5cbi8vIFByaXZhdGVcbkdhbGxlcnlMb2FkZXIucHJvdG90eXBlLl9jb2xsZWN0X2ltYWdlX3dpZHRoID0gZnVuY3Rpb24oaW1hZ2Upe1xuICBpZihpbWFnZS5pc0xvYWRlZCl7XG4gICAgdmFyICRpbWcgPSAkKGltYWdlLmltZyk7XG4gICAgdmFyICRwYXJlbnQgPSAkaW1nLmNsb3Nlc3QodGhpcy5wYXJlbnRfZWxlKTtcbiAgICB0aGlzLmNhcm91c2VsX3dpZHRoICs9IHRoaXMuX2ltYWdlX3BhcmVudHNfd2lkdGgoJHBhcmVudCk7XG4gIH0gZWxzZSB7XG4gICAgJChpbWFnZS5pbWcpLmhpZGUoKTtcbiAgfVxufTtcblxuR2FsbGVyeUxvYWRlci5wcm90b3R5cGUuX2ltYWdlX3BhcmVudHNfd2lkdGggPSBmdW5jdGlvbigkaW1hZ2VfcGFyZW50KXtcbiAgLy8gcGx1cyBvbmUgYmVjdWFzZSBqcyBpcyByb3VuZGluZyBhY3R1YWwgd2lkdGggd2hlcmUgYXMgYnJvd3NlciBpcyBub3RcbiAgcmV0dXJuICRpbWFnZV9wYXJlbnQud2lkdGgoKSArIHRoaXMuX3BhZGRpbmdfdG9fbnVtKCRpbWFnZV9wYXJlbnQsICdwYWRkaW5nTGVmdCcpICsgdGhpcy5fcGFkZGluZ190b19udW0oJGltYWdlX3BhcmVudCwgJ3BhZGRpbmdSaWdodCcpICsgMTtcbn07XG5cbkdhbGxlcnlMb2FkZXIucHJvdG90eXBlLl9wYWRkaW5nX3RvX251bSA9IGZ1bmN0aW9uKCRpbWFnZV9wYXJlbnQsIHBhZGRpbmcpe1xuICByZXR1cm4gcGFyc2VJbnQoJGltYWdlX3BhcmVudC5jc3MocGFkZGluZykucmVwbGFjZSgncHgnLCAnJykpO1xufTtcblxuR2FsbGVyeUxvYWRlci5wcm90b3R5cGUuX3NldF9jYXJvdXNlbF93aWR0aCA9IGZ1bmN0aW9uKCl7XG4gIHRoaXMuJGVsZS53aWR0aCh0aGlzLmNhcm91c2VsX3dpZHRoKTtcbn07XG5cbi8qIE1haW4gKi9cbnZhciBHYWxsZXJ5ID0gZnVuY3Rpb24ob3B0aW9ucyl7XG4gIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XG4gIFxuICB0aGlzLmVsZSA9IHRoaXMub3B0aW9ucy5nYWxsZXJ5X3dyYXBwZXI7XG4gIHRoaXMuaXRlbV93cmFwcGVyID0gdGhpcy5vcHRpb25zLml0ZW1fd3JhcHBlcjtcbiAgdGhpcy5jb250cm9sc193cmFwcGVyID0gdGhpcy5vcHRpb25zLmNvbnRyb2xzX3dyYXBwZXI7XG4gIHRoaXMubG9hZGVyID0gbmV3IEdhbGxlcnlMb2FkZXIodGhpcy5lbGUsIHRoaXMub3B0aW9ucy5pdGVtX3dyYXBwZXIpO1xuICB0aGlzLm9uX2xvYWRlZCA9IGZhbHNlO1xuICBcbiAgdGhpcy5faW5pdCgpO1xufTtcblxuR2FsbGVyeS5wcm90b3R5cGUudXBkYXRlID0gZnVuY3Rpb24gKCkge1xuICB0aGlzLiRlbGUucGFyZW50KCkuYW5pbWF0ZSh7b3BhY2l0eTogMH0sICdzbG93Jyk7XG4gIHRoaXMuX3JlbW92ZV9ldmVudF9oYW5kbGVycygpO1xuICB0aGlzLl9pbml0KCk7XG59O1xuXG5HYWxsZXJ5LnByb3RvdHlwZS5faW5pdCA9IGZ1bmN0aW9uKCl7XG4gIHRoaXMuJGVsZSA9ICQodGhpcy5lbGUpO1xuXG4gIGlmKHRoaXMuJGVsZS5sZW5ndGggPiAwKXtcbiAgICB0aGlzLl9hZGRfZXZlbnRfaGFuZGxlcnMoKTtcbiAgICB0aGlzLmxvYWRlci5pbml0KCk7XG4gICAgdGhpcy5fc2V0X2N1cnJlbnRfaW1hZ2UoKTtcbiAgfVxufTtcblxuR2FsbGVyeS5wcm90b3R5cGUuX2FkZF9ldmVudF9oYW5kbGVycyA9IGZ1bmN0aW9uKCl7XG4gIHZhciBfdGhpcyA9IHRoaXM7XG4gIHRoaXMubG9hZGVyLm9uTG9hZGVkID0gZnVuY3Rpb24oKXtcbiAgICBfdGhpcy4kZWxlLnBhcmVudCgpLmFuaW1hdGUoe29wYWNpdHk6IDF9LCAnc2xvdycpO1xuICAgIGlmIChfdGhpcy5vbl9sb2FkZWQpIF90aGlzLm9uX2xvYWRlZC5hcHBseShfdGhpcyk7XG4gIH07XG4gIFxuICAkKGRvY3VtZW50KS5vbignc3dpcGVMZWZ0JywgdGhpcy5jb250cm9sc193cmFwcGVyLCBmdW5jdGlvbiAoZSkge1xuICAgIF90aGlzLl9uZXh0X2ltZygpO1xuICB9KTtcbiAgXG4gICQoZG9jdW1lbnQpLm9uKCdzd2lwZVJpZ2h0JywgdGhpcy5jb250cm9sc193cmFwcGVyLCBmdW5jdGlvbiAoZSkge1xuICAgIF90aGlzLl9wcmV2X2ltZygpO1xuICB9KTtcbiAgXG4gICQoZG9jdW1lbnQpLm9uKCdjbGljaycsICdbZGF0YS1nYWxsZXJ5LWRpcmVjdGlvbl0nLCBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIHZhciAkY3VycmVudF90YXJnZXQgPSAkKGV2ZW50LmN1cnJlbnRUYXJnZXQpO1xuICAgIGlmICgkY3VycmVudF90YXJnZXQuZGF0YSgnZ2FsbGVyeS1kaXJlY3Rpb24nKSA9PT0gJ2xlZnQnKSB7XG4gICAgICBfdGhpcy5fcHJldl9pbWcoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgX3RoaXMuX25leHRfaW1nKCk7XG4gICAgfVxuICB9KTtcbn07XG5cbkdhbGxlcnkucHJvdG90eXBlLl9yZW1vdmVfZXZlbnRfaGFuZGxlcnMgPSBmdW5jdGlvbigpe1xuICB0aGlzLmxvYWRlci5vbkxvYWRlZCA9IGZhbHNlO1xuICBcbiAgJChkb2N1bWVudCkub2ZmKCdzd2lwZUxlZnQnLCB0aGlzLmNvbnRyb2xzX3dyYXBwZXIpO1xuICAkKGRvY3VtZW50KS5vZmYoJ3N3aXBlUmlnaHQnLCB0aGlzLmNvbnRyb2xzX3dyYXBwZXIpO1xuICAkKGRvY3VtZW50KS5vZmYoJ2NsaWNrJywgJ1tkYXRhLWdhbGxlcnktZGlyZWN0aW9uXScpO1xufTtcblxuR2FsbGVyeS5wcm90b3R5cGUuX3NldF9jdXJyZW50X2ltYWdlID0gZnVuY3Rpb24oKXtcbiAgdmFyICRjdXJyZW50ID0gdGhpcy4kZWxlLmZpbmQodGhpcy5pdGVtX3dyYXBwZXIrJy5pc19jdXJyZW50Jyk7XG4gIGlmICgkY3VycmVudC5sZW5ndGggPiAwKSB7XG4gICB0aGlzLiRjdXJyZW50X2ltYWdlID0gJGN1cnJlbnQuZmlyc3QoKTtcbiAgfSBlbHNlIHtcbiAgIHRoaXMuJGN1cnJlbnRfaW1hZ2UgPSB0aGlzLiRlbGUuZmluZCh0aGlzLml0ZW1fd3JhcHBlcikuZmlyc3QoKTtcbiAgfVxuICB0aGlzLiRjdXJyZW50X2ltYWdlLmFkZENsYXNzKCdpc19jdXJyZW50Jyk7XG4gIHRoaXMuX2NoZWNrX2Zvcl9lbmQoKTtcbn07XG5cbkdhbGxlcnkucHJvdG90eXBlLl9wcmV2X2ltZyA9IGZ1bmN0aW9uKCl7XG4gIHZhciBwcmV2ID0gdGhpcy4kY3VycmVudF9pbWFnZS5wcmV2KCk7XG4gIGlmIChwcmV2Lmxlbmd0aCA+IDApIHtcbiAgICBwcmV2LmNzcyh7IG1hcmdpbkxlZnQ6ICcwJyB9KS5hZGRDbGFzcygnaXNfY3VycmVudCcpO1xuICAgIHRoaXMuJGN1cnJlbnRfaW1hZ2UucmVtb3ZlQ2xhc3MoJ2lzX2N1cnJlbnQnKTtcbiAgICB0aGlzLiRjdXJyZW50X2ltYWdlID0gcHJldjtcbiAgICB0aGlzLl9jaGVja19mb3JfZW5kKCk7XG4gIH1cbn07XG5cbkdhbGxlcnkucHJvdG90eXBlLl9uZXh0X2ltZyA9IGZ1bmN0aW9uKCl7XG4gIHZhciBuZXh0ID0gdGhpcy4kY3VycmVudF9pbWFnZS5uZXh0KCk7XG4gIGlmIChuZXh0Lmxlbmd0aCA+IDApIHtcbiAgICB2YXIgd2lkdGggPSB0aGlzLmxvYWRlci5faW1hZ2VfcGFyZW50c193aWR0aCh0aGlzLiRjdXJyZW50X2ltYWdlKTtcbiAgICB0aGlzLiRjdXJyZW50X2ltYWdlLmNzcyh7IG1hcmdpbkxlZnQ6ICh3aWR0aCAqIC0xKSB9KS5yZW1vdmVDbGFzcygnaXNfY3VycmVudCcpO1xuICAgIG5leHQuYWRkQ2xhc3MoJ2lzX2N1cnJlbnQnKTtcbiAgICB0aGlzLiRjdXJyZW50X2ltYWdlID0gbmV4dDtcbiAgICB0aGlzLl9jaGVja19mb3JfZW5kKCk7XG4gIH1cbn07XG5cbkdhbGxlcnkucHJvdG90eXBlLl9jaGVja19mb3JfZW5kID0gZnVuY3Rpb24gKCkge1xuICAkKCdbZGF0YS1nYWxsZXJ5LWRpcmVjdGlvbl0nKS5yZW1vdmVDbGFzcygnZGlzYWJsZWQnKTtcbiAgaWYgKHRoaXMuJGN1cnJlbnRfaW1hZ2UucHJldigpLmxlbmd0aCA9PT0gMCkge1xuICAgICQoJ1tkYXRhLWdhbGxlcnktZGlyZWN0aW9uPVwibGVmdFwiXScpLmFkZENsYXNzKCdkaXNhYmxlZCcpO1xuICB9IGVsc2UgaWYgKHRoaXMuJGN1cnJlbnRfaW1hZ2UubmV4dCgpLmxlbmd0aCA9PT0gMCkge1xuICAgICQoJ1tkYXRhLWdhbGxlcnktZGlyZWN0aW9uPVwicmlnaHRcIl0nKS5hZGRDbGFzcygnZGlzYWJsZWQnKTtcbiAgfVxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBHYWxsZXJ5OyIsInJlcXVpcmUoJy4vX3BvbHlmaWxscy5qcycpLmdldENvbXB1dGVkU3R5bGUoKTtcblxubW9kdWxlLmV4cG9ydHMuc2l6ZSA9IGZ1bmN0aW9uICgpIHtcbiAgcmV0dXJuIHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKGRvY3VtZW50LmJvZHksJzphZnRlcicpLmdldFByb3BlcnR5VmFsdWUoJ2NvbnRlbnQnKS5yZXBsYWNlKC9bJ1wiXS9nLCBcIlwiKTtcbn07IiwiLypqc2hpbnQgbXVsdGlzdHI6IHRydWUgKi9cblxudmFyIEluc3RhZ3JhbUZlZWQgPSBmdW5jdGlvbiAoZWxlKSB7XG4gIHRoaXMuZWxlID0gZWxlO1xuICB0aGlzLiRlbGUgPSAkKHRoaXMuZWxlKTtcbiAgdGhpcy5hcGlfdXJsID0gJ2h0dHBzOi8vYXBpLmluc3RhZ3JhbS5jb20vdjEnO1xuICBcbiAgdGhpcy5yZXF1ZXN0X3F1ZXVlID0gW107XG4gIHRoaXMucmVxdWVzdGluZyA9IGZhbHNlO1xuICBcbiAgdGhpcy5pbWFnZV9jb3VudF9kZWZhdWx0ID0gMTI7XG4gIHRoaXMuaW1hZ2VfY291bnRfYnVmZmVyID0gMTA7IC8vIGFkZCBhIGZldyBleHRyYSBpbmNhc2Ugd2Ugc29tZSBoYXZlIGJlZW4gZmlsdGVyZWQgb3V0IGJ5IGluc3RhZ3JhbSBvciB0aGUgYmxhY2tsaXN0XG4gIFxuICB0aGlzLl9nZXRfZGF0YSgpO1xuICB0aGlzLl9sb2FkX2ZlZWQoKTtcbn07XG5cbkluc3RhZ3JhbUZlZWQucHJvdG90eXBlLl9nZXRfZGF0YSA9IGZ1bmN0aW9uICgpIHtcbiAgdGhpcy5jbGllbnRfaWQgPSB0aGlzLiRlbGUuZGF0YSgnY2xpZW50LWlkJyk7XG4gIHRoaXMuaW1hZ2VfY291bnQgPSAoIHRoaXMuJGVsZS5kYXRhKCdpbWFnZS1jb3VudCcpIHx8IHRoaXMuaW1hZ2VfY291bnRfZGVmYXVsdCApO1xuICB0aGlzLmltYWdlX3RvdGFsID0gdGhpcy5pbWFnZV9jb3VudCArIHRoaXMuaW1hZ2VfY291bnRfYnVmZmVyO1xuICBcbiAgdGhpcy5oYXNodGFnID0gdGhpcy4kZWxlLmRhdGEoJ2hhc2h0YWcnKTtcbiAgdGhpcy51c2VyID0gdGhpcy4kZWxlLmRhdGEoJ3VzZXInKTtcbiAgdGhpcy5fZ2V0X3VzZXJfaWQoKTtcbn07XG5cbkluc3RhZ3JhbUZlZWQucHJvdG90eXBlLl9nZXRfdXNlcl9pZCA9IGZ1bmN0aW9uICgpIHtcbiAgaWYgKHRoaXMudXNlcikge1xuICAgIHRoaXMucmVxdWVzdF9xdWV1ZS5wdXNoKCd1c2VyX2lkJyk7XG4gICAgdGhpcy5fc3RhcnRfcmVxdWVzdHMoKTtcbiAgfVxufTtcblxuSW5zdGFncmFtRmVlZC5wcm90b3R5cGUuX2xvYWRfZmVlZCA9IGZ1bmN0aW9uICgpIHtcbiAgdmFyIHJlcXVlc3RfdHlwZTtcbiAgaWYgKHRoaXMuaGFzaHRhZyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgcmVxdWVzdF90eXBlID0gJ2hhc2h0YWcnO1xuICB9IGVsc2UgaWYgKHRoaXMudXNlciAhPT0gdW5kZWZpbmVkKSB7XG4gICAgcmVxdWVzdF90eXBlID0gJ3VzZXInO1xuICB9XG4gIHRoaXMucmVxdWVzdF9xdWV1ZS5wdXNoKHJlcXVlc3RfdHlwZSk7XG4gIHRoaXMuX3N0YXJ0X3JlcXVlc3RzKCk7XG59O1xuXG5JbnN0YWdyYW1GZWVkLnByb3RvdHlwZS5fYnVpbGRfcmVxdWVzdCA9IGZ1bmN0aW9uICh0eXBlKSB7XG4gIGlmICh0aGlzLmNsaWVudF9pZCA9PT0gbnVsbCkgdGhyb3cgJ1tFUlJPUl0gSW5zdGFncmFtOiBZb3UgbXVzdCBwcm92aWRlIGEgY2xpZW50IGlkJztcbiAgdmFyIHJlcXVlc3QgPSB7fTtcbiAgcmVxdWVzdC5kYXRhID0ge1xuICAgIGNsaWVudF9pZDogdGhpcy5jbGllbnRfaWRcbiAgfTtcbiAgXG4gIHN3aXRjaCAodHlwZSkge1xuICAgIGNhc2UgJ3VzZXJfaWQnOlxuICAgICAgcmVxdWVzdC51cmwgPSB0aGlzLmFwaV91cmwgKyAnL3VzZXJzL3NlYXJjaD9xPScgKyB0aGlzLnVzZXI7XG4gICAgICByZXF1ZXN0LmNhbGxiYWNrID0gZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgIHRoaXMudXNlcl9pZCA9IHJlc3BvbnNlLmRhdGFbMF0uaWQ7XG4gICAgICB9O1xuICAgICAgYnJlYWs7XG4gICAgXG4gICAgY2FzZSAndXNlcic6XG4gICAgICByZXF1ZXN0LnVybCA9IHRoaXMuYXBpX3VybCArICcvdXNlcnMvJyArIHRoaXMudXNlcl9pZCArICcvbWVkaWEvcmVjZW50JztcbiAgICAgIHJlcXVlc3QuZGF0YSA9ICQuZXh0ZW5kKHJlcXVlc3QuZGF0YSwge1xuICAgICAgICBjb3VudDogdGhpcy5pbWFnZV90b3RhbFxuICAgICAgfSk7XG4gICAgICByZXF1ZXN0LmNhbGxiYWNrID0gZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgIHRoaXMuX2J1aWxkX2ZlZWQocmVzcG9uc2UuZGF0YSk7XG4gICAgICB9O1xuICAgICAgYnJlYWs7XG4gICAgXG4gICAgY2FzZSAnaGFzaHRhZyc6XG4gICAgICByZXF1ZXN0LnVybCA9IHRoaXMuYXBpX3VybCArICcvdGFncy8nICsgdGhpcy5oYXNodGFnICsgJy9tZWRpYS9yZWNlbnQnO1xuICAgICAgcmVxdWVzdC5kYXRhID0gJC5leHRlbmQocmVxdWVzdC5kYXRhLCB7XG4gICAgICAgIGNvdW50OiB0aGlzLmltYWdlX3RvdGFsXG4gICAgICB9KTtcbiAgICAgIHJlcXVlc3QuY2FsbGJhY2sgPSBmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICAgdGhpcy5fYnVpbGRfZmVlZChyZXNwb25zZS5kYXRhKTtcbiAgICAgIH07XG4gICAgICBicmVhaztcbiAgfVxuICBcbiAgcmV0dXJuIHJlcXVlc3Q7XG59O1xuXG5JbnN0YWdyYW1GZWVkLnByb3RvdHlwZS5fc3RhcnRfcmVxdWVzdHMgPSBmdW5jdGlvbiAoKSB7XG4gIGlmICghdGhpcy5yZXF1ZXN0aW5nKSB7XG4gICAgdGhpcy5yZXF1ZXN0aW5nID0gdHJ1ZTtcbiAgICB0aGlzLl9yZXF1ZXN0KCk7XG4gIH1cbn07XG5cbkluc3RhZ3JhbUZlZWQucHJvdG90eXBlLl9yZXF1ZXN0ID0gZnVuY3Rpb24gKCkge1xuICBpZiAodGhpcy5yZXF1ZXN0X3F1ZXVlLmxlbmd0aCA+IDApIHtcbiAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgIHZhciByZXF1ZXN0X3R5cGUgPSB0aGlzLnJlcXVlc3RfcXVldWUuc2hpZnQoKTtcbiAgICB2YXIgcmVxdWVzdCA9IHRoaXMuX2J1aWxkX3JlcXVlc3QocmVxdWVzdF90eXBlKTtcbiAgICBcbiAgICAkLmFqYXgoe1xuICAgICAgZGF0YVR5cGU6IFwianNvbnBcIixcbiAgICAgIHVybDogcmVxdWVzdC51cmwsXG4gICAgICBkYXRhOiByZXF1ZXN0LmRhdGFcbiAgICB9KVxuICAgIC5kb25lKGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgcmVxdWVzdC5jYWxsYmFjay5hcHBseShfdGhpcywgW3Jlc3BvbnNlXSk7XG4gICAgICBfdGhpcy5fcmVxdWVzdCgpO1xuICAgIH0pXG4gICAgLmZhaWwoZnVuY3Rpb24gKGEsYixjKSB7XG4gICAgICBjb25zb2xlLmxvZygnZmFpbCcsIGEsIGIsIGMpO1xuICAgIH0pO1xuICAgIFxuICB9IGVsc2Uge1xuICAgIHRoaXMucmVxdWVzdGluZyA9IGZhbHNlO1xuICB9XG59O1xuXG5JbnN0YWdyYW1GZWVkLnByb3RvdHlwZS5fYnVpbGRfZmVlZCA9IGZ1bmN0aW9uIChkYXRhKSB7XG4gIHZhciBtYXJrdXAsXG4gICAgZmlsdGVyZWRfZGF0YSA9IHRoaXMuX2ZpbHRlcl9kYXRhKGRhdGEpO1xuICAgIFxuICBpZiAoZmlsdGVyZWRfZGF0YS5sZW5ndGggPiAwKSB7XG4gICAgbWFya3VwID0gdGhpcy5fYnVpbGRfZmVlZF9tYXJrdXAoZmlsdGVyZWRfZGF0YSk7XG4gICAgdGhpcy4kZWxlLmFkZENsYXNzKCdncm91cCcpLmF0dHIoJ2RhdGEtZ3JvdXAtc2l6ZScsIGZpbHRlcmVkX2RhdGEubGVuZ3RoKTtcbiAgfSBlbHNlIHtcbiAgICBtYXJrdXAgPSB0aGlzLl9idWlsZF9lcnJvcl9tYXJrdXAoKTtcbiAgfVxuICBcbiAgdGhpcy4kZWxlLmFwcGVuZChtYXJrdXApO1xufTtcblxuSW5zdGFncmFtRmVlZC5wcm90b3R5cGUuX2ZpbHRlcl9kYXRhID0gZnVuY3Rpb24gKGRhdGEpIHtcbiAgLyogVE9ETzogcmVtb3ZlIGJsYWNrbGlzdGVkIGltYWdlcyAqL1xuICByZXR1cm4gZGF0YTtcbn07XG5cbkluc3RhZ3JhbUZlZWQucHJvdG90eXBlLl9idWlsZF9mZWVkX21hcmt1cCA9IGZ1bmN0aW9uIChkYXRhKSB7XG4gIHZhciBtYXJrdXAgPSAnJztcbiAgdmFyIGNvdW50ID0gKGRhdGEubGVuZ3RoIDwgdGhpcy5pbWFnZV9jb3VudCk/IGRhdGEubGVuZ3RoIDogdGhpcy5pbWFnZV9jb3VudDtcbiAgXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgY291bnQ7IGkrKykge1xuICAgIHZhciBpdGVtID0gZGF0YVtpXTtcbiAgICBpZiAoaXRlbSkge1xuICAgICAgbWFya3VwICs9IHRoaXMuX2J1aWxkX2l0ZW1fbWFya3VwKGl0ZW0pO1xuICAgIH1cbiAgfVxuICByZXR1cm4gbWFya3VwO1xufTtcbiAgXG5JbnN0YWdyYW1GZWVkLnByb3RvdHlwZS5fYnVpbGRfaXRlbV9tYXJrdXAgPSBmdW5jdGlvbiAoZGF0YSkge1xuICByZXR1cm4gJzxkaXYgY2xhc3M9XCJncm91cC1pdGVtLXdyYXBcIj5cXFxuICAgIDxmaWd1cmUgY2xhc3M9XCJncm91cC1pdGVtIHRodW1ibmFpbFwiPlxcXG4gICAgICA8YSBocmVmPVwiJysgZGF0YS5saW5rICsnXCI+XFxcbiAgICAgICAgPGRpdiBjbGFzcz1cImdyb3VwLWl0ZW0taW1hZ2VcIj5cXFxuICAgICAgICAgIDxpbWcgc3JjPVwiJyArIGRhdGEuaW1hZ2VzLnN0YW5kYXJkX3Jlc29sdXRpb24udXJsICsgJ1wiIGFsdD1cIicgKyBkYXRhLmNhcHRpb24udGV4dCArICdcIj5cXFxuICAgICAgICA8L2Rpdj5cXFxuICAgICAgICA8ZmlnY2FwdGlvbiBjbGFzcz1cImdyb3VwLWl0ZW0tZGV0YWlscyBjYXB0aW9uXCI+XFxcbiAgICAgICAgICA8cD48c3BhbiBjbGFzcz1cInVzZXJcIj4nICsgZGF0YS5jYXB0aW9uLmZyb20udXNlcm5hbWUgKyAnPC9zcGFuPiAnICsgZGF0YS5jYXB0aW9uLnRleHQgKyAnPC9wPlxcXG4gICAgICAgIDwvZmlnY2FwdGlvbj5cXFxuICAgICAgPC9hPlxcXG4gICAgPC9maWd1cmU+XFxcbiAgPC9kaXY+Jztcbn07XG5cbkluc3RhZ3JhbUZlZWQucHJvdG90eXBlLl9idWlsZF9lcnJvcl9tYXJrdXAgPSBmdW5jdGlvbiAoZGF0YSkge1xuICByZXR1cm4gJzxwPicgKyB0aGlzLiRlbGUuZGF0YSgnZW1wdHktbWVzc2FnZScpICsgJzwvcD4nO1xufTtcblxubW9kdWxlLmV4cG9ydHMgPSBJbnN0YWdyYW1GZWVkOyIsInZhciBJbnN0YWdyYW0gPSByZXF1aXJlKCcuL2JzaWZ5LnNvY2lhbF9mZWVkX2luc3RhZ3JhbS5qcycpO1xuXG52YXIgU29jaWFsRmVlZHMgPSB7fTtcblxuU29jaWFsRmVlZHMuaW5pdCA9IGZ1bmN0aW9uICgpIHtcbiAgU29jaWFsRmVlZHMuaW5zdGFncmFtKCk7XG59O1xuXG5Tb2NpYWxGZWVkcy5pbnN0YWdyYW0gPSBmdW5jdGlvbiAoKSB7XG4gIHZhciBlbGVzID0gU29jaWFsRmVlZHMuX2dldF9lbGVtZW50cygnaW5zdGFncmFtJyk7XG4gIGlmIChlbGVzLmxlbmd0aCA+IDApIHtcbiAgICBlbGVzLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgbmV3IEluc3RhZ3JhbSh0aGlzKTtcbiAgICB9KTtcbiAgfVxufTtcblxuU29jaWFsRmVlZHMuX2dldF9lbGVtZW50cyA9IGZ1bmN0aW9uIChzZXJ2aWNlKSB7XG4gIHZhciBlbGVfc2VsZWN0b3IgPSAnW2RhdGEtc29jaWFsLWZlZWQ9XCInK3NlcnZpY2UrJ1wiXSc7XG4gIHJldHVybiAkKGVsZV9zZWxlY3Rvcik7XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IFNvY2lhbEZlZWRzOyIsInJlcXVpcmUoJ3VuaWZvcm1UaHVtYm5haWxzJyk7XG5yZXF1aXJlKCdqcXVlcnktb3JkZXJseScpO1xuXG52YXIgVGh1bWJuYWlscyA9IHt9O1xuXG5UaHVtYm5haWxzLmluaXQgPSBmdW5jdGlvbiAoKSB7XG4gIGlmIChCc2lmeS50aHVtYm5haWxfc2V0dGluZ3MuY29uc3RyYWluX2ltYWdlcykge1xuICAgIFxuICAgIHZhciBvcHRzID0ge307XG4gICAgb3B0cy5maXQgPSAoQnNpZnkudGh1bWJuYWlsX3NldHRpbmdzLmNyb3BfaW1hZ2VzKT8gJ2Nyb3AnIDogJ3NjYWxlJztcbiAgICBvcHRzLmFsaWduID0gQnNpZnkudGh1bWJuYWlsX3NldHRpbmdzLmltYWdlX2FsaWdubWVudC50b0xvd2VyQ2FzZSgpO1xuICAgIHZhciByYXRpbyA9IEJzaWZ5LnRodW1ibmFpbF9zZXR0aW5ncy5pbWFnZV9yYXRpby50b0xvd2VyQ2FzZSgpO1xuICAgIGlmIChyYXRpbyA9PT0gJ3NxdWFyZScgfHwgcmF0aW8gPT09ICdsYW5kc2NhcGUnIHx8IHJhdGlvID09PSAncG9ydHJhaXQnKSB7XG4gICAgICBvcHRzLmZvcm1hdCA9IHJhdGlvO1xuICAgIH0gZWxzZSB7XG4gICAgICBvcHRzLnJhdGlvID0gcmF0aW87XG4gICAgfVxuICAgIFxuICAgICQoQnNpZnkudGh1bWJuYWlsX3NlbGVjdG9ycy5pbWFnZV93cmFwcGVyKS51bmlmb3JtX3RodW1ibmFpbHMob3B0cykub24oJ3V0X2NvbXBsZXRlJywgZnVuY3Rpb24oKXtcbiAgICAgIFRodW1ibmFpbHMub3JkZXJseSgpO1xuICAgIH0pO1xuICB9IGVsc2Uge1xuICAgIC8vIGp1c3QgdXNlIG9yZGVybHlcbiAgICBUaHVtYm5haWxzLm9yZGVybHkoKTtcbiAgfVxufTtcblxuVGh1bWJuYWlscy5vcmRlcmx5ID0gZnVuY3Rpb24gKCkge1xuICAkKEJzaWZ5LnRodW1ibmFpbF9zZWxlY3RvcnMuZGV0YWlsc193cmFwcGVyKS5vcmRlcmx5KHsgbWV0aG9kOiAnY2hpbGRyZW4nIH0pO1xufTtcblxubW9kdWxlLmV4cG9ydHMgPSBUaHVtYm5haWxzOyIsInZhciBTd2lwZSA9IGZ1bmN0aW9uICgpIHtcbiAgdGhpcy50aHJlc2hvbGQgPSA1O1xuICB0aGlzLnhEb3duID0gbnVsbDsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxuICB0aGlzLnlEb3duID0gbnVsbDtcbiAgdGhpcy5hZGRfZXZlbnRfbGlzdGVuZXJzKCk7XG59O1xuXG5Td2lwZS5wcm90b3R5cGUuYWRkX2V2ZW50X2xpc3RlbmVycyA9IGZ1bmN0aW9uICgpIHtcbiAgdmFyIF90aGlzID0gdGhpcztcbiAgaWYgKEVsZW1lbnQucHJvdG90eXBlLmFkZEV2ZW50TGlzdGVuZXIpIHtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCd0b3VjaHN0YXJ0JywgZnVuY3Rpb24gKGV2dCkge1xuICAgICAgX3RoaXMuaGFuZGxlVG91Y2hTdGFydChldnQpO1xuICAgIH0sIGZhbHNlKTtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCd0b3VjaG1vdmUnLCBmdW5jdGlvbiAoZXZ0KSB7XG4gICAgICBfdGhpcy5oYW5kbGVUb3VjaE1vdmUoZXZ0KTtcbiAgICB9LCBmYWxzZSk7XG4gIH1cbn07XG5cblN3aXBlLnByb3RvdHlwZS5oYW5kbGVUb3VjaFN0YXJ0ID0gZnVuY3Rpb24gKGV2dCkgeyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gIHRoaXMueERvd24gPSBldnQudG91Y2hlc1swXS5jbGllbnRYOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gIHRoaXMueURvd24gPSBldnQudG91Y2hlc1swXS5jbGllbnRZOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXG59OyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxuXG5Td2lwZS5wcm90b3R5cGUuaGFuZGxlVG91Y2hNb3ZlID0gZnVuY3Rpb24gKGV2dCkge1xuICBpZiAoICEgdGhpcy54RG93biB8fCAhIHRoaXMueURvd24gKSByZXR1cm47XG4gIFxuICB2YXIgY3VycmVudF90YXJnZXQgPSBldnQudGFyZ2V0VG91Y2hlc1swXS50YXJnZXQ7XG4gIFxuICB2YXIgeFVwID0gZXZ0LnRvdWNoZXNbMF0uY2xpZW50WDsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcbiAgdmFyIHlVcCA9IGV2dC50b3VjaGVzWzBdLmNsaWVudFk7XG4gIFxuICB2YXIgeERpZmYgPSB0aGlzLnhEb3duIC0geFVwO1xuICB2YXIgeURpZmYgPSB0aGlzLnlEb3duIC0geVVwO1xuICBcbiAgaWYgKCBNYXRoLmFicyggeERpZmYgKSA+IE1hdGguYWJzKCB5RGlmZiApICkge1xuICAgIGlmICggeERpZmYgPiAwICkge1xuICAgICAgaWYgKHhEaWZmID4gdGhpcy50aHJlc2hvbGQpIHtcbiAgICAgICAgJChjdXJyZW50X3RhcmdldCkudHJpZ2dlcignc3dpcGVMZWZ0Jyk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmICh4RGlmZiAqIC0xID4gdGhpcy50aHJlc2hvbGQpIHtcbiAgICAgICAgJChjdXJyZW50X3RhcmdldCkudHJpZ2dlcignc3dpcGVSaWdodCcpO1xuICAgICAgfVxuICAgIH1cbiAgfSBlbHNlIHtcbiAgICBpZiAoIHlEaWZmID4gMCApIHtcbiAgICAgIGlmICh5RGlmZiA+IHRoaXMudGhyZXNob2xkKSB7XG4gICAgICAgICQoY3VycmVudF90YXJnZXQpLnRyaWdnZXIoJ3N3aXBlVXAnKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKHlEaWZmICogLTEgPiB0aGlzLnRocmVzaG9sZCkge1xuICAgICAgICAkKGN1cnJlbnRfdGFyZ2V0KS50cmlnZ2VyKCdzd2lwZURvd24nKTtcbiAgICAgIH1cbiAgICB9ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcbiAgfVxuICAvKiByZXNldCB2YWx1ZXMgKi9cbiAgdGhpcy54RG93biA9IG51bGw7XG4gIHRoaXMueURvd24gPSBudWxsOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxufTtcblxubmV3IFN3aXBlKCk7IiwidmFyIFZhcmlhbnRPcHRpb25Td2l0Y2hlciA9IHt9O1xuXG4vLyBTd2l0Y2ggdGhlIHZhcmlhbnQgaWYgdGhlIGdhbGxlcnkgdGh1bWIgaXMgbGlua2VkIHRvIG9uZVxuVmFyaWFudE9wdGlvblN3aXRjaGVyLmltYWdlX3ZhcmlhbnRfc3dpdGNoZXIgPSBmdW5jdGlvbiAoKSB7XG4gIFxuICB2YXIgJHByb2R1Y3Rfc2VsZWN0b3IgPSAkKEJzaWZ5LnNlbGVjdG9ycy5wcm9kdWN0LnNlbGVjdF9zZWxlY3Rvcik7XG4gIFxuICAkKGRvY3VtZW50KS5vbignY2xpY2snLCAnW2RhdGEtdmFyaWFudC1pZF0nLCBmdW5jdGlvbiAoZSkge1xuICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICB2YXIgJGN1cnJlbnRfdGFyZ2V0ID0gJChlLmN1cnJlbnRUYXJnZXQpO1xuICAgIC8vIHVwZGF0ZSB0aGUgcHJvZHVjdCBzZWxlY3RvciB3aXRoIHRoZSBuZXcgdmFyaWFudCBpZFxuICAgICRwcm9kdWN0X3NlbGVjdG9yLnZhbCgkY3VycmVudF90YXJnZXQuZGF0YSgndmFyaWFudC1pZCcpKTtcbiAgICAvLyB1cGRhdGUgdGhlIG9wdGlvbiBzZWxlY3RvcnNcbiAgICBWYXJpYW50T3B0aW9uU3dpdGNoZXIudXBkYXRlX3Byb2R1Y3Rfc2VsZWN0b3Jfb3B0aW9ucygkcHJvZHVjdF9zZWxlY3Rvcik7XG4gIH0pO1xufTtcblxuLy8gTWFrZSB0aGUgb3JpZ2luYWwgdmFyaWFudCBzZWxlY3RvciB1cGRhdGUgdGhlIGdlbmVyYXRlZCBvcHRpb24gc2VsZWN0b3JzXG4vLyB3ZSBhcmUgbm90IGRvaW5nIHRoaXMgb24gYSB0cmlnZ2VyIGV2ZW50IGJlY2F1c2UgaWYgd2UgZGlkIHdlJ2QgZW5kIHVwIGluIHJlY3Vyc2l2ZSBoZWxsXG5WYXJpYW50T3B0aW9uU3dpdGNoZXIudXBkYXRlX3Byb2R1Y3Rfc2VsZWN0b3Jfb3B0aW9ucyA9IGZ1bmN0aW9uICgkcHJvZHVjdF9zZWxlY3Rvcikge1xuICBcbiAgLy8gZ2V0IHRoZSBzZWxlY3RlZCB2YXJpYW50IG9iamVjdFxuICB2YXIgdmFyaWFudF9pZCA9ICRwcm9kdWN0X3NlbGVjdG9yLnZhbCgpO1xuICB2YXIgdmFyaWFudCA9IEJzaWZ5LmdldF92YXJpYW50X2J5X2lkKHZhcmlhbnRfaWQpO1xuICBcbiAgaWYgKHZhcmlhbnQpIHtcbiAgICAvLyB1cGRhdGUgZWFjaCBvcHRpb24gc2VsZWN0b3JcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IEJzaWZ5LnByb2R1Y3Qub3B0aW9ucy5sZW5ndGg7IGkrKykge1xuICAgICAgdmFyIG9wdGlvbiA9ICdvcHRpb24nKyhpKzEpO1xuICAgICAgdmFyIHZhbHVlID0gdmFyaWFudFtvcHRpb25dO1xuICAgICAgJCgnLnNpbmdsZS1vcHRpb24tc2VsZWN0b3I6ZXEoJytpKycpJykudmFsKHZhbHVlKS50cmlnZ2VyKCdjaGFuZ2UnKTtcbiAgICB9XG4gIH1cbn07XG5cbm1vZHVsZS5leHBvcnRzID0gVmFyaWFudE9wdGlvblN3aXRjaGVyOyIsIi8qXG4gIFBIRCBDYXJ0IGlzIHRoZSBtYWluIGZpbGUgZm9yIGhhbmRsaW5nIGFsbCB0aGUgZGlmZmVyZW50IHdheXMgdGhhdCB0aGUgc2l0ZSBjYW4gYWRkIGl0ZW1zIHRvIHRoZSBjYXJ0XG4qL1xuXG52YXIgU2l4UGFja0J1aWxkZXIgPSByZXF1aXJlKCcuL3BoZC5jYXJ0LnNpeHBhY2suanMnKTtcbnZhciBNdWx0aVN0ZXBCdWlsZGVyID0gcmVxdWlyZSgnLi9waGQuY2FydC5tdWx0aXN0ZXAuanMnKTtcbnZhciBTdGFuZGFyZENhcnQgPSByZXF1aXJlKCcuL3BoZC5jYXJ0LnN0YW5kYXJkLmpzJyk7XG5cbnZhciBQaGRDYXJ0ID0gZnVuY3Rpb24gKCkge1xuICB2YXIgY2FydCA9IG5ldyBTdGFuZGFyZENhcnQoKTtcbiAgXG4gIC8vIFRPRE86IG9ubHkgbG9hZCB0aGUgYXBwcm9wcmlhdGUgY2xhc3NlcyB0aGF0IGFyZSBuZWVkZWQgZm9yIHRoZSBwYWdlXG4gIFxuICBuZXcgU2l4UGFja0J1aWxkZXIoY2FydCk7XG4gIG5ldyBNdWx0aVN0ZXBCdWlsZGVyKGNhcnQpO1xufTtcblxubW9kdWxlLmV4cG9ydHMgPSBQaGRDYXJ0OyIsInZhciBNdWx0aVN0ZXBCdWlsZGVyID0gZnVuY3Rpb24gKHN0YW5kYXJkX2NhcnQpIHtcbiAgdGhpcy5zdGFuZGFyZF9jYXJ0ID0gc3RhbmRhcmRfY2FydDtcbn07XG5cbm1vZHVsZS5leHBvcnRzID0gTXVsdGlTdGVwQnVpbGRlcjsiLCJ2YXIgRXZlbnRlciA9IHJlcXVpcmUoJy4vX2V2ZW50ZXIuanMnKTtcbnZhciBJdGVtc1RvdGFsID0gcmVxdWlyZSgnLi9waGQuY2FydC5zaXhwYWNrLmhvbGRlcl90b3RhbC5qcycpO1xudmFyIEl0ZW1zSG9sZGVyID0gcmVxdWlyZSgnLi9waGQuY2FydC5zaXhwYWNrLmhvbGRlcl9pdGVtcy5qcycpO1xudmFyIEl0ZW1zRGlzcGxheSA9IHJlcXVpcmUoJy4vcGhkLmNhcnQuc2l4cGFjay5ob2xkZXJfZGlzcGxheS5qcycpO1xudmFyIEl0ZW1TdWJtaXR0ZXIgPSByZXF1aXJlKCcuL3BoZC5jYXJ0LnNpeHBhY2suaG9sZGVyX3N1Ym1pdHRlci5qcycpO1xuXG52YXIgU2l4UGFja0hvbGRlciA9IGZ1bmN0aW9uICgkZWxlKSB7XG4gIHRoaXMuJGVsZSA9ICRlbGU7XG4gIG5ldyBFdmVudGVyKHRoaXMpO1xuICBcbiAgdmFyIGxpbWl0X211bHRpcGxlID0gdGhpcy4kZWxlLmRhdGEoJ3BoZC1ob2xkaW5nLWxpbWl0LW11bHRpcGxlJykgfHwgNjtcbiAgdmFyIHN1YnNjcmlwdGlvbl9pZCA9IHRoaXMuJGVsZS5kYXRhKCdwaGQtc3Vic2NyaXB0aW9uLWlkJyk7XG4gIHZhciBzaGlwcGluZ19pbnRlcnZhbF9mcmVxdWVuY3kgPSB0aGlzLiRlbGUuZGF0YSgncGhkLXNoaXBwaW5nLWludGVydmFsLWZyZXF1ZW5jeScpO1xuICB2YXIgc2hpcHBpbmdfaW50ZXJ2YWxfdW5pdF90eXBlID0gdGhpcy4kZWxlLmRhdGEoJ3BoZC1zaGlwcGluZy1pbnRlcnZhbC11bml0LXR5cGUnKTtcbiAgXG4gIHZhciBkaXNwbGF5X2VsZW1lbnQgPSB0aGlzLiRlbGUuZmluZCgnW2RhdGEtcGhkLWhvbGRpbmctaXRlbXNdJyk7XG4gIHZhciBzdWJtaXR0ZXJfZWxlbWVudCA9IHRoaXMuJGVsZS5maW5kKCdmb3JtJyk7XG4gIFxuICB0aGlzLml0ZW1zID0gbmV3IEl0ZW1zSG9sZGVyKCdzaXhwYWNrIGJ1aWxkZXInLCBsaW1pdF9tdWx0aXBsZSwgc3Vic2NyaXB0aW9uX2lkLCBzaGlwcGluZ19pbnRlcnZhbF9mcmVxdWVuY3ksIHNoaXBwaW5nX2ludGVydmFsX3VuaXRfdHlwZSk7XG4gIHRoaXMuaXRlbXNfZGlzcGxheSA9IG5ldyBJdGVtc0Rpc3BsYXkoZGlzcGxheV9lbGVtZW50LCBsaW1pdF9tdWx0aXBsZSwgdGhpcy5pdGVtcyk7XG4gIHRoaXMudG90YWxfZGlzcGxheSA9IG5ldyBJdGVtc1RvdGFsKHRoaXMuaXRlbXMpO1xuICB0aGlzLnN1Ym1pdHRlciA9IG5ldyBJdGVtU3VibWl0dGVyKHN1Ym1pdHRlcl9lbGVtZW50LCB0aGlzLml0ZW1zKTtcbiAgXG4gIHRoaXMuX2FkZF9ldmVudF9saXN0ZW5lcnMoKTtcbn07XG5cblNpeFBhY2tIb2xkZXIucHJvdG90eXBlLmFkZF90b19ob2xkaW5nID0gZnVuY3Rpb24gKHByb2R1Y3QpIHtcbiAgdGhpcy5pdGVtcy5hZGRfaXRlbShwcm9kdWN0KTtcbiAgcmV0dXJuIHRoaXMuaXRlbXMuaXRlbV9jb3VudChwcm9kdWN0LmlkKTtcbn07XG5cblNpeFBhY2tIb2xkZXIucHJvdG90eXBlLnJlbW92ZV9mcm9tX2hvbGRpbmcgPSBmdW5jdGlvbiAocHJvZHVjdF9pZCkge1xuICB0aGlzLml0ZW1zLnJlbW92ZV9pdGVtKHByb2R1Y3RfaWQpO1xuICByZXR1cm4gdGhpcy5pdGVtcy5pdGVtX2NvdW50KHByb2R1Y3RfaWQpO1xufTtcblxuU2l4UGFja0hvbGRlci5wcm90b3R5cGUudXBkYXRlX2l0ZW1faW5faG9sZGluZyA9IGZ1bmN0aW9uIChwcm9kdWN0LCBxdHkpIHtcbiAgdGhpcy5pdGVtcy51cGRhdGVfaXRlbShwcm9kdWN0LCBxdHkpO1xuICByZXR1cm4gdGhpcy5pdGVtcy5pdGVtX2NvdW50KHByb2R1Y3QuaWQpO1xufTtcblxuLy8gUHJpdmF0ZVxuXG5TaXhQYWNrSG9sZGVyLnByb3RvdHlwZS5fYWRkX2V2ZW50X2xpc3RlbmVycyA9IGZ1bmN0aW9uICgpIHtcbiAgdmFyIF90aGlzID0gdGhpcztcbiAgXG4gIC8vIHJlbW92ZSBhbiBpdGVtIGZyb20gaG9sZGluZywgYnV0IGZyb20gaW5zaWRlIGl0cyBkaXNwbGF5XG4gIF90aGlzLml0ZW1zX2Rpc3BsYXkub24oJ1JlbW92ZURpc3BsYXlJdGVtJywgZnVuY3Rpb24gKHByb2R1Y3RfaWQpIHtcbiAgICBfdGhpcy5pdGVtcy5yZW1vdmVfaXRlbShwcm9kdWN0X2lkKTtcbiAgICB2YXIgYXJncyA9IFtcbiAgICAgIHByb2R1Y3RfaWQsXG4gICAgICB0aGlzLml0ZW1zLml0ZW1fY291bnQocHJvZHVjdF9pZClcbiAgICBdO1xuICAgIF90aGlzLnRyaWdnZXIoJ1JlbW92ZUl0ZW0nLCBhcmdzKTtcbiAgfSk7XG4gIFxuICBfdGhpcy5zdWJtaXR0ZXIub24oJ0FkZFRvQ2FydCcsIGZ1bmN0aW9uIChwdXJjaGFzZV90eXBlKSB7XG4gICAgdmFyIHByb2R1Y3RzID0gX3RoaXMuX2J1aWxkX3Byb2R1Y3RzX2Zvcl9jYXJ0KHB1cmNoYXNlX3R5cGUpO1xuICAgIF90aGlzLnRyaWdnZXIoJ0FkZFRvQ2FydCcsIFtwcm9kdWN0c10pO1xuICB9KTtcbiAgXG4gIC8vIGJ1YmJsaW5nPz8/XG4gIF90aGlzLml0ZW1zLm9uKCdJdGVtc0NsZWFyZWQnLCBmdW5jdGlvbiAoKSB7XG4gICAgX3RoaXMudHJpZ2dlcignSXRlbXNDbGVhcmVkJyk7XG4gIH0pO1xufTtcblxuU2l4UGFja0hvbGRlci5wcm90b3R5cGUuX2J1aWxkX3Byb2R1Y3RzX2Zvcl9jYXJ0ID0gZnVuY3Rpb24gKHB1cmNoYXNlX3R5cGUpIHtcbiAgdmFyIGluY2x1ZGVfc3Vic2NyaXB0aW9uX2RldGFpbHMgPSAocHVyY2hhc2VfdHlwZSA9PT0gJ3N1YnNjcmlwdGlvbicpO1xuICByZXR1cm4gdGhpcy5pdGVtcy5hbGxfcHJvZHVjdHNfYnlfaWQoaW5jbHVkZV9zdWJzY3JpcHRpb25fZGV0YWlscyk7XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IFNpeFBhY2tIb2xkZXI7IiwiLypqc2hpbnQgbXVsdGlzdHI6IHRydWUgKi9cblxudmFyIEV2ZW50ZXIgPSByZXF1aXJlKCcuL19ldmVudGVyLmpzJyk7XG5cbnZhciBTaXhQYWNrSG9sZGVySXRlbXNEaXNwbGF5ID0gZnVuY3Rpb24gKCRlbGUsIGxpbWl0X211bHRpcGxlLCBpdGVtcykge1xuICB0aGlzLiRlbGUgPSAkZWxlO1xuICB0aGlzLml0ZW1zID0gaXRlbXM7XG4gIHRoaXMubGltaXRfbXVsdGlwbGUgPSBsaW1pdF9tdWx0aXBsZTtcbiAgdGhpcy50b29sdGlwX3NlbGVjdG9yID0gJ1tkYXRhLXRvZ2dsZT1cInRvb2x0aXBcIl0nO1xuICB0aGlzLmRlZmF1bHRfY29sb3IgPSAnI0UwRjBEOSc7XG4gIFxuICBuZXcgRXZlbnRlcih0aGlzKTtcbiAgXG4gIHRoaXMuX2FkZF9ldmVudF9saXN0ZW5lcnMoKTtcbiAgdGhpcy5yZXNldCgpO1xufTtcblxuU2l4UGFja0hvbGRlckl0ZW1zRGlzcGxheS5wcm90b3R5cGUudXBkYXRlID0gZnVuY3Rpb24gKGFjdGlvbikge1xuICB0aGlzLl9jbGVhcl9kaXNwbGF5X2l0ZW1zKCk7XG4gIHRoaXMuX3JlZHJhd19kaXNwbGF5X2l0ZW1zKCk7XG4gIHRoaXMuX3VwZGF0ZV9kaXNwbGF5X2l0ZW1zKCk7XG4gIHRoaXMuX2FkZF90b29sdGlwcygpO1xuICBpZiAoYWN0aW9uICYmIGFjdGlvbiA9PT0gJ2FkZGVkJykge1xuICAgIHRoaXMuX3Njcm9sbF9jb250YWluZXIoKTtcbiAgfVxufTtcblxuU2l4UGFja0hvbGRlckl0ZW1zRGlzcGxheS5wcm90b3R5cGUucmVzZXQgPSBmdW5jdGlvbiAoKSB7XG4gIHRoaXMuX2NsZWFyX2Rpc3BsYXlfaXRlbXMoKTtcbiAgdGhpcy5fYnVpbGRfZW1wdHlfZGlzcGxheV9pdGVtcygpO1xuICB0aGlzLl9hZGRfdG9vbHRpcHMoKTtcbn07XG5cbi8vIFByaXZhdGVcblxuU2l4UGFja0hvbGRlckl0ZW1zRGlzcGxheS5wcm90b3R5cGUuX2FkZF9ldmVudF9saXN0ZW5lcnMgPSBmdW5jdGlvbiAoKSB7XG4gIHZhciBfdGhpcyA9IHRoaXM7XG4gIF90aGlzLml0ZW1zLm9uKCdJdGVtc1VwZGF0ZWQnLCBmdW5jdGlvbiAocHJvZHVjdF9pZCwgYWN0aW9uKSB7XG4gICAgX3RoaXMudXBkYXRlKGFjdGlvbik7XG4gIH0pO1xuICBcbiAgX3RoaXMuJGVsZS5vbignY2xpY2snLCAnLmhvbGRpbmctaXRlbScsIGZ1bmN0aW9uIChlKSB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIF90aGlzLl9yZW1vdmVfaXRlbShlKTtcbiAgfSk7XG59O1xuXG5TaXhQYWNrSG9sZGVySXRlbXNEaXNwbGF5LnByb3RvdHlwZS5fcmVkcmF3X2Rpc3BsYXlfaXRlbXMgPSBmdW5jdGlvbiAoKSB7XG4gIHZhciBpdGVtc19jb3VudCA9IHRoaXMuaXRlbXMudG90YWxfY291bnQoKTtcbiAgdmFyIGxpbWl0ID0gTWF0aC5mbG9vcihpdGVtc19jb3VudCAvIHRoaXMubGltaXRfbXVsdGlwbGUpICsgMTtcbiAgZm9yICh2YXIgaiA9IDA7IGogPCBsaW1pdDsgaisrKSB7XG4gICAgdGhpcy5fYnVpbGRfZW1wdHlfZGlzcGxheV9pdGVtcygpO1xuICB9XG59O1xuXG5TaXhQYWNrSG9sZGVySXRlbXNEaXNwbGF5LnByb3RvdHlwZS5fY2xlYXJfZGlzcGxheV9pdGVtcyA9IGZ1bmN0aW9uICgpIHtcbiAgdGhpcy5fcmVtb3ZlX3Rvb2x0aXBzKCk7XG4gIHRoaXMuJGVsZS5odG1sKCcnKTtcbn07XG5cblNpeFBhY2tIb2xkZXJJdGVtc0Rpc3BsYXkucHJvdG90eXBlLl9idWlsZF9lbXB0eV9kaXNwbGF5X2l0ZW1zID0gZnVuY3Rpb24gKCkge1xuICB2YXIgbWFya3VwID0gJyc7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5saW1pdF9tdWx0aXBsZTsgaSsrKSB7XG4gICAgbWFya3VwICs9IHRoaXMuX2VtcHR5X2Rpc3BsYXlfaXRlbV9tYXJrdXAoKTtcbiAgfVxuICB0aGlzLiRlbGUuYXBwZW5kKCc8ZGl2IGNsYXNzPVwiaG9sZGluZy1pdGVtLWdyb3VwXCI+JyttYXJrdXArJzwvZGl2PicpO1xufTtcblxuU2l4UGFja0hvbGRlckl0ZW1zRGlzcGxheS5wcm90b3R5cGUuX2VtcHR5X2Rpc3BsYXlfaXRlbV9tYXJrdXAgPSBmdW5jdGlvbiAoKSB7XG4gIHJldHVybiAnPGEgY2xhc3M9XCJob2xkaW5nLWl0ZW0gaG9sZGluZy1pdGVtLWRpc2FibGVkXCIgZGF0YS10b2dnbGU9XCJ0b29sdGlwXCIgZGF0YS1wbGFjZW1lbnQ9XCJyaWdodFwiIGRhdGEtcGhkLWl0ZW0taWQgdGl0bGU9XCJFbXB0eSBpdGVtIHNsb3RcIj5cXFxuICAgIDxzcGFuIGNsYXNzPVwiZmEgZmEtdGltZXMtY2lyY2xlXCI+PC9zcGFuPlxcXG4gICAgPHN2ZyB2ZXJzaW9uPVwiMS4yXCIgYmFzZXByb2ZpbGU9XCJ0aW55XCIgaWQ9XCJMYXllcl8xXCIgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIHhtbG5zOnhsaW5rPVwiaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGlua1wiIHg9XCIwcHhcIiB5PVwiMHB4XCIgdmlld2JveD1cIjAgMCAxNTAgNDAwXCIgeG1sOnNwYWNlPVwicHJlc2VydmVcIj4gPHBhdGggZD1cIk02NC4yLDkuNmMtNC43LDAuMy05LjMsMC42LTEzLjksMS45Yy0zLjYsMS4xLTUuNiwzLjctNiw3Yy0wLjksNy41LTEuOCwxNS0xLjMsMjIuNWMwLjIsMi4yLDEuNyw0LjEsMS43LDYuNSxjMCwyLjUsMC40LDQuOSwwLjcsNy40YzAuMSwxLjItMC42LDEuNi0xLjYsMS44Yy0xLjMsMC4zLTIuNCwwLjktMi44LDIuNGMtMC43LDIuOS0wLjQsMy40LDIuNiwzLjljMS4yLDAuMiwxLjgsMC43LDEuOCwyLGMtMC4xLDIuNywwLDUuMywwLDhjMCwwLjgtMC4xLDEuNS0wLjksMmMtOC40LDMuOC0xOC4xLDE1LjgtMTguMSwxNS44Yy01LjgsNy42LTkuMywxNi4xLTExLjYsMjUuNGMtMS4xLDQuNC0xLDguNy0xLjEsMTMuMSxsLTAuMiwyMTEuNGMtMC4yLDExLjUtMC40LDIyLjksMC4yLDM0LjRjMC40LDgsNC44LDEyLjUsMTMuNSwxNC4xYzUuNSwxLDExLDEuMywxNi41LDEuNmM4LjEsMC4zLDE4LjEsMC4xLDI2LjIsMC4yaDEwLjIsYzguMSwwLDE4LjEsMC4yLDI2LjItMC4yYzUuNS0wLjIsMTEtMC41LDE2LjUtMS42YzguNy0xLjYsMTMuMS02LjEsMTMuNS0xNC4xYzAuNi0xMS41LDAuMy0yMi45LDAuMi0zNC40bC0wLjItMjExLjQsYzAtNC40LDAuMS04LjctMS4xLTEzLjFjLTIuMy05LjItNS45LTE3LjctMTEuNi0yNS40YzAsMC04LTExLjMtMTguMS0xNS44Yy0wLjgtMC41LTAuOS0xLjItMC45LTJjMC0yLjcsMC01LjMsMC04LGMwLTEuMywwLjYtMS44LDEuOC0yYzIuOS0wLjUsMy4yLTEsMi42LTMuOWMtMC40LTEuNS0xLjUtMi4xLTIuOC0yLjRjLTEtMC4yLTEuNy0wLjctMS42LTEuOGMwLjItMi41LDAuNi00LjksMC43LTcuNCxjMC0yLjMsMS42LTQuMiwxLjctNi41YzAuNS03LjYtMC4zLTE1LjEtMS4zLTIyLjVjLTAuNC0zLjMtMi40LTUuOS02LTdjLTQuNi0xLjMtOS4yLTEuNi0xMy45LTEuOUM3NS4zLDguNSw2NC4yLDkuNiw2NC4yLDkuNixjLTQuNywwLjMtOS4zLDAuNi0xMy45LDEuOWMtMy42LDEuMS01LjYsMy43LTYsN2MtMC45LDcuNS0xLjgsMTUtMS4zLDIyLjVjMC4yLDIuMiwxLjcsNC4xLDEuNyw2LjVjMCwyLjUsMC40LDQuOSwwLjcsNy40LGMwLjEsMS4yLTAuNiwxLjYtMS42LDEuOGMtMS4zLDAuMy0yLjQsMC45LTIuOCwyLjRjLTAuNywyLjktMC40LDMuNCwyLjYsMy45YzEuMiwwLjIsMS44LDAuNywxLjgsMmMtMC4xLDIuNywwLDUuMywwLDgsYzAsMC44LTAuMSwxLjUtMC45LDJcIj48L3BhdGg+IDwvc3ZnPlxcXG4gIDwvYT4nO1xufTtcblxuU2l4UGFja0hvbGRlckl0ZW1zRGlzcGxheS5wcm90b3R5cGUuX3VwZGF0ZV9kaXNwbGF5X2l0ZW1zID0gZnVuY3Rpb24gKCkge1xuICB2YXIgaXRlbXNfY291bnQgPSB0aGlzLml0ZW1zLnRvdGFsX2NvdW50KCk7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgaXRlbXNfY291bnQ7IGkrKykge1xuICAgIHZhciBpdGVtID0gdGhpcy5pdGVtcy5wcm9kdWN0X2J5X2luZGV4KGkpO1xuICAgIHZhciAkaXRlbV9lbGUgPSB0aGlzLiRlbGUuZmluZCgnLmhvbGRpbmctaXRlbScpLmVxKGkpO1xuICAgIFxuICAgICRpdGVtX2VsZS5yZW1vdmVDbGFzcygnaG9sZGluZy1pdGVtLWRpc2FibGVkJylcbiAgICAuYXR0cigndGl0bGUnLCAnUmVtb3ZlICcraXRlbS50aXRsZSlcbiAgICAuYXR0cignZGF0YS1waGQtaXRlbS1pZCcsIGl0ZW0uaWQpXG4gICAgLmRhdGEoJ3BoZC1pdGVtLWlkJywgaXRlbS5pZCk7XG4gICAgXG4gICAgaWYoaXRlbS5jb2xvcil7XG4gICAgICAkaXRlbV9lbGUuZmluZCgncGF0aCcpLmNzcyh7XG4gICAgICAgIGZpbGw6ICgoaXRlbS5jb2xvclswXSAhPT0gJyMnKT8gJyMnOiAnJykraXRlbS5jb2xvclxuICAgICAgfSk7XG4gICAgfVxuICB9XG59O1xuXG5TaXhQYWNrSG9sZGVySXRlbXNEaXNwbGF5LnByb3RvdHlwZS5fc2Nyb2xsX2NvbnRhaW5lciA9IGZ1bmN0aW9uICgpIHtcbiAgdmFyICRncm91cCA9ICQoJy5ob2xkaW5nLWl0ZW0tZ3JvdXAnKTtcbiAgdmFyIGdyb3VwX21hcmdpbiA9IHBhcnNlSW50KCRncm91cC5jc3MoJ21hcmdpbi1sZWZ0JykpICsgcGFyc2VJbnQoJGdyb3VwLmNzcygnbWFyZ2luLXJpZ2h0JykpO1xuICB2YXIgZ3JvdXBfY29tYmluZWRfd2lkdGggPSAoJGdyb3VwLndpZHRoKCkgKyBncm91cF9tYXJnaW4pICogJGdyb3VwLmxlbmd0aDtcbiAgXG4gIHZhciAkY29udGFpbmVyID0gJGdyb3VwLnBhcmVudCgpO1xuICB2YXIgb2Zmc2V0ID0gZ3JvdXBfY29tYmluZWRfd2lkdGggLSAkY29udGFpbmVyLndpZHRoKCk7XG4gIFxuICB0aGlzLiRlbGUuYW5pbWF0ZSh7XG4gICAgc2Nyb2xsTGVmdDogb2Zmc2V0XG4gIH0sIDE4Nik7XG59O1xuXG5TaXhQYWNrSG9sZGVySXRlbXNEaXNwbGF5LnByb3RvdHlwZS5fYWRkX3Rvb2x0aXBzID0gZnVuY3Rpb24gKCkge1xuICAkKHRoaXMudG9vbHRpcF9zZWxlY3RvcikudG9vbHRpcCgpO1xufTtcblxuU2l4UGFja0hvbGRlckl0ZW1zRGlzcGxheS5wcm90b3R5cGUuX3JlbW92ZV90b29sdGlwcyA9IGZ1bmN0aW9uICgpIHtcbiAgJCh0aGlzLnRvb2x0aXBfc2VsZWN0b3IpLnRvb2x0aXAoJ2Rlc3Ryb3knKTtcbn07XG5cblNpeFBhY2tIb2xkZXJJdGVtc0Rpc3BsYXkucHJvdG90eXBlLl9yZW1vdmVfaXRlbSA9IGZ1bmN0aW9uIChlKSB7ICBcbiAgdmFyICRjdXJyZW50VGFyZ2V0ID0gJChlLmN1cnJlbnRUYXJnZXQpO1xuICBpZiAoISRjdXJyZW50VGFyZ2V0Lmhhc0NsYXNzKCdob2xkaW5nLWl0ZW0tZGlzYWJsZWQnKSkge1xuICAgIHZhciBhcmdzID0gW1xuICAgICAgJGN1cnJlbnRUYXJnZXQuZGF0YSgncGhkLWl0ZW0taWQnKVxuICAgIF07XG4gICAgdGhpcy50cmlnZ2VyKCdSZW1vdmVEaXNwbGF5SXRlbScsIGFyZ3MpO1xuICB9XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IFNpeFBhY2tIb2xkZXJJdGVtc0Rpc3BsYXk7IiwidmFyIEV2ZW50ZXIgPSByZXF1aXJlKCcuL19ldmVudGVyLmpzJyk7XG5cbnZhciBTaXhQYWNrSG9sZGVySXRlbXMgPSBmdW5jdGlvbiAoaWQsIGxpbWl0X211bHRpcGxlLCBzdWJzY3JpcHRpb25faWQsIHNoaXBwaW5nX2ludGVydmFsX2ZyZXF1ZW5jeSwgc2hpcHBpbmdfaW50ZXJ2YWxfdW5pdF90eXBlKSB7XG4gIG5ldyBFdmVudGVyKHRoaXMpO1xuICBcbiAgdGhpcy5pZCA9IGlkO1xuICB0aGlzLnByb2R1Y3RzID0gW107XG4gIHRoaXMucHJvZHVjdHNfYXJlX2FkZGFibGUgPSBmYWxzZTtcbiAgdGhpcy5saW1pdF9tdWx0aXBsZSA9IGxpbWl0X211bHRpcGxlO1xuICB0aGlzLnN1YnNjcmlwdGlvbl9pZCA9IHN1YnNjcmlwdGlvbl9pZDtcbiAgdGhpcy5zaGlwcGluZ19pbnRlcnZhbF9mcmVxdWVuY3kgPSBzaGlwcGluZ19pbnRlcnZhbF9mcmVxdWVuY3k7XG4gIHRoaXMuc2hpcHBpbmdfaW50ZXJ2YWxfdW5pdF90eXBlID0gc2hpcHBpbmdfaW50ZXJ2YWxfdW5pdF90eXBlO1xufTtcblxuU2l4UGFja0hvbGRlckl0ZW1zLnByb3RvdHlwZS5hZGRfaXRlbSA9IGZ1bmN0aW9uIChwcm9kdWN0KSB7XG4gIHRoaXMucHJvZHVjdHMucHVzaChwcm9kdWN0KTtcbiAgdGhpcy5fdXBkYXRlX2lzX2FkZGFibGVfYW5kX3RyaWdnZXIoJ0l0ZW1BZGRlZCcsIFtwcm9kdWN0LmlkLCAnYWRkZWQnXSk7XG59O1xuXG5TaXhQYWNrSG9sZGVySXRlbXMucHJvdG90eXBlLnJlbW92ZV9pdGVtID0gZnVuY3Rpb24gKHByb2R1Y3RfaWQpIHtcbiAgdmFyIHRvdGFsX2NvdW50ID0gdGhpcy50b3RhbF9jb3VudCgpO1xuICBmb3IgKHZhciBpID0gdG90YWxfY291bnQgLSAxOyBpID4gLTE7IGktLSkgeyAvLyBsb29wIGJhY2t3YXJkcyB0byByZW1vdmUgdGhlIGxhc3QgYWRkZWQgaXRlbVxuICAgIHZhciByZW1vdmVkID0gdGhpcy5fcmVtb3ZlX3Byb2R1Y3RfZnJvbV9zdGFjayhwcm9kdWN0X2lkLCBpKTtcbiAgICBpZiAocmVtb3ZlZCkge1xuICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG4gIHRoaXMuX3VwZGF0ZV9pc19hZGRhYmxlX2FuZF90cmlnZ2VyKCdJdGVtUmVtb3ZlZCcsIFtwcm9kdWN0X2lkLCAncmVtb3ZlZCddKTtcbn07XG5cblNpeFBhY2tIb2xkZXJJdGVtcy5wcm90b3R5cGUudXBkYXRlX2l0ZW0gPSBmdW5jdGlvbiAocHJvZHVjdCwgcXR5KSB7XG4gIHZhciBpdGVtX2NvdW50ID0gdGhpcy5pdGVtX2NvdW50KHByb2R1Y3QuaWQpO1xuICAvLyByZW1vdmUgYWxsIGl0ZW1zIGZvciBhIGNsZWFuIHNsYXRlXG4gIHZhciB0b3RhbF9jb3VudCA9IHRoaXMudG90YWxfY291bnQoKTtcbiAgZm9yICh2YXIgaSA9IHRvdGFsX2NvdW50IC0gMTsgaSA+IC0xOyBpLS0pIHsgLy8gbG9vcCBiYWNrd2FyZHMgdG8gcmVtb3ZlIHRoZSBsYXN0IGFkZGVkIGl0ZW1cbiAgICB0aGlzLl9yZW1vdmVfcHJvZHVjdF9mcm9tX3N0YWNrKHByb2R1Y3QuaWQsIGkpO1xuICB9XG4gIC8vIHJlIGFkZCB0aGUgcHJvZHVjdHMgaWYgd2UgaGF2ZSB0aGVtXG4gIGlmIChxdHkgPiAwKSB7XG4gICAgZm9yICh2YXIgaiA9IDA7IGogPCBxdHk7IGorKykge1xuICAgICAgdGhpcy5wcm9kdWN0cy5wdXNoKHByb2R1Y3QpO1xuICAgIH1cbiAgfVxuICB2YXIgYWN0aW9uID0gKGl0ZW1fY291bnQgPiBxdHkpID8gJ3JlbW92ZWQnIDogJ2FkZGVkJztcbiAgdGhpcy5fdXBkYXRlX2lzX2FkZGFibGVfYW5kX3RyaWdnZXIoJ0l0ZW1VcGRhdGVkJywgW3Byb2R1Y3QuaWQsIGFjdGlvbl0pO1xufTtcblxuU2l4UGFja0hvbGRlckl0ZW1zLnByb3RvdHlwZS5jbGVhciA9IGZ1bmN0aW9uICgpIHtcbiAgLy8gY2xlYXIgdGhlIGVudGlyZSBsb3RcbiAgdmFyIHByb2R1Y3RzID0gdGhpcy5hbGxfcHJvZHVjdHNfYnlfaWQoKTtcbiAgZm9yICh2YXIga2V5IGluIHByb2R1Y3RzKSB7XG4gICAgaWYgKHByb2R1Y3RzLmhhc093blByb3BlcnR5KGtleSkpIHtcbiAgICAgIHZhciBwcm9kdWN0ID0gcHJvZHVjdHNba2V5XTtcbiAgICAgIHRoaXMudXBkYXRlX2l0ZW0ocHJvZHVjdCwgMCk7XG4gICAgfVxuICB9XG4gIHRoaXMudHJpZ2dlcignSXRlbXNDbGVhcmVkJyk7XG59O1xuXG5TaXhQYWNrSG9sZGVySXRlbXMucHJvdG90eXBlLml0ZW1fY291bnQgPSBmdW5jdGlvbiAocHJvZHVjdF9pZCkge1xuICB2YXIgY291bnQgPSAwO1xuICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMucHJvZHVjdHMubGVuZ3RoOyBpKyspIHtcbiAgICBpZiAodGhpcy5wcm9kdWN0c1tpXS5pZCA9PT0gcHJvZHVjdF9pZCkge1xuICAgICAgY291bnQrKztcbiAgICB9XG4gIH1cbiAgcmV0dXJuIGNvdW50O1xufTtcblxuU2l4UGFja0hvbGRlckl0ZW1zLnByb3RvdHlwZS50b3RhbF9jb3VudCA9IGZ1bmN0aW9uICgpIHtcbiAgcmV0dXJuIHRoaXMucHJvZHVjdHMubGVuZ3RoO1xufTtcblxuU2l4UGFja0hvbGRlckl0ZW1zLnByb3RvdHlwZS50b3RhbF9wcmljZSA9IGZ1bmN0aW9uICgpIHtcbiAgdmFyIHRvdGFsX3ByaWNlID0gMDtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLnByb2R1Y3RzLmxlbmd0aDsgaSsrKSB7XG4gICAgdmFyIHByb2R1Y3QgPSB0aGlzLnByb2R1Y3RzW2ldO1xuICAgIHRvdGFsX3ByaWNlICs9IHByb2R1Y3QucHJpY2U7XG4gIH1cbiAgcmV0dXJuIFNob3BpZnkuZm9ybWF0TW9uZXkodG90YWxfcHJpY2UsIEJzaWZ5Lm1vbmV5X2Zvcm1hdHMubW9uZXlGb3JtYXQpO1xufTtcblxuU2l4UGFja0hvbGRlckl0ZW1zLnByb3RvdHlwZS5wcm9kdWN0X2J5X2luZGV4ID0gZnVuY3Rpb24gKGluZGV4KSB7XG4gIHJldHVybiB0aGlzLnByb2R1Y3RzW2luZGV4XTtcbn07XG5cblNpeFBhY2tIb2xkZXJJdGVtcy5wcm90b3R5cGUuYWxsX3Byb2R1Y3RzX2J5X2lkID0gZnVuY3Rpb24gKGluY2x1ZGVfc3Vic2NyaXB0aW9uX2RldGFpbHMpIHtcbiAgdmFyIHByb2R1Y3RzID0ge307XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5wcm9kdWN0cy5sZW5ndGg7IGkrKykge1xuICAgIHZhciBwcm9kdWN0ID0gdGhpcy5wcm9kdWN0c1tpXTtcbiAgICBpZiAocHJvZHVjdHNbcHJvZHVjdC5pZF0pIHtcbiAgICAgIHByb2R1Y3RzW3Byb2R1Y3QuaWRdLnF0eSsrO1xuICAgIH0gZWxzZSB7XG4gICAgICBwcm9kdWN0c1twcm9kdWN0LmlkXSA9IHtcbiAgICAgICAgaWQ6IHByb2R1Y3QuaWQsXG4gICAgICAgIHRpdGxlOiBwcm9kdWN0LnRpdGxlLFxuICAgICAgICBwcmljZTogcHJvZHVjdC5wcmljZSxcbiAgICAgICAgcXR5OiAxLFxuICAgICAgICBwcm9wZXJ0aWVzOiB7XG4gICAgICAgICAgYWRkZWRfYnk6IHRoaXMuaWRcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICAgIGlmIChpbmNsdWRlX3N1YnNjcmlwdGlvbl9kZXRhaWxzKSB7XG4gICAgICAgIHByb2R1Y3RzW3Byb2R1Y3QuaWRdLnByb3BlcnRpZXMuc2hpcHBpbmdfaW50ZXJ2YWxfZnJlcXVlbmN5ID0gdGhpcy5zaGlwcGluZ19pbnRlcnZhbF9mcmVxdWVuY3k7XG4gICAgICAgIHByb2R1Y3RzW3Byb2R1Y3QuaWRdLnByb3BlcnRpZXMuc2hpcHBpbmdfaW50ZXJ2YWxfdW5pdF90eXBlID0gdGhpcy5zaGlwcGluZ19pbnRlcnZhbF91bml0X3R5cGU7XG4gICAgICAgIHByb2R1Y3RzW3Byb2R1Y3QuaWRdLnByb3BlcnRpZXMuc3Vic2NyaXB0aW9uX2lkID0gdGhpcy5zdWJzY3JpcHRpb25faWQ7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIHJldHVybiBwcm9kdWN0cztcbn07XG5cbi8vIFByaXZhdGVcblxuU2l4UGFja0hvbGRlckl0ZW1zLnByb3RvdHlwZS5fcmVtb3ZlX3Byb2R1Y3RfZnJvbV9zdGFjayA9IGZ1bmN0aW9uIChwcm9kdWN0X2lkLCBpKSB7XG4gIHZhciByZW1vdmVkID0gW107XG4gIGlmICh0aGlzLnByb2R1Y3RzW2ldLmlkID09PSBwcm9kdWN0X2lkKSB7XG4gICAgcmVtb3ZlZCA9IHRoaXMucHJvZHVjdHMuc3BsaWNlKGksIDEpO1xuICB9XG4gIHJldHVybiByZW1vdmVkLmxlbmd0aCA+IDA7XG59O1xuXG5TaXhQYWNrSG9sZGVySXRlbXMucHJvdG90eXBlLl91cGRhdGVfaXNfYWRkYWJsZV9hbmRfdHJpZ2dlciA9IGZ1bmN0aW9uIChjdXN0b21fZXZlbnQsIGN1c3RvbV9ldmVudF9hcmdzKSB7XG4gIHRoaXMucHJvZHVjdHNfYXJlX2FkZGFibGUgPSB0aGlzLl9pc19hZGRhYmxlKCk7XG4gIHRoaXMudHJpZ2dlcihjdXN0b21fZXZlbnQsIGN1c3RvbV9ldmVudF9hcmdzKTtcbiAgdGhpcy50cmlnZ2VyKCdJdGVtc1VwZGF0ZWQnLCBjdXN0b21fZXZlbnRfYXJncyk7XG59O1xuXG5TaXhQYWNrSG9sZGVySXRlbXMucHJvdG90eXBlLl9pc19hZGRhYmxlID0gZnVuY3Rpb24gKCkge1xuICB2YXIgdG90YWxfY291bnQgPSB0aGlzLnRvdGFsX2NvdW50KCk7XG4gIHZhciBwcm9kdWN0c19tb2QgPSB0b3RhbF9jb3VudCAlIHRoaXMubGltaXRfbXVsdGlwbGU7XG4gIHJldHVybiB0b3RhbF9jb3VudCA+IDAgJiYgcHJvZHVjdHNfbW9kID09PSAwO1xufTtcblxubW9kdWxlLmV4cG9ydHMgPSBTaXhQYWNrSG9sZGVySXRlbXM7IiwiLypqc2hpbnQgbXVsdGlzdHI6IHRydWUgKi9cblxudmFyIEV2ZW50ZXIgPSByZXF1aXJlKCcuL19ldmVudGVyLmpzJyk7XG52YXIgTW9kYWwgPSByZXF1aXJlKCcuL3BoZC5tb2RhbC5qcycpO1xuXG52YXIgU2l4UGFja0hvbGRlckl0ZW1TdWJtaXR0ZXIgPSBmdW5jdGlvbiAoJGVsZSwgaXRlbXMpIHtcbiAgbmV3IEV2ZW50ZXIodGhpcyk7XG4gIHRoaXMuJGVsZSA9ICRlbGU7XG4gIHRoaXMuaXRlbXMgPSBpdGVtcztcbiAgdGhpcy4kc3VibWl0ID0gJGVsZS5maW5kKCdbdHlwZT1cInN1Ym1pdFwiXScpO1xuICB0aGlzLm1vZGFsID0gbmV3IE1vZGFsKCk7XG4gIFxuICB0aGlzLl9hZGRfZXZlbnRfbGlzdGVuZXJzKCk7XG59O1xuXG5TaXhQYWNrSG9sZGVySXRlbVN1Ym1pdHRlci5wcm90b3R5cGUuX2FkZF9ldmVudF9saXN0ZW5lcnMgPSBmdW5jdGlvbiAoKSB7XG4gIHZhciBfdGhpcyA9IHRoaXM7XG4gIFxuICBfdGhpcy4kZWxlLm9uKCdzdWJtaXQnLCBmdW5jdGlvbiAoZSkge1xuICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICBfdGhpcy5fb3Blbl9tb2RhbCgpO1xuICB9KTtcbiAgXG4gICQoZG9jdW1lbnQpLm9uKCdjbGljaycsICdbZGF0YS1waGQtYWRkLXRvLWNhcnQtYXNdJywgZnVuY3Rpb24gKGUpIHtcbiAgICB2YXIgJGN1cnJlbnRfdGFyZ2V0ID0gJChlLmN1cnJlbnRUYXJnZXQpO1xuICAgIHZhciBwdXJjaGFzZV90eXBlID0gJGN1cnJlbnRfdGFyZ2V0LmRhdGEoJ3BoZC1hZGQtdG8tY2FydC1hcycpO1xuICAgIFxuICAgIF90aGlzLnRyaWdnZXIoJ0FkZFRvQ2FydCcsIFtwdXJjaGFzZV90eXBlXSk7XG4gICAgXG4gICAgLy9fdGhpcy5tb2RhbC5jb250ZW50ID0gX3RoaXMuX2NvbXBsZXRlZF9tb2RhbF9tYXJrdXAocHVyY2hhc2VfdHlwZSk7IDwtLSB1cGRhdGUgbW9kYWwgY29udGVudFxuICAgIF90aGlzLm1vZGFsLmNsb3NlKCk7XG4gIH0pO1xuICBcbiAgX3RoaXMuaXRlbXMub24oJ0l0ZW1zVXBkYXRlZCcsIGZ1bmN0aW9uICgpIHtcbiAgICBfdGhpcy5fdG9nZ2xlX3N1Ym1pdGFibGl0eSgpO1xuICB9KTtcbn07XG5cblNpeFBhY2tIb2xkZXJJdGVtU3VibWl0dGVyLnByb3RvdHlwZS5fdG9nZ2xlX3N1Ym1pdGFibGl0eSA9IGZ1bmN0aW9uICgpIHtcbiAgaWYgKHRoaXMuaXRlbXMucHJvZHVjdHNfYXJlX2FkZGFibGUpIHtcbiAgICB0aGlzLiRzdWJtaXQucHJvcCgnZGlzYWJsZWQnLCBmYWxzZSk7XG4gIH0gZWxzZSB7XG4gICAgdGhpcy4kc3VibWl0LnByb3AoJ2Rpc2FibGVkJywgdHJ1ZSk7XG4gIH1cbn07XG5cblNpeFBhY2tIb2xkZXJJdGVtU3VibWl0dGVyLnByb3RvdHlwZS5fb3Blbl9tb2RhbCA9IGZ1bmN0aW9uICgpIHsgIFxuICB0aGlzLm1vZGFsLmNvbnRlbnQgPSB0aGlzLl9hZGRfdG9fY2FydF9tb2RhbF9tYXJrdXAoKTtcbiAgdGhpcy5tb2RhbC5vcGVuKCk7XG59O1xuXG4vLyBUT0RPOiBEb24ndCBoYXZlIHRoaXMgbWFya3VwIGluIGhlcmVcblNpeFBhY2tIb2xkZXJJdGVtU3VibWl0dGVyLnByb3RvdHlwZS5fYWRkX3RvX2NhcnRfbW9kYWxfbWFya3VwID0gZnVuY3Rpb24gKCkge1xuICByZXR1cm4gJzxkaXYgY2xhc3M9XCJtb2RhbC1oZWFkZXJcIj5cXFxuICAgIDxidXR0b24gdHlwZT1cImJ1dHRvblwiIGNsYXNzPVwiY2xvc2VcIiBkYXRhLWRpc21pc3M9XCJtb2RhbFwiIGFyaWEtbGFiZWw9XCJDbG9zZVwiPjxzcGFuIGNsYXNzPVwiZmEgZmEtdGltZXNcIiBhcmlhLWhpZGRlbj1cInRydWVcIj48L3NwYW4+PC9idXR0b24+XFxcbiAgICA8aDE+SG93IGRvIHlvdSB3YW50IHRvIGdldCB5b3VyIG9yZGVyPzwvaDE+XFxcbiAgPC9kaXY+XFxcbiAgPGRpdiBjbGFzcz1cIm1vZGFsLWJvZHlcIj5cXFxuICAgIDxidXR0b24gdHlwZT1cImJ1dHRvblwiIGNsYXNzPVwiYnRuIGJ0bi1kZWZhdWx0IGJ0bi1sZ1wiIGRhdGEtcGhkLWFkZC10by1jYXJ0LWFzPVwic2luZ2xlXCI+PHN0cm9uZz5BZGQgdG8gY2FydDwvc3Ryb25nPiBhcyBhIG9uZSBvZmYgcHVyY2Foc2U8L2J1dHRvbj5cXFxuICAgIDxidXR0b24gdHlwZT1cImJ1dHRvblwiIGNsYXNzPVwiYnRuIGJ0bi1wcmltYXJ5IGJ0bi1sZ1wiIGRhdGEtcGhkLWFkZC10by1jYXJ0LWFzPVwic3Vic2NyaXB0aW9uXCI+R2V0ICQxMCBvZmYgeW91ciBvcmRlciBpZiB5b3UgPHN0cm9uZz5TdWJzY3JpYmUgbm93ITwvc3Ryb25nPjwvYnV0dG9uPlxcXG4gIDwvZGl2Pic7XG59O1xuXG5TaXhQYWNrSG9sZGVySXRlbVN1Ym1pdHRlci5wcm90b3R5cGUuX2NvbXBsZXRlZF9tb2RhbF9tYXJrdXAgPSBmdW5jdGlvbiAocHVyY2hhc2VfdHlwZSkge1xuICByZXR1cm4gJzxkaXYgY2xhc3M9XCJtb2RhbC1oZWFkZXJcIj5cXFxuICAgIDxidXR0b24gdHlwZT1cImJ1dHRvblwiIGNsYXNzPVwiY2xvc2VcIiBkYXRhLWRpc21pc3M9XCJtb2RhbFwiIGFyaWEtbGFiZWw9XCJDbG9zZVwiPjxzcGFuIGNsYXNzPVwiZmEgZmEtdGltZXNcIiBhcmlhLWhpZGRlbj1cInRydWVcIj48L3NwYW4+PC9idXR0b24+XFxcbiAgICA8aDE+VGhhbmtzLCB5b3VyIG9yZGVyIGlzIGJlaW5nIGFkZGVkIHRvIHRoZSBjYXJ0PC9oMT5cXFxuICA8L2Rpdj5cXFxuICA8ZGl2IGNsYXNzPVwibW9kYWwtYm9keVwiPlxcXG4gICAgPHA+JytwdXJjaGFzZV90eXBlKyc8L3A+XFxcbiAgPC9kaXY+Jztcbn07XG5cbm1vZHVsZS5leHBvcnRzID0gU2l4UGFja0hvbGRlckl0ZW1TdWJtaXR0ZXI7IiwidmFyIERhdGFNb2RlbCA9IHJlcXVpcmUoJy4vX2RhdGFfbW9kZWwuanMnKTtcblxudmFyIFNpeFBhY2tIb2xkZXJUb3RhbCA9IGZ1bmN0aW9uIChpdGVtcykge1xuICB0aGlzLml0ZW1zID0gaXRlbXM7XG4gIFxuICBuZXcgRGF0YU1vZGVsKHRoaXMsIHtcbiAgICBsaW1pdDogJ1tkYXRhLXBoZC1ob2xkaW5nLWl0ZW1zLWxpbWl0XScsXG4gICAgdG90YWxfaXRlbXM6ICdbZGF0YS1waGQtaG9sZGluZy10b3RhbC1pdGVtc10nLFxuICAgIHRvdGFsX3ByaWNlOiAnW2RhdGEtcGhkLWhvbGRpbmctdG90YWwtcHJpY2VdJ1xuICB9KTtcbiAgXG4gIHRoaXMuX2FkZF9ldmVudF9saXN0ZW5lcnMoKTtcbiAgdGhpcy51cGRhdGUoKTtcbn07XG5cblNpeFBhY2tIb2xkZXJUb3RhbC5wcm90b3R5cGUudXBkYXRlID0gZnVuY3Rpb24gKCkge1xuICB0aGlzLnRvdGFsX2l0ZW1zID0gdGhpcy5pdGVtcy50b3RhbF9jb3VudCgpO1xuICB0aGlzLnRvdGFsX3ByaWNlID0gdGhpcy5pdGVtcy50b3RhbF9wcmljZSgpO1xuICBcbiAgLy8gdG90YWwgb2YgbGltaXRcbiAgdmFyIGxpbWl0ID0gdGhpcy5pdGVtcy5saW1pdF9tdWx0aXBsZSAqIChNYXRoLmNlaWwodGhpcy50b3RhbF9pdGVtcyAvIHRoaXMuaXRlbXMubGltaXRfbXVsdGlwbGUpKTtcbiAgdGhpcy5saW1pdCA9IChsaW1pdCA+IDApPyBsaW1pdCA6IHRoaXMuaXRlbXMubGltaXRfbXVsdGlwbGU7XG59O1xuXG4vLyBQcml2YXRlXG5cblNpeFBhY2tIb2xkZXJUb3RhbC5wcm90b3R5cGUuX2FkZF9ldmVudF9saXN0ZW5lcnMgPSBmdW5jdGlvbiAoKSB7XG4gIHZhciBfdGhpcyA9IHRoaXM7XG4gIF90aGlzLml0ZW1zLm9uKCdJdGVtc1VwZGF0ZWQnLCBmdW5jdGlvbiAoKSB7XG4gICAgX3RoaXMudXBkYXRlKCk7XG4gIH0pO1xufTtcblxubW9kdWxlLmV4cG9ydHMgPSBTaXhQYWNrSG9sZGVyVG90YWw7IiwidmFyIEV2ZW50ZXIgPSByZXF1aXJlKCcuL19ldmVudGVyLmpzJyk7XG52YXIgRGF0YU1vZGVsID0gcmVxdWlyZSgnLi9fZGF0YV9tb2RlbC5qcycpO1xudmFyIE1vZGFsID0gcmVxdWlyZSgnLi9waGQubW9kYWwuanMnKTtcblxudmFyIFNpeFBhY2tJdGVtID0gZnVuY3Rpb24gKCRlbGUsIGlkKSB7XG4gIHRoaXMuJGVsZSA9ICRlbGU7XG4gIHRoaXMuaWQgPSBpZDtcbiAgXG4gIG5ldyBFdmVudGVyKHRoaXMpO1xuICBuZXcgRGF0YU1vZGVsKHRoaXMsIHtcbiAgICBjb3VudDogJ1tkYXRhLXBoZC1pdGVtLScrdGhpcy5pZCsnLWNvdW50XSdcbiAgfSk7XG4gIFxuICB0aGlzLm1vZGFsID0gbmV3IE1vZGFsKCk7XG4gIFxuICB0aGlzLnZhcmlhbnRfaWQgPSB0aGlzLiRlbGUuZGF0YSgncGhkLXZhcmlhbnQtaWQnKTtcbiAgdGhpcy5wcm9kdWN0X3RpdGxlID0gdGhpcy4kZWxlLmRhdGEoJ3BoZC1wcm9kdWN0LXRpdGxlJyk7XG4gIHRoaXMucHJvZHVjdF9wcmljZSA9IHRoaXMuJGVsZS5kYXRhKCdwaGQtcHJvZHVjdC1wcmljZScpO1xuICB0aGlzLnByb2R1Y3RfY29sb3IgPSB0aGlzLiRlbGUuZGF0YSgncGhkLXByb2R1Y3QtY29sb3InKTtcbiAgXG4gIHRoaXMucHJvZHVjdCA9IHtcbiAgICBpZDogdGhpcy52YXJpYW50X2lkLFxuICAgIHRpdGxlOiB0aGlzLnByb2R1Y3RfdGl0bGUsXG4gICAgcHJpY2U6IHRoaXMucHJvZHVjdF9wcmljZSxcbiAgICBjb2xvcjogdGhpcy5wcm9kdWN0X2NvbG9yXG4gIH07XG4gIFxuICB0aGlzLl9hZGRfZXZlbnRfbGlzdGVuZXJzKCk7XG59O1xuXG4vLyBQcml2YXRlXG5cblNpeFBhY2tJdGVtLnByb3RvdHlwZS5fYWRkX2V2ZW50X2xpc3RlbmVycyA9IGZ1bmN0aW9uICgpIHtcbiAgdmFyIF90aGlzID0gdGhpcztcbiAgX3RoaXMuJGVsZS5vbignY2xpY2snLCAnW2RhdGEtcGhkLWFkZC1pdGVtXScsIGZ1bmN0aW9uIChlKSB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIGUuY3VycmVudFRhcmdldC5ibHVyKCk7XG4gICAgX3RoaXMuX3RyaWdnZXJfYWRkX3RvKCk7XG4gIH0pO1xuICBcbiAgX3RoaXMuJGVsZS5vbignY2xpY2snLCAnW2RhdGEtcGhkLXJlbW92ZS1pdGVtXScsIGZ1bmN0aW9uIChlKSB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIGUuY3VycmVudFRhcmdldC5ibHVyKCk7XG4gICAgX3RoaXMuX3RyaWdnZXJfcmVtb3ZlX2Zyb20oKTtcbiAgfSk7XG4gIFxuICBfdGhpcy4kZWxlLm9uKCdibHVyJywgJ1tkYXRhLXBoZC1lZGl0LWl0ZW1dJywgZnVuY3Rpb24gKGUpIHtcbiAgICB2YXIgcXR5ID0gcGFyc2VJbnQoZS5jdXJyZW50VGFyZ2V0LnZhbHVlKTtcbiAgICBfdGhpcy5fdHJpZ2dlcl91cGRhdGVfaG9sZGluZyhxdHkpO1xuICB9KTtcbiAgXG4gIF90aGlzLiRlbGUub24oJ2tleXVwJywgJ1tkYXRhLXBoZC1lZGl0LWl0ZW1dJywgZnVuY3Rpb24gKGUpIHtcbiAgICBpZiAoZS5rZXlDb2RlID09PSAxMyl7XG4gICAgICB2YXIgcXR5ID0gcGFyc2VJbnQoZS5jdXJyZW50VGFyZ2V0LnZhbHVlKTtcbiAgICAgIF90aGlzLl90cmlnZ2VyX3VwZGF0ZV9ob2xkaW5nKHF0eSk7XG4gICAgfVxuICB9KTtcbiAgXG4gIF90aGlzLiRlbGUub24oJ2NsaWNrJywgJ1tkYXRhLXBoZC1tb2RhbF0nLCBmdW5jdGlvbiAoZSkge1xuICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICB2YXIgJGN1cnJlbnRfdGFyZ2V0ID0gJChlLmN1cnJlbnRUYXJnZXQpO1xuICAgIHZhciBjb250ZW50X3VybCA9ICRjdXJyZW50X3RhcmdldC5hdHRyKCdocmVmJyk7XG4gICAgX3RoaXMubW9kYWwub3BlbigpO1xuICAgICQuYWpheChjb250ZW50X3VybCkuZG9uZShmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgX3RoaXMubW9kYWwuY29udGVudCA9IGRhdGE7XG4gICAgfSk7XG4gIH0pO1xufTtcblxuU2l4UGFja0l0ZW0ucHJvdG90eXBlLl90cmlnZ2VyX2FkZF90byA9IGZ1bmN0aW9uICgpIHtcbiAgdmFyIGFyZ3MgPSBbXG4gICAgdGhpcy5wcm9kdWN0XG4gIF07XG4gIHRoaXMudHJpZ2dlcignQWRkVG9Ib2xkaW5nJywgYXJncyk7XG59O1xuXG5TaXhQYWNrSXRlbS5wcm90b3R5cGUuX3RyaWdnZXJfcmVtb3ZlX2Zyb20gPSBmdW5jdGlvbiAoKSB7XG4gIHZhciBhcmdzID0gW1xuICAgIHRoaXMudmFyaWFudF9pZFxuICBdO1xuICB0aGlzLnRyaWdnZXIoJ1JlbW92ZUZyb21Ib2xkaW5nJywgYXJncyk7XG59O1xuXG5TaXhQYWNrSXRlbS5wcm90b3R5cGUuX3RyaWdnZXJfdXBkYXRlX2hvbGRpbmcgPSBmdW5jdGlvbiAocXR5KSB7XG4gIHZhciBhcmdzID0gW1xuICAgIHRoaXMucHJvZHVjdCxcbiAgICBxdHlcbiAgXTtcbiAgdGhpcy50cmlnZ2VyKCdVcGRhdGVIb2xkaW5nJywgYXJncyk7XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IFNpeFBhY2tJdGVtOyIsInZhciBQcm9kdWN0SXRlbSA9IHJlcXVpcmUoJy4vcGhkLmNhcnQuc2l4cGFjay5pdGVtLmpzJyk7XG52YXIgUHJvZHVjdEhvbGRlciA9IHJlcXVpcmUoJy4vcGhkLmNhcnQuc2l4cGFjay5ob2xkZXIuanMnKTtcblxudmFyIFNpeFBhY2tCdWlsZGVyID0gZnVuY3Rpb24gKGNhcnQpIHtcbiAgdGhpcy5jYXJ0ID0gY2FydDtcbiAgdGhpcy5ob2xkaW5nX2VsZV9zZWxlY3RvciA9ICdbZGF0YS1waGQtc2l4LXBhY2s9XCJob2xkaW5nXCJdJztcbiAgdGhpcy5pdGVtX2VsZV9zZWxlY3RvciA9ICdbZGF0YS1waGQtc2l4LXBhY2s9XCJpdGVtXCJdJztcbiAgdGhpcy5pdGVtcyA9IHt9O1xuICBcbiAgdGhpcy5faW5pdF9ob2xkZXIoKTtcbiAgdGhpcy5faW5pdF9pdGVtcygpO1xufTtcblxuU2l4UGFja0J1aWxkZXIucHJvdG90eXBlLl9pbml0X2hvbGRlciA9IGZ1bmN0aW9uICgpIHtcbiAgdmFyIF90aGlzID0gdGhpcztcbiAgdmFyICRob2xkaW5nX2VsZW1lbnQgPSAkKHRoaXMuaG9sZGluZ19lbGVfc2VsZWN0b3IpO1xuICBfdGhpcy5wcm9kdWN0X2hvbGRlciA9IG5ldyBQcm9kdWN0SG9sZGVyKCRob2xkaW5nX2VsZW1lbnQpO1xuICBfdGhpcy5wcm9kdWN0X2hvbGRlci5vbignQWRkVG9DYXJ0JywgZnVuY3Rpb24gKHByb2R1Y3RzKSB7XG4gICAgX3RoaXMuY2FydC5hZGRfcHJvZHVjdHMocHJvZHVjdHMpO1xuICAgIF90aGlzLnByb2R1Y3RfaG9sZGVyLml0ZW1zLmNsZWFyKCk7XG4gIH0pO1xuICBcbiAgLy8gdXBkYXRlIGFuIGl0ZW0gaWYgaXQgd2FzIHJlbW92ZWQgZnJvbSBpbnNpZGUgdGhlIGhvbGRlclxuICBfdGhpcy5wcm9kdWN0X2hvbGRlci5vbignUmVtb3ZlSXRlbScsIGZ1bmN0aW9uIChwcm9kdWN0X2lkLCBwcm9kdWN0X2NvdW50KSB7XG4gICAgX3RoaXMuaXRlbXNbcHJvZHVjdF9pZF0uaG9sZGluZ19jb3VudCA9IHByb2R1Y3RfY291bnQ7XG4gIH0pO1xuICBcbiAgX3RoaXMucHJvZHVjdF9ob2xkZXIub24oJ0l0ZW1zQ2xlYXJlZCcsIGZ1bmN0aW9uICgpIHtcbiAgICBmb3IgKHZhciBpIGluIF90aGlzLml0ZW1zKSB7XG4gICAgICB2YXIgaXRlbSA9IF90aGlzLml0ZW1zW2ldO1xuICAgICAgaXRlbS5jb3VudCA9ICcnO1xuICAgIH1cbiAgfSk7XG59O1xuXG5TaXhQYWNrQnVpbGRlci5wcm90b3R5cGUuX2luaXRfaXRlbXMgPSBmdW5jdGlvbiAoKSB7XG4gIHZhciBfdGhpcyA9IHRoaXM7XG4gIHZhciAkaXRlbV9lbGVtZW50cyA9ICQodGhpcy5pdGVtX2VsZV9zZWxlY3Rvcik7XG4gICRpdGVtX2VsZW1lbnRzLmVhY2goZnVuY3Rpb24gKGksIGl0ZW1fZWxlKSB7XG4gICAgdmFyICRpdGVtID0gJChpdGVtX2VsZSk7XG4gICAgdmFyIGl0ZW0gPSBuZXcgUHJvZHVjdEl0ZW0oJGl0ZW0sIGkpO1xuICAgIFxuICAgIC8vIHN0b3JlIGl0ZW1zIGJ5IHZhcmlhbnQgaWQgZm9yIGVhc3kgYWNjZXNzIGxhdGVyXG4gICAgX3RoaXMuaXRlbXNbaXRlbS52YXJpYW50X2lkXSA9IGl0ZW07XG4gICAgXG4gICAgaXRlbS5vbignQWRkVG9Ib2xkaW5nJywgZnVuY3Rpb24gKHByb2R1Y3QpIHtcbiAgICAgIHZhciBwcm9kdWN0X2NvdW50ID0gX3RoaXMucHJvZHVjdF9ob2xkZXIuYWRkX3RvX2hvbGRpbmcocHJvZHVjdCk7XG4gICAgICBpdGVtLmNvdW50ID0gcHJvZHVjdF9jb3VudDtcbiAgICB9KTtcbiAgICBcbiAgICBpdGVtLm9uKCdSZW1vdmVGcm9tSG9sZGluZycsIGZ1bmN0aW9uIChwcm9kdWN0X2lkKSB7XG4gICAgICB2YXIgcHJvZHVjdF9jb3VudCA9IF90aGlzLnByb2R1Y3RfaG9sZGVyLnJlbW92ZV9mcm9tX2hvbGRpbmcocHJvZHVjdF9pZCk7XG4gICAgICBpdGVtLmNvdW50ID0gKHByb2R1Y3RfY291bnQgPiAwKSA/IHByb2R1Y3RfY291bnQgOiAnJztcbiAgICB9KTtcbiAgICBcbiAgICBpdGVtLm9uKCdVcGRhdGVIb2xkaW5nJywgZnVuY3Rpb24gKHByb2R1Y3QsIHF0eSkge1xuICAgICAgdmFyIHByb2R1Y3RfY291bnQgPSBfdGhpcy5wcm9kdWN0X2hvbGRlci51cGRhdGVfaXRlbV9pbl9ob2xkaW5nKHByb2R1Y3QsIHF0eSk7XG4gICAgICBpdGVtLmNvdW50ID0gKHByb2R1Y3RfY291bnQgPiAwKSA/IHByb2R1Y3RfY291bnQgOiAnJztcbiAgICB9KTtcbiAgfSk7XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IFNpeFBhY2tCdWlsZGVyOyIsInZhciBDYXJ0SlMgPSByZXF1aXJlKFwiLi8uLi8uLi9ib3dlcl9jb21wb25lbnRzL3Nob3BpZnktY2FydGpzL2Rpc3QvY2FydC5qc1wiKTtcbnZhciBDYXJ0RGlzcGxheSA9IHJlcXVpcmUoJy4vcGhkLmNhcnQuc3RhbmRhcmRfZGlzcGxheS5qcycpO1xudmFyIENhcnRPZmZDYW52YXMgPSByZXF1aXJlKCcuL3BoZC5jYXJ0LnN0YW5kYXJkX29mZmNhbnZhcy5qcycpO1xuXG52YXIgU3RhbmRhcmRDYXJ0ID0gZnVuY3Rpb24gKCkge1xuICB2YXIgY2FydF9hY3Rpb25fc2VsZWN0b3IgPSAnYVtocmVmPVwiL2NhcnRcIl0nO1xuICB0aGlzLm9mZl9jYW52YXMgPSBuZXcgQ2FydE9mZkNhbnZhcyhjYXJ0X2FjdGlvbl9zZWxlY3Rvcik7XG4gIHRoaXMuZGlzcGxheSA9IG5ldyBDYXJ0RGlzcGxheSgpO1xuICBcbiAgdGhpcy5fYWRkX2V2ZW50X2xpc3RlbmVycygpO1xufTtcblxuU3RhbmRhcmRDYXJ0LnByb3RvdHlwZS5hZGRfcHJvZHVjdHMgPSBmdW5jdGlvbiAocHJvZHVjdHMpIHtcbiAgLy8gcHJvZHVjdHMgaXMgYW4gYXJyYXkgZnVsbCBvZiBwcm9kdWN0cyB0aGF0IGFyZSByZWFkeSB0byBnb1xuICBmb3IgKHZhciBrZXkgaW4gcHJvZHVjdHMpIHtcbiAgICBpZiAocHJvZHVjdHMuaGFzT3duUHJvcGVydHkoa2V5KSkge1xuICAgICAgdmFyIHByb2R1Y3QgPSBwcm9kdWN0c1trZXldO1xuICAgICAgdGhpcy5hZGRfcHJvZHVjdChwcm9kdWN0KTtcbiAgICB9XG4gIH1cbn07XG5cblN0YW5kYXJkQ2FydC5wcm90b3R5cGUuYWRkX3Byb2R1Y3QgPSBmdW5jdGlvbiAocHJvZHVjdCkge1xuICB2YXIgX3RoaXMgPSB0aGlzO1xuICBcbiAgLy8gcXVpY2sgZGlzcGxheSB1cGRhdGVcbiAgLy8gVE9ETzogRlVUVVJFIFNURVdBUlQhISEhIFFVSUNLIEFERCBJUyBOT1QgUVVJQ0sgQURESU5HIFxuICBfdGhpcy5kaXNwbGF5LnVwZGF0ZV9jYXJ0X2l0ZW0ocHJvZHVjdCk7XG4gIFxuICBcbiAgLy8gYWN0dWFsbHkgYWRkIHRvIGNhcnRcbiAgQ2FydEpTLmFkZEl0ZW0ocHJvZHVjdC5pZCwgcHJvZHVjdC5xdHksIHByb2R1Y3QucHJvcGVydGllcywge1xuICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChkYXRhLCB0ZXh0U3RhdHVzLCBqcVhIUikge1xuICAgICAgX3RoaXMuX2l0ZW1fYWRkZWRfc3VjY2VzcyhkYXRhLCB0ZXh0U3RhdHVzLCBqcVhIUik7XG4gICAgfSxcbiAgICBlcnJvcjogZnVuY3Rpb24gKGpxWEhSLCB0ZXh0U3RhdHVzLCBlcnJvclRocm93bikge1xuICAgICAgX3RoaXMuX2l0ZW1fYWRkZWRfZXJyb3IoanFYSFIsIHRleHRTdGF0dXMsIGVycm9yVGhyb3duKTtcbiAgICB9XG4gIH0pO1xufTtcblxuLy8gUHJpdmF0ZVxuXG5TdGFuZGFyZENhcnQucHJvdG90eXBlLl9hZGRfZXZlbnRfbGlzdGVuZXJzID0gZnVuY3Rpb24gKCkge1xuICB2YXIgX3RoaXMgPSB0aGlzO1xuICAkKGRvY3VtZW50KS5vbignY2FydC5yZXF1ZXN0Q29tcGxldGUnLCBmdW5jdGlvbihlLCBjYXJ0KSB7XG4gICAgY29uc29sZS5sb2coJ2NhcnQucmVxdWVzdENvbXBsZXRlJywgZSwgY2FydCk7XG4gICAgX3RoaXMuZGlzcGxheS51cGRhdGUoY2FydCk7XG4gIH0pO1xufTtcblxuU3RhbmRhcmRDYXJ0LnByb3RvdHlwZS5faXRlbV9hZGRlZF9zdWNjZXNzID0gZnVuY3Rpb24gKGRhdGEsIHRleHRTdGF0dXMsIGpxWEhSKSB7XG4gIC8vIGNvbGxlY3QgbGFzdCBhZGRlZCBpdGVtcyBmb3Igc3VjY2VzIG1lc3NhZ2VcbiAgLy8gY29uc29sZS5sb2coJ0l0ZW0gYWRkZWQ6IHN1Y2Nlc3MnLCBkYXRhLCB0ZXh0U3RhdHVzLCBqcVhIUik7XG59O1xuXG5TdGFuZGFyZENhcnQucHJvdG90eXBlLl9pdGVtX2FkZGVkX2Vycm9yID0gZnVuY3Rpb24gKGpxWEhSLCB0ZXh0U3RhdHVzLCBlcnJvclRocm93bikge1xuICAvLyBkaXNwbGF5IGVycm9yXG4gIGNvbnNvbGUubG9nKCdJdGVtIGFkZGVkOiBlcnJvcicsIGpxWEhSLCB0ZXh0U3RhdHVzLCBlcnJvclRocm93bik7XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IFN0YW5kYXJkQ2FydDtcbndpbmRvdy5DYXJ0SlMgPSBDYXJ0SlM7IiwidmFyIERhdGFNb2RlbCA9IHJlcXVpcmUoJy4vX2RhdGFfbW9kZWwuanMnKTtcbnZhciBDYXJ0SXRlbXMgPSByZXF1aXJlKCcuL3BoZC5jYXJ0LnN0YW5kYXJkX2Rpc3BsYXlfaXRlbXMuanMnKTtcblxudmFyIFN0YW5kYXJkQ2FydERpc3BsYXkgPSBmdW5jdGlvbiAoKSB7XG4gIHRoaXMuJGRldGFpbHMgPSAkKCcuc2lkZS1jYXJ0LWRldGFpbHMnKTtcbiAgdGhpcy4kZW1wdHlfbWVzc2FnZSA9ICQoJy5zaWRlLWNhcnQtZW1wdHknKTtcbiAgdGhpcy5zZWN0aW9uX2VtcHR5X21lc3NhZ2Vfc2VsZWN0b3IgPSAnLnNpZGUtY2FydC1zZWN0aW9uLWVtcHR5JztcbiAgXG4gIHZhciBpdGVtX3RlbXBsYXRlID0gJy5waGQtc2lkZS1jYXJ0LWl0ZW0tdGVtcGxhdGUnO1xuICB2YXIgaXRlbV9zZWxlY3RvciA9ICdbZGF0YS1waGQtc2lkZS1jYXJ0LWl0ZW1dJztcbiAgdmFyIHN1YnNjcmlwdGlvbl9pdGVtc193cmFwcGVyX3NlbGVjdG9yID0gJ1tkYXRhLXBoZC1zaWRlLWNhcnQtaXRlbXMtc3Vic2NyaXB0aW9uXSc7XG4gIHZhciBvbmVfb2ZmX2l0ZW1zX3dyYXBwZXJfc2VsZWN0b3IgPSAnW2RhdGEtcGhkLXNpZGUtY2FydC1pdGVtcy1vbmUtb2ZmXSc7XG4gIFxuICB0aGlzLnN1YnNjcmlwdGlvbl9pdGVtcyA9IG5ldyBDYXJ0SXRlbXMoc3Vic2NyaXB0aW9uX2l0ZW1zX3dyYXBwZXJfc2VsZWN0b3IsIGl0ZW1fc2VsZWN0b3IsIGl0ZW1fdGVtcGxhdGUpO1xuICB0aGlzLm9uZV9vZmZfaXRlbXMgPSBuZXcgQ2FydEl0ZW1zKG9uZV9vZmZfaXRlbXNfd3JhcHBlcl9zZWxlY3RvciwgaXRlbV9zZWxlY3RvciwgaXRlbV90ZW1wbGF0ZSk7XG4gIFxuICB0aGlzLml0ZW1fZ3JvdXBzID0gW1xuICAgIHRoaXMuc3Vic2NyaXB0aW9uX2l0ZW1zLFxuICAgIHRoaXMub25lX29mZl9pdGVtc1xuICBdO1xufTtcblxuU3RhbmRhcmRDYXJ0RGlzcGxheS5wcm90b3R5cGUudXBkYXRlID0gZnVuY3Rpb24gKGNhcnQpIHtcbiAgLy8gcHJldHR5IGJydXRhbCBidXQgd2Ugd2lwZSB0aGUgY2FydCBpdGVtcyBiZWZvcmUgd2UgcmVkcmF3IHRoZW0gd2l0aCB0aGUgdXBkYXRlZCBjb250ZW50XG4gIHRoaXMuY2xlYXIoKTtcblxuICAvLyBhZGQgdGhlIHVwZGF0ZWQgY29udGVudFxuICBmb3IgKHZhciBpID0gMDsgaSA8IGNhcnQuaXRlbXMubGVuZ3RoOyBpKyspIHtcbiAgICB2YXIgaXRlbSA9IGNhcnQuaXRlbXNbaV07XG4gICAgdGhpcy51cGRhdGVfY2FydF9pdGVtKGl0ZW0pO1xuICB9XG4gIFxuICAvLyB1cGRhdGUgdGhlIGVtcHR5IGRpc3BsYXkgbWVzc2FnZSBzdGF0ZXNcbiAgdGhpcy5fdXBkYXRlX2NhcnRfZW1wdHlfc3RhdGUoKTtcbn07XG5cblN0YW5kYXJkQ2FydERpc3BsYXkucHJvdG90eXBlLnVwZGF0ZV9jYXJ0X2l0ZW0gPSBmdW5jdGlvbiAoaXRlbSkge1xuICBcbiAgY29uc29sZS5sb2coJ3VwZGF0ZV9jYXJ0X2l0ZW0nLCBpdGVtKTtcbiAgXG4gIFxuICBpZiAoaXRlbS5wcm9wZXJ0aWVzLnN1YnNjcmlwdGlvbl9pZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgdGhpcy5zdWJzY3JpcHRpb25faXRlbXMudXBkYXRlX2NhcnRfaXRlbShpdGVtKTtcbiAgfSBlbHNlIHtcbiAgICB0aGlzLm9uZV9vZmZfaXRlbXMudXBkYXRlX2NhcnRfaXRlbShpdGVtKTtcbiAgfVxufTtcblxuU3RhbmRhcmRDYXJ0RGlzcGxheS5wcm90b3R5cGUuY2xlYXIgPSBmdW5jdGlvbiAoKSB7XG4gIHRoaXMuX2VhY2goZnVuY3Rpb24gKGksIGl0ZW1fZ3JvdXApIHtcbiAgICBpdGVtX2dyb3VwLmNsZWFyX2l0ZW1zKCk7XG4gIH0pO1xufTtcblxuLy8gUHJpdmF0ZVxuXG5TdGFuZGFyZENhcnREaXNwbGF5LnByb3RvdHlwZS5fdXBkYXRlX2NhcnRfZW1wdHlfc3RhdGUgPSBmdW5jdGlvbiAoKSB7XG4gIHZhciB0b3RhbF9pdGVtcyA9IDA7XG4gIFxuICAvLyBoaWRlL3Nob3cgdGhlIHNlY3Rpb25zIGVtcHR5IG1lc3NhZ2VcbiAgdGhpcy5fZWFjaChmdW5jdGlvbiAoaSwgaXRlbV9ncm91cCkge1xuICAgIHZhciBpdGVtX2dyb3VwX2NvdW50ID0gaXRlbV9ncm91cC5jb3VudCgpO1xuICAgIGlmIChpdGVtX2dyb3VwX2NvdW50ID4gMCkge1xuICAgICAgaXRlbV9ncm91cC4kaXRlbXNfd3JhcHBlci5uZXh0KHRoaXMuc2VjdGlvbl9lbXB0eV9tZXNzYWdlX3NlbGVjdG9yKS5oaWRlKCk7XG4gICAgICB0b3RhbF9pdGVtcyArPSBpdGVtX2dyb3VwX2NvdW50O1xuICAgIH0gZWxzZSB7XG4gICAgICBpdGVtX2dyb3VwLiRpdGVtc193cmFwcGVyLm5leHQodGhpcy5zZWN0aW9uX2VtcHR5X21lc3NhZ2Vfc2VsZWN0b3IpLnNob3coKTtcbiAgICB9XG4gIH0pO1xuICBcbiAgLy8gaGlkZS9zaG93IGdsb2JhbCBzZWN0aW9ucyBlbXB0eSBtZXNzYWdlXG4gIGlmICh0b3RhbF9pdGVtcyA+IDApIHtcbiAgICB0aGlzLiRlbXB0eV9tZXNzYWdlLmhpZGUoKTtcbiAgICB0aGlzLiRkZXRhaWxzLnNob3coKTtcbiAgfSBlbHNlIHtcbiAgICB0aGlzLiRlbXB0eV9tZXNzYWdlLnNob3coKTtcbiAgICB0aGlzLiRkZXRhaWxzLmhpZGUoKTtcbiAgfVxufTtcblxuU3RhbmRhcmRDYXJ0RGlzcGxheS5wcm90b3R5cGUuX2VhY2ggPSBmdW5jdGlvbiAoY2FsbGJhY2spIHtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLml0ZW1fZ3JvdXBzLmxlbmd0aDsgaSsrKSB7XG4gICAgdmFyIGl0ZW1fZ3JvdXAgPSB0aGlzLml0ZW1fZ3JvdXBzW2ldO1xuICAgIGNhbGxiYWNrKGksIGl0ZW1fZ3JvdXApO1xuICB9XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IFN0YW5kYXJkQ2FydERpc3BsYXk7IiwidmFyIERhdGFNb2RlbCA9IHJlcXVpcmUoJy4vX2RhdGFfbW9kZWwuanMnKTtcblxudmFyIFN0YW5kYXJkQ2FydERpc3BsYXlJdGVtID0gZnVuY3Rpb24gKGl0ZW1zX3dyYXBwZXJfc2VsZWN0b3IsIGl0ZW1fc2VsZWN0b3IsIGl0ZW1faWQpIHtcbiAgdGhpcy5pZCA9IGl0ZW1faWQ7XG4gIHRoaXMuaXRlbV9zZWxlY3RvciA9IGl0ZW1fc2VsZWN0b3IucmVwbGFjZSgnXScsICc9XCInK3RoaXMuaWQrJ1wiXScpO1xuICB0aGlzLml0ZW1zX3dyYXBwZXJfc2VsZWN0b3IgPSBpdGVtc193cmFwcGVyX3NlbGVjdG9yO1xuICB0aGlzLnNlbGVjdG9yID0gdGhpcy5pdGVtc193cmFwcGVyX3NlbGVjdG9yKycgJyt0aGlzLml0ZW1fc2VsZWN0b3I7XG4gIFxuICB0aGlzLiRlbGUgPSAkKHRoaXMuaXRlbV9zZWxlY3Rvcik7XG4gIFxuICB0aGlzLnByaWNlX3RlbXBhdGUgPSB0aGlzLiRlbGUuZmluZCgnLnBoZC1zaWRlLWNhcnQtaXRlbS1wcmljZS10ZW1wbGF0ZScpLmh0bWwoKTtcbiAgXG4gIG5ldyBEYXRhTW9kZWwodGhpcywge1xuICAgIHRpdGxlOiB0aGlzLnNlbGVjdG9yKycgW2RhdGEtcGhkLXNpZGUtY2FydC1pdGVtLXRpdGxlXScsXG4gICAgcXVhbnRpdHk6IHRoaXMuc2VsZWN0b3IrJyBbZGF0YS1waGQtc2lkZS1jYXJ0LWl0ZW0tcXR5XScsXG4gICAgcHJpY2U6IHRoaXMuc2VsZWN0b3IrJyBbZGF0YS1waGQtc2lkZS1jYXJ0LWl0ZW0tcHJpY2VdJyxcbiAgICBsaW5lX3ByaWNlOiB0aGlzLnNlbGVjdG9yKycgW2RhdGEtcGhkLXNpZGUtY2FydC1pdGVtLWxpbmUtcHJpY2VdJ1xuICB9KTtcbn07XG5cblN0YW5kYXJkQ2FydERpc3BsYXlJdGVtLnByb3RvdHlwZS51cGRhdGUgPSBmdW5jdGlvbiAoaXRlbSkge1xuICB0aGlzLnF1YW50aXR5ID0gaXRlbS5xdWFudGl0eTtcbiAgdGhpcy5wcmljZSA9IHRoaXMuX3ByaWNlX21hcmt1cChpdGVtLnByaWNlKTtcbiAgdGhpcy5saW5lX3ByaWNlID0gdGhpcy5fcHJpY2VfbWFya3VwKGl0ZW0ubGluZV9wcmljZSk7XG4gIGlmICh0aGlzLnRpdGxlID09PSB1bmRlZmluZWQpIHtcbiAgICB0aGlzLnRpdGxlID0gaXRlbS50aXRsZTtcbiAgfVxufTtcblxuLy8gUHJpdmF0ZVxuXG5TdGFuZGFyZENhcnREaXNwbGF5SXRlbS5wcm90b3R5cGUuX3ByaWNlX21hcmt1cCA9IGZ1bmN0aW9uIChpdGVtX3ByaWNlKSB7XG4gIHZhciBpdGVtX3ByaWNlX2Zvcm1hdGVkID0gU2hvcGlmeS5mb3JtYXRNb25leShpdGVtX3ByaWNlLCBCc2lmeS5tb25leV9mb3JtYXRzLm1vbmV5Rm9ybWF0KTtcbiAgdmFyIGl0ZW1fcHJpY2Vfd2l0aF9jdXJyZW5jeV9mb3JtYXRlZCA9IFNob3BpZnkuZm9ybWF0TW9uZXkoaXRlbV9wcmljZSwgQnNpZnkubW9uZXlfZm9ybWF0cy5tb25leVdpdGhDdXJyZW5jeUZvcm1hdCk7XG4gIHJldHVybiB0aGlzLnByaWNlX3RlbXBhdGVcbiAgICAucmVwbGFjZSgnW0lURU1fUFJJQ0VfREFUQV0nLCBpdGVtX3ByaWNlKVxuICAgIC5yZXBsYWNlKCdbSVRFTV9QUklDRV0nLCBpdGVtX3ByaWNlX2Zvcm1hdGVkKVxuICAgIC5yZXBsYWNlKCdbSVRFTV9QUklDRV9XSVRIX0NVUlJFTkNZXScsIGl0ZW1fcHJpY2Vfd2l0aF9jdXJyZW5jeV9mb3JtYXRlZCk7XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IFN0YW5kYXJkQ2FydERpc3BsYXlJdGVtOyIsInJlcXVpcmUoJy4vX3BvbHlmaWxscy5qcycpLm9iamVjdEtleXMoKTtcbnZhciBDYXJ0SXRlbSA9IHJlcXVpcmUoJy4vcGhkLmNhcnQuc3RhbmRhcmRfZGlzcGxheV9pdGVtLmpzJyk7XG5cbnZhciBTdGFuZGFyZENhcnREaXNwbGF5SXRlbXMgPSBmdW5jdGlvbiAoaXRlbXNfd3JhcHBlcl9zZWxlY3RvciwgaXRlbV9zZWxlY3RvciwgaXRlbV90ZW1wbGF0ZSkge1xuICB0aGlzLml0ZW1zID0ge307XG4gIHRoaXMuaXRlbV9zZWxlY3RvciA9IGl0ZW1fc2VsZWN0b3I7XG4gIHRoaXMuaXRlbXNfd3JhcHBlcl9zZWxlY3RvciA9IGl0ZW1zX3dyYXBwZXJfc2VsZWN0b3I7XG4gIHRoaXMuJGl0ZW1zID0gJChpdGVtX3NlbGVjdG9yKTtcbiAgdGhpcy4kaXRlbXNfd3JhcHBlciA9ICQoaXRlbXNfd3JhcHBlcl9zZWxlY3Rvcik7XG4gIHRoaXMuJGl0ZW1fdGVtcGxhdGUgPSAkKGl0ZW1fdGVtcGxhdGUpO1xuICAvLyByZW1vdmUgZGF0YSBwYXJ0cyBmcm9tIHNlbGVjdG9yIHN0cmluZyBzbyB3ZSBjYW4gYWNjZXNzIHdpdGggLmRhdGEoKSAmIC5hdHRyKClcbiAgdGhpcy5pdGVtX2lkX2RhdGFfYXR0ciA9IGl0ZW1fc2VsZWN0b3IucmVwbGFjZSgvXFxbfFxcXS9nLCAnJyk7XG4gIHRoaXMuaXRlbV9pZF9kYXRhID0gdGhpcy5pdGVtX2lkX2RhdGFfYXR0ci5yZXBsYWNlKCdkYXRhLScsICcnKTtcbiAgXG4gIHRoaXMuX2NvbGxlY3RfaXRlbXNfZnJvbV9kb20oKTtcbn07XG5cblN0YW5kYXJkQ2FydERpc3BsYXlJdGVtcy5wcm90b3R5cGUudXBkYXRlX2NhcnRfaXRlbSA9IGZ1bmN0aW9uIChpdGVtKSB7XG4gIGlmICh0aGlzLmhhc19pdGVtKGl0ZW0uaWQpKSB7XG4gICAgdGhpcy5pdGVtc1tpdGVtLmlkXS51cGRhdGUoaXRlbSk7XG4gIH0gZWxzZSB7XG4gICAgdGhpcy5fYnVpbGRfbmV3X2l0ZW0oaXRlbSk7XG4gIH1cbn07XG5cblN0YW5kYXJkQ2FydERpc3BsYXlJdGVtcy5wcm90b3R5cGUuaGFzX2l0ZW0gPSBmdW5jdGlvbiAoaXRlbV9pZCkge1xuICB2YXIgaGFzX2l0ZW0gPSBmYWxzZTtcbiAgZm9yICh2YXIgaSBpbiB0aGlzLml0ZW1zKSB7XG4gICAgaWYgKGkgPT09IGl0ZW1faWQudG9TdHJpbmcoKSkge1xuICAgICAgaGFzX2l0ZW0gPSB0cnVlO1xuICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG4gIHJldHVybiBoYXNfaXRlbTtcbn07XG5cblN0YW5kYXJkQ2FydERpc3BsYXlJdGVtcy5wcm90b3R5cGUuY291bnQgPSBmdW5jdGlvbiAoKSB7XG4gIHJldHVybiBPYmplY3Qua2V5cyh0aGlzLml0ZW1zKS5sZW5ndGg7XG59O1xuXG5TdGFuZGFyZENhcnREaXNwbGF5SXRlbXMucHJvdG90eXBlLmNsZWFyX2l0ZW1zID0gZnVuY3Rpb24gKCkge1xuICB0aGlzLml0ZW1zID0ge307XG4gIHRoaXMuJGl0ZW1zX3dyYXBwZXIuaHRtbCgnJyk7XG59O1xuXG4vLyBQcml2YXRlXG5cblN0YW5kYXJkQ2FydERpc3BsYXlJdGVtcy5wcm90b3R5cGUuX2FkZF9uZXdfaXRlbSA9IGZ1bmN0aW9uIChpdGVtX2lkKSB7XG4gIHRoaXMuaXRlbXNbaXRlbV9pZF0gPSBuZXcgQ2FydEl0ZW0odGhpcy5pdGVtc193cmFwcGVyX3NlbGVjdG9yLCB0aGlzLml0ZW1fc2VsZWN0b3IsIGl0ZW1faWQpO1xufTtcblxuU3RhbmRhcmRDYXJ0RGlzcGxheUl0ZW1zLnByb3RvdHlwZS5fY29sbGVjdF9pdGVtc19mcm9tX2RvbSA9IGZ1bmN0aW9uICgpIHtcbiAgdmFyIF90aGlzID0gdGhpcztcbiAgdGhpcy4kaXRlbXMuZWFjaChmdW5jdGlvbiAoaSwgaXRlbSkge1xuICAgIHZhciAkaXRlbSA9ICQoaXRlbSk7XG4gICAgdmFyIGl0ZW1faWQgPSAkaXRlbS5kYXRhKF90aGlzLml0ZW1faWRfZGF0YSk7XG4gICAgaWYgKCFfdGhpcy5oYXNfaXRlbShpdGVtX2lkKSkge1xuICAgICAgX3RoaXMuX2FkZF9uZXdfaXRlbShpdGVtX2lkKTtcbiAgICB9XG4gIH0pO1xufTtcblxuU3RhbmRhcmRDYXJ0RGlzcGxheUl0ZW1zLnByb3RvdHlwZS5fYnVpbGRfbmV3X2l0ZW0gPSBmdW5jdGlvbiAoaXRlbSkge1xuICB2YXIgJGl0ZW1fbWFya3VwID0gJCh0aGlzLiRpdGVtX3RlbXBsYXRlLmh0bWwoKSk7XG4gICRpdGVtX21hcmt1cC5kYXRhKHRoaXMuaXRlbV9pZF9kYXRhLCBpdGVtLmlkKS5hdHRyKHRoaXMuaXRlbV9pZF9kYXRhX2F0dHIsIGl0ZW0uaWQpO1xuICB0aGlzLiRpdGVtc193cmFwcGVyLmFwcGVuZCgkaXRlbV9tYXJrdXApO1xuICBcbiAgdGhpcy5fYWRkX25ld19pdGVtKGl0ZW0uaWQpO1xuICB0aGlzLml0ZW1zW2l0ZW0uaWRdLnVwZGF0ZShpdGVtKTtcbn07XG5cbm1vZHVsZS5leHBvcnRzID0gU3RhbmRhcmRDYXJ0RGlzcGxheUl0ZW1zOyIsInZhciBDb29raWVzID0gcmVxdWlyZSgnLi9fY29va2llcy5qcycpO1xuXG52YXIgU3RhbmRhcmRDYXJ0T2ZmQ2FudmFzID0gZnVuY3Rpb24gKGNhcnRfYWN0aW9uX3NlbGVjdG9yKSB7XG4gIHRoaXMuY2FydF9hY3Rpb25fc2VsZWN0b3IgPSBjYXJ0X2FjdGlvbl9zZWxlY3RvcjtcbiAgdGhpcy5vZmZjYW5hdnNfY2xhc3MgPSAnb2ZmY2FudmFzLW9wZW4nO1xuICB0aGlzLiRib2R5ID0gJCgnYm9keScpO1xuICBcbiAgdGhpcy5fYWRkX2V2ZW50X2xpc3RlbnRlcnMoKTtcbiAgXG4gIGlmIChDb29raWVzLmhhc0l0ZW0oJ2NhcnRfc3RhdGUnKSkge1xuICAgIHZhciBhY3Rpb24gPSBDb29raWVzLmdldEl0ZW0oJ2NhcnRfc3RhdGUnKTtcbiAgICB0aGlzLnRvZ2dsZV9kcmF3KGFjdGlvbik7XG4gIH1cbn07XG5cblN0YW5kYXJkQ2FydE9mZkNhbnZhcy5wcm90b3R5cGUudG9nZ2xlX2RyYXcgPSBmdW5jdGlvbiAoYWN0aW9uKSB7XG4gIC8vIGFjdGlvbnM6IG9wZW4gLyBjbG9zZVxuICBpZiAoYWN0aW9uICE9PSB1bmRlZmluZWQgJiYgdGhpc1thY3Rpb24rJ19kcmF3J10gIT09IHVuZGVmaW5lZCkge1xuICAgIHRoaXNbYWN0aW9uKydfZHJhdyddLmFwcGx5KHRoaXMpO1xuICB9IGVsc2Uge1xuICAgIGlmICh0aGlzLiRib2R5Lmhhc0NsYXNzKHRoaXMub2ZmY2FuYXZzX2NsYXNzKSkge1xuICAgICAgdGhpcy5jbG9zZV9kcmF3KCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMub3Blbl9kcmF3KCk7XG4gICAgfVxuICB9XG59O1xuXG5TdGFuZGFyZENhcnRPZmZDYW52YXMucHJvdG90eXBlLm9wZW5fZHJhdyA9IGZ1bmN0aW9uICgpIHtcbiAgdGhpcy4kYm9keS5hZGRDbGFzcyh0aGlzLm9mZmNhbmF2c19jbGFzcyk7XG4gIENvb2tpZXMuc2V0SXRlbSgnY2FydF9zdGF0ZScsICdvcGVuJyk7XG4gICQod2luZG93KS50cmlnZ2VyKCdyZXNpemUnKTtcbn07XG5cblN0YW5kYXJkQ2FydE9mZkNhbnZhcy5wcm90b3R5cGUuY2xvc2VfZHJhdyA9IGZ1bmN0aW9uICgpIHtcbiAgdGhpcy4kYm9keS5yZW1vdmVDbGFzcyh0aGlzLm9mZmNhbmF2c19jbGFzcyk7XG4gIENvb2tpZXMuc2V0SXRlbSgnY2FydF9zdGF0ZScsICdjbG9zZScpO1xuICAkKHdpbmRvdykudHJpZ2dlcigncmVzaXplJyk7XG59O1xuXG4vLyBQcml2YXRlXG5cblN0YW5kYXJkQ2FydE9mZkNhbnZhcy5wcm90b3R5cGUuX2FkZF9ldmVudF9saXN0ZW50ZXJzID0gZnVuY3Rpb24gKCkge1xuICB2YXIgX3RoaXMgPSB0aGlzO1xuICAkKGRvY3VtZW50KS5vbignY2xpY2snLCB0aGlzLmNhcnRfYWN0aW9uX3NlbGVjdG9yLCBmdW5jdGlvbiAoZSkge1xuICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICBfdGhpcy50b2dnbGVfZHJhdygpO1xuICB9KTtcbn07XG5cbm1vZHVsZS5leHBvcnRzID0gU3RhbmRhcmRDYXJ0T2ZmQ2FudmFzOyIsInZhciBQaGRTdGlja3kgPSByZXF1aXJlKCcuL3BoZC5zdGlja3kuanMnKTtcbnZhciBQaGRDYXJ0ID0gcmVxdWlyZSgnLi9waGQuY2FydC5qcycpO1xuXG52YXIgUGhkID0gZnVuY3Rpb24gKCkge1xuICBuZXcgUGhkU3RpY2t5KCk7XG4gIG5ldyBQaGRDYXJ0KCk7XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IFBoZDsiLCIvKiBUb0RvOiBjaGVjayB0aGUgbW9kYWwgaXNuJ3QgYWxyZWFkeSBvcGVuICovXG52YXIgRGF0YU1vZGVsID0gcmVxdWlyZSgnLi9fZGF0YV9tb2RlbC5qcycpO1xuXG52YXIgUGhkTW9kYWwgPSBmdW5jdGlvbiAoY2FsbGJhY2tzLCBzZWxlY3Rvcikge1xuICB0aGlzLmNhbGxiYWNrX2V2ZW50cyA9IFsnb25fb3BlbicsJ29uX2Nsb3NlJ107XG4gIHRoaXMuc2VsZWN0b3IgPSBzZWxlY3RvciB8fCAnW2RhdGEtYnNpZnktbW9kYWxdJztcbiAgdGhpcy4kZWxlID0gJCh0aGlzLnNlbGVjdG9yKTtcbiAgdGhpcy5pZCA9IHRoaXMuX2lkKCk7XG4gIFxuICBuZXcgRGF0YU1vZGVsKHRoaXMsIHtcbiAgICBjb250ZW50OiB0aGlzLnNlbGVjdG9yKycgLm1vZGFsLWNvbnRlbnQnXG4gIH0pO1xuICBcbiAgdGhpcy5fc2V0X2NhbGxiYWNrcyhjYWxsYmFja3MpO1xuICB0aGlzLl9hZGRfZXZlbnRfbGlzdGVuZXJzKCk7XG59O1xuXG5QaGRNb2RhbC5wcm90b3R5cGUub3BlbiA9IGZ1bmN0aW9uICgpIHtcbiAgdGhpcy4kZWxlLm1vZGFsKCk7XG4gIHRoaXMuJGVsZS5kYXRhKCdtb2RhbF9pZCcsIHRoaXMuaWQpO1xuICBpZiAodGhpcy5vbl9vcGVuKSB0aGlzLm9uX29wZW4oKTtcbn07XG5cblBoZE1vZGFsLnByb3RvdHlwZS5jbG9zZSA9IGZ1bmN0aW9uICgpIHtcbiAgdGhpcy4kZWxlLm1vZGFsKCdoaWRlJyk7XG4gIHRoaXMuZGVzdHJveSgpO1xufTtcblxuUGhkTW9kYWwucHJvdG90eXBlLmRlc3Ryb3kgPSBmdW5jdGlvbiAoKSB7XG4gIGlmICh0aGlzLm9uX2Nsb3NlKSB0aGlzLm9uX2Nsb3NlKCk7XG4gIHRoaXMuY29udGVudCA9ICcnO1xuICB0aGlzLiRlbGUuZGF0YSgnYnMubW9kYWwnLCBudWxsKTtcbiAgdGhpcy4kZWxlLmRhdGEoJ21vZGFsX2lkJywgbnVsbCk7XG59O1xuXG4vLyBQcml2YXRlXG5cblBoZE1vZGFsLnByb3RvdHlwZS5fYWRkX2V2ZW50X2xpc3RlbmVycyA9IGZ1bmN0aW9uICgpIHtcbiAgdmFyIF90aGlzID0gdGhpcztcbiAgdGhpcy4kZWxlLm9uKCdoaWRkZW4uYnMubW9kYWwnLCBmdW5jdGlvbiAoKSB7XG4gICAgLy8gT25seSB0cmlnZ2VyIHRoaXMgZm9yIHRoZSBvbmUgb2JqZWN0IHRoYXQgaW52b2tlZCB0aGUgbW9kYWxcbiAgICBpZiAoX3RoaXMuJGVsZS5kYXRhKCdtb2RhbF9pZCcpID09PSBfdGhpcy5pZCkge1xuICAgICAgX3RoaXMuZGVzdHJveSgpO1xuICAgIH1cbiAgfSk7XG59O1xuXG5QaGRNb2RhbC5wcm90b3R5cGUuX3NldF9jYWxsYmFja3MgPSBmdW5jdGlvbiAoY2FsbGJhY2tzKSB7XG4gIGlmIChjYWxsYmFja3MpIHtcbiAgICBmb3IgKHZhciBpIGluIHRoaXMuY2FsbGJhY2tfZXZlbnRzKSB7XG4gICAgICB2YXIgZXZlbnQgPSB0aGlzLmNhbGxiYWNrX2V2ZW50c1tpXTtcbiAgICAgIGlmIChjYWxsYmFja3NbZXZlbnRdKSB7XG4gICAgICAgIHRoaXNbZXZlbnRdID0gY2FsbGJhY2tzW2V2ZW50XTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn07XG5cblBoZE1vZGFsLnByb3RvdHlwZS5faWQgPSBmdW5jdGlvbiAoKSB7XG4gIC8vIGh0dHBzOi8vZ2lzdC5naXRodWIuY29tL2dvcmRvbmJyYW5kZXIvMjIzMDMxN1xuICByZXR1cm4gJ18nICsgTWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc3Vic3RyKDIsIDkpO1xufTtcblxubW9kdWxlLmV4cG9ydHMgPSBQaGRNb2RhbDsiLCIvLyBXaGVuIHRoZSBlbGVtZW50IGhpdHMgdGhlIHRvcCBvZiB0aGUgcGFnZSBtYWtlIGl0IHN0aWNrIHRvIGl0XG52YXIgUGhkU3RpY2t5ID0gZnVuY3Rpb24gKCkge1xuICB2YXIgJGVsZSA9ICQoJ1tkYXRhLXBoZD1cInN0aWNreVwiXScpO1xuICB2YXIgJHBhcmVudCA9ICRlbGUucGFyZW50KCk7XG4gIHZhciAkd2luZG93ID0gJCh3aW5kb3cpO1xuICB2YXIgcGFyZW50X29yaWdfbWFyZ2luX2JvdHRvbSA9IHBhcnNlSW50KCRwYXJlbnQuY3NzKCdtYXJnaW4tYm90dG9tJykpO1xuICBcbiAgdmFyIHNldF9tYXJnaW4gPSBmdW5jdGlvbiAobWFyZ2luKSB7XG4gICAgJGVsZS5wYXJlbnQoKS5jc3MoeyAnbWFyZ2luLWJvdHRvbSc6IG1hcmdpbiB9KTtcbiAgfTtcbiAgXG4gIGlmICgkZWxlLmxlbmd0aCA+IDApIHtcbiAgICBcbiAgICBjb25zb2xlLmxvZygnTWFrZSBzdGlja3knKTtcbiAgICBcbiAgICAvLyBib290c3RyYXAgYWZmaXhcbiAgICAkZWxlLmFmZml4KHtcbiAgICAgIG9mZnNldDoge1xuICAgICAgICB0b3A6ICRlbGUub2Zmc2V0KCkudG9wLFxuICAgICAgICBib3R0b206IDMwXG4gICAgICB9LFxuICAgICAgdGFyZ2V0OiAnLm9mZmNhbnZhcy1tYWluJ1xuICAgIH0pLm9uKCdhZmZpeGVkLmJzLmFmZml4JywgZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIG1hcmdpbiA9ICgkZWxlLmNzcygncG9zaXRpb24nKSAhPT0gJ3JlbGF0aXZlJykgPyAocGFyZW50X29yaWdfbWFyZ2luX2JvdHRvbSArICRlbGUuaGVpZ2h0KCkpIDogcGFyZW50X29yaWdfbWFyZ2luX2JvdHRvbTtcbiAgICAgIHNldF9tYXJnaW4obWFyZ2luKTtcbiAgICB9KS5vbignYWZmaXhlZC10b3AuYnMuYWZmaXgnLCBmdW5jdGlvbiAoKSB7XG4gICAgICBzZXRfbWFyZ2luKHBhcmVudF9vcmlnX21hcmdpbl9ib3R0b20pO1xuICAgIH0pO1xuICB9XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IFBoZFN0aWNreTsiXX0=
