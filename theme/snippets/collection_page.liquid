<main role="main">
  <section class="collection-header">
    <div class="sheet">
      <header class="sheet-header">
        <h1>{{ collection.title }}</h1>
        {% include 'collection_controls'%}
        {{ collection.description }}
      </header>
    </div>
  </section>
  
  <section class="collection-content">
    <div class="sheet {% if collection.products.size > 0 %}products-wrap{% endif %}">
    {% if collection.all_products_count == 0 %}
      <section class="sheet-content">
        <div class="collection-message">
          <h3>{{ 'collections.general.empty_message_title' | t }}</h3>
          <p>{{ 'collections.general.empty_message_html' | t }}</p>
        </div>
      </section>
      
    {% elsif collection.products_count == 0 %}
      {% comment %} The collection has products in it but we have filtered it down to far {% endcomment%}
      <section class="sheet-content">
        <div class="collection-message">
          <h3>{{ 'collections.filtering.empty_message_title' | t }}</h3>
          <p>{{ 'collections.filtering.empty_message_html' | t: count: collection.all_products_count, collection_title: collection.title }}</p>
          <ul class="list-unstyled">
      		{% for tag in current_tags %}
            {% capture tag_text %}<span class="fa fa-times-circle"></span><span class="sr-only">remove</span> {{ tag }}{% endcapture %}
        		<li>{{ tag_text | link_to_remove_tag: tag }}</li>
      		{% endfor %}
        	</ul>
        </div>
      </section>
      
    {% else %}
      {% include 'pagination_limit' with 'products' %}
      {% paginate collection.products by pagination_limit %}
        <section class="group products" data-products-size="{% if collection.products.size < pagination_limit %}{{ collection.products.size }}{% else %}{{ pagination_limit }}{% endif %}">
          {% for p in collection.products %}
            {% include 'product_item' %}
          {% endfor %}
          {% include 'pagination' %}
        </section>
      {% endpaginate %}
      
      {% if template contains 'lookbook' %}
        <div class="lookbook-controls">
          <a href="#" data-gallery-direction="left" data-scroll-to=""><span class="fa fa-chevron-left"></span></a>
          <a href="#" data-gallery-direction="right" data-scroll-to=""><span class="fa fa-chevron-right"></span></a>
        </div>
      {% endif %}
    {% endif %}
    </div>
  </section>
</main>

{% include 'site_aside' %}