(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
var Bsify=require("./bsify.js"),CartJS=require("./../../bower_components/shopify-cartjs/dist/cart.js"),Lookbook=require("./bsify.lookbook_gallery.js"),Phd=require("./phd.js"),App=function(){if(CartJS.init(Bsify.cart,Bsify.money_formats),Bsify.product&&(Bsify.ImageSwitcher.preload_product_thumbs(),Bsify.ImageSwitcher.image_swticher(),Bsify.VariantOptionSwitcher.image_variant_switcher(),Bsify.linked_product_options&&Bsify.product.available&&Bsify.product.options.length>1&&Bsify.LinkedProductOptions.linkOptionSelectors(Bsify.product)),Bsify.ajax_add_to_cart&&Bsify.Cart.init(),Bsify.Thumbnails.init(),Bsify.Banner.init(),$(".collection-lookbook").length>0){var o=new Lookbook({gallery_wrapper:".collection-lookbook .products.group",item_wrapper:".group-item-wrap",controls_wrapper:".lookbook-controls"});o.on_loaded=function(){var o=$(".group-item-image").height();$(".lookbook-controls").height(o),Bsify.Thumbnails.orderly()}}Bsify.SocialFeeds.init(),new Phd},app=new App;module.exports=app;


},{"./../../bower_components/shopify-cartjs/dist/cart.js":2,"./bsify.js":15,"./bsify.lookbook_gallery.js":17,"./phd.js":38}],2:[function(require,module,exports){
(function(){var t,e,r,n,a,u,i=function(t,e){return function(){return t.apply(e,arguments)}};e=function(){function t(){this.update=i(this.update,this)}return t.prototype.update=function(t){var e,r,a;for(r in t)a=t[r],"items"!==r&&(this[r]=a);return this.items=function(){var r,a,u,i;for(u=t.items,i=[],r=0,a=u.length;a>r;r++)e=u[r],i.push(new n(e));return i}()},t}(),n=function(){function t(t){this.propertyArray=i(this.propertyArray,this),this.update=i(this.update,this),this.update(t)}return t.prototype.update=function(t){var e,n;for(e in t)n=t[e],"properties"!==e&&(this[e]=n);return this.properties=r.Utils.extend({},t.properties)},t.prototype.propertyArray=function(){var t,e,r,n;r=this.properties,n=[];for(t in r)e=r[t],n.push({name:t,value:e});return n},t}(),r={settings:{dataAPI:!0,requestBodyClass:null,rivetsModels:{},moneyFormat:null,moneyWithCurrencyFormat:null},cart:new e},r.init=function(t,e){return null==e&&(e={}),r.configure(e),r.cart.update(t),r.settings.dataAPI&&r.Data.init(),r.settings.requestBodyClass&&($(document).on("cart.requestStarted",function(){return $("body").addClass(r.settings.requestBodyClass)}),$(document).on("cart.requestComplete",function(){return $("body").removeClass(r.settings.requestBodyClass)})),r.Rivets.init()},r.configure=function(t){return null==t&&(t={}),r.Utils.extend(r.settings,t)},r.Utils={wrapKeys:function(t,e,r){var n,a,u;null==e&&(e="properties"),u={};for(n in t)a=t[n],u[""+e+"["+n+"]"]=null!=r?r:a;return u},unwrapKeys:function(t,e,r){var n,a,u,i;null==e&&(e="properties"),a={};for(n in t)i=t[n],u=n.replace(""+e+"[","").replace("]",""),a[u]=null!=r?r:i;return a},extend:function(t,e){var r,n;for(r in e)n=e[r],t[r]=n;return t},clone:function(t){var e,r;if(null==t||"object"!=typeof t)return t;r=new t.constructor;for(e in t)r[e]=clone(t[e]);return r},isArray:Array.isArray||function(t){return"[object Array]"==={}.toString.call(t)},ensureArray:function(t){return r.Utils.isArray(t)?t:null!=t?[t]:[]},formatMoney:function(t,e){var r;return null!=(null!=(r=window.Shopify)?r.formatMoney:void 0)?Shopify.formatMoney(t,e):t},getSizedImageUrl:function(t,e){var r,n;return null!=(null!=(r=window.Shopify)&&null!=(n=r.Image)?n.getSizedImageUrl:void 0)?Shopify.Image.getSizedImageUrl(t,e):t}},u=[],a=!1,r.Queue={add:function(t,e,n){var i;return null==n&&(n={}),i={url:t,data:e,type:n.type||"POST",dataType:n.dataType||"json",success:r.Utils.ensureArray(n.success),error:r.Utils.ensureArray(n.error),complete:r.Utils.ensureArray(n.complete)},n.updateCart&&i.success.push(r.cart.update),u.push(i),a?void 0:(jQuery(document).trigger("cart.requestStarted",[r.cart]),r.Queue.process())},process:function(){var t;return u.length?(a=!0,t=u.shift(),t.complete=r.Queue.process,jQuery.ajax(t)):(a=!1,void jQuery(document).trigger("cart.requestComplete",[r.cart]))}},r.Core={getCart:function(t){return null==t&&(t={}),t.type="GET",t.updateCart=!0,r.Queue.add("/cart.js",{},t)},addItem:function(t,e,n,a){var u;return null==e&&(e=1),null==n&&(n={}),null==a&&(a={}),u=r.Utils.wrapKeys(n),u.id=t,u.quantity=e,r.Queue.add("/cart/add.js",u,a),r.Core.getCart()},updateItem:function(t,e,n,a){var u;return null==n&&(n={}),null==a&&(a={}),u=r.Utils.wrapKeys(n),u.line=t,null!=e&&(u.quantity=e),a.updateCart=!0,r.Queue.add("/cart/change.js",u,a)},removeItem:function(t,e){return null==e&&(e={}),r.Core.updateItem(t,0,{},e)},updateItemById:function(t,e,n,a){var u;return null==n&&(n={}),null==a&&(a={}),u=r.Utils.wrapKeys(n),u.id=t,null!=e&&(u.quantity=e),a.updateCart=!0,r.Queue.add("/cart/change.js",u,a)},updateItemQuantitiesById:function(t,e){return null==t&&(t={}),null==e&&(e={}),e.updateCart=!0,r.Queue.add("/cart/update.js",{updates:t},e)},removeItemById:function(t,e){var n;return null==e&&(e={}),n={id:t,quantity:0},e.updateCart=!0,r.Queue.add("/cart/change.js",n,e)},clear:function(t){return null==t&&(t={}),t.updateCart=!0,r.Queue.add("/cart/clear.js",{},t)},getAttribute:function(t,e){return t in r.cart.attributes?r.cart.attributes[t]:e},setAttribute:function(t,e,n){var a;return null==n&&(n={}),a={},a[t]=e,r.Core.setAttributes(a,n)},getAttributes:function(){return r.cart.attributes},setAttributes:function(t,e){return null==t&&(t={}),null==e&&(e={}),e.updateCart=!0,r.Queue.add("/cart/update.js",r.Utils.wrapKeys(t,"attributes"),e)},clearAttributes:function(t){return null==t&&(t={}),t.updateCart=!0,r.Queue.add("/cart/update.js",r.Utils.wrapKeys(r.Core.getAttributes(),"attributes",""),t)},getNote:function(){return r.cart.note},setNote:function(t,e){return null==e&&(e={}),e.updateCart=!0,r.Queue.add("/cart/update.js",{note:t},e)}},t=jQuery(document),r.Data={init:function(){return r.Data.setEventListeners("on"),r.Data.render(null,r.cart)},destroy:function(){return r.Data.setEventListeners("off")},setEventListeners:function(e){return t[e]("click","[data-cart-add]",r.Data.add),t[e]("click","[data-cart-remove]",r.Data.remove),t[e]("click","[data-cart-remove-id]",r.Data.removeById),t[e]("click","[data-cart-update]",r.Data.update),t[e]("click","[data-cart-update-id]",r.Data.updateById),t[e]("click","[data-cart-clear]",r.Data.clear),t[e]("change","[data-cart-toggle]",r.Data.toggle),t[e]("change","[data-cart-toggle-attribute]",r.Data.toggleAttribute),t[e]("submit","[data-cart-submit]",r.Data.submit),t[e]("cart.requestComplete",r.Data.render)},add:function(t){var e;return t.preventDefault(),e=jQuery(this),r.Core.addItem(e.attr("data-cart-add"),e.attr("data-cart-quantity"))},remove:function(t){var e;return t.preventDefault(),e=jQuery(this),r.Core.removeItem(e.attr("data-cart-remove"))},removeById:function(t){var e;return t.preventDefault(),e=jQuery(this),r.Core.removeItemById(e.attr("data-cart-remove-id"))},update:function(t){var e;return t.preventDefault(),e=jQuery(this),r.Core.updateItem(e.attr("data-cart-update"),e.attr("data-cart-quantity"))},updateById:function(t){var e;return t.preventDefault(),e=jQuery(this),r.Core.updateItemById(e.attr("data-cart-update-id"),e.attr("data-cart-quantity"))},clear:function(t){return t.preventDefault(),r.Core.clear()},toggle:function(t){var e,n;return e=jQuery(this),n=e.attr("data-cart-toggle"),e.is(":checked")?r.Core.addItem(n):r.Core.removeItemById(n)},toggleAttribute:function(t){var e,n;return e=jQuery(this),n=e.attr("data-cart-toggle-attribute"),r.Core.setAttribute(n,e.is(":checked")?"Yes":"")},submit:function(t){var e,n,a,u;return t.preventDefault(),e=jQuery(this).serializeArray(),n=void 0,u=void 0,a={},jQuery.each(e,function(t,e){return"id"===e.name?n=e.value:"quantity"===e.name?u=e.value:a[e.name]=e.value}),r.Core.addItem(n,u,r.Utils.unwrapKeys(a))},render:function(t,e){var n;return n={item_count:e.item_count,total_price:e.total_price,total_price_money:r.Utils.formatMoney(e.total_price,r.settings.moneyFormat),total_price_money_with_currency:r.Utils.formatMoney(e.total_price,r.settings.moneyWithCurrencyFormat)},jQuery("[data-cart-render]").each(function(){var t;return t=jQuery(this),t.text(n[t.attr("data-cart-render")])})}},"rivets"in window?(r.Rivets={views:[],init:function(){return r.Rivets.bindViews()},destroy:function(){return r.Rivets.unbindViews()},bindViews:function(){var t;return r.Rivets.unbindViews(),t=r.Utils.extend({cart:r.cart},r.settings.rivetsModels),jQuery("[data-cart-view]").each(function(){return r.Rivets.views.push(rivets.bind(this,t))})},unbindViews:function(){var t,e,n,a;for(a=r.Rivets.views,e=0,n=a.length;n>e;e++)t=a[e],t.unbind();return r.Rivets.views=[]}},rivets.formatters.eq=function(t,e){return t===e},rivets.formatters.lt=function(t,e){return e>t},rivets.formatters.gt=function(t,e){return t>e},rivets.formatters.not=function(t){return!t},rivets.formatters.empty=function(t){return!t.length},rivets.formatters.plus=function(t,e){return parseInt(t)+parseInt(e)},rivets.formatters.minus=function(t,e){return parseInt(t)-parseInt(e)},rivets.formatters.prepend=function(t,e){return e+t},rivets.formatters.append=function(t,e){return t+e},rivets.formatters.money=function(t){return r.Utils.formatMoney(t,r.settings.moneyFormat)},rivets.formatters.money_with_currency=function(t){return r.Utils.formatMoney(t,r.settings.moneyWithCurrencyFormat)},rivets.formatters.productImageSize=function(t,e){return r.Utils.getSizedImageUrl(t,e)}):r.Rivets={init:function(){},destroy:function(){}},r.factory=function(t){return t.init=r.init,t.configure=r.configure,t.cart=r.cart,t.settings=r.settings,t.addItem=r.Core.addItem,t.updateItem=r.Core.updateItem,t.updateItemById=r.Core.updateItemById,t.updateItemQuantitiesById=r.Core.updateItemQuantitiesById,t.removeItem=r.Core.removeItem,t.clear=r.Core.clear,t.getAttribute=r.Core.getAttribute,t.setAttribute=r.Core.setAttribute,t.getAttributes=r.Core.getAttributes,t.setAttributes=r.Core.setAttributes,t.clearAttributes=r.Core.clearAttributes,t.getNote=r.Core.getNote,t.setNote=r.Core.setNote},"object"==typeof exports?r.factory(exports):"function"==typeof define&&define.amd?define(["exports"],function(t){return r.factory(this.CartJS=t),t}):r.factory(this.CartJS={})}).call(this);


},{}],3:[function(require,module,exports){
!function(e,t){"use strict";"function"==typeof define&&define.amd?define(["eventEmitter/EventEmitter","eventie/eventie"],function(i,n){return t(e,i,n)}):"object"==typeof exports?module.exports=t(e,require("wolfy87-eventemitter"),require("eventie")):e.imagesLoaded=t(e,e.EventEmitter,e.eventie)}(window,function(e,t,i){"use strict";function n(e,t){for(var i in t)e[i]=t[i];return e}function o(e){return"[object Array]"===d.call(e)}function r(e){var t=[];if(o(e))t=e;else if("number"==typeof e.length)for(var i=0,n=e.length;n>i;i++)t.push(e[i]);else t.push(e);return t}function s(e,t,i){if(!(this instanceof s))return new s(e,t);"string"==typeof e&&(e=document.querySelectorAll(e)),this.elements=r(e),this.options=n({},this.options),"function"==typeof t?i=t:n(this.options,t),i&&this.on("always",i),this.getImages(),c&&(this.jqDeferred=new c.Deferred);var o=this;setTimeout(function(){o.check()})}function h(e){this.img=e}function f(e){this.src=e,p[e]=this}var c=e.jQuery,a=e.console,u="undefined"!=typeof a,d=Object.prototype.toString;s.prototype=new t,s.prototype.options={},s.prototype.getImages=function(){this.images=[];for(var e=0,t=this.elements.length;t>e;e++){var i=this.elements[e];"IMG"===i.nodeName&&this.addImage(i);var n=i.nodeType;if(n&&(1===n||9===n||11===n))for(var o=i.querySelectorAll("img"),r=0,s=o.length;s>r;r++){var h=o[r];this.addImage(h)}}},s.prototype.addImage=function(e){var t=new h(e);this.images.push(t)},s.prototype.check=function(){function e(e,o){return t.options.debug&&u&&a.log("confirm",e,o),t.progress(e),i++,i===n&&t.complete(),!0}var t=this,i=0,n=this.images.length;if(this.hasAnyBroken=!1,!n)return void this.complete();for(var o=0;n>o;o++){var r=this.images[o];r.on("confirm",e),r.check()}},s.prototype.progress=function(e){this.hasAnyBroken=this.hasAnyBroken||!e.isLoaded;var t=this;setTimeout(function(){t.emit("progress",t,e),t.jqDeferred&&t.jqDeferred.notify&&t.jqDeferred.notify(t,e)})},s.prototype.complete=function(){var e=this.hasAnyBroken?"fail":"done";this.isComplete=!0;var t=this;setTimeout(function(){if(t.emit(e,t),t.emit("always",t),t.jqDeferred){var i=t.hasAnyBroken?"reject":"resolve";t.jqDeferred[i](t)}})},c&&(c.fn.imagesLoaded=function(e,t){var i=new s(this,e,t);return i.jqDeferred.promise(c(this))}),h.prototype=new t,h.prototype.check=function(){var e=p[this.img.src]||new f(this.img.src);if(e.isConfirmed)return void this.confirm(e.isLoaded,"cached was confirmed");if(this.img.complete&&void 0!==this.img.naturalWidth)return void this.confirm(0!==this.img.naturalWidth,"naturalWidth");var t=this;e.on("confirm",function(e,i){return t.confirm(e.isLoaded,i),!0}),e.check()},h.prototype.confirm=function(e,t){this.isLoaded=e,this.emit("confirm",this,t)};var p={};return f.prototype=new t,f.prototype.check=function(){if(!this.isChecked){var e=new Image;i.bind(e,"load",this),i.bind(e,"error",this),e.src=this.src,this.isChecked=!0}},f.prototype.handleEvent=function(e){var t="on"+e.type;this[t]&&this[t](e)},f.prototype.onload=function(e){this.confirm(!0,"onload"),this.unbindProxyEvents(e)},f.prototype.onerror=function(e){this.confirm(!1,"onerror"),this.unbindProxyEvents(e)},f.prototype.confirm=function(e,t){this.isConfirmed=!0,this.isLoaded=e,this.emit("confirm",this,t)},f.prototype.unbindProxyEvents=function(e){i.unbind(e.target,"load",this),i.unbind(e.target,"error",this)},s});


},{"eventie":4,"wolfy87-eventemitter":5}],4:[function(require,module,exports){
!function(e){"use strict";function n(n){var t=e.event;return t.target=t.target||t.srcElement||n,t}var t=document.documentElement,o=function(){};t.addEventListener?o=function(e,n,t){e.addEventListener(n,t,!1)}:t.attachEvent&&(o=function(e,t,o){e[t+o]=o.handleEvent?function(){var t=n(e);o.handleEvent.call(o,t)}:function(){var t=n(e);o.call(e,t)},e.attachEvent("on"+t,e[t+o])});var c=function(){};t.removeEventListener?c=function(e,n,t){e.removeEventListener(n,t,!1)}:t.detachEvent&&(c=function(e,n,t){e.detachEvent("on"+n,e[n+t]);try{delete e[n+t]}catch(o){e[n+t]=void 0}});var i={bind:o,unbind:c};"function"==typeof define&&define.amd?define(i):"object"==typeof exports?module.exports=i:e.eventie=i}(window);


},{}],5:[function(require,module,exports){
(function(){"use strict";function e(){}function t(e,t){for(var n=e.length;n--;)if(e[n].listener===t)return n;return-1}function n(e){return function(){return this[e].apply(this,arguments)}}var r=e.prototype,i=this,s=i.EventEmitter;r.getListeners=function(e){var t,n,r=this._getEvents();if(e instanceof RegExp){t={};for(n in r)r.hasOwnProperty(n)&&e.test(n)&&(t[n]=r[n])}else t=r[e]||(r[e]=[]);return t},r.flattenListeners=function(e){var t,n=[];for(t=0;t<e.length;t+=1)n.push(e[t].listener);return n},r.getListenersAsObject=function(e){var t,n=this.getListeners(e);return n instanceof Array&&(t={},t[e]=n),t||n},r.addListener=function(e,n){var r,i=this.getListenersAsObject(e),s="object"==typeof n;for(r in i)i.hasOwnProperty(r)&&-1===t(i[r],n)&&i[r].push(s?n:{listener:n,once:!1});return this},r.on=n("addListener"),r.addOnceListener=function(e,t){return this.addListener(e,{listener:t,once:!0})},r.once=n("addOnceListener"),r.defineEvent=function(e){return this.getListeners(e),this},r.defineEvents=function(e){for(var t=0;t<e.length;t+=1)this.defineEvent(e[t]);return this},r.removeListener=function(e,n){var r,i,s=this.getListenersAsObject(e);for(i in s)s.hasOwnProperty(i)&&(r=t(s[i],n),-1!==r&&s[i].splice(r,1));return this},r.off=n("removeListener"),r.addListeners=function(e,t){return this.manipulateListeners(!1,e,t)},r.removeListeners=function(e,t){return this.manipulateListeners(!0,e,t)},r.manipulateListeners=function(e,t,n){var r,i,s=e?this.removeListener:this.addListener,o=e?this.removeListeners:this.addListeners;if("object"!=typeof t||t instanceof RegExp)for(r=n.length;r--;)s.call(this,t,n[r]);else for(r in t)t.hasOwnProperty(r)&&(i=t[r])&&("function"==typeof i?s.call(this,r,i):o.call(this,r,i));return this},r.removeEvent=function(e){var t,n=typeof e,r=this._getEvents();if("string"===n)delete r[e];else if(e instanceof RegExp)for(t in r)r.hasOwnProperty(t)&&e.test(t)&&delete r[t];else delete this._events;return this},r.removeAllListeners=n("removeEvent"),r.emitEvent=function(e,t){var n,r,i,s,o=this.getListenersAsObject(e);for(i in o)if(o.hasOwnProperty(i))for(r=o[i].length;r--;)n=o[i][r],n.once===!0&&this.removeListener(e,n.listener),s=n.listener.apply(this,t||[]),s===this._getOnceReturnValue()&&this.removeListener(e,n.listener);return this},r.trigger=n("emitEvent"),r.emit=function(e){var t=Array.prototype.slice.call(arguments,1);return this.emitEvent(e,t)},r.setOnceReturnValue=function(e){return this._onceReturnValue=e,this},r._getOnceReturnValue=function(){return this.hasOwnProperty("_onceReturnValue")?this._onceReturnValue:!0},r._getEvents=function(){return this._events||(this._events={})},e.noConflict=function(){return i.EventEmitter=s,e},"function"==typeof define&&define.amd?define(function(){return e}):"object"==typeof module&&module.exports?module.exports=e:i.EventEmitter=e}).call(this);


},{}],6:[function(require,module,exports){
!function(t){var e=function(t,e){this.__init(t,e)},n=e,i=n.prototype;n.counter=0,i.__init=function(e,n){this.$elements=e,this.options=t.extend({},this.defaults,n)},i.defaults={resetHeight:""},i.attach=function(){void 0===this.attached&&(t(window).on("resize",this.handlers().resize),this.attached=!0)},i.handlers=function(){var t=this;return{resize:function(e){t._eachRow(function(e){t._resizeElements(e)})}}},i._columnCount=function(){var e=0,n=0,i=0;return this.$elements.each(function(){return n=t(this).offset().left,i+=1,e>=n&&0!==e?(i-=1,!1):void(e=n)}),i},i._eachRow=function(t){for(var e,n,i=this._dimensions(),r=0;r<i.r;r++)e=i.c*r,n=this.$elements.slice(e,e+i.c),t(n,r)},i._dimensions=function(){var t=this._columnCount(),e=Math.ceil(this.$elements.length/t);return{c:t,r:e}},i._resizeElements=function(e){var n=this._maxHeight(e),i=this.options;e.each(function(r,s){t(s).css("height",n),t(s).trigger("orderly.resize",[s,n,r,e.length,i])})},i._maxHeight=function(e){var n,i,r,s=0,h=this.options;return e.each(function(n,o){t(o).trigger("orderly.reset",[o,h.resetHeight,n,e.length,h]),t(o).css("height",h.resetHeight),r=o.getBoundingClientRect(),i=r.bottom-r.top,i>s&&(s=i)}),n=Math.round(s).toString(),n+="px"};var r={};r._delegate=function(t){var e="_"+(t&&t.method||"register"),n=r[e];n.call(this,t)},r._register=function(t){var n=new e(this,t);n.attach(),n.handlers().resize()},r._children=function(t){var e=this[0].children.length,i=n.counter++;r._childrenData.call(this,i),r._registerChildren(e,i,t),r._register.call(this,t)},r._childrenData=function(e){this.each(function(n,i){t(i.children).each(function(n,i){t(i).attr("data-orderly",e+":"+n)})})},r._registerChildren=function(t,e,n){for(var i=0;t>i;i++)r._register.call(r._find(e,i),n)},r._find=function(e,n){return t('[data-orderly="'+e+":"+n+'"]')},t.fn.orderly=function(t){return this.length>0&&r._delegate.call(this,t),this}}(jQuery);


},{}],7:[function(require,module,exports){
var imagesLoaded=require("imagesloaded");!function(t){var i=function(t,i){this.$ele=t,this.settings=i,this.formater=new e(this.$ele,this.settings),this.fitter=new a(this.$ele,this.settings),this.imageLoaded=imagesLoaded(this.$ele),this.addEventHandlers(),this.hideImages()};i.prototype.addEventHandlers=function(){var i=this;this.imageLoaded.on("done",function(){i.formater.setImageFormat(),i.fitter.setImageFit(),i.showImages(),i.$ele.trigger("ut_imageLoaded")});var e;t(window).resize(function(){e&&clearTimeout(e),e=setTimeout(function(){i.formater.setImageFormat(),i.fitter.setImageFit()},100)})},i.prototype.hideImages=function(){this.$ele.css({opacity:0,overflow:"hidden"})},i.prototype.showImages=function(){this.$ele.fadeTo(900,1)};var e=function(t,i){this.$wrapper=t,this.settings=i,this.ratio=this.getRatio()};e.prototype.setImageFormat=function(){var t=this.$wrapper.width()/this.ratio.width,i=t*this.ratio.height;this.$wrapper.height(i)},e.prototype.getRatio=function(){var t=this._getRatioString();return this._getRatioFromString(t)},e.prototype._getRatioString=function(){switch(this.settings.format){case"square":return"1:1";case"landscape":return this.settings.landscapeRatio;case"portrait":return this.settings.portraitRatio;default:return this.settings.ratio}},e.prototype._getRatioFromString=function(t){var i=t.split(":");return{width:i[0],height:i[1]}};var a=function(t,i){this.$wrapper=t,this.$image=this.$wrapper.find("img"),this.settings=i,this.wrapperRatio,this.imageRatio,this.imageNaturalWidth,this.imageNaturalHeight};a.prototype.setImageFit=function(){switch(this._resetImageCSS(),this.settings.fit){case"crop":this._cropImage();break;case"scale":this._scaleImage()}this._alignImage()},a.prototype._cropImage=function(){this._imageRatio()>this._wrapperRatio()?this._fitHorizontal():this._fitVertical()},a.prototype._scaleImage=function(){this._imageRatio()>this._wrapperRatio()?this._fitVertical():this._fitHorizontal()},a.prototype._fitHorizontal=function(){this._getNaturalHeight(this.$image)>=this.$wrapper.height()&&this.$image.height(this.$wrapper.height())},a.prototype._fitVertical=function(){this._getNaturalWidth(this.$image)>=this.$wrapper.width()&&this.$image.width(this.$wrapper.width())},a.prototype._imageRatio=function(){return this.imageRatio=this.imageRatio||this._getNaturalWidth(this.$image)/this._getNaturalHeight(this.$image),this.imageRatio},a.prototype._wrapperRatio=function(){return this.wrapperRatio=this.wrapperRatio||this.$wrapper.width()/this.$wrapper.height(),this.wrapperRatio},a.prototype._alignImage=function(){var t={};switch(t.marginLeft=(this.$wrapper.width()-this.$image.width())/2,this.settings.align){case"top":break;case"middle":t.marginTop=(this.$wrapper.height()-this.$image.height())/2;break;case"bottom":t.marginTop=this.$wrapper.height()-this.$image.height()}this.$image.css(t)},a.prototype._getNaturalHeight=function(t){return this.imageNaturalHeight||(t.prop("naturalHeight")?this.imageNaturalHeight=t.prop("naturalHeight"):this.imageNaturalHeight=this._getNaturalSize(t).height),this.imageNaturalHeight},a.prototype._getNaturalWidth=function(t){return this.imageNaturalWidth||(t.prop("naturalWidth")?this.imageNaturalWidth=t.prop("naturalWidth"):this.imageNaturalWidth=this._getNaturalSize(t).width),this.imageNaturalWidth},a.prototype._getNaturalSize=function(t){if(t.prop("src")){var i=new Image;return i.src=t.prop("src"),{width:i.width,height:i.height}}return!1},a.prototype._resetImageCSS=function(){this.$image.css({maxWidth:"none",width:"auto",height:"auto"})};var r=0,h=function(i){r++,r===i.length&&t(i).last().trigger("ut_complete")};t.fn.uniform_thumbnails=function(e){var a=t.extend({},t.fn.uniform_thumbnails.defaults,e),r=this;return r.each(function(){var e=t(this);e.data("_uniform_thumbnails",new i(e,a)),e.on("ut_imageLoaded",function(){h(r)})})},t.fn.uniform_thumbnails.defaults={fit:"crop",ratio:"1:1",format:"ratio",align:"middle",landscapeRatio:"4:3",portraitRatio:"3:4"}}(jQuery);


},{"imagesloaded":3}],8:[function(require,module,exports){
var docCookies={getItem:function(e){return e?decodeURIComponent(document.cookie.replace(new RegExp("(?:(?:^|.*;)\\s*"+encodeURIComponent(e).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1"))||null:null},setItem:function(e,o,n,t,c,r){if(!e||/^(?:expires|max\-age|path|domain|secure)$/i.test(e))return!1;var s="";if(n)switch(n.constructor){case Number:s=n===1/0?"; expires=Fri, 31 Dec 9999 23:59:59 GMT":"; max-age="+n;break;case String:s="; expires="+n;break;case Date:s="; expires="+n.toUTCString()}return document.cookie=encodeURIComponent(e)+"="+encodeURIComponent(o)+s+(c?"; domain="+c:"")+(t?"; path="+t:"")+(r?"; secure":""),!0},removeItem:function(e,o,n){return this.hasItem(e)?(document.cookie=encodeURIComponent(e)+"=; expires=Thu, 01 Jan 1970 00:00:00 GMT"+(n?"; domain="+n:"")+(o?"; path="+o:""),!0):!1},hasItem:function(e){return e?new RegExp("(?:^|;\\s*)"+encodeURIComponent(e).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=").test(document.cookie):!1},keys:function(){for(var e=document.cookie.replace(/((?:^|\s*;)[^\=]+)(?=;|$)|^\s*|\s*(?:\=[^;]*)?(?:\1|$)/g,"").split(/\s*(?:\=[^;]*)?;\s*/),o=e.length,n=0;o>n;n++)e[n]=decodeURIComponent(e[n]);return e}};module.exports=docCookies;


},{}],9:[function(require,module,exports){
var DataModel=function(e,t){this.obj=e,this._build_properties(t)};DataModel.prototype._build_properties=function(e){var t=this;for(var o in e)e.hasOwnProperty(o)&&t._build_property_methods(o,e[o])},DataModel.prototype._build_property_methods=function(e,t){var o=e+"_selector";Object.defineProperty(this.obj,o,{value:t});var r,a=this;Object.defineProperty(this.obj,e,{enumerable:!0,configurable:!0,get:function(){return r},set:function(e){r!==e&&(r=e,a._update_elements(t,r))}})},DataModel.prototype._update_elements=function(e,t){var o=this;$(e).each(function(e,r){o._set_element_value(r,t)})},DataModel.prototype._set_element_value=function(e,t){var o=$(e);this._is_input(e)?o.val(t):o.html(t)},DataModel.prototype._is_input=function(e){var t=e.tagName.toLowerCase();return"input"===t||"select"===t||"textarea"===t},module.exports=DataModel;


},{}],10:[function(require,module,exports){
var Eventer=function(t){this.caller=t,this.caller._events={},this.caller.on=this.on,this.caller.off=this.off,this.caller.trigger=this.trigger};Eventer.prototype.on=function(t,e){return this._events[t]||(this._events[t]=[]),this._events[t].push(e),this._events[t].length-1},Eventer.prototype.off=function(t,e){t&&e?this._events[t][e]&&(this._events[t][e]=null):t?this._events[t]&&(this._events[t]=null):this._events={}},Eventer.prototype.trigger=function(t,e){"object"!=typeof e&&(e=[e]);for(var n in this._events[t]){var s=this._events[t][n];this._events[t].hasOwnProperty(n)&&"function"==typeof s&&s.apply(this,e)}},module.exports=Eventer;


},{}],11:[function(require,module,exports){
module.exports.getComputedStyle=function(){window.getComputedStyle||(window.getComputedStyle=function(t,e){return this.el=t,this.getPropertyValue=function(e){var r=/(\-([a-z]){1})/g;return"float"==e&&(e="styleFloat"),r.test(e)&&(e=e.replace(r,function(){return arguments[2].toUpperCase()})),t.currentStyle[e]?t.currentStyle[e]:null},this})},module.exports.objectKeys=function(){Object.keys||(Object.keys=function(){"use strict";var t=Object.prototype.hasOwnProperty,e=!{toString:null}.propertyIsEnumerable("toString"),r=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],o=r.length;return function(n){if("object"!=typeof n&&("function"!=typeof n||null===n))throw new TypeError("Object.keys called on non-object");var u,l,c=[];for(u in n)t.call(n,u)&&c.push(u);if(e)for(l=0;o>l;l++)t.call(n,r[l])&&c.push(r[l]);return c}}())};


},{}],12:[function(require,module,exports){
Banner={};var $banner=$("[data-banner]");Banner.init=function(){$banner.length>0&&Banner.add_event_handlers()},Banner.add_event_handlers=function(){$banner.on("slide.bs.carousel",function(n){var a=$(n.relatedTarget);$banner.attr("data-banner",a.data("slide"))}),$banner.on("slid.bs.carousel",function(){})},module.exports=Banner;


},{}],13:[function(require,module,exports){
var CartJS=require("./../../bower_components/shopify-cartjs/dist/cart.js"),Cart={},message_count=0,$cart_display_ele=$("[data-cart-display]"),$cart_total_ele=$("[data-cart-total]"),$cart_form_ele=$(Bsify.selectors.cart.form_selector),$cart_message_ele=$(Bsify.selectors.cart.message_selector);if(Bsify.product)var $product_form_ele=$(Bsify.selectors.product.form_selector),$product_form_button=$product_form_ele.find("input[type=submit]"),$product_form_message_ele=$(Bsify.selectors.product.form_message_selector);Cart.init=function(){$(document).on("cart.requestComplete",function(t,e){Cart.update_cart_display(),Cart.update_cart_table()}),Bsify.product&&$(document).on("submit",Bsify.selectors.product.form_selector,function(t){t.preventDefault();var e=$(t.currentTarget);Cart.add_item_to_cart(e)}),$(document).on("click","[data-remove-item]",function(t){t.preventDefault();var e=$(t.currentTarget);Cart.remove_item_from_cart(e)})},Cart.add_item_to_cart=function(t){var e=Cart.form_values(t.serializeArray()),r={},a=Bsify.get_variant_by_id(e.id),s=Bsify.product.title+Bsify.translations.product.item_title_seperator+a.title;$product_form_button.val(Bsify.translations.product.adding_to_cart_button_text),CartJS.addItem(e.id,e.quantity,r,{success:function(t,e,r){var a=Bsify.translations.product.after_product_added_message_html.replace("[item_title]",s);Cart.show_message($product_form_message_ele,"success",a),$product_form_button.val(Bsify.translations.product.added_to_cart_button_text)},error:function(t,e,r){console.log("[ERROR] - Add to cart:",t,e,r);var a=Bsify.translations.product.after_product_added_error_message_html.replace("[item_title]",s).replace("[error_message]",r);Cart.show_message($product_form_message_ele,"error",a),$product_form_button.val(Bsify.translations.product.unavailable_button_text)}})},Cart.remove_item_from_cart=function(t){var e=t.closest(Bsify.selectors.cart.item_selector),r=Cart.get_item_by_id(e.data("cart-item")),a=r.product_title+Bsify.translations.product.item_title_seperator+r.variant_title;CartJS.removeItem(t.data("remove-item"),{success:function(t,r,s){e.hide();var o=Bsify.translations.cart.remove_item_message.replace("[item_title]",a);Cart.show_message($cart_message_ele,"success",o)},error:function(t,e,r){console.log("[ERROR] - Remove item from cart:",t,e,r);var s=Bsify.translations.cart.remove_item_error_message.replace("[item_title]",a).replace("[error_message]",r);Cart.show_message($cart_message_ele,"success",s)}})},Cart.update_cart_display=function(){var t=Shopify.formatMoney(CartJS.cart.total_price,Bsify.money_formats.moneyFormat),e=Shopify.formatMoney(CartJS.cart.total_price,Bsify.money_formats.moneyWithCurrencyFormat),r=Bsify.translations.cart.cart_display_text.replace("[item_count]",CartJS.cart.item_count).replace("[cart_total_price]",t).replace("[cart_total_price_with_currency]",e);$cart_display_ele.html(r);var a=Bsify.translations.cart.cart_total.replace("[cart_total_price]",t).replace("[cart_total_price_with_currency]",e);$cart_total_ele.html(a)},Cart.update_cart_table=function(){0===CartJS.cart.item_count&&($cart_form_ele.hide(),$cart_message_ele.removeClass("hidden").html(Bsify.translations.cart.empty_cart_text))},Cart.show_message=function(t,e,r){message_count++,t.removeClass("hidden").html('<div class="note '+e+" message"+message_count+'">'+r+"</div>"),Cart.remove_message(message_count)},Cart.remove_message=function(t){setTimeout(function(){$(".message"+t).fadeOut(function(){$(this).remove()})},Bsify.message_timeout)},Cart.form_values=function(t){for(var e={},r=0;r<t.length;r++){var a=t[r];e[a.name]=a.value}return e},Cart.get_item_by_id=function(t){"string"==typeof t&&(t=parseInt(t));var e;if(CartJS)for(var r=0;r<CartJS.cart.items.length;r++){var a=CartJS.cart.items[r];a.variant_id===t&&(e=a)}return e},Cart.has_variant=function(t){"string"==typeof t&&(t=parseInt(t));var e=!1;if(CartJS)for(var r=0;r<CartJS.cart.items.length;r++){var a=CartJS.cart.items[r];a.variant_id===t&&(e=!0)}return e},module.exports=Cart;


},{"./../../bower_components/shopify-cartjs/dist/cart.js":2}],14:[function(require,module,exports){
var ImageSwitcher={};ImageSwitcher.preload_product_thumbs=function(){var e=$("[data-gallery-main]");if(e.length>0){var a=$(e.data("gallery-main"))[0],i=Shopify.Image.imageSize(a.src);e.length>0&&e.each(function(){var e=new Image,a=$(this).attr("href"),r=Shopify.Image.getSizedImageUrl(a,i);e.src=r})}},ImageSwitcher.image_swticher=function(){$(document).on("click","[data-gallery-main]",function(e){e.preventDefault();var a=$(e.currentTarget),i=$(a.data("gallery-main"))[0],r=a.attr("href");ImageSwitcher.switch_image(i,r)})},ImageSwitcher.switch_image=function(e,a){if(e&&a){var i=Shopify.Image.imageSize(e.src),r=Shopify.Image.getSizedImageUrl(a,i);e.src!==r&&(e.src=r)}},module.exports=ImageSwitcher;


},{}],15:[function(require,module,exports){
var Bsify=window.Bsify||{};Bsify.get_variant_by_id=function(i){var r;"string"==typeof i&&(i=parseInt(i));for(var s=0;s<Bsify.product.variants.length;s++){var e=Bsify.product.variants[s];e.id===i&&(r=e)}return r},Bsify.Cart=require("./bsify.cart.js"),Bsify.ImageSwitcher=require("./bsify.image_switcher.js"),Bsify.VariantOptionSwitcher=require("./bsify.variant_option_switcher.js"),Bsify.LinkedProductOptions=require("./bsify.linked_product_options.js"),Bsify.Banner=require("./bsify.banner.js"),Bsify.Thumbnails=require("./bsify.thumbnails.js"),Bsify.SocialFeeds=require("./bsify.social_feeds.js"),module.exports=Bsify;


},{"./bsify.banner.js":12,"./bsify.cart.js":13,"./bsify.image_switcher.js":14,"./bsify.linked_product_options.js":16,"./bsify.social_feeds.js":20,"./bsify.thumbnails.js":21,"./bsify.variant_option_switcher.js":23}],16:[function(require,module,exports){
var LinkedProductOptions={};LinkedProductOptions.optionsMap={},LinkedProductOptions.updateOptionsInSelector=function(o){var t,n;switch(o){case 0:t="root",n=jQuery(".single-option-selector:eq(0)");break;case 1:t=jQuery(".single-option-selector:eq(0)").val(),n=jQuery(".single-option-selector:eq(1)");break;case 2:t=jQuery(".single-option-selector:eq(0)").val(),t+=" / "+jQuery(".single-option-selector:eq(1)").val(),n=jQuery(".single-option-selector:eq(2)")}var i=n.val();n.empty();var e=LinkedProductOptions.optionsMap[t];if(void 0!==e){for(var p=0;p<e.length;p++){var s=e[p],r=jQuery("<option></option>").val(s).html(s);n.append(r)}jQuery('.swatch[data-option-index="'+o+'"] .swatch-element').each(function(){-1!==jQuery.inArray($(this).attr("data-value"),e)?$(this).removeClass("soldout").show().find(":radio").removeAttr("disabled","disabled").removeAttr("checked"):$(this).addClass("soldout").hide().find(":radio").removeAttr("checked").attr("disabled","disabled")}),-1!==jQuery.inArray(i,e)&&n.val(i),n.trigger("change")}},LinkedProductOptions.linkOptionSelectors=function(o){for(var t=0;t<o.variants.length;t++){var n=o.variants[t];if(n.available){var i;LinkedProductOptions.optionsMap.root=LinkedProductOptions.optionsMap.root||[],LinkedProductOptions.optionsMap.root.push(n.option1),LinkedProductOptions.optionsMap.root=Shopify.uniq(LinkedProductOptions.optionsMap.root),o.options.length>1&&(i=n.option1,LinkedProductOptions.optionsMap[i]=LinkedProductOptions.optionsMap[i]||[],LinkedProductOptions.optionsMap[i].push(n.option2),LinkedProductOptions.optionsMap[i]=Shopify.uniq(LinkedProductOptions.optionsMap[i])),3===o.options.length&&(i=n.option1+" / "+n.option2,LinkedProductOptions.optionsMap[i]=LinkedProductOptions.optionsMap[i]||[],LinkedProductOptions.optionsMap[i].push(n.option3),LinkedProductOptions.optionsMap[i]=Shopify.uniq(LinkedProductOptions.optionsMap[i]))}}LinkedProductOptions.updateOptionsInSelector(0),o.options.length>1&&LinkedProductOptions.updateOptionsInSelector(1),3===o.options.length&&LinkedProductOptions.updateOptionsInSelector(2),jQuery(".single-option-selector:eq(0)").change(function(){return LinkedProductOptions.updateOptionsInSelector(1),3===o.options.length&&LinkedProductOptions.updateOptionsInSelector(2),!0}),jQuery(".single-option-selector:eq(1)").change(function(){return 3===o.options.length&&LinkedProductOptions.updateOptionsInSelector(2),!0})},module.exports=LinkedProductOptions;


},{}],17:[function(require,module,exports){
var imgl=require("imagesloaded"),mq=require("./bsify.media_queries.js");require("./bsify.touch.js");var GalleryLoader=function(e,t){this.ele=e,this.parent_ele=t,this.onLoaded=function(){}};GalleryLoader.prototype.init=function(){this.$ele=$(this.ele),this.carousel_width=0,this.imgLoad=new imgl(this.ele);var e=this;this.imgLoad.on("progress",function(t,i){e._collect_image_width(i)}).on("done",function(){e._set_carousel_width(),e.onLoaded.apply(e)})},GalleryLoader.prototype._collect_image_width=function(e){if(e.isLoaded){var t=$(e.img),i=t.closest(this.parent_ele);this.carousel_width+=this._image_parents_width(i)}else $(e.img).hide()},GalleryLoader.prototype._image_parents_width=function(e){return e.width()+this._padding_to_num(e,"paddingLeft")+this._padding_to_num(e,"paddingRight")+1},GalleryLoader.prototype._padding_to_num=function(e,t){return parseInt(e.css(t).replace("px",""))},GalleryLoader.prototype._set_carousel_width=function(){this.$ele.width(this.carousel_width)};var Gallery=function(e){this.options=e,this.ele=this.options.gallery_wrapper,this.item_wrapper=this.options.item_wrapper,this.controls_wrapper=this.options.controls_wrapper,this.loader=new GalleryLoader(this.ele,this.options.item_wrapper),this.on_loaded=!1,this._init()};Gallery.prototype.update=function(){this.$ele.parent().animate({opacity:0},"slow"),this._remove_event_handlers(),this._init()},Gallery.prototype._init=function(){this.$ele=$(this.ele),this.$ele.length>0&&(this._add_event_handlers(),this.loader.init(),this._set_current_image())},Gallery.prototype._add_event_handlers=function(){var e=this;this.loader.onLoaded=function(){e.$ele.parent().animate({opacity:1},"slow"),e.on_loaded&&e.on_loaded.apply(e)},$(document).on("swipeLeft",this.controls_wrapper,function(t){e._next_img()}),$(document).on("swipeRight",this.controls_wrapper,function(t){e._prev_img()}),$(document).on("click","[data-gallery-direction]",function(t){t.preventDefault();var i=$(t.currentTarget);"left"===i.data("gallery-direction")?e._prev_img():e._next_img()})},Gallery.prototype._remove_event_handlers=function(){this.loader.onLoaded=!1,$(document).off("swipeLeft",this.controls_wrapper),$(document).off("swipeRight",this.controls_wrapper),$(document).off("click","[data-gallery-direction]")},Gallery.prototype._set_current_image=function(){var e=this.$ele.find(this.item_wrapper+".is_current");e.length>0?this.$current_image=e.first():this.$current_image=this.$ele.find(this.item_wrapper).first(),this.$current_image.addClass("is_current"),this._check_for_end()},Gallery.prototype._prev_img=function(){var e=this.$current_image.prev();e.length>0&&(e.css({marginLeft:"0"}).addClass("is_current"),this.$current_image.removeClass("is_current"),this.$current_image=e,this._check_for_end())},Gallery.prototype._next_img=function(){var e=this.$current_image.next();if(e.length>0){var t=this.loader._image_parents_width(this.$current_image);this.$current_image.css({marginLeft:-1*t}).removeClass("is_current"),e.addClass("is_current"),this.$current_image=e,this._check_for_end()}},Gallery.prototype._check_for_end=function(){$("[data-gallery-direction]").removeClass("disabled"),0===this.$current_image.prev().length?$('[data-gallery-direction="left"]').addClass("disabled"):0===this.$current_image.next().length&&$('[data-gallery-direction="right"]').addClass("disabled")},module.exports=Gallery;


},{"./bsify.media_queries.js":18,"./bsify.touch.js":22,"imagesloaded":3}],18:[function(require,module,exports){
require("./_polyfills.js").getComputedStyle(),module.exports.size=function(){return window.getComputedStyle(document.body,":after").getPropertyValue("content").replace(/['"]/g,"")};


},{"./_polyfills.js":11}],19:[function(require,module,exports){
var InstagramFeed=function(t){this.ele=t,this.$ele=$(this.ele),this.api_url="https://api.instagram.com/v1",this.request_queue=[],this.requesting=!1,this.image_count_default=12,this.image_count_buffer=10,this._get_data(),this._load_feed()};InstagramFeed.prototype._get_data=function(){this.client_id=this.$ele.data("client-id"),this.image_count=this.$ele.data("image-count")||this.image_count_default,this.image_total=this.image_count+this.image_count_buffer,this.hashtag=this.$ele.data("hashtag"),this.user=this.$ele.data("user"),this._get_user_id()},InstagramFeed.prototype._get_user_id=function(){this.user&&(this.request_queue.push("user_id"),this._start_requests())},InstagramFeed.prototype._load_feed=function(){var t;void 0!==this.hashtag?t="hashtag":void 0!==this.user&&(t="user"),this.request_queue.push(t),this._start_requests()},InstagramFeed.prototype._build_request=function(t){if(null===this.client_id)throw"[ERROR] Instagram: You must provide a client id";var e={};switch(e.data={client_id:this.client_id},t){case"user_id":e.url=this.api_url+"/users/search?q="+this.user,e.callback=function(t){this.user_id=t.data[0].id};break;case"user":e.url=this.api_url+"/users/"+this.user_id+"/media/recent",e.data=$.extend(e.data,{count:this.image_total}),e.callback=function(t){this._build_feed(t.data)};break;case"hashtag":e.url=this.api_url+"/tags/"+this.hashtag+"/media/recent",e.data=$.extend(e.data,{count:this.image_total}),e.callback=function(t){this._build_feed(t.data)}}return e},InstagramFeed.prototype._start_requests=function(){this.requesting||(this.requesting=!0,this._request())},InstagramFeed.prototype._request=function(){if(this.request_queue.length>0){var t=this,e=this.request_queue.shift(),a=this._build_request(e);$.ajax({dataType:"jsonp",url:a.url,data:a.data}).done(function(e){a.callback.apply(t,[e]),t._request()}).fail(function(t,e,a){console.log("fail",t,e,a)})}else this.requesting=!1},InstagramFeed.prototype._build_feed=function(t){var e,a=this._filter_data(t);a.length>0?(e=this._build_feed_markup(a),this.$ele.addClass("group").attr("data-group-size",a.length)):e=this._build_error_markup(),this.$ele.append(e)},InstagramFeed.prototype._filter_data=function(t){return t},InstagramFeed.prototype._build_feed_markup=function(t){for(var e="",a=t.length<this.image_count?t.length:this.image_count,i=0;a>i;i++){var s=t[i];s&&(e+=this._build_item_markup(s))}return e},InstagramFeed.prototype._build_item_markup=function(t){return'<div class="group-item-wrap">    <figure class="group-item thumbnail">      <a href="'+t.link+'">        <div class="group-item-image">          <img src="'+t.images.standard_resolution.url+'" alt="'+t.caption.text+'">        </div>        <figcaption class="group-item-details caption">          <p><span class="user">'+t.caption.from.username+"</span> "+t.caption.text+"</p>        </figcaption>      </a>    </figure>  </div>"},InstagramFeed.prototype._build_error_markup=function(t){return"<p>"+this.$ele.data("empty-message")+"</p>"},module.exports=InstagramFeed;


},{}],20:[function(require,module,exports){
var Instagram=require("./bsify.social_feed_instagram.js"),SocialFeeds={};SocialFeeds.init=function(){SocialFeeds.instagram()},SocialFeeds.instagram=function(){var e=SocialFeeds._get_elements("instagram");e.length>0&&e.each(function(){new Instagram(this)})},SocialFeeds._get_elements=function(e){var a='[data-social-feed="'+e+'"]';return $(a)},module.exports=SocialFeeds;


},{"./bsify.social_feed_instagram.js":19}],21:[function(require,module,exports){
require("uniformThumbnails"),require("jquery-orderly");var Thumbnails={};Thumbnails.init=function(){if(Bsify.thumbnail_settings.constrain_images){var i={};i.fit=Bsify.thumbnail_settings.crop_images?"crop":"scale",i.align=Bsify.thumbnail_settings.image_alignment.toLowerCase();var e=Bsify.thumbnail_settings.image_ratio.toLowerCase();"square"===e||"landscape"===e||"portrait"===e?i.format=e:i.ratio=e,$(Bsify.thumbnail_selectors.image_wrapper).uniform_thumbnails(i).on("ut_complete",function(){Thumbnails.orderly()})}else Thumbnails.orderly()},Thumbnails.orderly=function(){$(Bsify.thumbnail_selectors.details_wrapper).orderly({method:"children"})},module.exports=Thumbnails;


},{"jquery-orderly":6,"uniformThumbnails":7}],22:[function(require,module,exports){
var Swipe=function(){this.threshold=5,this.xDown=null,this.yDown=null,this.add_event_listeners()};Swipe.prototype.add_event_listeners=function(){var t=this;Element.prototype.addEventListener&&(document.addEventListener("touchstart",function(e){t.handleTouchStart(e)},!1),document.addEventListener("touchmove",function(e){t.handleTouchMove(e)},!1))},Swipe.prototype.handleTouchStart=function(t){this.xDown=t.touches[0].clientX,this.yDown=t.touches[0].clientY},Swipe.prototype.handleTouchMove=function(t){if(this.xDown&&this.yDown){var e=t.targetTouches[0].target,n=t.touches[0].clientX,i=t.touches[0].clientY,o=this.xDown-n,h=this.yDown-i;Math.abs(o)>Math.abs(h)?o>0?o>this.threshold&&$(e).trigger("swipeLeft"):-1*o>this.threshold&&$(e).trigger("swipeRight"):h>0?h>this.threshold&&$(e).trigger("swipeUp"):-1*h>this.threshold&&$(e).trigger("swipeDown"),this.xDown=null,this.yDown=null}},new Swipe;


},{}],23:[function(require,module,exports){
var VariantOptionSwitcher={};VariantOptionSwitcher.image_variant_switcher=function(){var t=$(Bsify.selectors.product.select_selector);$(document).on("click","[data-variant-id]",function(i){i.preventDefault();var r=$(i.currentTarget);t.val(r.data("variant-id")),VariantOptionSwitcher.update_product_selector_options(t)})},VariantOptionSwitcher.update_product_selector_options=function(t){var i=t.val(),r=Bsify.get_variant_by_id(i);if(r)for(var a=0;a<Bsify.product.options.length;a++){var e="option"+(a+1),n=r[e];$(".single-option-selector:eq("+a+")").val(n).trigger("change")}},module.exports=VariantOptionSwitcher;


},{}],24:[function(require,module,exports){
var SixPackBuilder=require("./phd.cart.sixpack.js"),MultiStepBuilder=require("./phd.cart.multistep.js"),StandardCart=require("./phd.cart.standard.js"),PhdCart=function(){var r=new StandardCart;new SixPackBuilder(r),new MultiStepBuilder(r)};module.exports=PhdCart;


},{"./phd.cart.multistep.js":25,"./phd.cart.sixpack.js":32,"./phd.cart.standard.js":33}],25:[function(require,module,exports){
var MultiStepBuilder=function(t){this.standard_cart=t};module.exports=MultiStepBuilder;


},{}],26:[function(require,module,exports){
var Eventer=require("./_eventer.js"),ItemsTotal=require("./phd.cart.sixpack.holder_total.js"),ItemsHolder=require("./phd.cart.sixpack.holder_items.js"),ItemsDisplay=require("./phd.cart.sixpack.holder_display.js"),ItemSubmitter=require("./phd.cart.sixpack.holder_submitter.js"),SixPackHolder=function(t){this.$ele=t,new Eventer(this);var e=this.$ele.data("phd-holding-limit-multiple")||6,i=this.$ele.data("phd-subscription-id"),r=this.$ele.data("phd-shipping-interval-frequency"),s=this.$ele.data("phd-shipping-interval-unit-type"),o=this.$ele.find("[data-phd-holding-items]"),d=this.$ele.find("form");this.items=new ItemsHolder("sixpack builder",e,i,r,s),this.items_display=new ItemsDisplay(o,e,this.items),this.total_display=new ItemsTotal(this.items),this.submitter=new ItemSubmitter(d,this.items),this._add_event_listeners()};SixPackHolder.prototype.add_to_holding=function(t){return this.items.add_item(t),this.items.item_count(t.id)},SixPackHolder.prototype.remove_from_holding=function(t){return this.items.remove_item(t),this.items.item_count(t)},SixPackHolder.prototype.update_item_in_holding=function(t,e){return this.items.update_item(t,e),this.items.item_count(t.id)},SixPackHolder.prototype._add_event_listeners=function(){var t=this;t.items_display.on("RemoveDisplayItem",function(e){t.items.remove_item(e);var i=[e,this.items.item_count(e)];t.trigger("RemoveItem",i)}),t.submitter.on("AddToCart",function(e){var i=t._build_products_for_cart(e);t.trigger("AddToCart",[i])}),t.items.on("ItemsCleared",function(){t.trigger("ItemsCleared")})},SixPackHolder.prototype._build_products_for_cart=function(t){var e="subscription"===t;return this.items.all_products_by_id(e)},module.exports=SixPackHolder;


},{"./_eventer.js":10,"./phd.cart.sixpack.holder_display.js":27,"./phd.cart.sixpack.holder_items.js":28,"./phd.cart.sixpack.holder_submitter.js":29,"./phd.cart.sixpack.holder_total.js":30}],27:[function(require,module,exports){
var Eventer=require("./_eventer.js"),SixPackHolderItemsDisplay=function(t,i,e){this.$ele=t,this.items=e,this.limit_multiple=i,this.tooltip_selector='[data-toggle="tooltip"]',this.default_color="#E0F0D9",new Eventer(this),this._add_event_listeners(),this.reset()};SixPackHolderItemsDisplay.prototype.update=function(t){this._clear_display_items(),this._redraw_display_items(),this._update_display_items(),this._add_tooltips(),t&&"added"===t&&this._scroll_container()},SixPackHolderItemsDisplay.prototype.reset=function(){this._clear_display_items(),this._build_empty_display_items(),this._add_tooltips()},SixPackHolderItemsDisplay.prototype._add_event_listeners=function(){var t=this;t.items.on("ItemsUpdated",function(i,e){t.update(e)}),t.$ele.on("click",".holding-item",function(i){i.preventDefault(),t._remove_item(i)})},SixPackHolderItemsDisplay.prototype._redraw_display_items=function(){for(var t=this.items.total_count(),i=Math.floor(t/this.limit_multiple)+1,e=0;i>e;e++)this._build_empty_display_items()},SixPackHolderItemsDisplay.prototype._clear_display_items=function(){this._remove_tooltips(),this.$ele.html("")},SixPackHolderItemsDisplay.prototype._build_empty_display_items=function(){for(var t="",i=0;i<this.limit_multiple;i++)t+=this._empty_display_item_markup();this.$ele.append('<div class="holding-item-group">'+t+"</div>")},SixPackHolderItemsDisplay.prototype._empty_display_item_markup=function(){return'<a class="holding-item holding-item-disabled" data-toggle="tooltip" data-placement="right" data-phd-item-id title="Empty item slot">    <span class="fa fa-times-circle"></span>    <svg version="1.2" baseprofile="tiny" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewbox="0 0 150 400" xml:space="preserve"> <path d="M64.2,9.6c-4.7,0.3-9.3,0.6-13.9,1.9c-3.6,1.1-5.6,3.7-6,7c-0.9,7.5-1.8,15-1.3,22.5c0.2,2.2,1.7,4.1,1.7,6.5,c0,2.5,0.4,4.9,0.7,7.4c0.1,1.2-0.6,1.6-1.6,1.8c-1.3,0.3-2.4,0.9-2.8,2.4c-0.7,2.9-0.4,3.4,2.6,3.9c1.2,0.2,1.8,0.7,1.8,2,c-0.1,2.7,0,5.3,0,8c0,0.8-0.1,1.5-0.9,2c-8.4,3.8-18.1,15.8-18.1,15.8c-5.8,7.6-9.3,16.1-11.6,25.4c-1.1,4.4-1,8.7-1.1,13.1,l-0.2,211.4c-0.2,11.5-0.4,22.9,0.2,34.4c0.4,8,4.8,12.5,13.5,14.1c5.5,1,11,1.3,16.5,1.6c8.1,0.3,18.1,0.1,26.2,0.2h10.2,c8.1,0,18.1,0.2,26.2-0.2c5.5-0.2,11-0.5,16.5-1.6c8.7-1.6,13.1-6.1,13.5-14.1c0.6-11.5,0.3-22.9,0.2-34.4l-0.2-211.4,c0-4.4,0.1-8.7-1.1-13.1c-2.3-9.2-5.9-17.7-11.6-25.4c0,0-8-11.3-18.1-15.8c-0.8-0.5-0.9-1.2-0.9-2c0-2.7,0-5.3,0-8,c0-1.3,0.6-1.8,1.8-2c2.9-0.5,3.2-1,2.6-3.9c-0.4-1.5-1.5-2.1-2.8-2.4c-1-0.2-1.7-0.7-1.6-1.8c0.2-2.5,0.6-4.9,0.7-7.4,c0-2.3,1.6-4.2,1.7-6.5c0.5-7.6-0.3-15.1-1.3-22.5c-0.4-3.3-2.4-5.9-6-7c-4.6-1.3-9.2-1.6-13.9-1.9C75.3,8.5,64.2,9.6,64.2,9.6,c-4.7,0.3-9.3,0.6-13.9,1.9c-3.6,1.1-5.6,3.7-6,7c-0.9,7.5-1.8,15-1.3,22.5c0.2,2.2,1.7,4.1,1.7,6.5c0,2.5,0.4,4.9,0.7,7.4,c0.1,1.2-0.6,1.6-1.6,1.8c-1.3,0.3-2.4,0.9-2.8,2.4c-0.7,2.9-0.4,3.4,2.6,3.9c1.2,0.2,1.8,0.7,1.8,2c-0.1,2.7,0,5.3,0,8,c0,0.8-0.1,1.5-0.9,2"></path> </svg>  </a>'},SixPackHolderItemsDisplay.prototype._update_display_items=function(){for(var t=this.items.total_count(),i=0;t>i;i++){var e=this.items.product_by_index(i),s=this.$ele.find(".holding-item").eq(i);s.removeClass("holding-item-disabled").attr("title","Remove "+e.title).attr("data-phd-item-id",e.id).data("phd-item-id",e.id),e.color&&s.find("path").css({fill:("#"!==e.color[0]?"#":"")+e.color})}},SixPackHolderItemsDisplay.prototype._scroll_container=function(){var t=$(".holding-item-group"),i=parseInt(t.css("margin-left"))+parseInt(t.css("margin-right")),e=(t.width()+i)*t.length,s=t.parent(),l=e-s.width();this.$ele.animate({scrollLeft:l},186)},SixPackHolderItemsDisplay.prototype._add_tooltips=function(){$(this.tooltip_selector).tooltip()},SixPackHolderItemsDisplay.prototype._remove_tooltips=function(){$(this.tooltip_selector).tooltip("destroy")},SixPackHolderItemsDisplay.prototype._remove_item=function(t){var i=$(t.currentTarget);if(!i.hasClass("holding-item-disabled")){var e=[i.data("phd-item-id")];this.trigger("RemoveDisplayItem",e)}},module.exports=SixPackHolderItemsDisplay;


},{"./_eventer.js":10}],28:[function(require,module,exports){
var Eventer=require("./_eventer.js"),SixPackHolderItems=function(t,i,e,r,o){new Eventer(this),this.id=t,this.products=[],this.products_are_addable=!1,this.limit_multiple=i,this.subscription_id=e,this.shipping_interval_frequency=r,this.shipping_interval_unit_type=o};SixPackHolderItems.prototype.add_item=function(t){this.products.push(t),this._update_is_addable_and_trigger("ItemAdded",[t.id,"added"])},SixPackHolderItems.prototype.remove_item=function(t){for(var i=this.total_count(),e=i-1;e>-1;e--){var r=this._remove_product_from_stack(t,e);if(r)break}this._update_is_addable_and_trigger("ItemRemoved",[t,"removed"])},SixPackHolderItems.prototype.update_item=function(t,i){for(var e=this.item_count(t.id),r=this.total_count(),o=r-1;o>-1;o--)this._remove_product_from_stack(t.id,o);if(i>0)for(var s=0;i>s;s++)this.products.push(t);var d=e>i?"removed":"added";this._update_is_addable_and_trigger("ItemUpdated",[t.id,d])},SixPackHolderItems.prototype.clear=function(){var t=this.all_products_by_id();for(var i in t)if(t.hasOwnProperty(i)){var e=t[i];this.update_item(e,0)}this.trigger("ItemsCleared")},SixPackHolderItems.prototype.item_count=function(t){for(var i=0,e=0;e<this.products.length;e++)this.products[e].id===t&&i++;return i},SixPackHolderItems.prototype.total_count=function(){return this.products.length},SixPackHolderItems.prototype.total_price=function(){for(var t=0,i=0;i<this.products.length;i++){var e=this.products[i];t+=e.price}return Shopify.formatMoney(t,Bsify.money_formats.moneyFormat)},SixPackHolderItems.prototype.product_by_index=function(t){return this.products[t]},SixPackHolderItems.prototype.all_products_by_id=function(t){for(var i={},e=0;e<this.products.length;e++){var r=this.products[e];i[r.id]?i[r.id].qty++:(i[r.id]={id:r.id,title:r.title,price:r.price,qty:1,properties:{added_by:this.id}},t&&(i[r.id].properties.shipping_interval_frequency=this.shipping_interval_frequency,i[r.id].properties.shipping_interval_unit_type=this.shipping_interval_unit_type,i[r.id].properties.subscription_id=this.subscription_id))}return i},SixPackHolderItems.prototype._remove_product_from_stack=function(t,i){var e=[];return this.products[i].id===t&&(e=this.products.splice(i,1)),e.length>0},SixPackHolderItems.prototype._update_is_addable_and_trigger=function(t,i){this.products_are_addable=this._is_addable(),this.trigger(t,i),this.trigger("ItemsUpdated",i)},SixPackHolderItems.prototype._is_addable=function(){var t=this.total_count(),i=t%this.limit_multiple;return t>0&&0===i},module.exports=SixPackHolderItems;


},{"./_eventer.js":10}],29:[function(require,module,exports){
var Eventer=require("./_eventer.js"),Modal=require("./phd.modal.js"),SixPackHolderItemSubmitter=function(t,e){new Eventer(this),this.$ele=t,this.items=e,this.$submit=t.find('[type="submit"]'),this.modal=new Modal,this._add_event_listeners()};SixPackHolderItemSubmitter.prototype._add_event_listeners=function(){var t=this;t.$ele.on("submit",function(e){e.preventDefault(),t._open_modal()}),$(document).on("click","[data-phd-add-to-cart-as]",function(e){var a=$(e.currentTarget),o=a.data("phd-add-to-cart-as");t.trigger("AddToCart",[o]),t.modal.close()}),t.items.on("ItemsUpdated",function(){t._toggle_submitablity()})},SixPackHolderItemSubmitter.prototype._toggle_submitablity=function(){this.items.products_are_addable?this.$submit.prop("disabled",!1):this.$submit.prop("disabled",!0)},SixPackHolderItemSubmitter.prototype._open_modal=function(){this.modal.content=this._add_to_cart_modal_markup(),this.modal.open()},SixPackHolderItemSubmitter.prototype._add_to_cart_modal_markup=function(){return'<div class="modal-header">    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span class="fa fa-times" aria-hidden="true"></span></button>    <h1>How do you want to get your order?</h1>  </div>  <div class="modal-body">    <button type="button" class="btn btn-default btn-lg" data-phd-add-to-cart-as="single"><strong>Add to cart</strong> as a one off purcahse</button>    <button type="button" class="btn btn-primary btn-lg" data-phd-add-to-cart-as="subscription">Get $10 off your order if you <strong>Subscribe now!</strong></button>  </div>'},SixPackHolderItemSubmitter.prototype._completed_modal_markup=function(t){return'<div class="modal-header">    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span class="fa fa-times" aria-hidden="true"></span></button>    <h1>Thanks, your order is being added to the cart</h1>  </div>  <div class="modal-body">    <p>'+t+"</p>  </div>"},module.exports=SixPackHolderItemSubmitter;


},{"./_eventer.js":10,"./phd.modal.js":39}],30:[function(require,module,exports){
var DataModel=require("./_data_model.js"),SixPackHolderTotal=function(t){this.items=t,new DataModel(this,{limit:"[data-phd-holding-items-limit]",total_items:"[data-phd-holding-total-items]",total_price:"[data-phd-holding-total-price]"}),this._add_event_listeners(),this.update()};SixPackHolderTotal.prototype.update=function(){this.total_items=this.items.total_count(),this.total_price=this.items.total_price();var t=this.items.limit_multiple*Math.ceil(this.total_items/this.items.limit_multiple);this.limit=t>0?t:this.items.limit_multiple},SixPackHolderTotal.prototype._add_event_listeners=function(){var t=this;t.items.on("ItemsUpdated",function(){t.update()})},module.exports=SixPackHolderTotal;


},{"./_data_model.js":9}],31:[function(require,module,exports){
var Eventer=require("./_eventer.js"),DataModel=require("./_data_model.js"),Modal=require("./phd.modal.js"),SixPackItem=function(t,e){this.$ele=t,this.id=e,new Eventer(this),new DataModel(this,{count:"[data-phd-item-"+this.id+"-count]"}),this.modal=new Modal,this.variant_id=this.$ele.data("phd-variant-id"),this.product_title=this.$ele.data("phd-product-title"),this.product_price=this.$ele.data("phd-product-price"),this.product_color=this.$ele.data("phd-product-color"),this.product={id:this.variant_id,title:this.product_title,price:this.product_price,color:this.product_color},this._add_event_listeners()};SixPackItem.prototype._add_event_listeners=function(){var t=this;t.$ele.on("click","[data-phd-add-item]",function(e){e.preventDefault(),e.currentTarget.blur(),t._trigger_add_to()}),t.$ele.on("click","[data-phd-remove-item]",function(e){e.preventDefault(),e.currentTarget.blur(),t._trigger_remove_from()}),t.$ele.on("blur","[data-phd-edit-item]",function(e){var r=parseInt(e.currentTarget.value);t._trigger_update_holding(r)}),t.$ele.on("keyup","[data-phd-edit-item]",function(e){if(13===e.keyCode){var r=parseInt(e.currentTarget.value);t._trigger_update_holding(r)}}),t.$ele.on("click","[data-phd-modal]",function(e){e.preventDefault();var r=$(e.currentTarget),i=r.attr("href");t.modal.open(),$.ajax(i).done(function(e){t.modal.content=e})})},SixPackItem.prototype._trigger_add_to=function(){var t=[this.product];this.trigger("AddToHolding",t)},SixPackItem.prototype._trigger_remove_from=function(){var t=[this.variant_id];this.trigger("RemoveFromHolding",t)},SixPackItem.prototype._trigger_update_holding=function(t){var e=[this.product,t];this.trigger("UpdateHolding",e)},module.exports=SixPackItem;


},{"./_data_model.js":9,"./_eventer.js":10,"./phd.modal.js":39}],32:[function(require,module,exports){
var ProductItem=require("./phd.cart.sixpack.item.js"),ProductHolder=require("./phd.cart.sixpack.holder.js"),SixPackBuilder=function(t){this.cart=t,this.holding_ele_selector='[data-phd-six-pack="holding"]',this.item_ele_selector='[data-phd-six-pack="item"]',this.items={},this._init_holder(),this._init_items()};SixPackBuilder.prototype._init_holder=function(){var t=this,o=$(this.holding_ele_selector);t.product_holder=new ProductHolder(o),t.product_holder.on("AddToCart",function(o){t.cart.add_products(o),t.product_holder.items.clear()}),t.product_holder.on("RemoveItem",function(o,e){t.items[o].holding_count=e}),t.product_holder.on("ItemsCleared",function(){for(var o in t.items){var e=t.items[o];e.count=""}})},SixPackBuilder.prototype._init_items=function(){var t=this,o=$(this.item_ele_selector);o.each(function(o,e){var i=$(e),r=new ProductItem(i,o);t.items[r.variant_id]=r,r.on("AddToHolding",function(o){var e=t.product_holder.add_to_holding(o);r.count=e}),r.on("RemoveFromHolding",function(o){var e=t.product_holder.remove_from_holding(o);r.count=e>0?e:""}),r.on("UpdateHolding",function(o,e){var i=t.product_holder.update_item_in_holding(o,e);r.count=i>0?i:""})})},module.exports=SixPackBuilder;


},{"./phd.cart.sixpack.holder.js":26,"./phd.cart.sixpack.item.js":31}],33:[function(require,module,exports){
var CartJS=require("./../../bower_components/shopify-cartjs/dist/cart.js"),CartDisplay=require("./phd.cart.standard_display.js"),CartOffCanvas=require("./phd.cart.standard_offcanvas.js"),StandardCart=function(){var t='a[href="/cart"]';this.off_canvas=new CartOffCanvas(t),this.display=new CartDisplay,this._add_event_listeners()};StandardCart.prototype.add_products=function(t){for(var a in t)if(t.hasOwnProperty(a)){var r=t[a];this.add_product(r)}},StandardCart.prototype.add_product=function(t){var a=this;a.display.update_cart_item(t),CartJS.addItem(t.id,t.qty,t.properties,{success:function(t,r,d){a._item_added_success(t,r,d)},error:function(t,r,d){a._item_added_error(t,r,d)}})},StandardCart.prototype._add_event_listeners=function(){var t=this;$(document).on("cart.requestComplete",function(a,r){console.log("cart.requestComplete",a,r),t.display.update(r)})},StandardCart.prototype._item_added_success=function(t,a,r){},StandardCart.prototype._item_added_error=function(t,a,r){console.log("Item added: error",t,a,r)},module.exports=StandardCart,window.CartJS=CartJS;


},{"./../../bower_components/shopify-cartjs/dist/cart.js":2,"./phd.cart.standard_display.js":34,"./phd.cart.standard_offcanvas.js":37}],34:[function(require,module,exports){
var DataModel=require("./_data_model.js"),CartItems=require("./phd.cart.standard_display_items.js"),StandardCartDisplay=function(){this.$details=$(".side-cart-details"),this.$empty_message=$(".side-cart-empty"),this.section_empty_message_selector=".side-cart-section-empty";var t=".phd-side-cart-item-template",e="[data-phd-side-cart-item]",s="[data-phd-side-cart-items-subscription]",a="[data-phd-side-cart-items-one-off]";this.subscription_items=new CartItems(s,e,t),this.one_off_items=new CartItems(a,e,t),this.item_groups=[this.subscription_items,this.one_off_items]};StandardCartDisplay.prototype.update=function(t){this.clear();for(var e=0;e<t.items.length;e++){var s=t.items[e];this.update_cart_item(s)}this._update_cart_empty_state()},StandardCartDisplay.prototype.update_cart_item=function(t){console.log("update_cart_item",t),void 0!==t.properties.subscription_id?this.subscription_items.update_cart_item(t):this.one_off_items.update_cart_item(t)},StandardCartDisplay.prototype.clear=function(){this._each(function(t,e){e.clear_items()})},StandardCartDisplay.prototype._update_cart_empty_state=function(){var t=0;this._each(function(e,s){var a=s.count();a>0?(s.$items_wrapper.next(this.section_empty_message_selector).hide(),t+=a):s.$items_wrapper.next(this.section_empty_message_selector).show()}),t>0?(this.$empty_message.hide(),this.$details.show()):(this.$empty_message.show(),this.$details.hide())},StandardCartDisplay.prototype._each=function(t){for(var e=0;e<this.item_groups.length;e++){var s=this.item_groups[e];t(e,s)}},module.exports=StandardCartDisplay;


},{"./_data_model.js":9,"./phd.cart.standard_display_items.js":36}],35:[function(require,module,exports){
var DataModel=require("./_data_model.js"),StandardCartDisplayItem=function(t,e,i){this.id=i,this.item_selector=e.replace("]",'="'+this.id+'"]'),this.items_wrapper_selector=t,this.selector=this.items_wrapper_selector+" "+this.item_selector,this.$ele=$(this.item_selector),this.price_tempate=this.$ele.find(".phd-side-cart-item-price-template").html(),new DataModel(this,{title:this.selector+" [data-phd-side-cart-item-title]",quantity:this.selector+" [data-phd-side-cart-item-qty]",price:this.selector+" [data-phd-side-cart-item-price]",line_price:this.selector+" [data-phd-side-cart-item-line-price]"})};StandardCartDisplayItem.prototype.update=function(t){this.quantity=t.quantity,this.price=this._price_markup(t.price),this.line_price=this._price_markup(t.line_price),void 0===this.title&&(this.title=t.title)},StandardCartDisplayItem.prototype._price_markup=function(t){var e=Shopify.formatMoney(t,Bsify.money_formats.moneyFormat),i=Shopify.formatMoney(t,Bsify.money_formats.moneyWithCurrencyFormat);return this.price_tempate.replace("[ITEM_PRICE_DATA]",t).replace("[ITEM_PRICE]",e).replace("[ITEM_PRICE_WITH_CURRENCY]",i)},module.exports=StandardCartDisplayItem;


},{"./_data_model.js":9}],36:[function(require,module,exports){
require("./_polyfills.js").objectKeys();var CartItem=require("./phd.cart.standard_display_item.js"),StandardCartDisplayItems=function(t,e,i){this.items={},this.item_selector=e,this.items_wrapper_selector=t,this.$items=$(e),this.$items_wrapper=$(t),this.$item_template=$(i),this.item_id_data_attr=e.replace(/\[|\]/g,""),this.item_id_data=this.item_id_data_attr.replace("data-",""),this._collect_items_from_dom()};StandardCartDisplayItems.prototype.update_cart_item=function(t){this.has_item(t.id)?this.items[t.id].update(t):this._build_new_item(t)},StandardCartDisplayItems.prototype.has_item=function(t){var e=!1;for(var i in this.items)if(i===t.toString()){e=!0;break}return e},StandardCartDisplayItems.prototype.count=function(){return Object.keys(this.items).length},StandardCartDisplayItems.prototype.clear_items=function(){this.items={},this.$items_wrapper.html("")},StandardCartDisplayItems.prototype._add_new_item=function(t){this.items[t]=new CartItem(this.items_wrapper_selector,this.item_selector,t)},StandardCartDisplayItems.prototype._collect_items_from_dom=function(){var t=this;this.$items.each(function(e,i){var a=$(i),s=a.data(t.item_id_data);t.has_item(s)||t._add_new_item(s)})},StandardCartDisplayItems.prototype._build_new_item=function(t){var e=$(this.$item_template.html());e.data(this.item_id_data,t.id).attr(this.item_id_data_attr,t.id),this.$items_wrapper.append(e),this._add_new_item(t.id),this.items[t.id].update(t)},module.exports=StandardCartDisplayItems;


},{"./_polyfills.js":11,"./phd.cart.standard_display_item.js":35}],37:[function(require,module,exports){
var Cookies=require("./_cookies.js"),StandardCartOffCanvas=function(t){if(this.cart_action_selector=t,this.offcanavs_class="offcanvas-open",this.$body=$("body"),this._add_event_listenters(),Cookies.hasItem("cart_state")){var a=Cookies.getItem("cart_state");this.toggle_draw(a)}};StandardCartOffCanvas.prototype.toggle_draw=function(t){void 0!==t&&void 0!==this[t+"_draw"]?this[t+"_draw"].apply(this):this.$body.hasClass(this.offcanavs_class)?this.close_draw():this.open_draw()},StandardCartOffCanvas.prototype.open_draw=function(){this.$body.addClass(this.offcanavs_class),Cookies.setItem("cart_state","open"),$(window).trigger("resize")},StandardCartOffCanvas.prototype.close_draw=function(){this.$body.removeClass(this.offcanavs_class),Cookies.setItem("cart_state","close"),$(window).trigger("resize")},StandardCartOffCanvas.prototype._add_event_listenters=function(){var t=this;$(document).on("click",this.cart_action_selector,function(a){a.preventDefault(),t.toggle_draw()})},module.exports=StandardCartOffCanvas;


},{"./_cookies.js":8}],38:[function(require,module,exports){
var PhdSticky=require("./phd.sticky.js"),PhdCart=require("./phd.cart.js"),Phd=function(){new PhdSticky,new PhdCart};module.exports=Phd;


},{"./phd.cart.js":24,"./phd.sticky.js":40}],39:[function(require,module,exports){
var DataModel=require("./_data_model.js"),PhdModal=function(t,e){this.callback_events=["on_open","on_close"],this.selector=e||"[data-bsify-modal]",this.$ele=$(this.selector),this.id=this._id(),new DataModel(this,{content:this.selector+" .modal-content"}),this._set_callbacks(t),this._add_event_listeners()};PhdModal.prototype.open=function(){this.$ele.modal(),this.$ele.data("modal_id",this.id),this.on_open&&this.on_open()},PhdModal.prototype.close=function(){this.$ele.modal("hide"),this.destroy()},PhdModal.prototype.destroy=function(){this.on_close&&this.on_close(),this.content="",this.$ele.data("bs.modal",null),this.$ele.data("modal_id",null)},PhdModal.prototype._add_event_listeners=function(){var t=this;this.$ele.on("hidden.bs.modal",function(){t.$ele.data("modal_id")===t.id&&t.destroy()})},PhdModal.prototype._set_callbacks=function(t){if(t)for(var e in this.callback_events){var o=this.callback_events[e];t[o]&&(this[o]=t[o])}},PhdModal.prototype._id=function(){return"_"+Math.random().toString(36).substr(2,9)},module.exports=PhdModal;


},{"./_data_model.js":9}],40:[function(require,module,exports){
var PhdSticky=function(){this.$ele=$('[data-phd="sticky"]'),this.$parent=this.$ele.parent(),this.parent_orig_margin_bottom=this.css_to_int(this.$parent,"margin-bottom");var t=this;t.$ele.length>0&&t.$ele.affix({offset:{top:t.$ele.offset().top,bottom:30},target:".offcanvas-main"}).on("affixed.bs.affix",function(){var i="relative"!==t.$ele.css("position")?t.parent_orig_margin_bottom+t.ele_height():t.parent_orig_margin_bottom;t.set_margin(i)}).on("affixed-top.bs.affix",function(){t.set_margin(t.parent_orig_margin_bottom)})};PhdSticky.prototype.set_margin=function(t){this.$parent.css({"margin-bottom":t})},PhdSticky.prototype.ele_height=function(t){return this.$ele.height()+this.css_to_int(this.$ele,"margin-top")+this.css_to_int(this.$ele,"margin-bottom")+this.css_to_int(this.$ele,"padding-top")+this.css_to_int(this.$ele,"padding-bottom")},PhdSticky.prototype.css_to_int=function(t,i){return parseInt(t.css(i))},module.exports=PhdSticky;


},{}]},{},[1])
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyaWZ5L25vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCIvVXNlcnMvc3Rld2FydGtuYXBtYW4vRGV2ZWxvcG1lbnQvU2hvcGlmeS9DbGllbnRzL3BoZC9zcmMvanMvYXBwLmpzIiwiL1VzZXJzL3N0ZXdhcnRrbmFwbWFuL0RldmVsb3BtZW50L1Nob3BpZnkvQ2xpZW50cy9waGQvYm93ZXJfY29tcG9uZW50cy9zaG9waWZ5LWNhcnRqcy9kaXN0L2NhcnQuanMiLCIvVXNlcnMvc3Rld2FydGtuYXBtYW4vRGV2ZWxvcG1lbnQvU2hvcGlmeS9DbGllbnRzL3BoZC9ub2RlX21vZHVsZXMvaW1hZ2VzbG9hZGVkL2ltYWdlc2xvYWRlZC5qcyIsIi9Vc2Vycy9zdGV3YXJ0a25hcG1hbi9EZXZlbG9wbWVudC9TaG9waWZ5L0NsaWVudHMvcGhkL25vZGVfbW9kdWxlcy9pbWFnZXNsb2FkZWQvbm9kZV9tb2R1bGVzL2V2ZW50aWUvZXZlbnRpZS5qcyIsIi9Vc2Vycy9zdGV3YXJ0a25hcG1hbi9EZXZlbG9wbWVudC9TaG9waWZ5L0NsaWVudHMvcGhkL25vZGVfbW9kdWxlcy9pbWFnZXNsb2FkZWQvbm9kZV9tb2R1bGVzL3dvbGZ5ODctZXZlbnRlbWl0dGVyL0V2ZW50RW1pdHRlci5qcyIsIi9Vc2Vycy9zdGV3YXJ0a25hcG1hbi9EZXZlbG9wbWVudC9TaG9waWZ5L0NsaWVudHMvcGhkL25vZGVfbW9kdWxlcy9qcXVlcnktb3JkZXJseS9zcmMvanF1ZXJ5Lm9yZGVybHkuanMiLCIvVXNlcnMvc3Rld2FydGtuYXBtYW4vRGV2ZWxvcG1lbnQvU2hvcGlmeS9DbGllbnRzL3BoZC9ub2RlX21vZHVsZXMvdW5pZm9ybVRodW1ibmFpbHMvc3JjL2pxdWVyeS51bmlmb3JtX3RodW1ibmFpbHMuanMiLCIvVXNlcnMvc3Rld2FydGtuYXBtYW4vRGV2ZWxvcG1lbnQvU2hvcGlmeS9DbGllbnRzL3BoZC9zcmMvanMvX2Nvb2tpZXMuanMiLCIvVXNlcnMvc3Rld2FydGtuYXBtYW4vRGV2ZWxvcG1lbnQvU2hvcGlmeS9DbGllbnRzL3BoZC9zcmMvanMvX2RhdGFfbW9kZWwuanMiLCIvVXNlcnMvc3Rld2FydGtuYXBtYW4vRGV2ZWxvcG1lbnQvU2hvcGlmeS9DbGllbnRzL3BoZC9zcmMvanMvX2V2ZW50ZXIuanMiLCIvVXNlcnMvc3Rld2FydGtuYXBtYW4vRGV2ZWxvcG1lbnQvU2hvcGlmeS9DbGllbnRzL3BoZC9zcmMvanMvX3BvbHlmaWxscy5qcyIsIi9Vc2Vycy9zdGV3YXJ0a25hcG1hbi9EZXZlbG9wbWVudC9TaG9waWZ5L0NsaWVudHMvcGhkL3NyYy9qcy9ic2lmeS5iYW5uZXIuanMiLCIvVXNlcnMvc3Rld2FydGtuYXBtYW4vRGV2ZWxvcG1lbnQvU2hvcGlmeS9DbGllbnRzL3BoZC9zcmMvanMvYnNpZnkuY2FydC5qcyIsIi9Vc2Vycy9zdGV3YXJ0a25hcG1hbi9EZXZlbG9wbWVudC9TaG9waWZ5L0NsaWVudHMvcGhkL3NyYy9qcy9ic2lmeS5pbWFnZV9zd2l0Y2hlci5qcyIsIi9Vc2Vycy9zdGV3YXJ0a25hcG1hbi9EZXZlbG9wbWVudC9TaG9waWZ5L0NsaWVudHMvcGhkL3NyYy9qcy9ic2lmeS5qcyIsIi9Vc2Vycy9zdGV3YXJ0a25hcG1hbi9EZXZlbG9wbWVudC9TaG9waWZ5L0NsaWVudHMvcGhkL3NyYy9qcy9ic2lmeS5saW5rZWRfcHJvZHVjdF9vcHRpb25zLmpzIiwiL1VzZXJzL3N0ZXdhcnRrbmFwbWFuL0RldmVsb3BtZW50L1Nob3BpZnkvQ2xpZW50cy9waGQvc3JjL2pzL2JzaWZ5Lmxvb2tib29rX2dhbGxlcnkuanMiLCIvVXNlcnMvc3Rld2FydGtuYXBtYW4vRGV2ZWxvcG1lbnQvU2hvcGlmeS9DbGllbnRzL3BoZC9zcmMvanMvYnNpZnkubWVkaWFfcXVlcmllcy5qcyIsIi9Vc2Vycy9zdGV3YXJ0a25hcG1hbi9EZXZlbG9wbWVudC9TaG9waWZ5L0NsaWVudHMvcGhkL3NyYy9qcy9ic2lmeS5zb2NpYWxfZmVlZF9pbnN0YWdyYW0uanMiLCIvVXNlcnMvc3Rld2FydGtuYXBtYW4vRGV2ZWxvcG1lbnQvU2hvcGlmeS9DbGllbnRzL3BoZC9zcmMvanMvYnNpZnkuc29jaWFsX2ZlZWRzLmpzIiwiL1VzZXJzL3N0ZXdhcnRrbmFwbWFuL0RldmVsb3BtZW50L1Nob3BpZnkvQ2xpZW50cy9waGQvc3JjL2pzL2JzaWZ5LnRodW1ibmFpbHMuanMiLCIvVXNlcnMvc3Rld2FydGtuYXBtYW4vRGV2ZWxvcG1lbnQvU2hvcGlmeS9DbGllbnRzL3BoZC9zcmMvanMvYnNpZnkudG91Y2guanMiLCIvVXNlcnMvc3Rld2FydGtuYXBtYW4vRGV2ZWxvcG1lbnQvU2hvcGlmeS9DbGllbnRzL3BoZC9zcmMvanMvYnNpZnkudmFyaWFudF9vcHRpb25fc3dpdGNoZXIuanMiLCIvVXNlcnMvc3Rld2FydGtuYXBtYW4vRGV2ZWxvcG1lbnQvU2hvcGlmeS9DbGllbnRzL3BoZC9zcmMvanMvcGhkLmNhcnQuanMiLCIvVXNlcnMvc3Rld2FydGtuYXBtYW4vRGV2ZWxvcG1lbnQvU2hvcGlmeS9DbGllbnRzL3BoZC9zcmMvanMvcGhkLmNhcnQubXVsdGlzdGVwLmpzIiwiL1VzZXJzL3N0ZXdhcnRrbmFwbWFuL0RldmVsb3BtZW50L1Nob3BpZnkvQ2xpZW50cy9waGQvc3JjL2pzL3BoZC5jYXJ0LnNpeHBhY2suaG9sZGVyLmpzIiwiL1VzZXJzL3N0ZXdhcnRrbmFwbWFuL0RldmVsb3BtZW50L1Nob3BpZnkvQ2xpZW50cy9waGQvc3JjL2pzL3BoZC5jYXJ0LnNpeHBhY2suaG9sZGVyX2Rpc3BsYXkuanMiLCIvVXNlcnMvc3Rld2FydGtuYXBtYW4vRGV2ZWxvcG1lbnQvU2hvcGlmeS9DbGllbnRzL3BoZC9zcmMvanMvcGhkLmNhcnQuc2l4cGFjay5ob2xkZXJfaXRlbXMuanMiLCIvVXNlcnMvc3Rld2FydGtuYXBtYW4vRGV2ZWxvcG1lbnQvU2hvcGlmeS9DbGllbnRzL3BoZC9zcmMvanMvcGhkLmNhcnQuc2l4cGFjay5ob2xkZXJfc3VibWl0dGVyLmpzIiwiL1VzZXJzL3N0ZXdhcnRrbmFwbWFuL0RldmVsb3BtZW50L1Nob3BpZnkvQ2xpZW50cy9waGQvc3JjL2pzL3BoZC5jYXJ0LnNpeHBhY2suaG9sZGVyX3RvdGFsLmpzIiwiL1VzZXJzL3N0ZXdhcnRrbmFwbWFuL0RldmVsb3BtZW50L1Nob3BpZnkvQ2xpZW50cy9waGQvc3JjL2pzL3BoZC5jYXJ0LnNpeHBhY2suaXRlbS5qcyIsIi9Vc2Vycy9zdGV3YXJ0a25hcG1hbi9EZXZlbG9wbWVudC9TaG9waWZ5L0NsaWVudHMvcGhkL3NyYy9qcy9waGQuY2FydC5zaXhwYWNrLmpzIiwiL1VzZXJzL3N0ZXdhcnRrbmFwbWFuL0RldmVsb3BtZW50L1Nob3BpZnkvQ2xpZW50cy9waGQvc3JjL2pzL3BoZC5jYXJ0LnN0YW5kYXJkLmpzIiwiL1VzZXJzL3N0ZXdhcnRrbmFwbWFuL0RldmVsb3BtZW50L1Nob3BpZnkvQ2xpZW50cy9waGQvc3JjL2pzL3BoZC5jYXJ0LnN0YW5kYXJkX2Rpc3BsYXkuanMiLCIvVXNlcnMvc3Rld2FydGtuYXBtYW4vRGV2ZWxvcG1lbnQvU2hvcGlmeS9DbGllbnRzL3BoZC9zcmMvanMvcGhkLmNhcnQuc3RhbmRhcmRfZGlzcGxheV9pdGVtLmpzIiwiL1VzZXJzL3N0ZXdhcnRrbmFwbWFuL0RldmVsb3BtZW50L1Nob3BpZnkvQ2xpZW50cy9waGQvc3JjL2pzL3BoZC5jYXJ0LnN0YW5kYXJkX2Rpc3BsYXlfaXRlbXMuanMiLCIvVXNlcnMvc3Rld2FydGtuYXBtYW4vRGV2ZWxvcG1lbnQvU2hvcGlmeS9DbGllbnRzL3BoZC9zcmMvanMvcGhkLmNhcnQuc3RhbmRhcmRfb2ZmY2FudmFzLmpzIiwiL1VzZXJzL3N0ZXdhcnRrbmFwbWFuL0RldmVsb3BtZW50L1Nob3BpZnkvQ2xpZW50cy9waGQvc3JjL2pzL3BoZC5qcyIsIi9Vc2Vycy9zdGV3YXJ0a25hcG1hbi9EZXZlbG9wbWVudC9TaG9waWZ5L0NsaWVudHMvcGhkL3NyYy9qcy9waGQubW9kYWwuanMiLCIvVXNlcnMvc3Rld2FydGtuYXBtYW4vRGV2ZWxvcG1lbnQvU2hvcGlmeS9DbGllbnRzL3BoZC9zcmMvanMvcGhkLnN0aWNreS5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQ0lBLEdBQUksT0FBUSxRQUFRLGNBQ2hCLE9BQVMsUUFBUSx3REFDakIsU0FBVyxRQUFRLCtCQUNuQixJQUFNLFFBQVEsWUFFZCxJQUFNLFdBa0NSLEdBaENBLE9BQU8sS0FBSyxNQUFNLEtBQU0sTUFBTSxlQUcxQixNQUFNLFVBRVIsTUFBTSxjQUFjLHlCQUNwQixNQUFNLGNBQWMsaUJBRXBCLE1BQU0sc0JBQXNCLHlCQUl4QixNQUFNLHdCQUVKLE1BQU0sUUFBUSxXQUFhLE1BQU0sUUFBUSxRQUFRLE9BQVMsR0FDNUQsTUFBTSxxQkFBcUIsb0JBQW9CLE1BQU0sVUFNdkQsTUFBTSxrQkFDUixNQUFNLEtBQUssT0FJYixNQUFNLFdBQVcsT0FHakIsTUFBTSxPQUFPLE9BR1QsRUFBRSx3QkFBd0IsT0FBUyxFQUFHLENBQ3hDLEdBQUksR0FBVyxHQUFJLFdBQ2pCLGdCQUFpQix1Q0FDakIsYUFBYyxtQkFDZCxpQkFBa0Isc0JBR3BCLEdBQVMsVUFBWSxXQUNuQixHQUFJLEdBQWMsRUFBRSxxQkFBcUIsUUFDekMsR0FBRSxzQkFBc0IsT0FBTyxHQUUvQixNQUFNLFdBQVcsV0FLckIsTUFBTSxZQUFZLE9BR2xCLEdBQUksTUFJRixJQUFNLEdBQUksSUFDZCxRQUFPLFFBQVU7Ozs7Q0NuRWpCLFdBQ0UsR0FBSSxHQUFXLEVBQU0sRUFBUSxFQUFNLEVBQVksRUFDN0MsRUFBUyxTQUFTLEVBQUksR0FBSyxNQUFPLFlBQVksTUFBTyxHQUFHLE1BQU0sRUFBSSxZQUVwRSxHQUFPLFdBQ0wsUUFBUyxLQUNQLEtBQUssT0FBUyxFQUFPLEtBQUssT0FBUSxNQXVCcEMsTUFwQkEsR0FBSyxVQUFVLE9BQVMsU0FBUyxHQUMvQixHQUFJLEdBQU0sRUFBSyxDQUNmLEtBQUssSUFBTyxHQUNWLEVBQVEsRUFBSyxHQUNELFVBQVIsSUFDRixLQUFLLEdBQU8sRUFHaEIsT0FB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d0IsV0FDNUIsRUFBTSxXQUFXLEVBQU0sNkJBSzdCLFdBQVUsVUFBVSxXQUFhLFNBQVUsR0FDekMsS0FBSyxRQUFRLEtBQU0sZ0JBQWlCLEtBR3RDLFVBQVUsVUFBVSxXQUFhLFNBQVUsR0FDekMsTUFBTyxNQUFLLEtBQUssU0FBVyxLQUFLLFdBQVcsS0FBSyxLQUFNLGNBQWdCLEtBQUssV0FBVyxLQUFLLEtBQU0saUJBQW1CLEtBQUssV0FBVyxLQUFLLEtBQU0sZUFBaUIsS0FBSyxXQUFXLEtBQUssS0FBTSxtQkFHOUwsVUFBVSxVQUFVLFdBQWEsU0FBVSxFQUFNLEdBQy9DLE1BQU8sVUFBUyxFQUFLLElBQUksS0FHM0IsT0FBTyxRQUFVIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gZSh0LG4scil7ZnVuY3Rpb24gcyhvLHUpe2lmKCFuW29dKXtpZighdFtvXSl7dmFyIGE9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtpZighdSYmYSlyZXR1cm4gYShvLCEwKTtpZihpKXJldHVybiBpKG8sITApO3ZhciBmPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIrbytcIidcIik7dGhyb3cgZi5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGZ9dmFyIGw9bltvXT17ZXhwb3J0czp7fX07dFtvXVswXS5jYWxsKGwuZXhwb3J0cyxmdW5jdGlvbihlKXt2YXIgbj10W29dWzFdW2VdO3JldHVybiBzKG4/bjplKX0sbCxsLmV4cG9ydHMsZSx0LG4scil9cmV0dXJuIG5bb10uZXhwb3J0c312YXIgaT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2Zvcih2YXIgbz0wO288ci5sZW5ndGg7bysrKXMocltvXSk7cmV0dXJuIHN9KSIsIi8qXG4gIE1haW4gYXBwIGZvciBCb290c3RyYXBpZnlcbiovXG5cbnZhciBCc2lmeSA9IHJlcXVpcmUoJy4vYnNpZnkuanMnKTtcbnZhciBDYXJ0SlMgPSByZXF1aXJlKFwiLi8uLi8uLi9ib3dlcl9jb21wb25lbnRzL3Nob3BpZnktY2FydGpzL2Rpc3QvY2FydC5qc1wiKTtcbnZhciBMb29rYm9vayA9IHJlcXVpcmUoJy4vYnNpZnkubG9va2Jvb2tfZ2FsbGVyeS5qcycpO1xudmFyIFBoZCA9IHJlcXVpcmUoJy4vcGhkLmpzJyk7XG5cbnZhciBBcHAgPSBmdW5jdGlvbiAoKSB7XG4gIC8vIGluaXQgQ2FydEpTXG4gIENhcnRKUy5pbml0KEJzaWZ5LmNhcnQsIEJzaWZ5Lm1vbmV5X2Zvcm1hdHMpO1xuXG4gIC8vIGluaXQgcHJvZHVjdCB0ZW1wbGF0ZSBqc1xuICBpZiAoQnNpZnkucHJvZHVjdCkge1xuICAgIC8vIFByZWxvYWQgaW1hZ2VzIGFuZCBjYWxsIGltYWdlIHN3aXRjaGVyIGluaXRcbiAgICBCc2lmeS5JbWFnZVN3aXRjaGVyLnByZWxvYWRfcHJvZHVjdF90aHVtYnMoKTtcbiAgICBCc2lmeS5JbWFnZVN3aXRjaGVyLmltYWdlX3N3dGljaGVyKCk7XG4gICAgLy8gSW5pdGlhbGlzZSB0aGUgaW1hZ2VfdmFyaWFudF9zd2l0Y2hlclxuICAgIEJzaWZ5LlZhcmlhbnRPcHRpb25Td2l0Y2hlci5pbWFnZV92YXJpYW50X3N3aXRjaGVyKCk7XG5cbiAgICAvLyBDYWxsIGxpbmtPcHRpb25TZWxlY3RvcnNcbiAgICAvLyBDaGVjayB0aGF0IHdlIHdhbnQgdG8gdXNlIHRoZSBsaW5rZWQgcHJvZHVjdCBvcHRpb25zXG4gICAgaWYgKEJzaWZ5LmxpbmtlZF9wcm9kdWN0X29wdGlvbnMpIHtcbiAgICAgIC8vIE1ha2Ugc3VyZSB0aGUgcHJvZHVjdCBtZWV0cyB0aGUgY29ycmVjdCBjaXRlcmlhIGZvciBsaW5rZWQgcHJvZHVjdCBvcHRpb25zIGFuZCB0aGVuIGluaXRpYWxpc2VcbiAgICAgIGlmIChCc2lmeS5wcm9kdWN0LmF2YWlsYWJsZSAmJiBCc2lmeS5wcm9kdWN0Lm9wdGlvbnMubGVuZ3RoID4gMSkge1xuICAgICAgICBCc2lmeS5MaW5rZWRQcm9kdWN0T3B0aW9ucy5saW5rT3B0aW9uU2VsZWN0b3JzKEJzaWZ5LnByb2R1Y3QpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8vIGluaXQgYWpheCBhZGQgdG8gY2FydFxuICBpZiAoQnNpZnkuYWpheF9hZGRfdG9fY2FydCkge1xuICAgIEJzaWZ5LkNhcnQuaW5pdCgpO1xuICB9XG5cbiAgLy8gbG9hZCB1bmlmb3JtIHRodW1icyBhbmQgb3JkZXJseVxuICBCc2lmeS5UaHVtYm5haWxzLmluaXQoKTtcblxuICAvLyBpbml0IGV2ZW50IGxpc3RlbmVycyBmb3IgYmFubmVyXG4gIEJzaWZ5LkJhbm5lci5pbml0KCk7XG5cbiAgLy8gaW5pdCBsb29rYm9vayBnYWxsZXJ5XG4gIGlmICgkKCcuY29sbGVjdGlvbi1sb29rYm9vaycpLmxlbmd0aCA+IDApIHtcbiAgICB2YXIgbG9va2Jvb2sgPSBuZXcgTG9va2Jvb2soe1xuICAgICAgZ2FsbGVyeV93cmFwcGVyOiAnLmNvbGxlY3Rpb24tbG9va2Jvb2sgLnByb2R1Y3RzLmdyb3VwJyxcbiAgICAgIGl0ZW1fd3JhcHBlcjogJy5ncm91cC1pdGVtLXdyYXAnLFxuICAgICAgY29udHJvbHNfd3JhcHBlcjogJy5sb29rYm9vay1jb250cm9scydcbiAgICB9KTtcblxuICAgIGxvb2tib29rLm9uX2xvYWRlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciBpdGVtX2hlaWdodCA9ICQoJy5ncm91cC1pdGVtLWltYWdlJykuaGVpZ2h0KCk7XG4gICAgICAkKCcubG9va2Jvb2stY29udHJvbHMnKS5oZWlnaHQoaXRlbV9oZWlnaHQpO1xuXG4gICAgICBCc2lmeS5UaHVtYm5haWxzLm9yZGVybHkoKTtcbiAgICB9O1xuICB9XG5cbiAgLy8gaW5pdCBzb2NpYWwgZmVlZHNcbiAgQnNpZnkuU29jaWFsRmVlZHMuaW5pdCgpO1xuICBcbiAgLy8gY3VzdG9tIHBoZCBjb2RlXG4gIG5ldyBQaGQoKTtcbn07XG5cbi8vIGluaXRpYXRlIHRoZSBhcHAgYW5kIGV4cG9zZSBpdCB0byB0aGUgYnJvd3NlclxudmFyIGFwcCA9IG5ldyBBcHAoKTtcbm1vZHVsZS5leHBvcnRzID0gYXBwO1xuIiwiKGZ1bmN0aW9uKCkge1xuICB2YXIgJGRvY3VtZW50LCBDYXJ0LCBDYXJ0SlMsIEl0ZW0sIHByb2Nlc3NpbmcsIHF1ZXVlLFxuICAgIF9fYmluZCA9IGZ1bmN0aW9uKGZuLCBtZSl7IHJldHVybiBmdW5jdGlvbigpeyByZXR1cm4gZm4uYXBwbHkobWUsIGFyZ3VtZW50cyk7IH07IH07XG5cbiAgQ2FydCA9IChmdW5jdGlvbigpIHtcbiAgICBmdW5jdGlvbiBDYXJ0KCkge1xuICAgICAgdGhpcy51cGRhdGUgPSBfX2JpbmQodGhpcy51cGRhdGUsIHRoaXMpO1xuICAgIH1cblxuICAgIENhcnQucHJvdG90eXBlLnVwZGF0ZSA9IGZ1bmN0aW9uKGNhcnQpIHtcbiAgICAgIHZhciBpdGVtLCBrZXksIHZhbHVlO1xuICAgICAgZm9yIChrZXkgaW4gY2FydCkge1xuICAgICAgICB2YWx1ZSA9IGNhcnRba2V5XTtcbiAgICAgICAgaWYgKGtleSAhPT0gJ2l0ZW1zJykge1xuICAgICAgICAgIHRoaXNba2V5XSA9IHZhbHVlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gdGhpcy5pdGVtcyA9IChmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIF9pLCBfbGVuLCBfcmVmLCBfcmVzdWx0cztcbiAgICAgICAgX3JlZiA9IGNhcnQuaXRlbXM7XG4gICAgICAgIF9yZXN1bHRzID0gW107XG4gICAgICAgIGZvciAoX2kgPSAwLCBfbGVuID0gX3JlZi5sZW5ndGg7IF9pIDwgX2xlbjsgX2krKykge1xuICAgICAgICAgIGl0ZW0gPSBfcmVmW19pXTtcbiAgICAgICAgICBfcmVzdWx0cy5wdXNoKG5ldyBJdGVtKGl0ZW0pKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gX3Jlc3VsdHM7XG4gICAgICB9KSgpO1xuICAgIH07XG5cbiAgICByZXR1cm4gQ2FydDtcblxuICB9KSgpO1xuXG4gIEl0ZW0gPSAoZnVuY3Rpb24oKSB7XG4gICAgZnVuY3Rpb24gSXRlbShpdGVtKSB7XG4gICAgICB0aGlzLnByb3BlcnR5QXJyYXkgPSBfX2JpbmQodGhpcy5wcm9wZXJ0eUFycmF5LCB0aGlzKTtcbiAgICAgIHRoaXMudXBkYXRlID0gX19iaW5kKHRoaXMudXBkYXRlLCB0aGlzKTtcbiAgICAgIHRoaXMudXBkYXRlKGl0ZW0pO1xuICAgIH1cblxuICAgIEl0ZW0ucHJvdG90eXBlLnVwZGF0ZSA9IGZ1bmN0aW9uKGl0ZW0pIHtcbiAgICAgIHZhciBrZXksIHZhbHVlO1xuICAgICAgZm9yIChrZXkgaW4gaXRlbSkge1xuICAgICAgICB2YWx1ZSA9IGl0ZW1ba2V5XTtcbiAgICAgICAgaWYgKGtleSAhPT0gJ3Byb3BlcnRpZXMnKSB7XG4gICAgICAgICAgdGhpc1trZXldID0gdmFsdWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiB0aGlzLnByb3BlcnRpZXMgPSBDYXJ0SlMuVXRpbHMuZXh0ZW5kKHt9LCBpdGVtLnByb3BlcnRpZXMpO1xuICAgIH07XG5cbiAgICBJdGVtLnByb3RvdHlwZS5wcm9wZXJ0eUFycmF5ID0gZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgbmFtZSwgdmFsdWUsIF9yZWYsIF9yZXN1bHRzO1xuICAgICAgX3JlZiA9IHRoaXMucHJvcGVydGllcztcbiAgICAgIF9yZXN1bHRzID0gW107XG4gICAgICBmb3IgKG5hbWUgaW4gX3JlZikge1xuICAgICAgICB2YWx1ZSA9IF9yZWZbbmFtZV07XG4gICAgICAgIF9yZXN1bHRzLnB1c2goe1xuICAgICAgICAgIG5hbWU6IG5hbWUsXG4gICAgICAgICAgdmFsdWU6IHZhbHVlXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgcmV0dXJuIF9yZXN1bHRzO1xuICAgIH07XG5cbiAgICByZXR1cm4gSXRlbTtcblxuICB9KSgpO1xuXG4gIENhcnRKUyA9IHtcbiAgICBzZXR0aW5nczoge1xuICAgICAgZGF0YUFQSTogdHJ1ZSxcbiAgICAgIHJlcXVlc3RCb2R5Q2xhc3M6IG51bGwsXG4gICAgICByaXZldHNNb2RlbHM6IHt9LFxuICAgICAgbW9uZXlGb3JtYXQ6IG51bGwsXG4gICAgICBtb25leVdpdGhDdXJyZW5jeUZvcm1hdDogbnVsbFxuICAgIH0sXG4gICAgY2FydDogbmV3IENhcnQoKVxuICB9O1xuXG4gIENhcnRKUy5pbml0ID0gZnVuY3Rpb24oY2FydCwgc2V0dGluZ3MpIHtcbiAgICBpZiAoc2V0dGluZ3MgPT0gbnVsbCkge1xuICAgICAgc2V0dGluZ3MgPSB7fTtcbiAgICB9XG4gICAgQ2FydEpTLmNvbmZpZ3VyZShzZXR0aW5ncyk7XG4gICAgQ2FydEpTLmNhcnQudXBkYXRlKGNhcnQpO1xuICAgIGlmIChDYXJ0SlMuc2V0dGluZ3MuZGF0YUFQSSkge1xuICAgICAgQ2FydEpTLkRhdGEuaW5pdCgpO1xuICAgIH1cbiAgICBpZiAoQ2FydEpTLnNldHRpbmdzLnJlcXVlc3RCb2R5Q2xhc3MpIHtcbiAgICAgICQoZG9jdW1lbnQpLm9uKCdjYXJ0LnJlcXVlc3RTdGFydGVkJywgZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiAkKCdib2R5JykuYWRkQ2xhc3MoQ2FydEpTLnNldHRpbmdzLnJlcXVlc3RCb2R5Q2xhc3MpO1xuICAgICAgfSk7XG4gICAgICAkKGRvY3VtZW50KS5vbignY2FydC5yZXF1ZXN0Q29tcGxldGUnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuICQoJ2JvZHknKS5yZW1vdmVDbGFzcyhDYXJ0SlMuc2V0dGluZ3MucmVxdWVzdEJvZHlDbGFzcyk7XG4gICAgICB9KTtcbiAgICB9XG4gICAgcmV0dXJuIENhcnRKUy5SaXZldHMuaW5pdCgpO1xuICB9O1xuXG4gIENhcnRKUy5jb25maWd1cmUgPSBmdW5jdGlvbihzZXR0aW5ncykge1xuICAgIGlmIChzZXR0aW5ncyA9PSBudWxsKSB7XG4gICAgICBzZXR0aW5ncyA9IHt9O1xuICAgIH1cbiAgICByZXR1cm4gQ2FydEpTLlV0aWxzLmV4dGVuZChDYXJ0SlMuc2V0dGluZ3MsIHNldHRpbmdzKTtcbiAgfTtcblxuICBDYXJ0SlMuVXRpbHMgPSB7XG4gICAgd3JhcEtleXM6IGZ1bmN0aW9uKG9iaiwgdHlwZSwgb3ZlcnJpZGUpIHtcbiAgICAgIHZhciBrZXksIHZhbHVlLCB3cmFwcGVkO1xuICAgICAgaWYgKHR5cGUgPT0gbnVsbCkge1xuICAgICAgICB0eXBlID0gJ3Byb3BlcnRpZXMnO1xuICAgICAgfVxuICAgICAgd3JhcHBlZCA9IHt9O1xuICAgICAgZm9yIChrZXkgaW4gb2JqKSB7XG4gICAgICAgIHZhbHVlID0gb2JqW2tleV07XG4gICAgICAgIHdyYXBwZWRbXCJcIiArIHR5cGUgKyBcIltcIiArIGtleSArIFwiXVwiXSA9IG92ZXJyaWRlICE9IG51bGwgPyBvdmVycmlkZSA6IHZhbHVlO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHdyYXBwZWQ7XG4gICAgfSxcbiAgICB1bndyYXBLZXlzOiBmdW5jdGlvbihvYmosIHR5cGUsIG92ZXJyaWRlKSB7XG4gICAgICB2YXIga2V5LCB1bndyYXBwZWQsIHVud3JhcHBlZEtleSwgdmFsdWU7XG4gICAgICBpZiAodHlwZSA9PSBudWxsKSB7XG4gICAgICAgIHR5cGUgPSAncHJvcGVydGllcyc7XG4gICAgICB9XG4gICAgICB1bndyYXBwZWQgPSB7fTtcbiAgICAgIGZvciAoa2V5IGluIG9iaikge1xuICAgICAgICB2YWx1ZSA9IG9ialtrZXldO1xuICAgICAgICB1bndyYXBwZWRLZXkgPSBrZXkucmVwbGFjZShcIlwiICsgdHlwZSArIFwiW1wiLCBcIlwiKS5yZXBsYWNlKFwiXVwiLCBcIlwiKTtcbiAgICAgICAgdW53cmFwcGVkW3Vud3JhcHBlZEtleV0gPSBvdmVycmlkZSAhPSBudWxsID8gb3ZlcnJpZGUgOiB2YWx1ZTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB1bndyYXBwZWQ7XG4gICAgfSxcbiAgICBleHRlbmQ6IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydGllcykge1xuICAgICAgdmFyIGtleSwgdmFsO1xuICAgICAgZm9yIChrZXkgaW4gcHJvcGVydGllcykge1xuICAgICAgICB2YWwgPSBwcm9wZXJ0aWVzW2tleV07XG4gICAgICAgIG9iamVjdFtrZXldID0gdmFsO1xuICAgICAgfVxuICAgICAgcmV0dXJuIG9iamVjdDtcbiAgICB9LFxuICAgIGNsb25lOiBmdW5jdGlvbihvYmplY3QpIHtcbiAgICAgIHZhciBrZXksIG5ld0luc3RhbmNlO1xuICAgICAgaWYgKChvYmplY3QgPT0gbnVsbCkgfHwgdHlwZW9mIG9iamVjdCAhPT0gJ29iamVjdCcpIHtcbiAgICAgICAgcmV0dXJuIG9iamVjdDtcbiAgICAgIH1cbiAgICAgIG5ld0luc3RhbmNlID0gbmV3IG9iamVjdC5jb25zdHJ1Y3RvcigpO1xuICAgICAgZm9yIChrZXkgaW4gb2JqZWN0KSB7XG4gICAgICAgIG5ld0luc3RhbmNlW2tleV0gPSBjbG9uZShvYmplY3Rba2V5XSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gbmV3SW5zdGFuY2U7XG4gICAgfSxcbiAgICBpc0FycmF5OiBBcnJheS5pc0FycmF5IHx8IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICByZXR1cm4ge30udG9TdHJpbmcuY2FsbCh2YWx1ZSkgPT09ICdbb2JqZWN0IEFycmF5XSc7XG4gICAgfSxcbiAgICBlbnN1cmVBcnJheTogZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgIGlmIChDYXJ0SlMuVXRpbHMuaXNBcnJheSh2YWx1ZSkpIHtcbiAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgICAgfVxuICAgICAgaWYgKHZhbHVlICE9IG51bGwpIHtcbiAgICAgICAgcmV0dXJuIFt2YWx1ZV07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gW107XG4gICAgICB9XG4gICAgfSxcbiAgICBmb3JtYXRNb25leTogZnVuY3Rpb24odmFsdWUsIGZvcm1hdCkge1xuICAgICAgdmFyIF9yZWY7XG4gICAgICBpZiAoKChfcmVmID0gd2luZG93LlNob3BpZnkpICE9IG51bGwgPyBfcmVmLmZvcm1hdE1vbmV5IDogdm9pZCAwKSAhPSBudWxsKSB7XG4gICAgICAgIHJldHVybiBTaG9waWZ5LmZvcm1hdE1vbmV5KHZhbHVlLCBmb3JtYXQpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgICAgfVxuICAgIH0sXG4gICAgZ2V0U2l6ZWRJbWFnZVVybDogZnVuY3Rpb24oc3JjLCBzaXplKSB7XG4gICAgICB2YXIgX3JlZiwgX3JlZjE7XG4gICAgICBpZiAoKChfcmVmID0gd2luZG93LlNob3BpZnkpICE9IG51bGwgPyAoX3JlZjEgPSBfcmVmLkltYWdlKSAhPSBudWxsID8gX3JlZjEuZ2V0U2l6ZWRJbWFnZVVybCA6IHZvaWQgMCA6IHZvaWQgMCkgIT0gbnVsbCkge1xuICAgICAgICByZXR1cm4gU2hvcGlmeS5JbWFnZS5nZXRTaXplZEltYWdlVXJsKHNyYywgc2l6ZSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gc3JjO1xuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICBxdWV1ZSA9IFtdO1xuXG4gIHByb2Nlc3NpbmcgPSBmYWxzZTtcblxuICBDYXJ0SlMuUXVldWUgPSB7XG4gICAgYWRkOiBmdW5jdGlvbih1cmwsIGRhdGEsIG9wdGlvbnMpIHtcbiAgICAgIHZhciByZXF1ZXN0O1xuICAgICAgaWYgKG9wdGlvbnMgPT0gbnVsbCkge1xuICAgICAgICBvcHRpb25zID0ge307XG4gICAgICB9XG4gICAgICByZXF1ZXN0ID0ge1xuICAgICAgICB1cmw6IHVybCxcbiAgICAgICAgZGF0YTogZGF0YSxcbiAgICAgICAgdHlwZTogb3B0aW9ucy50eXBlIHx8ICdQT1NUJyxcbiAgICAgICAgZGF0YVR5cGU6IG9wdGlvbnMuZGF0YVR5cGUgfHwgJ2pzb24nLFxuICAgICAgICBzdWNjZXNzOiBDYXJ0SlMuVXRpbHMuZW5zdXJlQXJyYXkob3B0aW9ucy5zdWNjZXNzKSxcbiAgICAgICAgZXJyb3I6IENhcnRKUy5VdGlscy5lbnN1cmVBcnJheShvcHRpb25zLmVycm9yKSxcbiAgICAgICAgY29tcGxldGU6IENhcnRKUy5VdGlscy5lbnN1cmVBcnJheShvcHRpb25zLmNvbXBsZXRlKVxuICAgICAgfTtcbiAgICAgIGlmIChvcHRpb25zLnVwZGF0ZUNhcnQpIHtcbiAgICAgICAgcmVxdWVzdC5zdWNjZXNzLnB1c2goQ2FydEpTLmNhcnQudXBkYXRlKTtcbiAgICAgIH1cbiAgICAgIHF1ZXVlLnB1c2gocmVxdWVzdCk7XG4gICAgICBpZiAocHJvY2Vzc2luZykge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBqUXVlcnkoZG9jdW1lbnQpLnRyaWdnZXIoJ2NhcnQucmVxdWVzdFN0YXJ0ZWQnLCBbQ2FydEpTLmNhcnRdKTtcbiAgICAgIHJldHVybiBDYXJ0SlMuUXVldWUucHJvY2VzcygpO1xuICAgIH0sXG4gICAgcHJvY2VzczogZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgcGFyYW1zO1xuICAgICAgaWYgKCFxdWV1ZS5sZW5ndGgpIHtcbiAgICAgICAgcHJvY2Vzc2luZyA9IGZhbHNlO1xuICAgICAgICBqUXVlcnkoZG9jdW1lbnQpLnRyaWdnZXIoJ2NhcnQucmVxdWVzdENvbXBsZXRlJywgW0NhcnRKUy5jYXJ0XSk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIHByb2Nlc3NpbmcgPSB0cnVlO1xuICAgICAgcGFyYW1zID0gcXVldWUuc2hpZnQoKTtcbiAgICAgIHBhcmFtcy5jb21wbGV0ZSA9IENhcnRKUy5RdWV1ZS5wcm9jZXNzO1xuICAgICAgcmV0dXJuIGpRdWVyeS5hamF4KHBhcmFtcyk7XG4gICAgfVxuICB9O1xuXG4gIENhcnRKUy5Db3JlID0ge1xuICAgIGdldENhcnQ6IGZ1bmN0aW9uKG9wdGlvbnMpIHtcbiAgICAgIGlmIChvcHRpb25zID09IG51bGwpIHtcbiAgICAgICAgb3B0aW9ucyA9IHt9O1xuICAgICAgfVxuICAgICAgb3B0aW9ucy50eXBlID0gJ0dFVCc7XG4gICAgICBvcHRpb25zLnVwZGF0ZUNhcnQgPSB0cnVlO1xuICAgICAgcmV0dXJuIENhcnRKUy5RdWV1ZS5hZGQoJy9jYXJ0LmpzJywge30sIG9wdGlvbnMpO1xuICAgIH0sXG4gICAgYWRkSXRlbTogZnVuY3Rpb24oaWQsIHF1YW50aXR5LCBwcm9wZXJ0aWVzLCBvcHRpb25zKSB7XG4gICAgICB2YXIgZGF0YTtcbiAgICAgIGlmIChxdWFudGl0eSA9PSBudWxsKSB7XG4gICAgICAgIHF1YW50aXR5ID0gMTtcbiAgICAgIH1cbiAgICAgIGlmIChwcm9wZXJ0aWVzID09IG51bGwpIHtcbiAgICAgICAgcHJvcGVydGllcyA9IHt9O1xuICAgICAgfVxuICAgICAgaWYgKG9wdGlvbnMgPT0gbnVsbCkge1xuICAgICAgICBvcHRpb25zID0ge307XG4gICAgICB9XG4gICAgICBkYXRhID0gQ2FydEpTLlV0aWxzLndyYXBLZXlzKHByb3BlcnRpZXMpO1xuICAgICAgZGF0YS5pZCA9IGlkO1xuICAgICAgZGF0YS5xdWFudGl0eSA9IHF1YW50aXR5O1xuICAgICAgQ2FydEpTLlF1ZXVlLmFkZCgnL2NhcnQvYWRkLmpzJywgZGF0YSwgb3B0aW9ucyk7XG4gICAgICByZXR1cm4gQ2FydEpTLkNvcmUuZ2V0Q2FydCgpO1xuICAgIH0sXG4gICAgdXBkYXRlSXRlbTogZnVuY3Rpb24obGluZSwgcXVhbnRpdHksIHByb3BlcnRpZXMsIG9wdGlvbnMpIHtcbiAgICAgIHZhciBkYXRhO1xuICAgICAgaWYgKHByb3BlcnRpZXMgPT0gbnVsbCkge1xuICAgICAgICBwcm9wZXJ0aWVzID0ge307XG4gICAgICB9XG4gICAgICBpZiAob3B0aW9ucyA9PSBudWxsKSB7XG4gICAgICAgIG9wdGlvbnMgPSB7fTtcbiAgICAgIH1cbiAgICAgIGRhdGEgPSBDYXJ0SlMuVXRpbHMud3JhcEtleXMocHJvcGVydGllcyk7XG4gICAgICBkYXRhLmxpbmUgPSBsaW5lO1xuICAgICAgaWYgKHF1YW50aXR5ICE9IG51bGwpIHtcbiAgICAgICAgZGF0YS5xdWFudGl0eSA9IHF1YW50aXR5O1xuICAgICAgfVxuICAgICAgb3B0aW9ucy51cGRhdGVDYXJ0ID0gdHJ1ZTtcbiAgICAgIHJldHVybiBDYXJ0SlMuUXVldWUuYWRkKCcvY2FydC9jaGFuZ2UuanMnLCBkYXRhLCBvcHRpb25zKTtcbiAgICB9LFxuICAgIHJlbW92ZUl0ZW06IGZ1bmN0aW9uKGxpbmUsIG9wdGlvbnMpIHtcbiAgICAgIGlmIChvcHRpb25zID09IG51bGwpIHtcbiAgICAgICAgb3B0aW9ucyA9IHt9O1xuICAgICAgfVxuICAgICAgcmV0dXJuIENhcnRKUy5Db3JlLnVwZGF0ZUl0ZW0obGluZSwgMCwge30sIG9wdGlvbnMpO1xuICAgIH0sXG4gICAgdXBkYXRlSXRlbUJ5SWQ6IGZ1bmN0aW9uKGlkLCBxdWFudGl0eSwgcHJvcGVydGllcywgb3B0aW9ucykge1xuICAgICAgdmFyIGRhdGE7XG4gICAgICBpZiAocHJvcGVydGllcyA9PSBudWxsKSB7XG4gICAgICAgIHByb3BlcnRpZXMgPSB7fTtcbiAgICAgIH1cbiAgICAgIGlmIChvcHRpb25zID09IG51bGwpIHtcbiAgICAgICAgb3B0aW9ucyA9IHt9O1xuICAgICAgfVxuICAgICAgZGF0YSA9IENhcnRKUy5VdGlscy53cmFwS2V5cyhwcm9wZXJ0aWVzKTtcbiAgICAgIGRhdGEuaWQgPSBpZDtcbiAgICAgIGlmIChxdWFudGl0eSAhPSBudWxsKSB7XG4gICAgICAgIGRhdGEucXVhbnRpdHkgPSBxdWFudGl0eTtcbiAgICAgIH1cbiAgICAgIG9wdGlvbnMudXBkYXRlQ2FydCA9IHRydWU7XG4gICAgICByZXR1cm4gQ2FydEpTLlF1ZXVlLmFkZCgnL2NhcnQvY2hhbmdlLmpzJywgZGF0YSwgb3B0aW9ucyk7XG4gICAgfSxcbiAgICB1cGRhdGVJdGVtUXVhbnRpdGllc0J5SWQ6IGZ1bmN0aW9uKHVwZGF0ZXMsIG9wdGlvbnMpIHtcbiAgICAgIGlmICh1cGRhdGVzID09IG51bGwpIHtcbiAgICAgICAgdXBkYXRlcyA9IHt9O1xuICAgICAgfVxuICAgICAgaWYgKG9wdGlvbnMgPT0gbnVsbCkge1xuICAgICAgICBvcHRpb25zID0ge307XG4gICAgICB9XG4gICAgICBvcHRpb25zLnVwZGF0ZUNhcnQgPSB0cnVlO1xuICAgICAgcmV0dXJuIENhcnRKUy5RdWV1ZS5hZGQoJy9jYXJ0L3VwZGF0ZS5qcycsIHtcbiAgICAgICAgdXBkYXRlczogdXBkYXRlc1xuICAgICAgfSwgb3B0aW9ucyk7XG4gICAgfSxcbiAgICByZW1vdmVJdGVtQnlJZDogZnVuY3Rpb24oaWQsIG9wdGlvbnMpIHtcbiAgICAgIHZhciBkYXRhO1xuICAgICAgaWYgKG9wdGlvbnMgPT0gbnVsbCkge1xuICAgICAgICBvcHRpb25zID0ge307XG4gICAgICB9XG4gICAgICBkYXRhID0ge1xuICAgICAgICBpZDogaWQsXG4gICAgICAgIHF1YW50aXR5OiAwXG4gICAgICB9O1xuICAgICAgb3B0aW9ucy51cGRhdGVDYXJ0ID0gdHJ1ZTtcbiAgICAgIHJldHVybiBDYXJ0SlMuUXVldWUuYWRkKCcvY2FydC9jaGFuZ2UuanMnLCBkYXRhLCBvcHRpb25zKTtcbiAgICB9LFxuICAgIGNsZWFyOiBmdW5jdGlvbihvcHRpb25zKSB7XG4gICAgICBpZiAob3B0aW9ucyA9PSBudWxsKSB7XG4gICAgICAgIG9wdGlvbnMgPSB7fTtcbiAgICAgIH1cbiAgICAgIG9wdGlvbnMudXBkYXRlQ2FydCA9IHRydWU7XG4gICAgICByZXR1cm4gQ2FydEpTLlF1ZXVlLmFkZCgnL2NhcnQvY2xlYXIuanMnLCB7fSwgb3B0aW9ucyk7XG4gICAgfSxcbiAgICBnZXRBdHRyaWJ1dGU6IGZ1bmN0aW9uKGF0dHJpYnV0ZU5hbWUsIGRlZmF1bHRWYWx1ZSkge1xuICAgICAgaWYgKGF0dHJpYnV0ZU5hbWUgaW4gQ2FydEpTLmNhcnQuYXR0cmlidXRlcykge1xuICAgICAgICByZXR1cm4gQ2FydEpTLmNhcnQuYXR0cmlidXRlc1thdHRyaWJ1dGVOYW1lXTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBkZWZhdWx0VmFsdWU7XG4gICAgICB9XG4gICAgfSxcbiAgICBzZXRBdHRyaWJ1dGU6IGZ1bmN0aW9uKGF0dHJpYnV0ZU5hbWUsIHZhbHVlLCBvcHRpb25zKSB7XG4gICAgICB2YXIgYXR0cmlidXRlcztcbiAgICAgIGlmIChvcHRpb25zID09IG51bGwpIHtcbiAgICAgICAgb3B0aW9ucyA9IHt9O1xuICAgICAgfVxuICAgICAgYXR0cmlidXRlcyA9IHt9O1xuICAgICAgYXR0cmlidXRlc1thdHRyaWJ1dGVOYW1lXSA9IHZhbHVlO1xuICAgICAgcmV0dXJuIENhcnRKUy5Db3JlLnNldEF0dHJpYnV0ZXMoYXR0cmlidXRlcywgb3B0aW9ucyk7XG4gICAgfSxcbiAgICBnZXRBdHRyaWJ1dGVzOiBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBDYXJ0SlMuY2FydC5hdHRyaWJ1dGVzO1xuICAgIH0sXG4gICAgc2V0QXR0cmlidXRlczogZnVuY3Rpb24oYXR0cmlidXRlcywgb3B0aW9ucykge1xuICAgICAgaWYgKGF0dHJpYnV0ZXMgPT0gbnVsbCkge1xuICAgICAgICBhdHRyaWJ1dGVzID0ge307XG4gICAgICB9XG4gICAgICBpZiAob3B0aW9ucyA9PSBudWxsKSB7XG4gICAgICAgIG9wdGlvbnMgPSB7fTtcbiAgICAgIH1cbiAgICAgIG9wdGlvbnMudXBkYXRlQ2FydCA9IHRydWU7XG4gICAgICByZXR1cm4gQ2FydEpTLlF1ZXVlLmFkZCgnL2NhcnQvdXBkYXRlLmpzJywgQ2FydEpTLlV0aWxzLndyYXBLZXlzKGF0dHJpYnV0ZXMsICdhdHRyaWJ1dGVzJyksIG9wdGlvbnMpO1xuICAgIH0sXG4gICAgY2xlYXJBdHRyaWJ1dGVzOiBmdW5jdGlvbihvcHRpb25zKSB7XG4gICAgICBpZiAob3B0aW9ucyA9PSBudWxsKSB7XG4gICAgICAgIG9wdGlvbnMgPSB7fTtcbiAgICAgIH1cbiAgICAgIG9wdGlvbnMudXBkYXRlQ2FydCA9IHRydWU7XG4gICAgICByZXR1cm4gQ2FydEpTLlF1ZXVlLmFkZCgnL2NhcnQvdXBkYXRlLmpzJywgQ2FydEpTLlV0aWxzLndyYXBLZXlzKENhcnRKUy5Db3JlLmdldEF0dHJpYnV0ZXMoKSwgJ2F0dHJpYnV0ZXMnLCAnJyksIG9wdGlvbnMpO1xuICAgIH0sXG4gICAgZ2V0Tm90ZTogZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gQ2FydEpTLmNhcnQubm90ZTtcbiAgICB9LFxuICAgIHNldE5vdGU6IGZ1bmN0aW9uKG5vdGUsIG9wdGlvbnMpIHtcbiAgICAgIGlmIChvcHRpb25zID09IG51bGwpIHtcbiAgICAgICAgb3B0aW9ucyA9IHt9O1xuICAgICAgfVxuICAgICAgb3B0aW9ucy51cGRhdGVDYXJ0ID0gdHJ1ZTtcbiAgICAgIHJldHVybiBDYXJ0SlMuUXVldWUuYWRkKCcvY2FydC91cGRhdGUuanMnLCB7XG4gICAgICAgIG5vdGU6IG5vdGVcbiAgICAgIH0sIG9wdGlvbnMpO1xuICAgIH1cbiAgfTtcblxuICAkZG9jdW1lbnQgPSBqUXVlcnkoZG9jdW1lbnQpO1xuXG4gIENhcnRKUy5EYXRhID0ge1xuICAgIGluaXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgQ2FydEpTLkRhdGEuc2V0RXZlbnRMaXN0ZW5lcnMoJ29uJyk7XG4gICAgICByZXR1cm4gQ2FydEpTLkRhdGEucmVuZGVyKG51bGwsIENhcnRKUy5jYXJ0KTtcbiAgICB9LFxuICAgIGRlc3Ryb3k6IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIENhcnRKUy5EYXRhLnNldEV2ZW50TGlzdGVuZXJzKCdvZmYnKTtcbiAgICB9LFxuICAgIHNldEV2ZW50TGlzdGVuZXJzOiBmdW5jdGlvbihtZXRob2QpIHtcbiAgICAgICRkb2N1bWVudFttZXRob2RdKCdjbGljaycsICdbZGF0YS1jYXJ0LWFkZF0nLCBDYXJ0SlMuRGF0YS5hZGQpO1xuICAgICAgJGRvY3VtZW50W21ldGhvZF0oJ2NsaWNrJywgJ1tkYXRhLWNhcnQtcmVtb3ZlXScsIENhcnRKUy5EYXRhLnJlbW92ZSk7XG4gICAgICAkZG9jdW1lbnRbbWV0aG9kXSgnY2xpY2snLCAnW2RhdGEtY2FydC1yZW1vdmUtaWRdJywgQ2FydEpTLkRhdGEucmVtb3ZlQnlJZCk7XG4gICAgICAkZG9jdW1lbnRbbWV0aG9kXSgnY2xpY2snLCAnW2RhdGEtY2FydC11cGRhdGVdJywgQ2FydEpTLkRhdGEudXBkYXRlKTtcbiAgICAgICRkb2N1bWVudFttZXRob2RdKCdjbGljaycsICdbZGF0YS1jYXJ0LXVwZGF0ZS1pZF0nLCBDYXJ0SlMuRGF0YS51cGRhdGVCeUlkKTtcbiAgICAgICRkb2N1bWVudFttZXRob2RdKCdjbGljaycsICdbZGF0YS1jYXJ0LWNsZWFyXScsIENhcnRKUy5EYXRhLmNsZWFyKTtcbiAgICAgICRkb2N1bWVudFttZXRob2RdKCdjaGFuZ2UnLCAnW2RhdGEtY2FydC10b2dnbGVdJywgQ2FydEpTLkRhdGEudG9nZ2xlKTtcbiAgICAgICRkb2N1bWVudFttZXRob2RdKCdjaGFuZ2UnLCAnW2RhdGEtY2FydC10b2dnbGUtYXR0cmlidXRlXScsIENhcnRKUy5EYXRhLnRvZ2dsZUF0dHJpYnV0ZSk7XG4gICAgICAkZG9jdW1lbnRbbWV0aG9kXSgnc3VibWl0JywgJ1tkYXRhLWNhcnQtc3VibWl0XScsIENhcnRKUy5EYXRhLnN1Ym1pdCk7XG4gICAgICByZXR1cm4gJGRvY3VtZW50W21ldGhvZF0oJ2NhcnQucmVxdWVzdENvbXBsZXRlJywgQ2FydEpTLkRhdGEucmVuZGVyKTtcbiAgICB9LFxuICAgIGFkZDogZnVuY3Rpb24oZSkge1xuICAgICAgdmFyICR0aGlzO1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgJHRoaXMgPSBqUXVlcnkodGhpcyk7XG4gICAgICByZXR1cm4gQ2FydEpTLkNvcmUuYWRkSXRlbSgkdGhpcy5hdHRyKCdkYXRhLWNhcnQtYWRkJyksICR0aGlzLmF0dHIoJ2RhdGEtY2FydC1xdWFudGl0eScpKTtcbiAgICB9LFxuICAgIHJlbW92ZTogZnVuY3Rpb24oZSkge1xuICAgICAgdmFyICR0aGlzO1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgJHRoaXMgPSBqUXVlcnkodGhpcyk7XG4gICAgICByZXR1cm4gQ2FydEpTLkNvcmUucmVtb3ZlSXRlbSgkdGhpcy5hdHRyKCdkYXRhLWNhcnQtcmVtb3ZlJykpO1xuICAgIH0sXG4gICAgcmVtb3ZlQnlJZDogZnVuY3Rpb24oZSkge1xuICAgICAgdmFyICR0aGlzO1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgJHRoaXMgPSBqUXVlcnkodGhpcyk7XG4gICAgICByZXR1cm4gQ2FydEpTLkNvcmUucmVtb3ZlSXRlbUJ5SWQoJHRoaXMuYXR0cignZGF0YS1jYXJ0LXJlbW92ZS1pZCcpKTtcbiAgICB9LFxuICAgIHVwZGF0ZTogZnVuY3Rpb24oZSkge1xuICAgICAgdmFyICR0aGlzO1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgJHRoaXMgPSBqUXVlcnkodGhpcyk7XG4gICAgICByZXR1cm4gQ2FydEpTLkNvcmUudXBkYXRlSXRlbSgkdGhpcy5hdHRyKCdkYXRhLWNhcnQtdXBkYXRlJyksICR0aGlzLmF0dHIoJ2RhdGEtY2FydC1xdWFudGl0eScpKTtcbiAgICB9LFxuICAgIHVwZGF0ZUJ5SWQ6IGZ1bmN0aW9uKGUpIHtcbiAgICAgIHZhciAkdGhpcztcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICR0aGlzID0galF1ZXJ5KHRoaXMpO1xuICAgICAgcmV0dXJuIENhcnRKUy5Db3JlLnVwZGF0ZUl0ZW1CeUlkKCR0aGlzLmF0dHIoJ2RhdGEtY2FydC11cGRhdGUtaWQnKSwgJHRoaXMuYXR0cignZGF0YS1jYXJ0LXF1YW50aXR5JykpO1xuICAgIH0sXG4gICAgY2xlYXI6IGZ1bmN0aW9uKGUpIHtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgIHJldHVybiBDYXJ0SlMuQ29yZS5jbGVhcigpO1xuICAgIH0sXG4gICAgdG9nZ2xlOiBmdW5jdGlvbihlKSB7XG4gICAgICB2YXIgJGlucHV0LCBpZDtcbiAgICAgICRpbnB1dCA9IGpRdWVyeSh0aGlzKTtcbiAgICAgIGlkID0gJGlucHV0LmF0dHIoJ2RhdGEtY2FydC10b2dnbGUnKTtcbiAgICAgIGlmICgkaW5wdXQuaXMoJzpjaGVja2VkJykpIHtcbiAgICAgICAgcmV0dXJuIENhcnRKUy5Db3JlLmFkZEl0ZW0oaWQpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIENhcnRKUy5Db3JlLnJlbW92ZUl0ZW1CeUlkKGlkKTtcbiAgICAgIH1cbiAgICB9LFxuICAgIHRvZ2dsZUF0dHJpYnV0ZTogZnVuY3Rpb24oZSkge1xuICAgICAgdmFyICRpbnB1dCwgYXR0cmlidXRlO1xuICAgICAgJGlucHV0ID0galF1ZXJ5KHRoaXMpO1xuICAgICAgYXR0cmlidXRlID0gJGlucHV0LmF0dHIoJ2RhdGEtY2FydC10b2dnbGUtYXR0cmlidXRlJyk7XG4gICAgICByZXR1cm4gQ2FydEpTLkNvcmUuc2V0QXR0cmlidXRlKGF0dHJpYnV0ZSwgJGlucHV0LmlzKCc6Y2hlY2tlZCcpID8gJ1llcycgOiAnJyk7XG4gICAgfSxcbiAgICBzdWJtaXQ6IGZ1bmN0aW9uKGUpIHtcbiAgICAgIHZhciBkYXRhQXJyYXksIGlkLCBwcm9wZXJ0aWVzLCBxdWFudGl0eTtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgIGRhdGFBcnJheSA9IGpRdWVyeSh0aGlzKS5zZXJpYWxpemVBcnJheSgpO1xuICAgICAgaWQgPSB2b2lkIDA7XG4gICAgICBxdWFudGl0eSA9IHZvaWQgMDtcbiAgICAgIHByb3BlcnRpZXMgPSB7fTtcbiAgICAgIGpRdWVyeS5lYWNoKGRhdGFBcnJheSwgZnVuY3Rpb24oaSwgaXRlbSkge1xuICAgICAgICBpZiAoaXRlbS5uYW1lID09PSAnaWQnKSB7XG4gICAgICAgICAgcmV0dXJuIGlkID0gaXRlbS52YWx1ZTtcbiAgICAgICAgfSBlbHNlIGlmIChpdGVtLm5hbWUgPT09ICdxdWFudGl0eScpIHtcbiAgICAgICAgICByZXR1cm4gcXVhbnRpdHkgPSBpdGVtLnZhbHVlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJldHVybiBwcm9wZXJ0aWVzW2l0ZW0ubmFtZV0gPSBpdGVtLnZhbHVlO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIHJldHVybiBDYXJ0SlMuQ29yZS5hZGRJdGVtKGlkLCBxdWFudGl0eSwgQ2FydEpTLlV0aWxzLnVud3JhcEtleXMocHJvcGVydGllcykpO1xuICAgIH0sXG4gICAgcmVuZGVyOiBmdW5jdGlvbihlLCBjYXJ0KSB7XG4gICAgICB2YXIgY29udGV4dDtcbiAgICAgIGNvbnRleHQgPSB7XG4gICAgICAgICdpdGVtX2NvdW50JzogY2FydC5pdGVtX2NvdW50LFxuICAgICAgICAndG90YWxfcHJpY2UnOiBjYXJ0LnRvdGFsX3ByaWNlLFxuICAgICAgICAndG90YWxfcHJpY2VfbW9uZXknOiBDYXJ0SlMuVXRpbHMuZm9ybWF0TW9uZXkoY2FydC50b3RhbF9wcmljZSwgQ2FydEpTLnNldHRpbmdzLm1vbmV5Rm9ybWF0KSxcbiAgICAgICAgJ3RvdGFsX3ByaWNlX21vbmV5X3dpdGhfY3VycmVuY3knOiBDYXJ0SlMuVXRpbHMuZm9ybWF0TW9uZXkoY2FydC50b3RhbF9wcmljZSwgQ2FydEpTLnNldHRpbmdzLm1vbmV5V2l0aEN1cnJlbmN5Rm9ybWF0KVxuICAgICAgfTtcbiAgICAgIHJldHVybiBqUXVlcnkoJ1tkYXRhLWNhcnQtcmVuZGVyXScpLmVhY2goZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciAkdGhpcztcbiAgICAgICAgJHRoaXMgPSBqUXVlcnkodGhpcyk7XG4gICAgICAgIHJldHVybiAkdGhpcy50ZXh0KGNvbnRleHRbJHRoaXMuYXR0cignZGF0YS1jYXJ0LXJlbmRlcicpXSk7XG4gICAgICB9KTtcbiAgICB9XG4gIH07XG5cbiAgaWYgKCdyaXZldHMnIGluIHdpbmRvdykge1xuICAgIENhcnRKUy5SaXZldHMgPSB7XG4gICAgICB2aWV3czogW10sXG4gICAgICBpbml0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIENhcnRKUy5SaXZldHMuYmluZFZpZXdzKCk7XG4gICAgICB9LFxuICAgICAgZGVzdHJveTogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBDYXJ0SlMuUml2ZXRzLnVuYmluZFZpZXdzKCk7XG4gICAgICB9LFxuICAgICAgYmluZFZpZXdzOiBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIG1vZGVscztcbiAgICAgICAgQ2FydEpTLlJpdmV0cy51bmJpbmRWaWV3cygpO1xuICAgICAgICBtb2RlbHMgPSBDYXJ0SlMuVXRpbHMuZXh0ZW5kKHtcbiAgICAgICAgICBjYXJ0OiBDYXJ0SlMuY2FydFxuICAgICAgICB9LCBDYXJ0SlMuc2V0dGluZ3Mucml2ZXRzTW9kZWxzKTtcbiAgICAgICAgcmV0dXJuIGpRdWVyeSgnW2RhdGEtY2FydC12aWV3XScpLmVhY2goZnVuY3Rpb24oKSB7XG4gICAgICAgICAgcmV0dXJuIENhcnRKUy5SaXZldHMudmlld3MucHVzaChyaXZldHMuYmluZCh0aGlzLCBtb2RlbHMpKTtcbiAgICAgICAgfSk7XG4gICAgICB9LFxuICAgICAgdW5iaW5kVmlld3M6IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgdmlldywgX2ksIF9sZW4sIF9yZWY7XG4gICAgICAgIF9yZWYgPSBDYXJ0SlMuUml2ZXRzLnZpZXdzO1xuICAgICAgICBmb3IgKF9pID0gMCwgX2xlbiA9IF9yZWYubGVuZ3RoOyBfaSA8IF9sZW47IF9pKyspIHtcbiAgICAgICAgICB2aWV3ID0gX3JlZltfaV07XG4gICAgICAgICAgdmlldy51bmJpbmQoKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gQ2FydEpTLlJpdmV0cy52aWV3cyA9IFtdO1xuICAgICAgfVxuICAgIH07XG4gICAgcml2ZXRzLmZvcm1hdHRlcnMuZXEgPSBmdW5jdGlvbihhLCBiKSB7XG4gICAgICByZXR1cm4gYSA9PT0gYjtcbiAgICB9O1xuICAgIHJpdmV0cy5mb3JtYXR0ZXJzLmx0ID0gZnVuY3Rpb24oYSwgYikge1xuICAgICAgcmV0dXJuIGEgPCBiO1xuICAgIH07XG4gICAgcml2ZXRzLmZvcm1hdHRlcnMuZ3QgPSBmdW5jdGlvbihhLCBiKSB7XG4gICAgICByZXR1cm4gYSA+IGI7XG4gICAgfTtcbiAgICByaXZldHMuZm9ybWF0dGVycy5ub3QgPSBmdW5jdGlvbihhKSB7XG4gICAgICByZXR1cm4gIWE7XG4gICAgfTtcbiAgICByaXZldHMuZm9ybWF0dGVycy5lbXB0eSA9IGZ1bmN0aW9uKGEpIHtcbiAgICAgIHJldHVybiAhYS5sZW5ndGg7XG4gICAgfTtcbiAgICByaXZldHMuZm9ybWF0dGVycy5wbHVzID0gZnVuY3Rpb24oYSwgYikge1xuICAgICAgcmV0dXJuIHBhcnNlSW50KGEpICsgcGFyc2VJbnQoYik7XG4gICAgfTtcbiAgICByaXZldHMuZm9ybWF0dGVycy5taW51cyA9IGZ1bmN0aW9uKGEsIGIpIHtcbiAgICAgIHJldHVybiBwYXJzZUludChhKSAtIHBhcnNlSW50KGIpO1xuICAgIH07XG4gICAgcml2ZXRzLmZvcm1hdHRlcnMucHJlcGVuZCA9IGZ1bmN0aW9uKGEsIGIpIHtcbiAgICAgIHJldHVybiBiICsgYTtcbiAgICB9O1xuICAgIHJpdmV0cy5mb3JtYXR0ZXJzLmFwcGVuZCA9IGZ1bmN0aW9uKGEsIGIpIHtcbiAgICAgIHJldHVybiBhICsgYjtcbiAgICB9O1xuICAgIHJpdmV0cy5mb3JtYXR0ZXJzLm1vbmV5ID0gZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgIHJldHVybiBDYXJ0SlMuVXRpbHMuZm9ybWF0TW9uZXkodmFsdWUsIENhcnRKUy5zZXR0aW5ncy5tb25leUZvcm1hdCk7XG4gICAgfTtcbiAgICByaXZldHMuZm9ybWF0dGVycy5tb25leV93aXRoX2N1cnJlbmN5ID0gZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgIHJldHVybiBDYXJ0SlMuVXRpbHMuZm9ybWF0TW9uZXkodmFsdWUsIENhcnRKUy5zZXR0aW5ncy5tb25leVdpdGhDdXJyZW5jeUZvcm1hdCk7XG4gICAgfTtcbiAgICByaXZldHMuZm9ybWF0dGVycy5wcm9kdWN0SW1hZ2VTaXplID0gZnVuY3Rpb24oc3JjLCBzaXplKSB7XG4gICAgICByZXR1cm4gQ2FydEpTLlV0aWxzLmdldFNpemVkSW1hZ2VVcmwoc3JjLCBzaXplKTtcbiAgICB9O1xuICB9IGVsc2Uge1xuICAgIENhcnRKUy5SaXZldHMgPSB7XG4gICAgICBpbml0OiBmdW5jdGlvbigpIHt9LFxuICAgICAgZGVzdHJveTogZnVuY3Rpb24oKSB7fVxuICAgIH07XG4gIH1cblxuICBDYXJ0SlMuZmFjdG9yeSA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcbiAgICBleHBvcnRzLmluaXQgPSBDYXJ0SlMuaW5pdDtcbiAgICBleHBvcnRzLmNvbmZpZ3VyZSA9IENhcnRKUy5jb25maWd1cmU7XG4gICAgZXhwb3J0cy5jYXJ0ID0gQ2FydEpTLmNhcnQ7XG4gICAgZXhwb3J0cy5zZXR0aW5ncyA9IENhcnRKUy5zZXR0aW5ncztcbiAgICBleHBvcnRzLmFkZEl0ZW0gPSBDYXJ0SlMuQ29yZS5hZGRJdGVtO1xuICAgIGV4cG9ydHMudXBkYXRlSXRlbSA9IENhcnRKUy5Db3JlLnVwZGF0ZUl0ZW07XG4gICAgZXhwb3J0cy51cGRhdGVJdGVtQnlJZCA9IENhcnRKUy5Db3JlLnVwZGF0ZUl0ZW1CeUlkO1xuICAgIGV4cG9ydHMudXBkYXRlSXRlbVF1YW50aXRpZXNCeUlkID0gQ2FydEpTLkNvcmUudXBkYXRlSXRlbVF1YW50aXRpZXNCeUlkO1xuICAgIGV4cG9ydHMucmVtb3ZlSXRlbSA9IENhcnRKUy5Db3JlLnJlbW92ZUl0ZW07XG4gICAgZXhwb3J0cy5jbGVhciA9IENhcnRKUy5Db3JlLmNsZWFyO1xuICAgIGV4cG9ydHMuZ2V0QXR0cmlidXRlID0gQ2FydEpTLkNvcmUuZ2V0QXR0cmlidXRlO1xuICAgIGV4cG9ydHMuc2V0QXR0cmlidXRlID0gQ2FydEpTLkNvcmUuc2V0QXR0cmlidXRlO1xuICAgIGV4cG9ydHMuZ2V0QXR0cmlidXRlcyA9IENhcnRKUy5Db3JlLmdldEF0dHJpYnV0ZXM7XG4gICAgZXhwb3J0cy5zZXRBdHRyaWJ1dGVzID0gQ2FydEpTLkNvcmUuc2V0QXR0cmlidXRlcztcbiAgICBleHBvcnRzLmNsZWFyQXR0cmlidXRlcyA9IENhcnRKUy5Db3JlLmNsZWFyQXR0cmlidXRlcztcbiAgICBleHBvcnRzLmdldE5vdGUgPSBDYXJ0SlMuQ29yZS5nZXROb3RlO1xuICAgIHJldHVybiBleHBvcnRzLnNldE5vdGUgPSBDYXJ0SlMuQ29yZS5zZXROb3RlO1xuICB9O1xuXG4gIGlmICh0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcpIHtcbiAgICBDYXJ0SlMuZmFjdG9yeShleHBvcnRzKTtcbiAgfSBlbHNlIGlmICh0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpIHtcbiAgICBkZWZpbmUoWydleHBvcnRzJ10sIGZ1bmN0aW9uKGV4cG9ydHMpIHtcbiAgICAgIENhcnRKUy5mYWN0b3J5KHRoaXMuQ2FydEpTID0gZXhwb3J0cyk7XG4gICAgICByZXR1cm4gZXhwb3J0cztcbiAgICB9KTtcbiAgfSBlbHNlIHtcbiAgICBDYXJ0SlMuZmFjdG9yeSh0aGlzLkNhcnRKUyA9IHt9KTtcbiAgfVxuXG59KS5jYWxsKHRoaXMpO1xuIiwiLyohXG4gKiBpbWFnZXNMb2FkZWQgdjMuMS44XG4gKiBKYXZhU2NyaXB0IGlzIGFsbCBsaWtlIFwiWW91IGltYWdlcyBhcmUgZG9uZSB5ZXQgb3Igd2hhdD9cIlxuICogTUlUIExpY2Vuc2VcbiAqL1xuXG4oIGZ1bmN0aW9uKCB3aW5kb3csIGZhY3RvcnkgKSB7ICd1c2Ugc3RyaWN0JztcbiAgLy8gdW5pdmVyc2FsIG1vZHVsZSBkZWZpbml0aW9uXG5cbiAgLypnbG9iYWwgZGVmaW5lOiBmYWxzZSwgbW9kdWxlOiBmYWxzZSwgcmVxdWlyZTogZmFsc2UgKi9cblxuICBpZiAoIHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZCApIHtcbiAgICAvLyBBTURcbiAgICBkZWZpbmUoIFtcbiAgICAgICdldmVudEVtaXR0ZXIvRXZlbnRFbWl0dGVyJyxcbiAgICAgICdldmVudGllL2V2ZW50aWUnXG4gICAgXSwgZnVuY3Rpb24oIEV2ZW50RW1pdHRlciwgZXZlbnRpZSApIHtcbiAgICAgIHJldHVybiBmYWN0b3J5KCB3aW5kb3csIEV2ZW50RW1pdHRlciwgZXZlbnRpZSApO1xuICAgIH0pO1xuICB9IGVsc2UgaWYgKCB0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcgKSB7XG4gICAgLy8gQ29tbW9uSlNcbiAgICBtb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkoXG4gICAgICB3aW5kb3csXG4gICAgICByZXF1aXJlKCd3b2xmeTg3LWV2ZW50ZW1pdHRlcicpLFxuICAgICAgcmVxdWlyZSgnZXZlbnRpZScpXG4gICAgKTtcbiAgfSBlbHNlIHtcbiAgICAvLyBicm93c2VyIGdsb2JhbFxuICAgIHdpbmRvdy5pbWFnZXNMb2FkZWQgPSBmYWN0b3J5KFxuICAgICAgd2luZG93LFxuICAgICAgd2luZG93LkV2ZW50RW1pdHRlcixcbiAgICAgIHdpbmRvdy5ldmVudGllXG4gICAgKTtcbiAgfVxuXG59KSggd2luZG93LFxuXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAgZmFjdG9yeSAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAvL1xuXG5mdW5jdGlvbiBmYWN0b3J5KCB3aW5kb3csIEV2ZW50RW1pdHRlciwgZXZlbnRpZSApIHtcblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgJCA9IHdpbmRvdy5qUXVlcnk7XG52YXIgY29uc29sZSA9IHdpbmRvdy5jb25zb2xlO1xudmFyIGhhc0NvbnNvbGUgPSB0eXBlb2YgY29uc29sZSAhPT0gJ3VuZGVmaW5lZCc7XG5cbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIGhlbHBlcnMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gLy9cblxuLy8gZXh0ZW5kIG9iamVjdHNcbmZ1bmN0aW9uIGV4dGVuZCggYSwgYiApIHtcbiAgZm9yICggdmFyIHByb3AgaW4gYiApIHtcbiAgICBhWyBwcm9wIF0gPSBiWyBwcm9wIF07XG4gIH1cbiAgcmV0dXJuIGE7XG59XG5cbnZhciBvYmpUb1N0cmluZyA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmc7XG5mdW5jdGlvbiBpc0FycmF5KCBvYmogKSB7XG4gIHJldHVybiBvYmpUb1N0cmluZy5jYWxsKCBvYmogKSA9PT0gJ1tvYmplY3QgQXJyYXldJztcbn1cblxuLy8gdHVybiBlbGVtZW50IG9yIG5vZGVMaXN0IGludG8gYW4gYXJyYXlcbmZ1bmN0aW9uIG1ha2VBcnJheSggb2JqICkge1xuICB2YXIgYXJ5ID0gW107XG4gIGlmICggaXNBcnJheSggb2JqICkgKSB7XG4gICAgLy8gdXNlIG9iamVjdCBpZiBhbHJlYWR5IGFuIGFycmF5XG4gICAgYXJ5ID0gb2JqO1xuICB9IGVsc2UgaWYgKCB0eXBlb2Ygb2JqLmxlbmd0aCA9PT0gJ251bWJlcicgKSB7XG4gICAgLy8gY29udmVydCBub2RlTGlzdCB0byBhcnJheVxuICAgIGZvciAoIHZhciBpPTAsIGxlbiA9IG9iai5sZW5ndGg7IGkgPCBsZW47IGkrKyApIHtcbiAgICAgIGFyeS5wdXNoKCBvYmpbaV0gKTtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgLy8gYXJyYXkgb2Ygc2luZ2xlIGluZGV4XG4gICAgYXJ5LnB1c2goIG9iaiApO1xuICB9XG4gIHJldHVybiBhcnk7XG59XG5cbiAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gaW1hZ2VzTG9hZGVkIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIC8vXG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7QXJyYXksIEVsZW1lbnQsIE5vZGVMaXN0LCBTdHJpbmd9IGVsZW1cbiAgICogQHBhcmFtIHtPYmplY3Qgb3IgRnVuY3Rpb259IG9wdGlvbnMgLSBpZiBmdW5jdGlvbiwgdXNlIGFzIGNhbGxiYWNrXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IG9uQWx3YXlzIC0gY2FsbGJhY2sgZnVuY3Rpb25cbiAgICovXG4gIGZ1bmN0aW9uIEltYWdlc0xvYWRlZCggZWxlbSwgb3B0aW9ucywgb25BbHdheXMgKSB7XG4gICAgLy8gY29lcmNlIEltYWdlc0xvYWRlZCgpIHdpdGhvdXQgbmV3LCB0byBiZSBuZXcgSW1hZ2VzTG9hZGVkKClcbiAgICBpZiAoICEoIHRoaXMgaW5zdGFuY2VvZiBJbWFnZXNMb2FkZWQgKSApIHtcbiAgICAgIHJldHVybiBuZXcgSW1hZ2VzTG9hZGVkKCBlbGVtLCBvcHRpb25zICk7XG4gICAgfVxuICAgIC8vIHVzZSBlbGVtIGFzIHNlbGVjdG9yIHN0cmluZ1xuICAgIGlmICggdHlwZW9mIGVsZW0gPT09ICdzdHJpbmcnICkge1xuICAgICAgZWxlbSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoIGVsZW0gKTtcbiAgICB9XG5cbiAgICB0aGlzLmVsZW1lbnRzID0gbWFrZUFycmF5KCBlbGVtICk7XG4gICAgdGhpcy5vcHRpb25zID0gZXh0ZW5kKCB7fSwgdGhpcy5vcHRpb25zICk7XG5cbiAgICBpZiAoIHR5cGVvZiBvcHRpb25zID09PSAnZnVuY3Rpb24nICkge1xuICAgICAgb25BbHdheXMgPSBvcHRpb25zO1xuICAgIH0gZWxzZSB7XG4gICAgICBleHRlbmQoIHRoaXMub3B0aW9ucywgb3B0aW9ucyApO1xuICAgIH1cblxuICAgIGlmICggb25BbHdheXMgKSB7XG4gICAgICB0aGlzLm9uKCAnYWx3YXlzJywgb25BbHdheXMgKTtcbiAgICB9XG5cbiAgICB0aGlzLmdldEltYWdlcygpO1xuXG4gICAgaWYgKCAkICkge1xuICAgICAgLy8gYWRkIGpRdWVyeSBEZWZlcnJlZCBvYmplY3RcbiAgICAgIHRoaXMuanFEZWZlcnJlZCA9IG5ldyAkLkRlZmVycmVkKCk7XG4gICAgfVxuXG4gICAgLy8gSEFDSyBjaGVjayBhc3luYyB0byBhbGxvdyB0aW1lIHRvIGJpbmQgbGlzdGVuZXJzXG4gICAgdmFyIF90aGlzID0gdGhpcztcbiAgICBzZXRUaW1lb3V0KCBmdW5jdGlvbigpIHtcbiAgICAgIF90aGlzLmNoZWNrKCk7XG4gICAgfSk7XG4gIH1cblxuICBJbWFnZXNMb2FkZWQucHJvdG90eXBlID0gbmV3IEV2ZW50RW1pdHRlcigpO1xuXG4gIEltYWdlc0xvYWRlZC5wcm90b3R5cGUub3B0aW9ucyA9IHt9O1xuXG4gIEltYWdlc0xvYWRlZC5wcm90b3R5cGUuZ2V0SW1hZ2VzID0gZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5pbWFnZXMgPSBbXTtcblxuICAgIC8vIGZpbHRlciAmIGZpbmQgaXRlbXMgaWYgd2UgaGF2ZSBhbiBpdGVtIHNlbGVjdG9yXG4gICAgZm9yICggdmFyIGk9MCwgbGVuID0gdGhpcy5lbGVtZW50cy5sZW5ndGg7IGkgPCBsZW47IGkrKyApIHtcbiAgICAgIHZhciBlbGVtID0gdGhpcy5lbGVtZW50c1tpXTtcbiAgICAgIC8vIGZpbHRlciBzaWJsaW5nc1xuICAgICAgaWYgKCBlbGVtLm5vZGVOYW1lID09PSAnSU1HJyApIHtcbiAgICAgICAgdGhpcy5hZGRJbWFnZSggZWxlbSApO1xuICAgICAgfVxuICAgICAgLy8gZmluZCBjaGlsZHJlblxuICAgICAgLy8gbm8gbm9uLWVsZW1lbnQgbm9kZXMsICMxNDNcbiAgICAgIHZhciBub2RlVHlwZSA9IGVsZW0ubm9kZVR5cGU7XG4gICAgICBpZiAoICFub2RlVHlwZSB8fCAhKCBub2RlVHlwZSA9PT0gMSB8fCBub2RlVHlwZSA9PT0gOSB8fCBub2RlVHlwZSA9PT0gMTEgKSApIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICB2YXIgY2hpbGRFbGVtcyA9IGVsZW0ucXVlcnlTZWxlY3RvckFsbCgnaW1nJyk7XG4gICAgICAvLyBjb25jYXQgY2hpbGRFbGVtcyB0byBmaWx0ZXJGb3VuZCBhcnJheVxuICAgICAgZm9yICggdmFyIGo9MCwgakxlbiA9IGNoaWxkRWxlbXMubGVuZ3RoOyBqIDwgakxlbjsgaisrICkge1xuICAgICAgICB2YXIgaW1nID0gY2hpbGRFbGVtc1tqXTtcbiAgICAgICAgdGhpcy5hZGRJbWFnZSggaW1nICk7XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBAcGFyYW0ge0ltYWdlfSBpbWdcbiAgICovXG4gIEltYWdlc0xvYWRlZC5wcm90b3R5cGUuYWRkSW1hZ2UgPSBmdW5jdGlvbiggaW1nICkge1xuICAgIHZhciBsb2FkaW5nSW1hZ2UgPSBuZXcgTG9hZGluZ0ltYWdlKCBpbWcgKTtcbiAgICB0aGlzLmltYWdlcy5wdXNoKCBsb2FkaW5nSW1hZ2UgKTtcbiAgfTtcblxuICBJbWFnZXNMb2FkZWQucHJvdG90eXBlLmNoZWNrID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIF90aGlzID0gdGhpcztcbiAgICB2YXIgY2hlY2tlZENvdW50ID0gMDtcbiAgICB2YXIgbGVuZ3RoID0gdGhpcy5pbWFnZXMubGVuZ3RoO1xuICAgIHRoaXMuaGFzQW55QnJva2VuID0gZmFsc2U7XG4gICAgLy8gY29tcGxldGUgaWYgbm8gaW1hZ2VzXG4gICAgaWYgKCAhbGVuZ3RoICkge1xuICAgICAgdGhpcy5jb21wbGV0ZSgpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIG9uQ29uZmlybSggaW1hZ2UsIG1lc3NhZ2UgKSB7XG4gICAgICBpZiAoIF90aGlzLm9wdGlvbnMuZGVidWcgJiYgaGFzQ29uc29sZSApIHtcbiAgICAgICAgY29uc29sZS5sb2coICdjb25maXJtJywgaW1hZ2UsIG1lc3NhZ2UgKTtcbiAgICAgIH1cblxuICAgICAgX3RoaXMucHJvZ3Jlc3MoIGltYWdlICk7XG4gICAgICBjaGVja2VkQ291bnQrKztcbiAgICAgIGlmICggY2hlY2tlZENvdW50ID09PSBsZW5ndGggKSB7XG4gICAgICAgIF90aGlzLmNvbXBsZXRlKCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gdHJ1ZTsgLy8gYmluZCBvbmNlXG4gICAgfVxuXG4gICAgZm9yICggdmFyIGk9MDsgaSA8IGxlbmd0aDsgaSsrICkge1xuICAgICAgdmFyIGxvYWRpbmdJbWFnZSA9IHRoaXMuaW1hZ2VzW2ldO1xuICAgICAgbG9hZGluZ0ltYWdlLm9uKCAnY29uZmlybScsIG9uQ29uZmlybSApO1xuICAgICAgbG9hZGluZ0ltYWdlLmNoZWNrKCk7XG4gICAgfVxuICB9O1xuXG4gIEltYWdlc0xvYWRlZC5wcm90b3R5cGUucHJvZ3Jlc3MgPSBmdW5jdGlvbiggaW1hZ2UgKSB7XG4gICAgdGhpcy5oYXNBbnlCcm9rZW4gPSB0aGlzLmhhc0FueUJyb2tlbiB8fCAhaW1hZ2UuaXNMb2FkZWQ7XG4gICAgLy8gSEFDSyAtIENocm9tZSB0cmlnZ2VycyBldmVudCBiZWZvcmUgb2JqZWN0IHByb3BlcnRpZXMgaGF2ZSBjaGFuZ2VkLiAjODNcbiAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgIHNldFRpbWVvdXQoIGZ1bmN0aW9uKCkge1xuICAgICAgX3RoaXMuZW1pdCggJ3Byb2dyZXNzJywgX3RoaXMsIGltYWdlICk7XG4gICAgICBpZiAoIF90aGlzLmpxRGVmZXJyZWQgJiYgX3RoaXMuanFEZWZlcnJlZC5ub3RpZnkgKSB7XG4gICAgICAgIF90aGlzLmpxRGVmZXJyZWQubm90aWZ5KCBfdGhpcywgaW1hZ2UgKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfTtcblxuICBJbWFnZXNMb2FkZWQucHJvdG90eXBlLmNvbXBsZXRlID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIGV2ZW50TmFtZSA9IHRoaXMuaGFzQW55QnJva2VuID8gJ2ZhaWwnIDogJ2RvbmUnO1xuICAgIHRoaXMuaXNDb21wbGV0ZSA9IHRydWU7XG4gICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAvLyBIQUNLIC0gYW5vdGhlciBzZXRUaW1lb3V0IHNvIHRoYXQgY29uZmlybSBoYXBwZW5zIGFmdGVyIHByb2dyZXNzXG4gICAgc2V0VGltZW91dCggZnVuY3Rpb24oKSB7XG4gICAgICBfdGhpcy5lbWl0KCBldmVudE5hbWUsIF90aGlzICk7XG4gICAgICBfdGhpcy5lbWl0KCAnYWx3YXlzJywgX3RoaXMgKTtcbiAgICAgIGlmICggX3RoaXMuanFEZWZlcnJlZCApIHtcbiAgICAgICAgdmFyIGpxTWV0aG9kID0gX3RoaXMuaGFzQW55QnJva2VuID8gJ3JlamVjdCcgOiAncmVzb2x2ZSc7XG4gICAgICAgIF90aGlzLmpxRGVmZXJyZWRbIGpxTWV0aG9kIF0oIF90aGlzICk7XG4gICAgICB9XG4gICAgfSk7XG4gIH07XG5cbiAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0ganF1ZXJ5IC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIC8vXG5cbiAgaWYgKCAkICkge1xuICAgICQuZm4uaW1hZ2VzTG9hZGVkID0gZnVuY3Rpb24oIG9wdGlvbnMsIGNhbGxiYWNrICkge1xuICAgICAgdmFyIGluc3RhbmNlID0gbmV3IEltYWdlc0xvYWRlZCggdGhpcywgb3B0aW9ucywgY2FsbGJhY2sgKTtcbiAgICAgIHJldHVybiBpbnN0YW5jZS5qcURlZmVycmVkLnByb21pc2UoICQodGhpcykgKTtcbiAgICB9O1xuICB9XG5cblxuICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gLy9cblxuICBmdW5jdGlvbiBMb2FkaW5nSW1hZ2UoIGltZyApIHtcbiAgICB0aGlzLmltZyA9IGltZztcbiAgfVxuXG4gIExvYWRpbmdJbWFnZS5wcm90b3R5cGUgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XG5cbiAgTG9hZGluZ0ltYWdlLnByb3RvdHlwZS5jaGVjayA9IGZ1bmN0aW9uKCkge1xuICAgIC8vIGZpcnN0IGNoZWNrIGNhY2hlZCBhbnkgcHJldmlvdXMgaW1hZ2VzIHRoYXQgaGF2ZSBzYW1lIHNyY1xuICAgIHZhciByZXNvdXJjZSA9IGNhY2hlWyB0aGlzLmltZy5zcmMgXSB8fCBuZXcgUmVzb3VyY2UoIHRoaXMuaW1nLnNyYyApO1xuICAgIGlmICggcmVzb3VyY2UuaXNDb25maXJtZWQgKSB7XG4gICAgICB0aGlzLmNvbmZpcm0oIHJlc291cmNlLmlzTG9hZGVkLCAnY2FjaGVkIHdhcyBjb25maXJtZWQnICk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gSWYgY29tcGxldGUgaXMgdHJ1ZSBhbmQgYnJvd3NlciBzdXBwb3J0cyBuYXR1cmFsIHNpemVzLFxuICAgIC8vIHRyeSB0byBjaGVjayBmb3IgaW1hZ2Ugc3RhdHVzIG1hbnVhbGx5LlxuICAgIGlmICggdGhpcy5pbWcuY29tcGxldGUgJiYgdGhpcy5pbWcubmF0dXJhbFdpZHRoICE9PSB1bmRlZmluZWQgKSB7XG4gICAgICAvLyByZXBvcnQgYmFzZWQgb24gbmF0dXJhbFdpZHRoXG4gICAgICB0aGlzLmNvbmZpcm0oIHRoaXMuaW1nLm5hdHVyYWxXaWR0aCAhPT0gMCwgJ25hdHVyYWxXaWR0aCcgKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBJZiBub25lIG9mIHRoZSBjaGVja3MgYWJvdmUgbWF0Y2hlZCwgc2ltdWxhdGUgbG9hZGluZyBvbiBkZXRhY2hlZCBlbGVtZW50LlxuICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgcmVzb3VyY2Uub24oICdjb25maXJtJywgZnVuY3Rpb24oIHJlc3JjLCBtZXNzYWdlICkge1xuICAgICAgX3RoaXMuY29uZmlybSggcmVzcmMuaXNMb2FkZWQsIG1lc3NhZ2UgKTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH0pO1xuXG4gICAgcmVzb3VyY2UuY2hlY2soKTtcbiAgfTtcblxuICBMb2FkaW5nSW1hZ2UucHJvdG90eXBlLmNvbmZpcm0gPSBmdW5jdGlvbiggaXNMb2FkZWQsIG1lc3NhZ2UgKSB7XG4gICAgdGhpcy5pc0xvYWRlZCA9IGlzTG9hZGVkO1xuICAgIHRoaXMuZW1pdCggJ2NvbmZpcm0nLCB0aGlzLCBtZXNzYWdlICk7XG4gIH07XG5cbiAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gUmVzb3VyY2UgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gLy9cblxuICAvLyBSZXNvdXJjZSBjaGVja3MgZWFjaCBzcmMsIG9ubHkgb25jZVxuICAvLyBzZXBhcmF0ZSBjbGFzcyBmcm9tIExvYWRpbmdJbWFnZSB0byBwcmV2ZW50IG1lbW9yeSBsZWFrcy4gU2VlICMxMTVcblxuICB2YXIgY2FjaGUgPSB7fTtcblxuICBmdW5jdGlvbiBSZXNvdXJjZSggc3JjICkge1xuICAgIHRoaXMuc3JjID0gc3JjO1xuICAgIC8vIGFkZCB0byBjYWNoZVxuICAgIGNhY2hlWyBzcmMgXSA9IHRoaXM7XG4gIH1cblxuICBSZXNvdXJjZS5wcm90b3R5cGUgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XG5cbiAgUmVzb3VyY2UucHJvdG90eXBlLmNoZWNrID0gZnVuY3Rpb24oKSB7XG4gICAgLy8gb25seSB0cmlnZ2VyIGNoZWNraW5nIG9uY2VcbiAgICBpZiAoIHRoaXMuaXNDaGVja2VkICkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICAvLyBzaW11bGF0ZSBsb2FkaW5nIG9uIGRldGFjaGVkIGVsZW1lbnRcbiAgICB2YXIgcHJveHlJbWFnZSA9IG5ldyBJbWFnZSgpO1xuICAgIGV2ZW50aWUuYmluZCggcHJveHlJbWFnZSwgJ2xvYWQnLCB0aGlzICk7XG4gICAgZXZlbnRpZS5iaW5kKCBwcm94eUltYWdlLCAnZXJyb3InLCB0aGlzICk7XG4gICAgcHJveHlJbWFnZS5zcmMgPSB0aGlzLnNyYztcbiAgICAvLyBzZXQgZmxhZ1xuICAgIHRoaXMuaXNDaGVja2VkID0gdHJ1ZTtcbiAgfTtcblxuICAvLyAtLS0tLSBldmVudHMgLS0tLS0gLy9cblxuICAvLyB0cmlnZ2VyIHNwZWNpZmllZCBoYW5kbGVyIGZvciBldmVudCB0eXBlXG4gIFJlc291cmNlLnByb3RvdHlwZS5oYW5kbGVFdmVudCA9IGZ1bmN0aW9uKCBldmVudCApIHtcbiAgICB2YXIgbWV0aG9kID0gJ29uJyArIGV2ZW50LnR5cGU7XG4gICAgaWYgKCB0aGlzWyBtZXRob2QgXSApIHtcbiAgICAgIHRoaXNbIG1ldGhvZCBdKCBldmVudCApO1xuICAgIH1cbiAgfTtcblxuICBSZXNvdXJjZS5wcm90b3R5cGUub25sb2FkID0gZnVuY3Rpb24oIGV2ZW50ICkge1xuICAgIHRoaXMuY29uZmlybSggdHJ1ZSwgJ29ubG9hZCcgKTtcbiAgICB0aGlzLnVuYmluZFByb3h5RXZlbnRzKCBldmVudCApO1xuICB9O1xuXG4gIFJlc291cmNlLnByb3RvdHlwZS5vbmVycm9yID0gZnVuY3Rpb24oIGV2ZW50ICkge1xuICAgIHRoaXMuY29uZmlybSggZmFsc2UsICdvbmVycm9yJyApO1xuICAgIHRoaXMudW5iaW5kUHJveHlFdmVudHMoIGV2ZW50ICk7XG4gIH07XG5cbiAgLy8gLS0tLS0gY29uZmlybSAtLS0tLSAvL1xuXG4gIFJlc291cmNlLnByb3RvdHlwZS5jb25maXJtID0gZnVuY3Rpb24oIGlzTG9hZGVkLCBtZXNzYWdlICkge1xuICAgIHRoaXMuaXNDb25maXJtZWQgPSB0cnVlO1xuICAgIHRoaXMuaXNMb2FkZWQgPSBpc0xvYWRlZDtcbiAgICB0aGlzLmVtaXQoICdjb25maXJtJywgdGhpcywgbWVzc2FnZSApO1xuICB9O1xuXG4gIFJlc291cmNlLnByb3RvdHlwZS51bmJpbmRQcm94eUV2ZW50cyA9IGZ1bmN0aW9uKCBldmVudCApIHtcbiAgICBldmVudGllLnVuYmluZCggZXZlbnQudGFyZ2V0LCAnbG9hZCcsIHRoaXMgKTtcbiAgICBldmVudGllLnVuYmluZCggZXZlbnQudGFyZ2V0LCAnZXJyb3InLCB0aGlzICk7XG4gIH07XG5cbiAgLy8gLS0tLS0gIC0tLS0tIC8vXG5cbiAgcmV0dXJuIEltYWdlc0xvYWRlZDtcblxufSk7XG4iLCIvKiFcbiAqIGV2ZW50aWUgdjEuMC42XG4gKiBldmVudCBiaW5kaW5nIGhlbHBlclxuICogICBldmVudGllLmJpbmQoIGVsZW0sICdjbGljaycsIG15Rm4gKVxuICogICBldmVudGllLnVuYmluZCggZWxlbSwgJ2NsaWNrJywgbXlGbiApXG4gKiBNSVQgbGljZW5zZVxuICovXG5cbi8qanNoaW50IGJyb3dzZXI6IHRydWUsIHVuZGVmOiB0cnVlLCB1bnVzZWQ6IHRydWUgKi9cbi8qZ2xvYmFsIGRlZmluZTogZmFsc2UsIG1vZHVsZTogZmFsc2UgKi9cblxuKCBmdW5jdGlvbiggd2luZG93ICkge1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBkb2NFbGVtID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50O1xuXG52YXIgYmluZCA9IGZ1bmN0aW9uKCkge307XG5cbmZ1bmN0aW9uIGdldElFRXZlbnQoIG9iaiApIHtcbiAgdmFyIGV2ZW50ID0gd2luZG93LmV2ZW50O1xuICAvLyBhZGQgZXZlbnQudGFyZ2V0XG4gIGV2ZW50LnRhcmdldCA9IGV2ZW50LnRhcmdldCB8fCBldmVudC5zcmNFbGVtZW50IHx8IG9iajtcbiAgcmV0dXJuIGV2ZW50O1xufVxuXG5pZiAoIGRvY0VsZW0uYWRkRXZlbnRMaXN0ZW5lciApIHtcbiAgYmluZCA9IGZ1bmN0aW9uKCBvYmosIHR5cGUsIGZuICkge1xuICAgIG9iai5hZGRFdmVudExpc3RlbmVyKCB0eXBlLCBmbiwgZmFsc2UgKTtcbiAgfTtcbn0gZWxzZSBpZiAoIGRvY0VsZW0uYXR0YWNoRXZlbnQgKSB7XG4gIGJpbmQgPSBmdW5jdGlvbiggb2JqLCB0eXBlLCBmbiApIHtcbiAgICBvYmpbIHR5cGUgKyBmbiBdID0gZm4uaGFuZGxlRXZlbnQgP1xuICAgICAgZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBldmVudCA9IGdldElFRXZlbnQoIG9iaiApO1xuICAgICAgICBmbi5oYW5kbGVFdmVudC5jYWxsKCBmbiwgZXZlbnQgKTtcbiAgICAgIH0gOlxuICAgICAgZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBldmVudCA9IGdldElFRXZlbnQoIG9iaiApO1xuICAgICAgICBmbi5jYWxsKCBvYmosIGV2ZW50ICk7XG4gICAgICB9O1xuICAgIG9iai5hdHRhY2hFdmVudCggXCJvblwiICsgdHlwZSwgb2JqWyB0eXBlICsgZm4gXSApO1xuICB9O1xufVxuXG52YXIgdW5iaW5kID0gZnVuY3Rpb24oKSB7fTtcblxuaWYgKCBkb2NFbGVtLnJlbW92ZUV2ZW50TGlzdGVuZXIgKSB7XG4gIHVuYmluZCA9IGZ1bmN0aW9uKCBvYmosIHR5cGUsIGZuICkge1xuICAgIG9iai5yZW1vdmVFdmVudExpc3RlbmVyKCB0eXBlLCBmbiwgZmFsc2UgKTtcbiAgfTtcbn0gZWxzZSBpZiAoIGRvY0VsZW0uZGV0YWNoRXZlbnQgKSB7XG4gIHVuYmluZCA9IGZ1bmN0aW9uKCBvYmosIHR5cGUsIGZuICkge1xuICAgIG9iai5kZXRhY2hFdmVudCggXCJvblwiICsgdHlwZSwgb2JqWyB0eXBlICsgZm4gXSApO1xuICAgIHRyeSB7XG4gICAgICBkZWxldGUgb2JqWyB0eXBlICsgZm4gXTtcbiAgICB9IGNhdGNoICggZXJyICkge1xuICAgICAgLy8gY2FuJ3QgZGVsZXRlIHdpbmRvdyBvYmplY3QgcHJvcGVydGllc1xuICAgICAgb2JqWyB0eXBlICsgZm4gXSA9IHVuZGVmaW5lZDtcbiAgICB9XG4gIH07XG59XG5cbnZhciBldmVudGllID0ge1xuICBiaW5kOiBiaW5kLFxuICB1bmJpbmQ6IHVuYmluZFxufTtcblxuLy8gLS0tLS0gbW9kdWxlIGRlZmluaXRpb24gLS0tLS0gLy9cblxuaWYgKCB0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQgKSB7XG4gIC8vIEFNRFxuICBkZWZpbmUoIGV2ZW50aWUgKTtcbn0gZWxzZSBpZiAoIHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0JyApIHtcbiAgLy8gQ29tbW9uSlNcbiAgbW9kdWxlLmV4cG9ydHMgPSBldmVudGllO1xufSBlbHNlIHtcbiAgLy8gYnJvd3NlciBnbG9iYWxcbiAgd2luZG93LmV2ZW50aWUgPSBldmVudGllO1xufVxuXG59KSggd2luZG93ICk7XG4iLCIvKiFcbiAqIEV2ZW50RW1pdHRlciB2NC4yLjExIC0gZ2l0LmlvL2VlXG4gKiBVbmxpY2Vuc2UgLSBodHRwOi8vdW5saWNlbnNlLm9yZy9cbiAqIE9saXZlciBDYWxkd2VsbCAtIGh0dHA6Ly9vbGkubWUudWsvXG4gKiBAcHJlc2VydmVcbiAqL1xuXG47KGZ1bmN0aW9uICgpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICAvKipcbiAgICAgKiBDbGFzcyBmb3IgbWFuYWdpbmcgZXZlbnRzLlxuICAgICAqIENhbiBiZSBleHRlbmRlZCB0byBwcm92aWRlIGV2ZW50IGZ1bmN0aW9uYWxpdHkgaW4gb3RoZXIgY2xhc3Nlcy5cbiAgICAgKlxuICAgICAqIEBjbGFzcyBFdmVudEVtaXR0ZXIgTWFuYWdlcyBldmVudCByZWdpc3RlcmluZyBhbmQgZW1pdHRpbmcuXG4gICAgICovXG4gICAgZnVuY3Rpb24gRXZlbnRFbWl0dGVyKCkge31cblxuICAgIC8vIFNob3J0Y3V0cyB0byBpbXByb3ZlIHNwZWVkIGFuZCBzaXplXG4gICAgdmFyIHByb3RvID0gRXZlbnRFbWl0dGVyLnByb3RvdHlwZTtcbiAgICB2YXIgZXhwb3J0cyA9IHRoaXM7XG4gICAgdmFyIG9yaWdpbmFsR2xvYmFsVmFsdWUgPSBleHBvcnRzLkV2ZW50RW1pdHRlcjtcblxuICAgIC8qKlxuICAgICAqIEZpbmRzIHRoZSBpbmRleCBvZiB0aGUgbGlzdGVuZXIgZm9yIHRoZSBldmVudCBpbiBpdHMgc3RvcmFnZSBhcnJheS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb25bXX0gbGlzdGVuZXJzIEFycmF5IG9mIGxpc3RlbmVycyB0byBzZWFyY2ggdGhyb3VnaC5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBsaXN0ZW5lciBNZXRob2QgdG8gbG9vayBmb3IuXG4gICAgICogQHJldHVybiB7TnVtYmVyfSBJbmRleCBvZiB0aGUgc3BlY2lmaWVkIGxpc3RlbmVyLCAtMSBpZiBub3QgZm91bmRcbiAgICAgKiBAYXBpIHByaXZhdGVcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBpbmRleE9mTGlzdGVuZXIobGlzdGVuZXJzLCBsaXN0ZW5lcikge1xuICAgICAgICB2YXIgaSA9IGxpc3RlbmVycy5sZW5ndGg7XG4gICAgICAgIHdoaWxlIChpLS0pIHtcbiAgICAgICAgICAgIGlmIChsaXN0ZW5lcnNbaV0ubGlzdGVuZXIgPT09IGxpc3RlbmVyKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gLTE7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQWxpYXMgYSBtZXRob2Qgd2hpbGUga2VlcGluZyB0aGUgY29udGV4dCBjb3JyZWN0LCB0byBhbGxvdyBmb3Igb3ZlcndyaXRpbmcgb2YgdGFyZ2V0IG1ldGhvZC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBuYW1lIFRoZSBuYW1lIG9mIHRoZSB0YXJnZXQgbWV0aG9kLlxuICAgICAqIEByZXR1cm4ge0Z1bmN0aW9ufSBUaGUgYWxpYXNlZCBtZXRob2RcbiAgICAgKiBAYXBpIHByaXZhdGVcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBhbGlhcyhuYW1lKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiBhbGlhc0Nsb3N1cmUoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpc1tuYW1lXS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgICB9O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIGxpc3RlbmVyIGFycmF5IGZvciB0aGUgc3BlY2lmaWVkIGV2ZW50LlxuICAgICAqIFdpbGwgaW5pdGlhbGlzZSB0aGUgZXZlbnQgb2JqZWN0IGFuZCBsaXN0ZW5lciBhcnJheXMgaWYgcmVxdWlyZWQuXG4gICAgICogV2lsbCByZXR1cm4gYW4gb2JqZWN0IGlmIHlvdSB1c2UgYSByZWdleCBzZWFyY2guIFRoZSBvYmplY3QgY29udGFpbnMga2V5cyBmb3IgZWFjaCBtYXRjaGVkIGV2ZW50LiBTbyAvYmFbcnpdLyBtaWdodCByZXR1cm4gYW4gb2JqZWN0IGNvbnRhaW5pbmcgYmFyIGFuZCBiYXouIEJ1dCBvbmx5IGlmIHlvdSBoYXZlIGVpdGhlciBkZWZpbmVkIHRoZW0gd2l0aCBkZWZpbmVFdmVudCBvciBhZGRlZCBzb21lIGxpc3RlbmVycyB0byB0aGVtLlxuICAgICAqIEVhY2ggcHJvcGVydHkgaW4gdGhlIG9iamVjdCByZXNwb25zZSBpcyBhbiBhcnJheSBvZiBsaXN0ZW5lciBmdW5jdGlvbnMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1N0cmluZ3xSZWdFeHB9IGV2dCBOYW1lIG9mIHRoZSBldmVudCB0byByZXR1cm4gdGhlIGxpc3RlbmVycyBmcm9tLlxuICAgICAqIEByZXR1cm4ge0Z1bmN0aW9uW118T2JqZWN0fSBBbGwgbGlzdGVuZXIgZnVuY3Rpb25zIGZvciB0aGUgZXZlbnQuXG4gICAgICovXG4gICAgcHJvdG8uZ2V0TGlzdGVuZXJzID0gZnVuY3Rpb24gZ2V0TGlzdGVuZXJzKGV2dCkge1xuICAgICAgICB2YXIgZXZlbnRzID0gdGhpcy5fZ2V0RXZlbnRzKCk7XG4gICAgICAgIHZhciByZXNwb25zZTtcbiAgICAgICAgdmFyIGtleTtcblxuICAgICAgICAvLyBSZXR1cm4gYSBjb25jYXRlbmF0ZWQgYXJyYXkgb2YgYWxsIG1hdGNoaW5nIGV2ZW50cyBpZlxuICAgICAgICAvLyB0aGUgc2VsZWN0b3IgaXMgYSByZWd1bGFyIGV4cHJlc3Npb24uXG4gICAgICAgIGlmIChldnQgaW5zdGFuY2VvZiBSZWdFeHApIHtcbiAgICAgICAgICAgIHJlc3BvbnNlID0ge307XG4gICAgICAgICAgICBmb3IgKGtleSBpbiBldmVudHMpIHtcbiAgICAgICAgICAgICAgICBpZiAoZXZlbnRzLmhhc093blByb3BlcnR5KGtleSkgJiYgZXZ0LnRlc3Qoa2V5KSkge1xuICAgICAgICAgICAgICAgICAgICByZXNwb25zZVtrZXldID0gZXZlbnRzW2tleV07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmVzcG9uc2UgPSBldmVudHNbZXZ0XSB8fCAoZXZlbnRzW2V2dF0gPSBbXSk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gcmVzcG9uc2U7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIFRha2VzIGEgbGlzdCBvZiBsaXN0ZW5lciBvYmplY3RzIGFuZCBmbGF0dGVucyBpdCBpbnRvIGEgbGlzdCBvZiBsaXN0ZW5lciBmdW5jdGlvbnMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge09iamVjdFtdfSBsaXN0ZW5lcnMgUmF3IGxpc3RlbmVyIG9iamVjdHMuXG4gICAgICogQHJldHVybiB7RnVuY3Rpb25bXX0gSnVzdCB0aGUgbGlzdGVuZXIgZnVuY3Rpb25zLlxuICAgICAqL1xuICAgIHByb3RvLmZsYXR0ZW5MaXN0ZW5lcnMgPSBmdW5jdGlvbiBmbGF0dGVuTGlzdGVuZXJzKGxpc3RlbmVycykge1xuICAgICAgICB2YXIgZmxhdExpc3RlbmVycyA9IFtdO1xuICAgICAgICB2YXIgaTtcblxuICAgICAgICBmb3IgKGkgPSAwOyBpIDwgbGlzdGVuZXJzLmxlbmd0aDsgaSArPSAxKSB7XG4gICAgICAgICAgICBmbGF0TGlzdGVuZXJzLnB1c2gobGlzdGVuZXJzW2ldLmxpc3RlbmVyKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBmbGF0TGlzdGVuZXJzO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBGZXRjaGVzIHRoZSByZXF1ZXN0ZWQgbGlzdGVuZXJzIHZpYSBnZXRMaXN0ZW5lcnMgYnV0IHdpbGwgYWx3YXlzIHJldHVybiB0aGUgcmVzdWx0cyBpbnNpZGUgYW4gb2JqZWN0LiBUaGlzIGlzIG1haW5seSBmb3IgaW50ZXJuYWwgdXNlIGJ1dCBvdGhlcnMgbWF5IGZpbmQgaXQgdXNlZnVsLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtTdHJpbmd8UmVnRXhwfSBldnQgTmFtZSBvZiB0aGUgZXZlbnQgdG8gcmV0dXJuIHRoZSBsaXN0ZW5lcnMgZnJvbS5cbiAgICAgKiBAcmV0dXJuIHtPYmplY3R9IEFsbCBsaXN0ZW5lciBmdW5jdGlvbnMgZm9yIGFuIGV2ZW50IGluIGFuIG9iamVjdC5cbiAgICAgKi9cbiAgICBwcm90by5nZXRMaXN0ZW5lcnNBc09iamVjdCA9IGZ1bmN0aW9uIGdldExpc3RlbmVyc0FzT2JqZWN0KGV2dCkge1xuICAgICAgICB2YXIgbGlzdGVuZXJzID0gdGhpcy5nZXRMaXN0ZW5lcnMoZXZ0KTtcbiAgICAgICAgdmFyIHJlc3BvbnNlO1xuXG4gICAgICAgIGlmIChsaXN0ZW5lcnMgaW5zdGFuY2VvZiBBcnJheSkge1xuICAgICAgICAgICAgcmVzcG9uc2UgPSB7fTtcbiAgICAgICAgICAgIHJlc3BvbnNlW2V2dF0gPSBsaXN0ZW5lcnM7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gcmVzcG9uc2UgfHwgbGlzdGVuZXJzO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBBZGRzIGEgbGlzdGVuZXIgZnVuY3Rpb24gdG8gdGhlIHNwZWNpZmllZCBldmVudC5cbiAgICAgKiBUaGUgbGlzdGVuZXIgd2lsbCBub3QgYmUgYWRkZWQgaWYgaXQgaXMgYSBkdXBsaWNhdGUuXG4gICAgICogSWYgdGhlIGxpc3RlbmVyIHJldHVybnMgdHJ1ZSB0aGVuIGl0IHdpbGwgYmUgcmVtb3ZlZCBhZnRlciBpdCBpcyBjYWxsZWQuXG4gICAgICogSWYgeW91IHBhc3MgYSByZWd1bGFyIGV4cHJlc3Npb24gYXMgdGhlIGV2ZW50IG5hbWUgdGhlbiB0aGUgbGlzdGVuZXIgd2lsbCBiZSBhZGRlZCB0byBhbGwgZXZlbnRzIHRoYXQgbWF0Y2ggaXQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1N0cmluZ3xSZWdFeHB9IGV2dCBOYW1lIG9mIHRoZSBldmVudCB0byBhdHRhY2ggdGhlIGxpc3RlbmVyIHRvLlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGxpc3RlbmVyIE1ldGhvZCB0byBiZSBjYWxsZWQgd2hlbiB0aGUgZXZlbnQgaXMgZW1pdHRlZC4gSWYgdGhlIGZ1bmN0aW9uIHJldHVybnMgdHJ1ZSB0aGVuIGl0IHdpbGwgYmUgcmVtb3ZlZCBhZnRlciBjYWxsaW5nLlxuICAgICAqIEByZXR1cm4ge09iamVjdH0gQ3VycmVudCBpbnN0YW5jZSBvZiBFdmVudEVtaXR0ZXIgZm9yIGNoYWluaW5nLlxuICAgICAqL1xuICAgIHByb3RvLmFkZExpc3RlbmVyID0gZnVuY3Rpb24gYWRkTGlzdGVuZXIoZXZ0LCBsaXN0ZW5lcikge1xuICAgICAgICB2YXIgbGlzdGVuZXJzID0gdGhpcy5nZXRMaXN0ZW5lcnNBc09iamVjdChldnQpO1xuICAgICAgICB2YXIgbGlzdGVuZXJJc1dyYXBwZWQgPSB0eXBlb2YgbGlzdGVuZXIgPT09ICdvYmplY3QnO1xuICAgICAgICB2YXIga2V5O1xuXG4gICAgICAgIGZvciAoa2V5IGluIGxpc3RlbmVycykge1xuICAgICAgICAgICAgaWYgKGxpc3RlbmVycy5oYXNPd25Qcm9wZXJ0eShrZXkpICYmIGluZGV4T2ZMaXN0ZW5lcihsaXN0ZW5lcnNba2V5XSwgbGlzdGVuZXIpID09PSAtMSkge1xuICAgICAgICAgICAgICAgIGxpc3RlbmVyc1trZXldLnB1c2gobGlzdGVuZXJJc1dyYXBwZWQgPyBsaXN0ZW5lciA6IHtcbiAgICAgICAgICAgICAgICAgICAgbGlzdGVuZXI6IGxpc3RlbmVyLFxuICAgICAgICAgICAgICAgICAgICBvbmNlOiBmYWxzZVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIEFsaWFzIG9mIGFkZExpc3RlbmVyXG4gICAgICovXG4gICAgcHJvdG8ub24gPSBhbGlhcygnYWRkTGlzdGVuZXInKTtcblxuICAgIC8qKlxuICAgICAqIFNlbWktYWxpYXMgb2YgYWRkTGlzdGVuZXIuIEl0IHdpbGwgYWRkIGEgbGlzdGVuZXIgdGhhdCB3aWxsIGJlXG4gICAgICogYXV0b21hdGljYWxseSByZW1vdmVkIGFmdGVyIGl0cyBmaXJzdCBleGVjdXRpb24uXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1N0cmluZ3xSZWdFeHB9IGV2dCBOYW1lIG9mIHRoZSBldmVudCB0byBhdHRhY2ggdGhlIGxpc3RlbmVyIHRvLlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGxpc3RlbmVyIE1ldGhvZCB0byBiZSBjYWxsZWQgd2hlbiB0aGUgZXZlbnQgaXMgZW1pdHRlZC4gSWYgdGhlIGZ1bmN0aW9uIHJldHVybnMgdHJ1ZSB0aGVuIGl0IHdpbGwgYmUgcmVtb3ZlZCBhZnRlciBjYWxsaW5nLlxuICAgICAqIEByZXR1cm4ge09iamVjdH0gQ3VycmVudCBpbnN0YW5jZSBvZiBFdmVudEVtaXR0ZXIgZm9yIGNoYWluaW5nLlxuICAgICAqL1xuICAgIHByb3RvLmFkZE9uY2VMaXN0ZW5lciA9IGZ1bmN0aW9uIGFkZE9uY2VMaXN0ZW5lcihldnQsIGxpc3RlbmVyKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmFkZExpc3RlbmVyKGV2dCwge1xuICAgICAgICAgICAgbGlzdGVuZXI6IGxpc3RlbmVyLFxuICAgICAgICAgICAgb25jZTogdHJ1ZVxuICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogQWxpYXMgb2YgYWRkT25jZUxpc3RlbmVyLlxuICAgICAqL1xuICAgIHByb3RvLm9uY2UgPSBhbGlhcygnYWRkT25jZUxpc3RlbmVyJyk7XG5cbiAgICAvKipcbiAgICAgKiBEZWZpbmVzIGFuIGV2ZW50IG5hbWUuIFRoaXMgaXMgcmVxdWlyZWQgaWYgeW91IHdhbnQgdG8gdXNlIGEgcmVnZXggdG8gYWRkIGEgbGlzdGVuZXIgdG8gbXVsdGlwbGUgZXZlbnRzIGF0IG9uY2UuIElmIHlvdSBkb24ndCBkbyB0aGlzIHRoZW4gaG93IGRvIHlvdSBleHBlY3QgaXQgdG8ga25vdyB3aGF0IGV2ZW50IHRvIGFkZCB0bz8gU2hvdWxkIGl0IGp1c3QgYWRkIHRvIGV2ZXJ5IHBvc3NpYmxlIG1hdGNoIGZvciBhIHJlZ2V4PyBOby4gVGhhdCBpcyBzY2FyeSBhbmQgYmFkLlxuICAgICAqIFlvdSBuZWVkIHRvIHRlbGwgaXQgd2hhdCBldmVudCBuYW1lcyBzaG91bGQgYmUgbWF0Y2hlZCBieSBhIHJlZ2V4LlxuICAgICAqXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IGV2dCBOYW1lIG9mIHRoZSBldmVudCB0byBjcmVhdGUuXG4gICAgICogQHJldHVybiB7T2JqZWN0fSBDdXJyZW50IGluc3RhbmNlIG9mIEV2ZW50RW1pdHRlciBmb3IgY2hhaW5pbmcuXG4gICAgICovXG4gICAgcHJvdG8uZGVmaW5lRXZlbnQgPSBmdW5jdGlvbiBkZWZpbmVFdmVudChldnQpIHtcbiAgICAgICAgdGhpcy5nZXRMaXN0ZW5lcnMoZXZ0KTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIFVzZXMgZGVmaW5lRXZlbnQgdG8gZGVmaW5lIG11bHRpcGxlIGV2ZW50cy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7U3RyaW5nW119IGV2dHMgQW4gYXJyYXkgb2YgZXZlbnQgbmFtZXMgdG8gZGVmaW5lLlxuICAgICAqIEByZXR1cm4ge09iamVjdH0gQ3VycmVudCBpbnN0YW5jZSBvZiBFdmVudEVtaXR0ZXIgZm9yIGNoYWluaW5nLlxuICAgICAqL1xuICAgIHByb3RvLmRlZmluZUV2ZW50cyA9IGZ1bmN0aW9uIGRlZmluZUV2ZW50cyhldnRzKSB7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZXZ0cy5sZW5ndGg7IGkgKz0gMSkge1xuICAgICAgICAgICAgdGhpcy5kZWZpbmVFdmVudChldnRzW2ldKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogUmVtb3ZlcyBhIGxpc3RlbmVyIGZ1bmN0aW9uIGZyb20gdGhlIHNwZWNpZmllZCBldmVudC5cbiAgICAgKiBXaGVuIHBhc3NlZCBhIHJlZ3VsYXIgZXhwcmVzc2lvbiBhcyB0aGUgZXZlbnQgbmFtZSwgaXQgd2lsbCByZW1vdmUgdGhlIGxpc3RlbmVyIGZyb20gYWxsIGV2ZW50cyB0aGF0IG1hdGNoIGl0LlxuICAgICAqXG4gICAgICogQHBhcmFtIHtTdHJpbmd8UmVnRXhwfSBldnQgTmFtZSBvZiB0aGUgZXZlbnQgdG8gcmVtb3ZlIHRoZSBsaXN0ZW5lciBmcm9tLlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGxpc3RlbmVyIE1ldGhvZCB0byByZW1vdmUgZnJvbSB0aGUgZXZlbnQuXG4gICAgICogQHJldHVybiB7T2JqZWN0fSBDdXJyZW50IGluc3RhbmNlIG9mIEV2ZW50RW1pdHRlciBmb3IgY2hhaW5pbmcuXG4gICAgICovXG4gICAgcHJvdG8ucmVtb3ZlTGlzdGVuZXIgPSBmdW5jdGlvbiByZW1vdmVMaXN0ZW5lcihldnQsIGxpc3RlbmVyKSB7XG4gICAgICAgIHZhciBsaXN0ZW5lcnMgPSB0aGlzLmdldExpc3RlbmVyc0FzT2JqZWN0KGV2dCk7XG4gICAgICAgIHZhciBpbmRleDtcbiAgICAgICAgdmFyIGtleTtcblxuICAgICAgICBmb3IgKGtleSBpbiBsaXN0ZW5lcnMpIHtcbiAgICAgICAgICAgIGlmIChsaXN0ZW5lcnMuaGFzT3duUHJvcGVydHkoa2V5KSkge1xuICAgICAgICAgICAgICAgIGluZGV4ID0gaW5kZXhPZkxpc3RlbmVyKGxpc3RlbmVyc1trZXldLCBsaXN0ZW5lcik7XG5cbiAgICAgICAgICAgICAgICBpZiAoaW5kZXggIT09IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgIGxpc3RlbmVyc1trZXldLnNwbGljZShpbmRleCwgMSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIEFsaWFzIG9mIHJlbW92ZUxpc3RlbmVyXG4gICAgICovXG4gICAgcHJvdG8ub2ZmID0gYWxpYXMoJ3JlbW92ZUxpc3RlbmVyJyk7XG5cbiAgICAvKipcbiAgICAgKiBBZGRzIGxpc3RlbmVycyBpbiBidWxrIHVzaW5nIHRoZSBtYW5pcHVsYXRlTGlzdGVuZXJzIG1ldGhvZC5cbiAgICAgKiBJZiB5b3UgcGFzcyBhbiBvYmplY3QgYXMgdGhlIHNlY29uZCBhcmd1bWVudCB5b3UgY2FuIGFkZCB0byBtdWx0aXBsZSBldmVudHMgYXQgb25jZS4gVGhlIG9iamVjdCBzaG91bGQgY29udGFpbiBrZXkgdmFsdWUgcGFpcnMgb2YgZXZlbnRzIGFuZCBsaXN0ZW5lcnMgb3IgbGlzdGVuZXIgYXJyYXlzLiBZb3UgY2FuIGFsc28gcGFzcyBpdCBhbiBldmVudCBuYW1lIGFuZCBhbiBhcnJheSBvZiBsaXN0ZW5lcnMgdG8gYmUgYWRkZWQuXG4gICAgICogWW91IGNhbiBhbHNvIHBhc3MgaXQgYSByZWd1bGFyIGV4cHJlc3Npb24gdG8gYWRkIHRoZSBhcnJheSBvZiBsaXN0ZW5lcnMgdG8gYWxsIGV2ZW50cyB0aGF0IG1hdGNoIGl0LlxuICAgICAqIFllYWgsIHRoaXMgZnVuY3Rpb24gZG9lcyBxdWl0ZSBhIGJpdC4gVGhhdCdzIHByb2JhYmx5IGEgYmFkIHRoaW5nLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtTdHJpbmd8T2JqZWN0fFJlZ0V4cH0gZXZ0IEFuIGV2ZW50IG5hbWUgaWYgeW91IHdpbGwgcGFzcyBhbiBhcnJheSBvZiBsaXN0ZW5lcnMgbmV4dC4gQW4gb2JqZWN0IGlmIHlvdSB3aXNoIHRvIGFkZCB0byBtdWx0aXBsZSBldmVudHMgYXQgb25jZS5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9uW119IFtsaXN0ZW5lcnNdIEFuIG9wdGlvbmFsIGFycmF5IG9mIGxpc3RlbmVyIGZ1bmN0aW9ucyB0byBhZGQuXG4gICAgICogQHJldHVybiB7T2JqZWN0fSBDdXJyZW50IGluc3RhbmNlIG9mIEV2ZW50RW1pdHRlciBmb3IgY2hhaW5pbmcuXG4gICAgICovXG4gICAgcHJvdG8uYWRkTGlzdGVuZXJzID0gZnVuY3Rpb24gYWRkTGlzdGVuZXJzKGV2dCwgbGlzdGVuZXJzKSB7XG4gICAgICAgIC8vIFBhc3MgdGhyb3VnaCB0byBtYW5pcHVsYXRlTGlzdGVuZXJzXG4gICAgICAgIHJldHVybiB0aGlzLm1hbmlwdWxhdGVMaXN0ZW5lcnMoZmFsc2UsIGV2dCwgbGlzdGVuZXJzKTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogUmVtb3ZlcyBsaXN0ZW5lcnMgaW4gYnVsayB1c2luZyB0aGUgbWFuaXB1bGF0ZUxpc3RlbmVycyBtZXRob2QuXG4gICAgICogSWYgeW91IHBhc3MgYW4gb2JqZWN0IGFzIHRoZSBzZWNvbmQgYXJndW1lbnQgeW91IGNhbiByZW1vdmUgZnJvbSBtdWx0aXBsZSBldmVudHMgYXQgb25jZS4gVGhlIG9iamVjdCBzaG91bGQgY29udGFpbiBrZXkgdmFsdWUgcGFpcnMgb2YgZXZlbnRzIGFuZCBsaXN0ZW5lcnMgb3IgbGlzdGVuZXIgYXJyYXlzLlxuICAgICAqIFlvdSBjYW4gYWxzbyBwYXNzIGl0IGFuIGV2ZW50IG5hbWUgYW5kIGFuIGFycmF5IG9mIGxpc3RlbmVycyB0byBiZSByZW1vdmVkLlxuICAgICAqIFlvdSBjYW4gYWxzbyBwYXNzIGl0IGEgcmVndWxhciBleHByZXNzaW9uIHRvIHJlbW92ZSB0aGUgbGlzdGVuZXJzIGZyb20gYWxsIGV2ZW50cyB0aGF0IG1hdGNoIGl0LlxuICAgICAqXG4gICAgICogQHBhcmFtIHtTdHJpbmd8T2JqZWN0fFJlZ0V4cH0gZXZ0IEFuIGV2ZW50IG5hbWUgaWYgeW91IHdpbGwgcGFzcyBhbiBhcnJheSBvZiBsaXN0ZW5lcnMgbmV4dC4gQW4gb2JqZWN0IGlmIHlvdSB3aXNoIHRvIHJlbW92ZSBmcm9tIG11bHRpcGxlIGV2ZW50cyBhdCBvbmNlLlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb25bXX0gW2xpc3RlbmVyc10gQW4gb3B0aW9uYWwgYXJyYXkgb2YgbGlzdGVuZXIgZnVuY3Rpb25zIHRvIHJlbW92ZS5cbiAgICAgKiBAcmV0dXJuIHtPYmplY3R9IEN1cnJlbnQgaW5zdGFuY2Ugb2YgRXZlbnRFbWl0dGVyIGZvciBjaGFpbmluZy5cbiAgICAgKi9cbiAgICBwcm90by5yZW1vdmVMaXN0ZW5lcnMgPSBmdW5jdGlvbiByZW1vdmVMaXN0ZW5lcnMoZXZ0LCBsaXN0ZW5lcnMpIHtcbiAgICAgICAgLy8gUGFzcyB0aHJvdWdoIHRvIG1hbmlwdWxhdGVMaXN0ZW5lcnNcbiAgICAgICAgcmV0dXJuIHRoaXMubWFuaXB1bGF0ZUxpc3RlbmVycyh0cnVlLCBldnQsIGxpc3RlbmVycyk7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIEVkaXRzIGxpc3RlbmVycyBpbiBidWxrLiBUaGUgYWRkTGlzdGVuZXJzIGFuZCByZW1vdmVMaXN0ZW5lcnMgbWV0aG9kcyBib3RoIHVzZSB0aGlzIHRvIGRvIHRoZWlyIGpvYi4gWW91IHNob3VsZCByZWFsbHkgdXNlIHRob3NlIGluc3RlYWQsIHRoaXMgaXMgYSBsaXR0bGUgbG93ZXIgbGV2ZWwuXG4gICAgICogVGhlIGZpcnN0IGFyZ3VtZW50IHdpbGwgZGV0ZXJtaW5lIGlmIHRoZSBsaXN0ZW5lcnMgYXJlIHJlbW92ZWQgKHRydWUpIG9yIGFkZGVkIChmYWxzZSkuXG4gICAgICogSWYgeW91IHBhc3MgYW4gb2JqZWN0IGFzIHRoZSBzZWNvbmQgYXJndW1lbnQgeW91IGNhbiBhZGQvcmVtb3ZlIGZyb20gbXVsdGlwbGUgZXZlbnRzIGF0IG9uY2UuIFRoZSBvYmplY3Qgc2hvdWxkIGNvbnRhaW4ga2V5IHZhbHVlIHBhaXJzIG9mIGV2ZW50cyBhbmQgbGlzdGVuZXJzIG9yIGxpc3RlbmVyIGFycmF5cy5cbiAgICAgKiBZb3UgY2FuIGFsc28gcGFzcyBpdCBhbiBldmVudCBuYW1lIGFuZCBhbiBhcnJheSBvZiBsaXN0ZW5lcnMgdG8gYmUgYWRkZWQvcmVtb3ZlZC5cbiAgICAgKiBZb3UgY2FuIGFsc28gcGFzcyBpdCBhIHJlZ3VsYXIgZXhwcmVzc2lvbiB0byBtYW5pcHVsYXRlIHRoZSBsaXN0ZW5lcnMgb2YgYWxsIGV2ZW50cyB0aGF0IG1hdGNoIGl0LlxuICAgICAqXG4gICAgICogQHBhcmFtIHtCb29sZWFufSByZW1vdmUgVHJ1ZSBpZiB5b3Ugd2FudCB0byByZW1vdmUgbGlzdGVuZXJzLCBmYWxzZSBpZiB5b3Ugd2FudCB0byBhZGQuXG4gICAgICogQHBhcmFtIHtTdHJpbmd8T2JqZWN0fFJlZ0V4cH0gZXZ0IEFuIGV2ZW50IG5hbWUgaWYgeW91IHdpbGwgcGFzcyBhbiBhcnJheSBvZiBsaXN0ZW5lcnMgbmV4dC4gQW4gb2JqZWN0IGlmIHlvdSB3aXNoIHRvIGFkZC9yZW1vdmUgZnJvbSBtdWx0aXBsZSBldmVudHMgYXQgb25jZS5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9uW119IFtsaXN0ZW5lcnNdIEFuIG9wdGlvbmFsIGFycmF5IG9mIGxpc3RlbmVyIGZ1bmN0aW9ucyB0byBhZGQvcmVtb3ZlLlxuICAgICAqIEByZXR1cm4ge09iamVjdH0gQ3VycmVudCBpbnN0YW5jZSBvZiBFdmVudEVtaXR0ZXIgZm9yIGNoYWluaW5nLlxuICAgICAqL1xuICAgIHByb3RvLm1hbmlwdWxhdGVMaXN0ZW5lcnMgPSBmdW5jdGlvbiBtYW5pcHVsYXRlTGlzdGVuZXJzKHJlbW92ZSwgZXZ0LCBsaXN0ZW5lcnMpIHtcbiAgICAgICAgdmFyIGk7XG4gICAgICAgIHZhciB2YWx1ZTtcbiAgICAgICAgdmFyIHNpbmdsZSA9IHJlbW92ZSA/IHRoaXMucmVtb3ZlTGlzdGVuZXIgOiB0aGlzLmFkZExpc3RlbmVyO1xuICAgICAgICB2YXIgbXVsdGlwbGUgPSByZW1vdmUgPyB0aGlzLnJlbW92ZUxpc3RlbmVycyA6IHRoaXMuYWRkTGlzdGVuZXJzO1xuXG4gICAgICAgIC8vIElmIGV2dCBpcyBhbiBvYmplY3QgdGhlbiBwYXNzIGVhY2ggb2YgaXRzIHByb3BlcnRpZXMgdG8gdGhpcyBtZXRob2RcbiAgICAgICAgaWYgKHR5cGVvZiBldnQgPT09ICdvYmplY3QnICYmICEoZXZ0IGluc3RhbmNlb2YgUmVnRXhwKSkge1xuICAgICAgICAgICAgZm9yIChpIGluIGV2dCkge1xuICAgICAgICAgICAgICAgIGlmIChldnQuaGFzT3duUHJvcGVydHkoaSkgJiYgKHZhbHVlID0gZXZ0W2ldKSkge1xuICAgICAgICAgICAgICAgICAgICAvLyBQYXNzIHRoZSBzaW5nbGUgbGlzdGVuZXIgc3RyYWlnaHQgdGhyb3VnaCB0byB0aGUgc2luZ3VsYXIgbWV0aG9kXG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNpbmdsZS5jYWxsKHRoaXMsIGksIHZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIE90aGVyd2lzZSBwYXNzIGJhY2sgdG8gdGhlIG11bHRpcGxlIGZ1bmN0aW9uXG4gICAgICAgICAgICAgICAgICAgICAgICBtdWx0aXBsZS5jYWxsKHRoaXMsIGksIHZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIC8vIFNvIGV2dCBtdXN0IGJlIGEgc3RyaW5nXG4gICAgICAgICAgICAvLyBBbmQgbGlzdGVuZXJzIG11c3QgYmUgYW4gYXJyYXkgb2YgbGlzdGVuZXJzXG4gICAgICAgICAgICAvLyBMb29wIG92ZXIgaXQgYW5kIHBhc3MgZWFjaCBvbmUgdG8gdGhlIG11bHRpcGxlIG1ldGhvZFxuICAgICAgICAgICAgaSA9IGxpc3RlbmVycy5sZW5ndGg7XG4gICAgICAgICAgICB3aGlsZSAoaS0tKSB7XG4gICAgICAgICAgICAgICAgc2luZ2xlLmNhbGwodGhpcywgZXZ0LCBsaXN0ZW5lcnNbaV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIFJlbW92ZXMgYWxsIGxpc3RlbmVycyBmcm9tIGEgc3BlY2lmaWVkIGV2ZW50LlxuICAgICAqIElmIHlvdSBkbyBub3Qgc3BlY2lmeSBhbiBldmVudCB0aGVuIGFsbCBsaXN0ZW5lcnMgd2lsbCBiZSByZW1vdmVkLlxuICAgICAqIFRoYXQgbWVhbnMgZXZlcnkgZXZlbnQgd2lsbCBiZSBlbXB0aWVkLlxuICAgICAqIFlvdSBjYW4gYWxzbyBwYXNzIGEgcmVnZXggdG8gcmVtb3ZlIGFsbCBldmVudHMgdGhhdCBtYXRjaCBpdC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7U3RyaW5nfFJlZ0V4cH0gW2V2dF0gT3B0aW9uYWwgbmFtZSBvZiB0aGUgZXZlbnQgdG8gcmVtb3ZlIGFsbCBsaXN0ZW5lcnMgZm9yLiBXaWxsIHJlbW92ZSBmcm9tIGV2ZXJ5IGV2ZW50IGlmIG5vdCBwYXNzZWQuXG4gICAgICogQHJldHVybiB7T2JqZWN0fSBDdXJyZW50IGluc3RhbmNlIG9mIEV2ZW50RW1pdHRlciBmb3IgY2hhaW5pbmcuXG4gICAgICovXG4gICAgcHJvdG8ucmVtb3ZlRXZlbnQgPSBmdW5jdGlvbiByZW1vdmVFdmVudChldnQpIHtcbiAgICAgICAgdmFyIHR5cGUgPSB0eXBlb2YgZXZ0O1xuICAgICAgICB2YXIgZXZlbnRzID0gdGhpcy5fZ2V0RXZlbnRzKCk7XG4gICAgICAgIHZhciBrZXk7XG5cbiAgICAgICAgLy8gUmVtb3ZlIGRpZmZlcmVudCB0aGluZ3MgZGVwZW5kaW5nIG9uIHRoZSBzdGF0ZSBvZiBldnRcbiAgICAgICAgaWYgKHR5cGUgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAvLyBSZW1vdmUgYWxsIGxpc3RlbmVycyBmb3IgdGhlIHNwZWNpZmllZCBldmVudFxuICAgICAgICAgICAgZGVsZXRlIGV2ZW50c1tldnRdO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGV2dCBpbnN0YW5jZW9mIFJlZ0V4cCkge1xuICAgICAgICAgICAgLy8gUmVtb3ZlIGFsbCBldmVudHMgbWF0Y2hpbmcgdGhlIHJlZ2V4LlxuICAgICAgICAgICAgZm9yIChrZXkgaW4gZXZlbnRzKSB7XG4gICAgICAgICAgICAgICAgaWYgKGV2ZW50cy5oYXNPd25Qcm9wZXJ0eShrZXkpICYmIGV2dC50ZXN0KGtleSkpIHtcbiAgICAgICAgICAgICAgICAgICAgZGVsZXRlIGV2ZW50c1trZXldO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIC8vIFJlbW92ZSBhbGwgbGlzdGVuZXJzIGluIGFsbCBldmVudHNcbiAgICAgICAgICAgIGRlbGV0ZSB0aGlzLl9ldmVudHM7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogQWxpYXMgb2YgcmVtb3ZlRXZlbnQuXG4gICAgICpcbiAgICAgKiBBZGRlZCB0byBtaXJyb3IgdGhlIG5vZGUgQVBJLlxuICAgICAqL1xuICAgIHByb3RvLnJlbW92ZUFsbExpc3RlbmVycyA9IGFsaWFzKCdyZW1vdmVFdmVudCcpO1xuXG4gICAgLyoqXG4gICAgICogRW1pdHMgYW4gZXZlbnQgb2YgeW91ciBjaG9pY2UuXG4gICAgICogV2hlbiBlbWl0dGVkLCBldmVyeSBsaXN0ZW5lciBhdHRhY2hlZCB0byB0aGF0IGV2ZW50IHdpbGwgYmUgZXhlY3V0ZWQuXG4gICAgICogSWYgeW91IHBhc3MgdGhlIG9wdGlvbmFsIGFyZ3VtZW50IGFycmF5IHRoZW4gdGhvc2UgYXJndW1lbnRzIHdpbGwgYmUgcGFzc2VkIHRvIGV2ZXJ5IGxpc3RlbmVyIHVwb24gZXhlY3V0aW9uLlxuICAgICAqIEJlY2F1c2UgaXQgdXNlcyBgYXBwbHlgLCB5b3VyIGFycmF5IG9mIGFyZ3VtZW50cyB3aWxsIGJlIHBhc3NlZCBhcyBpZiB5b3Ugd3JvdGUgdGhlbSBvdXQgc2VwYXJhdGVseS5cbiAgICAgKiBTbyB0aGV5IHdpbGwgbm90IGFycml2ZSB3aXRoaW4gdGhlIGFycmF5IG9uIHRoZSBvdGhlciBzaWRlLCB0aGV5IHdpbGwgYmUgc2VwYXJhdGUuXG4gICAgICogWW91IGNhbiBhbHNvIHBhc3MgYSByZWd1bGFyIGV4cHJlc3Npb24gdG8gZW1pdCB0byBhbGwgZXZlbnRzIHRoYXQgbWF0Y2ggaXQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1N0cmluZ3xSZWdFeHB9IGV2dCBOYW1lIG9mIHRoZSBldmVudCB0byBlbWl0IGFuZCBleGVjdXRlIGxpc3RlbmVycyBmb3IuXG4gICAgICogQHBhcmFtIHtBcnJheX0gW2FyZ3NdIE9wdGlvbmFsIGFycmF5IG9mIGFyZ3VtZW50cyB0byBiZSBwYXNzZWQgdG8gZWFjaCBsaXN0ZW5lci5cbiAgICAgKiBAcmV0dXJuIHtPYmplY3R9IEN1cnJlbnQgaW5zdGFuY2Ugb2YgRXZlbnRFbWl0dGVyIGZvciBjaGFpbmluZy5cbiAgICAgKi9cbiAgICBwcm90by5lbWl0RXZlbnQgPSBmdW5jdGlvbiBlbWl0RXZlbnQoZXZ0LCBhcmdzKSB7XG4gICAgICAgIHZhciBsaXN0ZW5lcnMgPSB0aGlzLmdldExpc3RlbmVyc0FzT2JqZWN0KGV2dCk7XG4gICAgICAgIHZhciBsaXN0ZW5lcjtcbiAgICAgICAgdmFyIGk7XG4gICAgICAgIHZhciBrZXk7XG4gICAgICAgIHZhciByZXNwb25zZTtcblxuICAgICAgICBmb3IgKGtleSBpbiBsaXN0ZW5lcnMpIHtcbiAgICAgICAgICAgIGlmIChsaXN0ZW5lcnMuaGFzT3duUHJvcGVydHkoa2V5KSkge1xuICAgICAgICAgICAgICAgIGkgPSBsaXN0ZW5lcnNba2V5XS5sZW5ndGg7XG5cbiAgICAgICAgICAgICAgICB3aGlsZSAoaS0tKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIElmIHRoZSBsaXN0ZW5lciByZXR1cm5zIHRydWUgdGhlbiBpdCBzaGFsbCBiZSByZW1vdmVkIGZyb20gdGhlIGV2ZW50XG4gICAgICAgICAgICAgICAgICAgIC8vIFRoZSBmdW5jdGlvbiBpcyBleGVjdXRlZCBlaXRoZXIgd2l0aCBhIGJhc2ljIGNhbGwgb3IgYW4gYXBwbHkgaWYgdGhlcmUgaXMgYW4gYXJncyBhcnJheVxuICAgICAgICAgICAgICAgICAgICBsaXN0ZW5lciA9IGxpc3RlbmVyc1trZXldW2ldO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmIChsaXN0ZW5lci5vbmNlID09PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZUxpc3RlbmVyKGV2dCwgbGlzdGVuZXIubGlzdGVuZXIpO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2UgPSBsaXN0ZW5lci5saXN0ZW5lci5hcHBseSh0aGlzLCBhcmdzIHx8IFtdKTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2UgPT09IHRoaXMuX2dldE9uY2VSZXR1cm5WYWx1ZSgpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZUxpc3RlbmVyKGV2dCwgbGlzdGVuZXIubGlzdGVuZXIpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIEFsaWFzIG9mIGVtaXRFdmVudFxuICAgICAqL1xuICAgIHByb3RvLnRyaWdnZXIgPSBhbGlhcygnZW1pdEV2ZW50Jyk7XG5cbiAgICAvKipcbiAgICAgKiBTdWJ0bHkgZGlmZmVyZW50IGZyb20gZW1pdEV2ZW50IGluIHRoYXQgaXQgd2lsbCBwYXNzIGl0cyBhcmd1bWVudHMgb24gdG8gdGhlIGxpc3RlbmVycywgYXMgb3Bwb3NlZCB0byB0YWtpbmcgYSBzaW5nbGUgYXJyYXkgb2YgYXJndW1lbnRzIHRvIHBhc3Mgb24uXG4gICAgICogQXMgd2l0aCBlbWl0RXZlbnQsIHlvdSBjYW4gcGFzcyBhIHJlZ2V4IGluIHBsYWNlIG9mIHRoZSBldmVudCBuYW1lIHRvIGVtaXQgdG8gYWxsIGV2ZW50cyB0aGF0IG1hdGNoIGl0LlxuICAgICAqXG4gICAgICogQHBhcmFtIHtTdHJpbmd8UmVnRXhwfSBldnQgTmFtZSBvZiB0aGUgZXZlbnQgdG8gZW1pdCBhbmQgZXhlY3V0ZSBsaXN0ZW5lcnMgZm9yLlxuICAgICAqIEBwYXJhbSB7Li4uKn0gT3B0aW9uYWwgYWRkaXRpb25hbCBhcmd1bWVudHMgdG8gYmUgcGFzc2VkIHRvIGVhY2ggbGlzdGVuZXIuXG4gICAgICogQHJldHVybiB7T2JqZWN0fSBDdXJyZW50IGluc3RhbmNlIG9mIEV2ZW50RW1pdHRlciBmb3IgY2hhaW5pbmcuXG4gICAgICovXG4gICAgcHJvdG8uZW1pdCA9IGZ1bmN0aW9uIGVtaXQoZXZ0KSB7XG4gICAgICAgIHZhciBhcmdzID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuZW1pdEV2ZW50KGV2dCwgYXJncyk7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIFNldHMgdGhlIGN1cnJlbnQgdmFsdWUgdG8gY2hlY2sgYWdhaW5zdCB3aGVuIGV4ZWN1dGluZyBsaXN0ZW5lcnMuIElmIGFcbiAgICAgKiBsaXN0ZW5lcnMgcmV0dXJuIHZhbHVlIG1hdGNoZXMgdGhlIG9uZSBzZXQgaGVyZSB0aGVuIGl0IHdpbGwgYmUgcmVtb3ZlZFxuICAgICAqIGFmdGVyIGV4ZWN1dGlvbi4gVGhpcyB2YWx1ZSBkZWZhdWx0cyB0byB0cnVlLlxuICAgICAqXG4gICAgICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgbmV3IHZhbHVlIHRvIGNoZWNrIGZvciB3aGVuIGV4ZWN1dGluZyBsaXN0ZW5lcnMuXG4gICAgICogQHJldHVybiB7T2JqZWN0fSBDdXJyZW50IGluc3RhbmNlIG9mIEV2ZW50RW1pdHRlciBmb3IgY2hhaW5pbmcuXG4gICAgICovXG4gICAgcHJvdG8uc2V0T25jZVJldHVyblZhbHVlID0gZnVuY3Rpb24gc2V0T25jZVJldHVyblZhbHVlKHZhbHVlKSB7XG4gICAgICAgIHRoaXMuX29uY2VSZXR1cm5WYWx1ZSA9IHZhbHVlO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogRmV0Y2hlcyB0aGUgY3VycmVudCB2YWx1ZSB0byBjaGVjayBhZ2FpbnN0IHdoZW4gZXhlY3V0aW5nIGxpc3RlbmVycy4gSWZcbiAgICAgKiB0aGUgbGlzdGVuZXJzIHJldHVybiB2YWx1ZSBtYXRjaGVzIHRoaXMgb25lIHRoZW4gaXQgc2hvdWxkIGJlIHJlbW92ZWRcbiAgICAgKiBhdXRvbWF0aWNhbGx5LiBJdCB3aWxsIHJldHVybiB0cnVlIGJ5IGRlZmF1bHQuXG4gICAgICpcbiAgICAgKiBAcmV0dXJuIHsqfEJvb2xlYW59IFRoZSBjdXJyZW50IHZhbHVlIHRvIGNoZWNrIGZvciBvciB0aGUgZGVmYXVsdCwgdHJ1ZS5cbiAgICAgKiBAYXBpIHByaXZhdGVcbiAgICAgKi9cbiAgICBwcm90by5fZ2V0T25jZVJldHVyblZhbHVlID0gZnVuY3Rpb24gX2dldE9uY2VSZXR1cm5WYWx1ZSgpIHtcbiAgICAgICAgaWYgKHRoaXMuaGFzT3duUHJvcGVydHkoJ19vbmNlUmV0dXJuVmFsdWUnKSkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX29uY2VSZXR1cm5WYWx1ZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIEZldGNoZXMgdGhlIGV2ZW50cyBvYmplY3QgYW5kIGNyZWF0ZXMgb25lIGlmIHJlcXVpcmVkLlxuICAgICAqXG4gICAgICogQHJldHVybiB7T2JqZWN0fSBUaGUgZXZlbnRzIHN0b3JhZ2Ugb2JqZWN0LlxuICAgICAqIEBhcGkgcHJpdmF0ZVxuICAgICAqL1xuICAgIHByb3RvLl9nZXRFdmVudHMgPSBmdW5jdGlvbiBfZ2V0RXZlbnRzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZXZlbnRzIHx8ICh0aGlzLl9ldmVudHMgPSB7fSk7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIFJldmVydHMgdGhlIGdsb2JhbCB7QGxpbmsgRXZlbnRFbWl0dGVyfSB0byBpdHMgcHJldmlvdXMgdmFsdWUgYW5kIHJldHVybnMgYSByZWZlcmVuY2UgdG8gdGhpcyB2ZXJzaW9uLlxuICAgICAqXG4gICAgICogQHJldHVybiB7RnVuY3Rpb259IE5vbiBjb25mbGljdGluZyBFdmVudEVtaXR0ZXIgY2xhc3MuXG4gICAgICovXG4gICAgRXZlbnRFbWl0dGVyLm5vQ29uZmxpY3QgPSBmdW5jdGlvbiBub0NvbmZsaWN0KCkge1xuICAgICAgICBleHBvcnRzLkV2ZW50RW1pdHRlciA9IG9yaWdpbmFsR2xvYmFsVmFsdWU7XG4gICAgICAgIHJldHVybiBFdmVudEVtaXR0ZXI7XG4gICAgfTtcblxuICAgIC8vIEV4cG9zZSB0aGUgY2xhc3MgZWl0aGVyIHZpYSBBTUQsIENvbW1vbkpTIG9yIHRoZSBnbG9iYWwgb2JqZWN0XG4gICAgaWYgKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZCkge1xuICAgICAgICBkZWZpbmUoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIEV2ZW50RW1pdHRlcjtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGVsc2UgaWYgKHR5cGVvZiBtb2R1bGUgPT09ICdvYmplY3QnICYmIG1vZHVsZS5leHBvcnRzKXtcbiAgICAgICAgbW9kdWxlLmV4cG9ydHMgPSBFdmVudEVtaXR0ZXI7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBleHBvcnRzLkV2ZW50RW1pdHRlciA9IEV2ZW50RW1pdHRlcjtcbiAgICB9XG59LmNhbGwodGhpcykpO1xuIiwiKCBmdW5jdGlvbiggJCApIHtcblxuICAgIHZhciBPcmRlcmx5ID0gZnVuY3Rpb24oICRlbGVtZW50cywgb3B0aW9ucyApIHtcbiAgICAgICAgdGhpcy5fX2luaXQoICRlbGVtZW50cywgb3B0aW9ucyApO1xuICAgIH07XG5cbiAgICB2YXIgbyA9IE9yZGVybHksIHAgPSBvLnByb3RvdHlwZTtcblxuICAgIG8uY291bnRlciA9IDA7XG5cbiAgICAvLyAtLSBDb25zdHJ1Y3RvciAtLVxuXG4gICAgcC5fX2luaXQgPSBmdW5jdGlvbiggJGVsZW1lbnRzLCBvcHRpb25zICkge1xuICAgICAgICB0aGlzLiRlbGVtZW50cyA9ICRlbGVtZW50cztcbiAgICAgICAgdGhpcy5vcHRpb25zICAgPSAkLmV4dGVuZCgge30sIHRoaXMuZGVmYXVsdHMsIG9wdGlvbnMgKTtcbiAgICB9O1xuXG4gICAgcC5kZWZhdWx0cyA9IHtcbiAgICAgICAgcmVzZXRIZWlnaHQ6ICcnIC8vIGVnLiAnYXV0bycsICczNnB4JyAuLi5cbiAgICB9O1xuXG4gICAgLy8gLS0gRXZlbnQgSGFuZGxlcnMgLS1cblxuICAgIHAuYXR0YWNoID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIGlmICggdGhpcy5hdHRhY2hlZCA9PT0gdW5kZWZpbmVkICkge1xuICAgICAgICAgICAgJCggd2luZG93ICkub24oICdyZXNpemUnLCB0aGlzLmhhbmRsZXJzKCkucmVzaXplICk7XG5cbiAgICAgICAgICAgIHRoaXMuYXR0YWNoZWQgPSB0cnVlO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIHAuaGFuZGxlcnMgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIHRoYXQgPSB0aGlzO1xuXG4gICAgICAgIHJldHVybiB7IHJlc2l6ZTogZnVuY3Rpb24oIGUgKSB7XG4gICAgICAgICAgICB0aGF0Ll9lYWNoUm93KCBmdW5jdGlvbiggJGVsZW1lbnRzICkge1xuICAgICAgICAgICAgICAgIHRoYXQuX3Jlc2l6ZUVsZW1lbnRzKCAkZWxlbWVudHMgKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9fTtcbiAgICB9O1xuXG4gICAgLy8gLS0gUHJpdmF0ZSgtaXNoKSAtLVxuXG4gICAgcC5fY29sdW1uQ291bnQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIGxhc3RQb3MgPSAwLCBwb3MgPSAwLCBjb3VudCA9IDA7XG5cbiAgICAgICAgdGhpcy4kZWxlbWVudHMuZWFjaCggZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBwb3MgPSAkKCB0aGlzICkub2Zmc2V0KCkubGVmdCwgY291bnQgKz0gMTtcblxuICAgICAgICAgICAgaWYgKCBwb3MgPD0gbGFzdFBvcyAmJiBsYXN0UG9zICE9PSAwICkge1xuICAgICAgICAgICAgICAgIGNvdW50IC09IDE7IHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgbGFzdFBvcyA9IHBvcztcbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIGNvdW50O1xuICAgIH07XG5cbiAgICBwLl9lYWNoUm93ID0gZnVuY3Rpb24oIGNhbGxiYWNrICkge1xuICAgICAgICB2YXIgZCA9IHRoaXMuX2RpbWVuc2lvbnMoKTtcblxuICAgICAgICBmb3IgKCB2YXIgc3RhcnQsICRyb3csIGkgPSAwOyBpIDwgZC5yOyBpKysgKSB7XG4gICAgICAgICAgICBzdGFydCA9IGQuYyAqIGk7XG4gICAgICAgICAgICAkcm93ICA9IHRoaXMuJGVsZW1lbnRzLnNsaWNlKCBzdGFydCwgc3RhcnQgKyBkLmMgKTtcblxuICAgICAgICAgICAgY2FsbGJhY2soICRyb3csIGkgKTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICBwLl9kaW1lbnNpb25zID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBjb2x1bW5zID0gdGhpcy5fY29sdW1uQ291bnQoKVxuICAgICAgICAgICwgcm93cyAgICA9IE1hdGguY2VpbCggdGhpcy4kZWxlbWVudHMubGVuZ3RoIC8gY29sdW1ucyApO1xuXG4gICAgICAgIHJldHVybiB7IGM6IGNvbHVtbnMsIHI6IHJvd3MgfTtcbiAgICB9O1xuXG4gICAgcC5fcmVzaXplRWxlbWVudHMgPSBmdW5jdGlvbiggJGVsZW1lbnRzICkge1xuICAgICAgICB2YXIgaGVpZ2h0ICA9IHRoaXMuX21heEhlaWdodCggJGVsZW1lbnRzIClcbiAgICAgICAgICAsIG9wdGlvbnMgPSB0aGlzLm9wdGlvbnM7XG5cbiAgICAgICAgJGVsZW1lbnRzLmVhY2goIGZ1bmN0aW9uKCBpLCBlbGVtZW50ICkge1xuICAgICAgICAgICAgJCggZWxlbWVudCApLmNzcyggJ2hlaWdodCcsIGhlaWdodCApO1xuICAgICAgICAgICAgJCggZWxlbWVudCApLnRyaWdnZXIoICdvcmRlcmx5LnJlc2l6ZScsIFtcbiAgICAgICAgICAgICAgICBlbGVtZW50XG4gICAgICAgICAgICAgICwgaGVpZ2h0XG4gICAgICAgICAgICAgICwgaVxuICAgICAgICAgICAgICAsICRlbGVtZW50cy5sZW5ndGhcbiAgICAgICAgICAgICAgLCBvcHRpb25zXG4gICAgICAgICAgICBdKTtcbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgIHAuX21heEhlaWdodCA9IGZ1bmN0aW9uKCAkZWxlbWVudHMgKSB7XG4gICAgICAgIHZhciB2YWx1ZSwgY3VycmVudCwgbWF4ID0gMCwgb3B0aW9ucyA9IHRoaXMub3B0aW9ucywgYm94O1xuXG4gICAgICAgICRlbGVtZW50cy5lYWNoKCBmdW5jdGlvbiggaSwgZWxlbWVudCApIHtcbiAgICAgICAgICAgICQoIGVsZW1lbnQgKS50cmlnZ2VyKCAnb3JkZXJseS5yZXNldCcsIFtcbiAgICAgICAgICAgICAgICBlbGVtZW50XG4gICAgICAgICAgICAgICwgb3B0aW9ucy5yZXNldEhlaWdodFxuICAgICAgICAgICAgICAsIGlcbiAgICAgICAgICAgICAgLCAkZWxlbWVudHMubGVuZ3RoXG4gICAgICAgICAgICAgICwgb3B0aW9uc1xuICAgICAgICAgICAgXSk7XG5cbiAgICAgICAgICAgICQoIGVsZW1lbnQgKS5jc3MoICdoZWlnaHQnLCBvcHRpb25zLnJlc2V0SGVpZ2h0ICk7XG4gICAgICAgICAgICBib3ggICAgID0gZWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgICAgIGN1cnJlbnQgPSBib3guYm90dG9tIC0gYm94LnRvcDtcblxuICAgICAgICAgICAgaWYgKCBjdXJyZW50ID4gbWF4ICkge1xuICAgICAgICAgICAgICAgIG1heCA9IGN1cnJlbnQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHZhbHVlID0gTWF0aC5yb3VuZCggbWF4ICkudG9TdHJpbmcoKTsgLy8gYnJvd3NlciBjb25zaXN0ZW50IHJvdW5kaW5nXG5cbiAgICAgICAgcmV0dXJuIHZhbHVlICs9ICdweCc7XG4gICAgfTtcblxuICAgIC8vIC0tIGpRdWVyeSBQbHVnaW4gLS1cblxuICAgIHZhciBnID0ge307XG5cbiAgICBnLl9kZWxlZ2F0ZSA9IGZ1bmN0aW9uKCBvcHRpb25zICkge1xuICAgICAgICB2YXIgbWV0aG9kID0gJ18nICsgKCBvcHRpb25zICYmIG9wdGlvbnMubWV0aG9kIHx8ICdyZWdpc3RlcicgKVxuICAgICAgICAgICwgbSAgICAgID0gZ1ttZXRob2RdO1xuXG4gICAgICAgIG0uY2FsbCggdGhpcywgb3B0aW9ucyApO1xuICAgIH07XG5cbiAgICAvLyBDYWxsIGZvciBlYWNoIHNwZWNpZmljIGNvbGxlY3Rpb24gb2YgZWxlbWVudHMgdG8gYWxpZ24gcGVyIHJvdy5cblxuICAgIGcuX3JlZ2lzdGVyID0gZnVuY3Rpb24oIG9wdGlvbnMgKSB7XG4gICAgICAgIHZhciBvID0gbmV3IE9yZGVybHkoIHRoaXMsIG9wdGlvbnMgKTtcblxuICAgICAgICBvLmF0dGFjaCgpO1xuICAgICAgICBvLmhhbmRsZXJzKCkucmVzaXplKCk7XG4gICAgfTtcblxuICAgIC8vIENhbGwgb24gYSBjb2xsZWN0aW9uIG9mIHBhcmVudCBjb250YWluZXJzLiBFYWNoIGRpcmVjdCBjaGlsZCBlbGVtZW50XG4gICAgLy8gd2lsbCBiZSBnaXZlbiBvcmRlcmx5KCkuXG5cbiAgICBnLl9jaGlsZHJlbiA9IGZ1bmN0aW9uKCBvcHRpb25zICkge1xuICAgICAgICB2YXIgbGVuZ3RoICA9IHRoaXNbMF0uY2hpbGRyZW4ubGVuZ3RoXG4gICAgICAgICAgLCBjb3VudGVyID0gby5jb3VudGVyKys7IC8vIGVuc3VyZXMgdW5pcXVlIHNlbGVjdG9yc1xuXG4gICAgICAgIGcuX2NoaWxkcmVuRGF0YS5jYWxsKCB0aGlzLCBjb3VudGVyICk7XG4gICAgICAgIGcuX3JlZ2lzdGVyQ2hpbGRyZW4oIGxlbmd0aCwgY291bnRlciwgb3B0aW9ucyApO1xuICAgICAgICBnLl9yZWdpc3Rlci5jYWxsKCB0aGlzLCBvcHRpb25zICk7XG4gICAgfTtcblxuICAgIGcuX2NoaWxkcmVuRGF0YSA9IGZ1bmN0aW9uKCBjb3VudGVyICkge1xuICAgICAgICB0aGlzLmVhY2goIGZ1bmN0aW9uKCBpLCBlbGVtZW50ICkge1xuICAgICAgICAgICAgJCggZWxlbWVudC5jaGlsZHJlbiApLmVhY2goIGZ1bmN0aW9uKCBpLCBjaGlsZCApIHtcbiAgICAgICAgICAgICAgICAkKCBjaGlsZCApLmF0dHIoICdkYXRhLW9yZGVybHknLCBjb3VudGVyICsgJzonICsgaSApO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICBnLl9yZWdpc3RlckNoaWxkcmVuID0gZnVuY3Rpb24oIGxlbmd0aCwgY291bnRlciwgb3B0aW9ucyApIHtcbiAgICAgICAgZm9yICggdmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpKysgKSB7XG4gICAgICAgICAgICBnLl9yZWdpc3Rlci5jYWxsKCBnLl9maW5kKCBjb3VudGVyLCBpICksIG9wdGlvbnMgKTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICBnLl9maW5kID0gZnVuY3Rpb24oIGNvdW50ZXIsIGkgKSB7XG4gICAgICAgIHJldHVybiAkKCAnW2RhdGEtb3JkZXJseT1cIicgKyBjb3VudGVyICsgJzonICsgaSArICdcIl0nICk7XG4gICAgfTtcblxuICAgIC8vIC0tLVxuXG4gICAgJC5mbi5vcmRlcmx5ID0gZnVuY3Rpb24oIG9wdGlvbnMgKSB7XG4gICAgICAgIGlmICggdGhpcy5sZW5ndGggPiAwICkge1xuICAgICAgICAgICAgZy5fZGVsZWdhdGUuY2FsbCggdGhpcywgb3B0aW9ucyApO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcblxufSkoIGpRdWVyeSApO1xuIiwidmFyIGltYWdlc0xvYWRlZCA9IHJlcXVpcmUoJ2ltYWdlc2xvYWRlZCcpO1xuXG4oZnVuY3Rpb24oJCkge1xuICBcbiAgLyoqKlxuICAgKiBNYWluXG4gICAqKiovXG4gICBcbiAgdmFyIFVuaWZvcm1UaHVtYnMgPSBmdW5jdGlvbigkZWxlLCBzZXR0aW5ncyl7XG4gICAgdGhpcy4kZWxlID0gJGVsZTtcbiAgICB0aGlzLnNldHRpbmdzID0gc2V0dGluZ3M7XG4gICAgXG4gICAgdGhpcy5mb3JtYXRlciA9IG5ldyBVbmlmb3JtVGh1bWJzRm9ybWF0ZXIodGhpcy4kZWxlLCB0aGlzLnNldHRpbmdzKTtcbiAgICB0aGlzLmZpdHRlciA9IG5ldyBVbmlmb3JtVGh1bWJzRml0dGVyKHRoaXMuJGVsZSwgdGhpcy5zZXR0aW5ncyk7XG4gICAgdGhpcy5pbWFnZUxvYWRlZCA9IGltYWdlc0xvYWRlZCh0aGlzLiRlbGUpO1xuICAgIFxuICAgIHRoaXMuYWRkRXZlbnRIYW5kbGVycygpO1xuICAgIHRoaXMuaGlkZUltYWdlcygpO1xuICB9O1xuICBcbiAgVW5pZm9ybVRodW1icy5wcm90b3R5cGUuYWRkRXZlbnRIYW5kbGVycyA9IGZ1bmN0aW9uKCl7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIFxuICAgIHRoaXMuaW1hZ2VMb2FkZWQub24oJ2RvbmUnLCBmdW5jdGlvbigpe1xuICAgICAgc2VsZi5mb3JtYXRlci5zZXRJbWFnZUZvcm1hdCgpO1xuICAgICAgc2VsZi5maXR0ZXIuc2V0SW1hZ2VGaXQoKTtcbiAgICAgIHNlbGYuc2hvd0ltYWdlcygpO1xuICAgICAgc2VsZi4kZWxlLnRyaWdnZXIoJ3V0X2ltYWdlTG9hZGVkJyk7XG4gICAgfSk7XG4gICAgXG4gICAgLy8gcmVzaXplIGltYWdlcyBvbiB3aW5kb3cgcmVzaXplXG4gICAgdmFyIHRpbWVvdXQ7XG4gICAgJCh3aW5kb3cpLnJlc2l6ZShmdW5jdGlvbigpIHtcbiAgICAgIGlmICh0aW1lb3V0KSB7XG4gICAgICAgIGNsZWFyVGltZW91dCh0aW1lb3V0KTtcbiAgICAgIH1cbiAgICAgIHRpbWVvdXQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICBzZWxmLmZvcm1hdGVyLnNldEltYWdlRm9ybWF0KCk7XG4gICAgICAgIHNlbGYuZml0dGVyLnNldEltYWdlRml0KCk7XG4gICAgICB9LCAxMDApO1xuICAgIH0pO1xuICB9O1xuICBcbiAgVW5pZm9ybVRodW1icy5wcm90b3R5cGUuaGlkZUltYWdlcyA9IGZ1bmN0aW9uKCl7XG4gICAgdGhpcy4kZWxlLmNzcyh7XG4gICAgICBvcGFjaXR5OiAwLFxuICAgICAgb3ZlcmZsb3c6ICdoaWRkZW4nXG4gICAgfSk7XG4gIH07XG4gIFxuICBVbmlmb3JtVGh1bWJzLnByb3RvdHlwZS5zaG93SW1hZ2VzID0gZnVuY3Rpb24oKXtcbiAgICB0aGlzLiRlbGUuZmFkZVRvKDkwMCwgMSk7XG4gIH07XG4gIFxuICAvKioqXG4gICAqIEltYWdlIGZvcm1hdGVyXG4gICAqKiovXG4gICBcbiAgdmFyIFVuaWZvcm1UaHVtYnNGb3JtYXRlciA9IGZ1bmN0aW9uKCR3cmFwcGVyLCBzZXR0aW5ncyl7XG4gICAgdGhpcy4kd3JhcHBlciA9ICR3cmFwcGVyO1xuICAgIHRoaXMuc2V0dGluZ3MgPSBzZXR0aW5ncztcbiAgICB0aGlzLnJhdGlvID0gdGhpcy5nZXRSYXRpbygpO1xuICB9O1xuICBcbiAgVW5pZm9ybVRodW1ic0Zvcm1hdGVyLnByb3RvdHlwZS5zZXRJbWFnZUZvcm1hdCA9IGZ1bmN0aW9uKCl7XG4gICAgdmFyIHdpZHRoUmF0aW8gPSB0aGlzLiR3cmFwcGVyLndpZHRoKCkgLyB0aGlzLnJhdGlvLndpZHRoO1xuICAgIHZhciBoZWlnaHRSYXRpbyA9IHdpZHRoUmF0aW8gKiB0aGlzLnJhdGlvLmhlaWdodDtcbiAgICB0aGlzLiR3cmFwcGVyLmhlaWdodChoZWlnaHRSYXRpbyk7XG4gIH07XG4gIFxuICBVbmlmb3JtVGh1bWJzRm9ybWF0ZXIucHJvdG90eXBlLmdldFJhdGlvID0gZnVuY3Rpb24oKXtcbiAgICB2YXIgcmF0aW9TdHIgPSB0aGlzLl9nZXRSYXRpb1N0cmluZygpO1xuICAgIHJldHVybiB0aGlzLl9nZXRSYXRpb0Zyb21TdHJpbmcocmF0aW9TdHIpO1xuICB9O1xuICBcbiAgVW5pZm9ybVRodW1ic0Zvcm1hdGVyLnByb3RvdHlwZS5fZ2V0UmF0aW9TdHJpbmcgPSBmdW5jdGlvbigpe1xuICAgIHN3aXRjaCAodGhpcy5zZXR0aW5ncy5mb3JtYXQpIHtcbiAgICAgIGNhc2UgJ3NxdWFyZSc6XG4gICAgICAgIHJldHVybiAnMToxJztcbiAgICAgIGNhc2UgJ2xhbmRzY2FwZSc6XG4gICAgICAgIHJldHVybiB0aGlzLnNldHRpbmdzLmxhbmRzY2FwZVJhdGlvO1xuICAgICAgY2FzZSAncG9ydHJhaXQnOlxuICAgICAgICByZXR1cm4gdGhpcy5zZXR0aW5ncy5wb3J0cmFpdFJhdGlvO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIHRoaXMuc2V0dGluZ3MucmF0aW87XG4gICAgfVxuICB9O1xuICBcbiAgVW5pZm9ybVRodW1ic0Zvcm1hdGVyLnByb3RvdHlwZS5fZ2V0UmF0aW9Gcm9tU3RyaW5nID0gZnVuY3Rpb24ocmF0aW9TdHIpe1xuICAgIHZhciByYXRpb0FyciA9IHJhdGlvU3RyLnNwbGl0KCc6Jyk7XG4gICAgcmV0dXJuIHtcbiAgICAgICB3aWR0aDogcmF0aW9BcnJbMF0sXG4gICAgICBoZWlnaHQ6IHJhdGlvQXJyWzFdXG4gICAgfTtcbiAgfTtcbiAgXG4gIC8qKipcbiAgICogSW1hZ2UgZml0dGVyXG4gICAqKiovXG4gIFxuICB2YXIgVW5pZm9ybVRodW1ic0ZpdHRlciA9IGZ1bmN0aW9uKCR3cmFwcGVyLCBzZXR0aW5ncyl7XG4gICAgdGhpcy4kd3JhcHBlciA9ICR3cmFwcGVyO1xuICAgIHRoaXMuJGltYWdlID0gdGhpcy4kd3JhcHBlci5maW5kKCdpbWcnKTtcbiAgICB0aGlzLnNldHRpbmdzID0gc2V0dGluZ3M7XG4gICAgdGhpcy53cmFwcGVyUmF0aW87XG4gICAgdGhpcy5pbWFnZVJhdGlvO1xuICAgIHRoaXMuaW1hZ2VOYXR1cmFsV2lkdGg7XG4gICAgdGhpcy5pbWFnZU5hdHVyYWxIZWlnaHQ7XG4gIH07XG4gIFxuICBVbmlmb3JtVGh1bWJzRml0dGVyLnByb3RvdHlwZS5zZXRJbWFnZUZpdCA9IGZ1bmN0aW9uKCl7XG4gICAgdGhpcy5fcmVzZXRJbWFnZUNTUygpO1xuICAgIHN3aXRjaCAodGhpcy5zZXR0aW5ncy5maXQpIHtcbiAgICAgIGNhc2UgJ2Nyb3AnOlxuICAgICAgICB0aGlzLl9jcm9wSW1hZ2UoKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdzY2FsZSc6XG4gICAgICAgIHRoaXMuX3NjYWxlSW1hZ2UoKTtcbiAgICAgICAgYnJlYWs7XG4gICAgfVxuICAgIHRoaXMuX2FsaWduSW1hZ2UoKTtcbiAgfTtcbiAgXG4gIFVuaWZvcm1UaHVtYnNGaXR0ZXIucHJvdG90eXBlLl9jcm9wSW1hZ2UgPSBmdW5jdGlvbigpe1xuICAgIGlmKHRoaXMuX2ltYWdlUmF0aW8oKSA+IHRoaXMuX3dyYXBwZXJSYXRpbygpKXtcbiAgICAgIHRoaXMuX2ZpdEhvcml6b250YWwoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fZml0VmVydGljYWwoKTtcbiAgICB9XG4gIH07XG4gIFxuICBVbmlmb3JtVGh1bWJzRml0dGVyLnByb3RvdHlwZS5fc2NhbGVJbWFnZSA9IGZ1bmN0aW9uKCl7XG4gICAgaWYodGhpcy5faW1hZ2VSYXRpbygpID4gdGhpcy5fd3JhcHBlclJhdGlvKCkpe1xuICAgICAgdGhpcy5fZml0VmVydGljYWwoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fZml0SG9yaXpvbnRhbCgpO1xuICAgIH1cbiAgfTtcbiAgXG4gIFVuaWZvcm1UaHVtYnNGaXR0ZXIucHJvdG90eXBlLl9maXRIb3Jpem9udGFsID0gZnVuY3Rpb24oKSB7XG4gICAgaWYgKHRoaXMuX2dldE5hdHVyYWxIZWlnaHQodGhpcy4kaW1hZ2UpID49IHRoaXMuJHdyYXBwZXIuaGVpZ2h0KCkpIHtcbiAgICAgIHRoaXMuJGltYWdlLmhlaWdodCh0aGlzLiR3cmFwcGVyLmhlaWdodCgpKTtcbiAgICB9XG4gIH07XG4gIFxuICBVbmlmb3JtVGh1bWJzRml0dGVyLnByb3RvdHlwZS5fZml0VmVydGljYWwgPSBmdW5jdGlvbigpIHtcbiAgICBpZiAodGhpcy5fZ2V0TmF0dXJhbFdpZHRoKHRoaXMuJGltYWdlKSA+PSB0aGlzLiR3cmFwcGVyLndpZHRoKCkpIHtcbiAgICAgIHRoaXMuJGltYWdlLndpZHRoKHRoaXMuJHdyYXBwZXIud2lkdGgoKSk7XG4gICAgfVxuICB9O1xuXG4gIFVuaWZvcm1UaHVtYnNGaXR0ZXIucHJvdG90eXBlLl9pbWFnZVJhdGlvID0gZnVuY3Rpb24oKXtcbiAgICAvLyBjYWNoZSB0aGUgaW1hZ2VzIHJhdGlvIGJlY2F1c2Ugd2UgZG9uJ3QgbmVlZCB0byBjYWxjdWxhdGUgaXQgZXZlcnkgdGltZVxuICAgIHRoaXMuaW1hZ2VSYXRpbyA9IHRoaXMuaW1hZ2VSYXRpbyB8fCB0aGlzLl9nZXROYXR1cmFsV2lkdGgodGhpcy4kaW1hZ2UpIC8gdGhpcy5fZ2V0TmF0dXJhbEhlaWdodCh0aGlzLiRpbWFnZSk7XG4gICAgcmV0dXJuIHRoaXMuaW1hZ2VSYXRpbztcbiAgfTtcblxuICBVbmlmb3JtVGh1bWJzRml0dGVyLnByb3RvdHlwZS5fd3JhcHBlclJhdGlvID0gZnVuY3Rpb24oKXtcbiAgICAvLyBjYWNoZSB0aGUgd3JhcHBlcnMgcmF0aW8gYmVjYXVzZSB3ZSBkb24ndCBuZWVkIHRvIGNhbGN1bGF0ZSBpdCBldmVyeSB0aW1lXG4gICAgdGhpcy53cmFwcGVyUmF0aW8gPSB0aGlzLndyYXBwZXJSYXRpbyB8fCB0aGlzLiR3cmFwcGVyLndpZHRoKCkgLyB0aGlzLiR3cmFwcGVyLmhlaWdodCgpO1xuICAgIHJldHVybiB0aGlzLndyYXBwZXJSYXRpbztcbiAgfTtcbiAgXG4gIFVuaWZvcm1UaHVtYnNGaXR0ZXIucHJvdG90eXBlLl9hbGlnbkltYWdlID0gZnVuY3Rpb24oKXtcbiAgICB2YXIgc3R5bGUgPSB7fTtcbiAgICBzdHlsZS5tYXJnaW5MZWZ0ID0gKHRoaXMuJHdyYXBwZXIud2lkdGgoKSAtIHRoaXMuJGltYWdlLndpZHRoKCkpIC8gMjtcbiAgICBzd2l0Y2ggKHRoaXMuc2V0dGluZ3MuYWxpZ24pIHtcbiAgICAgIGNhc2UgJ3RvcCc6XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnbWlkZGxlJzpcbiAgICAgICAgc3R5bGUubWFyZ2luVG9wID0gKHRoaXMuJHdyYXBwZXIuaGVpZ2h0KCkgLSB0aGlzLiRpbWFnZS5oZWlnaHQoKSkgLyAyO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ2JvdHRvbSc6XG4gICAgICAgIHN0eWxlLm1hcmdpblRvcCA9IHRoaXMuJHdyYXBwZXIuaGVpZ2h0KCkgLSB0aGlzLiRpbWFnZS5oZWlnaHQoKTtcbiAgICAgICAgYnJlYWs7XG4gICAgfVxuICAgIHRoaXMuJGltYWdlLmNzcyhzdHlsZSk7XG4gIH07XG4gIFxuICBVbmlmb3JtVGh1bWJzRml0dGVyLnByb3RvdHlwZS5fZ2V0TmF0dXJhbEhlaWdodCA9IGZ1bmN0aW9uKCRpbWFnZSl7XG4gICAgaWYgKCF0aGlzLmltYWdlTmF0dXJhbEhlaWdodCkge1xuICAgICAgaWYgKCRpbWFnZS5wcm9wKCduYXR1cmFsSGVpZ2h0JykpIHtcbiAgICAgICAgdGhpcy5pbWFnZU5hdHVyYWxIZWlnaHQgPSAkaW1hZ2UucHJvcCgnbmF0dXJhbEhlaWdodCcpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5pbWFnZU5hdHVyYWxIZWlnaHQgPSB0aGlzLl9nZXROYXR1cmFsU2l6ZSgkaW1hZ2UpLmhlaWdodDtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuaW1hZ2VOYXR1cmFsSGVpZ2h0O1xuICB9O1xuICBcbiAgVW5pZm9ybVRodW1ic0ZpdHRlci5wcm90b3R5cGUuX2dldE5hdHVyYWxXaWR0aCA9IGZ1bmN0aW9uKCRpbWFnZSl7XG4gICAgaWYgKCF0aGlzLmltYWdlTmF0dXJhbFdpZHRoKSB7XG4gICAgICBpZiAoJGltYWdlLnByb3AoJ25hdHVyYWxXaWR0aCcpKSB7XG4gICAgICAgIHRoaXMuaW1hZ2VOYXR1cmFsV2lkdGggPSAkaW1hZ2UucHJvcCgnbmF0dXJhbFdpZHRoJyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLmltYWdlTmF0dXJhbFdpZHRoID0gdGhpcy5fZ2V0TmF0dXJhbFNpemUoJGltYWdlKS53aWR0aDtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuaW1hZ2VOYXR1cmFsV2lkdGg7XG4gIH07XG4gIFxuICBVbmlmb3JtVGh1bWJzRml0dGVyLnByb3RvdHlwZS5fZ2V0TmF0dXJhbFNpemUgPSBmdW5jdGlvbigkaW1hZ2Upe1xuICAgIGlmICgkaW1hZ2UucHJvcCgnc3JjJykpIHtcbiAgICAgIHZhciBpbWcgPSBuZXcgSW1hZ2UoKTtcbiAgICAgIGltZy5zcmMgPSAkaW1hZ2UucHJvcCgnc3JjJyk7XG4gICAgICByZXR1cm4geyB3aWR0aDogaW1nLndpZHRoLCBoZWlnaHQ6IGltZy5oZWlnaHQgfTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfTtcbiAgXG4gIFVuaWZvcm1UaHVtYnNGaXR0ZXIucHJvdG90eXBlLl9yZXNldEltYWdlQ1NTID0gZnVuY3Rpb24oKXtcbiAgICB0aGlzLiRpbWFnZS5jc3Moe1xuICAgICAgbWF4V2lkdGg6ICdub25lJyxcbiAgICAgIHdpZHRoOiAnYXV0bycsXG4gICAgICBoZWlnaHQ6ICdhdXRvJ1xuICAgIH0pO1xuICB9O1xuXG4gIC8qKipcbiAgICogalF1ZXJ5LWlmeVxuICAgKioqL1xuICAgXG4gIHZhciB0aHVtYm5haWxDb21wbGV0ZUNvdW50ID0gMDtcbiAgdmFyIGludm9rZUZpbmFsVHJpZ2dlciA9IGZ1bmN0aW9uKHNlbGYpe1xuICAgIHRodW1ibmFpbENvbXBsZXRlQ291bnQrKztcbiAgICBpZiAodGh1bWJuYWlsQ29tcGxldGVDb3VudCA9PT0gc2VsZi5sZW5ndGgpIHtcbiAgICAgICQoc2VsZikubGFzdCgpLnRyaWdnZXIoJ3V0X2NvbXBsZXRlJyk7XG4gICAgfVxuICB9O1xuICAgXG4gICQuZm4udW5pZm9ybV90aHVtYm5haWxzID0gZnVuY3Rpb24oIG9wdGlvbnMgKSB7XG4gICAgLy8gY29sbGVjdCBzZXR0aW5nc1xuICAgIHZhciBzZXR0aW5ncyA9ICQuZXh0ZW5kKCB7fSwgJC5mbi51bmlmb3JtX3RodW1ibmFpbHMuZGVmYXVsdHMsIG9wdGlvbnMgKTtcbiAgICAvLyBidWlsZCBwbHVnaW5cbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgcmV0dXJuIHNlbGYuZWFjaChmdW5jdGlvbigpe1xuICAgICAgdmFyICRlbGUgPSAkKHRoaXMpO1xuICAgICAgJGVsZS5kYXRhKCdfdW5pZm9ybV90aHVtYm5haWxzJywgbmV3IFVuaWZvcm1UaHVtYnMoJGVsZSwgc2V0dGluZ3MpKTtcbiAgICAgICRlbGUub24oJ3V0X2ltYWdlTG9hZGVkJywgZnVuY3Rpb24oKXtcbiAgICAgICAgaW52b2tlRmluYWxUcmlnZ2VyKHNlbGYpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH07XG4gIFxuICAvLyBEZWZhdWx0IHNldHRpbmdzXG4gICQuZm4udW5pZm9ybV90aHVtYm5haWxzLmRlZmF1bHRzID0ge1xuICAgICAgICAgICAgICAgZml0OiAnY3JvcCcsICAgLy8gY3JvcHxzY2FsZVxuICAgICAgICAgICAgIHJhdGlvOiAnMToxJywgICAgLy8gYXNwZWN0IHJhdGlvIGZvciBpbWFnZSBjb250YWluZXJcbiAgICAgICAgICAgIGZvcm1hdDogJ3JhdGlvJywgIC8vIHJhdGlvfHNxdWFyZXxsYW5kc2NhcGV8cG9ydHJhaXRcbiAgICAgICAgICAgICBhbGlnbjogJ21pZGRsZScsIC8vIHRvcHxtaWRkbGV8Ym90dG9tXG4gICAgbGFuZHNjYXBlUmF0aW86ICc0OjMnLCAgICAvLyBkZWZhdWx0IHJhdGlvIGZvciBsYW5kc2NhcGVcbiAgICAgcG9ydHJhaXRSYXRpbzogJzM6NCcgICAgIC8vIGRlZmF1bHQgcmF0aW8gZm9yIHBvcnRyYWl0XG4gIH07XG5cbn0oalF1ZXJ5KSk7IiwiLypcXFxufCp8XG58KnwgIDo6IGNvb2tpZXMuanMgOjpcbnwqfFxufCp8ICBBIGNvbXBsZXRlIGNvb2tpZXMgcmVhZGVyL3dyaXRlciBmcmFtZXdvcmsgd2l0aCBmdWxsIHVuaWNvZGUgc3VwcG9ydC5cbnwqfFxufCp8ICBSZXZpc2lvbiAjMSAtIFNlcHRlbWJlciA0LCAyMDE0XG58KnxcbnwqfCAgaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL2RvY3VtZW50LmNvb2tpZVxufCp8ICBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9Vc2VyOmZ1c2lvbmNoZXNzXG58KnxcbnwqfCAgVGhpcyBmcmFtZXdvcmsgaXMgcmVsZWFzZWQgdW5kZXIgdGhlIEdOVSBQdWJsaWMgTGljZW5zZSwgdmVyc2lvbiAzIG9yIGxhdGVyLlxufCp8ICBodHRwOi8vd3d3LmdudS5vcmcvbGljZW5zZXMvZ3BsLTMuMC1zdGFuZGFsb25lLmh0bWxcbnwqfFxufCp8ICBTeW50YXhlczpcbnwqfFxufCp8ICAqIGRvY0Nvb2tpZXMuc2V0SXRlbShuYW1lLCB2YWx1ZVssIGVuZFssIHBhdGhbLCBkb21haW5bLCBzZWN1cmVdXV1dKVxufCp8ICAqIGRvY0Nvb2tpZXMuZ2V0SXRlbShuYW1lKVxufCp8ICAqIGRvY0Nvb2tpZXMucmVtb3ZlSXRlbShuYW1lWywgcGF0aFssIGRvbWFpbl1dKVxufCp8ICAqIGRvY0Nvb2tpZXMuaGFzSXRlbShuYW1lKVxufCp8ICAqIGRvY0Nvb2tpZXMua2V5cygpXG58KnxcblxcKi9cblxudmFyIGRvY0Nvb2tpZXMgPSB7XG4gIGdldEl0ZW06IGZ1bmN0aW9uIChzS2V5KSB7XG4gICAgaWYgKCFzS2V5KSB7IHJldHVybiBudWxsOyB9XG4gICAgcmV0dXJuIGRlY29kZVVSSUNvbXBvbmVudChkb2N1bWVudC5jb29raWUucmVwbGFjZShuZXcgUmVnRXhwKFwiKD86KD86XnwuKjspXFxcXHMqXCIgKyBlbmNvZGVVUklDb21wb25lbnQoc0tleSkucmVwbGFjZSgvW1xcLVxcLlxcK1xcKl0vZywgXCJcXFxcJCZcIikgKyBcIlxcXFxzKlxcXFw9XFxcXHMqKFteO10qKS4qJCl8Xi4qJFwiKSwgXCIkMVwiKSkgfHwgbnVsbDtcbiAgfSxcbiAgc2V0SXRlbTogZnVuY3Rpb24gKHNLZXksIHNWYWx1ZSwgdkVuZCwgc1BhdGgsIHNEb21haW4sIGJTZWN1cmUpIHtcbiAgICBpZiAoIXNLZXkgfHwgL14oPzpleHBpcmVzfG1heFxcLWFnZXxwYXRofGRvbWFpbnxzZWN1cmUpJC9pLnRlc3Qoc0tleSkpIHsgcmV0dXJuIGZhbHNlOyB9XG4gICAgdmFyIHNFeHBpcmVzID0gXCJcIjtcbiAgICBpZiAodkVuZCkge1xuICAgICAgc3dpdGNoICh2RW5kLmNvbnN0cnVjdG9yKSB7XG4gICAgICAgIGNhc2UgTnVtYmVyOlxuICAgICAgICAgIHNFeHBpcmVzID0gdkVuZCA9PT0gSW5maW5pdHkgPyBcIjsgZXhwaXJlcz1GcmksIDMxIERlYyA5OTk5IDIzOjU5OjU5IEdNVFwiIDogXCI7IG1heC1hZ2U9XCIgKyB2RW5kO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFN0cmluZzpcbiAgICAgICAgICBzRXhwaXJlcyA9IFwiOyBleHBpcmVzPVwiICsgdkVuZDtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBEYXRlOlxuICAgICAgICAgIHNFeHBpcmVzID0gXCI7IGV4cGlyZXM9XCIgKyB2RW5kLnRvVVRDU3RyaW5nKCk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuICAgIGRvY3VtZW50LmNvb2tpZSA9IGVuY29kZVVSSUNvbXBvbmVudChzS2V5KSArIFwiPVwiICsgZW5jb2RlVVJJQ29tcG9uZW50KHNWYWx1ZSkgKyBzRXhwaXJlcyArIChzRG9tYWluID8gXCI7IGRvbWFpbj1cIiArIHNEb21haW4gOiBcIlwiKSArIChzUGF0aCA/IFwiOyBwYXRoPVwiICsgc1BhdGggOiBcIlwiKSArIChiU2VjdXJlID8gXCI7IHNlY3VyZVwiIDogXCJcIik7XG4gICAgcmV0dXJuIHRydWU7XG4gIH0sXG4gIHJlbW92ZUl0ZW06IGZ1bmN0aW9uIChzS2V5LCBzUGF0aCwgc0RvbWFpbikge1xuICAgIGlmICghdGhpcy5oYXNJdGVtKHNLZXkpKSB7IHJldHVybiBmYWxzZTsgfVxuICAgIGRvY3VtZW50LmNvb2tpZSA9IGVuY29kZVVSSUNvbXBvbmVudChzS2V5KSArIFwiPTsgZXhwaXJlcz1UaHUsIDAxIEphbiAxOTcwIDAwOjAwOjAwIEdNVFwiICsgKHNEb21haW4gPyBcIjsgZG9tYWluPVwiICsgc0RvbWFpbiA6IFwiXCIpICsgKHNQYXRoID8gXCI7IHBhdGg9XCIgKyBzUGF0aCA6IFwiXCIpO1xuICAgIHJldHVybiB0cnVlO1xuICB9LFxuICBoYXNJdGVtOiBmdW5jdGlvbiAoc0tleSkge1xuICAgIGlmICghc0tleSkgeyByZXR1cm4gZmFsc2U7IH1cbiAgICByZXR1cm4gKG5ldyBSZWdFeHAoXCIoPzpefDtcXFxccyopXCIgKyBlbmNvZGVVUklDb21wb25lbnQoc0tleSkucmVwbGFjZSgvW1xcLVxcLlxcK1xcKl0vZywgXCJcXFxcJCZcIikgKyBcIlxcXFxzKlxcXFw9XCIpKS50ZXN0KGRvY3VtZW50LmNvb2tpZSk7XG4gIH0sXG4gIGtleXM6IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgYUtleXMgPSBkb2N1bWVudC5jb29raWUucmVwbGFjZSgvKCg/Ol58XFxzKjspW15cXD1dKykoPz07fCQpfF5cXHMqfFxccyooPzpcXD1bXjtdKik/KD86XFwxfCQpL2csIFwiXCIpLnNwbGl0KC9cXHMqKD86XFw9W147XSopPztcXHMqLyk7XG4gICAgZm9yICh2YXIgbkxlbiA9IGFLZXlzLmxlbmd0aCwgbklkeCA9IDA7IG5JZHggPCBuTGVuOyBuSWR4KyspIHsgYUtleXNbbklkeF0gPSBkZWNvZGVVUklDb21wb25lbnQoYUtleXNbbklkeF0pOyB9XG4gICAgcmV0dXJuIGFLZXlzO1xuICB9XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IGRvY0Nvb2tpZXM7IiwiLypcbiAgVE9ETzogbWFrZSBwcm90b3R5cGxlIGluaGVyaXRlbmNlXG4qL1xuXG52YXIgRGF0YU1vZGVsID0gZnVuY3Rpb24gKG9iaiwgcHJvcGVydGllcykge1xuICB0aGlzLm9iaiA9IG9iajtcbiAgdGhpcy5fYnVpbGRfcHJvcGVydGllcyhwcm9wZXJ0aWVzKTtcbn07XG5cbkRhdGFNb2RlbC5wcm90b3R5cGUuX2J1aWxkX3Byb3BlcnRpZXMgPSBmdW5jdGlvbiAocHJvcGVydGllcykge1xuICB2YXIgX3RoaXMgPSB0aGlzO1xuICBcbiAgZm9yICh2YXIga2V5IGluIHByb3BlcnRpZXMpIHtcbiAgICBpZiAocHJvcGVydGllcy5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XG4gICAgICBfdGhpcy5fYnVpbGRfcHJvcGVydHlfbWV0aG9kcyhrZXksIHByb3BlcnRpZXNba2V5XSk7XG4gICAgfVxuICB9XG59O1xuXG5EYXRhTW9kZWwucHJvdG90eXBlLl9idWlsZF9wcm9wZXJ0eV9tZXRob2RzID0gZnVuY3Rpb24gKGtleSwgc2VsZWN0b3IpIHtcbiAgdmFyIHNlbGVjdG9yX2tleSA9IGtleSsnX3NlbGVjdG9yJztcbiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMub2JqLCBzZWxlY3Rvcl9rZXksIHtcbiAgICB2YWx1ZTogc2VsZWN0b3JcbiAgfSk7XG4gIFxuICB2YXIgdmFsdWU7XG4gIHZhciBfdGhpcyA9IHRoaXM7XG4gIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLm9iaiwga2V5LCB7XG4gICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gdmFsdWU7XG4gICAgfSxcbiAgICBzZXQ6IGZ1bmN0aW9uIChuZXdfdmFsdWUpIHtcbiAgICAgIGlmICh2YWx1ZSAhPT0gbmV3X3ZhbHVlKSB7XG4gICAgICAgIHZhbHVlID0gbmV3X3ZhbHVlO1xuICAgICAgICBfdGhpcy5fdXBkYXRlX2VsZW1lbnRzKHNlbGVjdG9yLCB2YWx1ZSk7XG4gICAgICB9XG4gICAgfVxuICB9KTtcbn07XG5cbkRhdGFNb2RlbC5wcm90b3R5cGUuX3VwZGF0ZV9lbGVtZW50cyA9IGZ1bmN0aW9uIChzZWxlY3RvciwgdmFsdWUpIHtcbiAgdmFyIF90aGlzID0gdGhpcztcbiAgJChzZWxlY3RvcikuZWFjaChmdW5jdGlvbiAoaSwgZWxlbWVudCkge1xuICAgIF90aGlzLl9zZXRfZWxlbWVudF92YWx1ZShlbGVtZW50LCB2YWx1ZSk7XG4gIH0pO1xufTtcblxuRGF0YU1vZGVsLnByb3RvdHlwZS5fc2V0X2VsZW1lbnRfdmFsdWUgPSBmdW5jdGlvbiAoZWxlbWVudCwgdmFsdWUpIHtcbiAgdmFyICRlbGVtZW50ID0gJChlbGVtZW50KTtcbiAgaWYgKHRoaXMuX2lzX2lucHV0KGVsZW1lbnQpKSB7XG4gICAgJGVsZW1lbnQudmFsKHZhbHVlKTtcbiAgfSBlbHNlIHtcbiAgICAkZWxlbWVudC5odG1sKHZhbHVlKTtcbiAgfVxufTtcblxuRGF0YU1vZGVsLnByb3RvdHlwZS5faXNfaW5wdXQgPSBmdW5jdGlvbiAoZWxlbWVudCkge1xuICB2YXIgdGFnX25hbWUgPSBlbGVtZW50LnRhZ05hbWUudG9Mb3dlckNhc2UoKTtcbiAgcmV0dXJuIHRhZ19uYW1lID09PSAnaW5wdXQnIHx8IHRhZ19uYW1lID09PSAnc2VsZWN0JyB8fCB0YWdfbmFtZSA9PT0gJ3RleHRhcmVhJztcbn07XG5cbm1vZHVsZS5leHBvcnRzID0gRGF0YU1vZGVsOyIsIi8qXG4gIFRPRE86IG1ha2UgcHJvdG90eXBsZSBpbmhlcml0ZW5jZVxuKi9cblxudmFyIEV2ZW50ZXIgPSBmdW5jdGlvbiAoY2FsbGVyKSB7XG4gIHRoaXMuY2FsbGVyID0gY2FsbGVyO1xuICB0aGlzLmNhbGxlci5fZXZlbnRzID0ge307XG4gIHRoaXMuY2FsbGVyLm9uID0gdGhpcy5vbjtcbiAgdGhpcy5jYWxsZXIub2ZmID0gdGhpcy5vZmY7XG4gIHRoaXMuY2FsbGVyLnRyaWdnZXIgPSB0aGlzLnRyaWdnZXI7XG59O1xuIFxuLy8gdGhpcyA9PT0gY2FsbGVyIG5vdCBFdmVudGVyXG5FdmVudGVyLnByb3RvdHlwZS5vbiA9IGZ1bmN0aW9uIChldmVudCwgY2FsbGJhY2spIHtcbiAgaWYgKCF0aGlzLl9ldmVudHNbZXZlbnRdKSB0aGlzLl9ldmVudHNbZXZlbnRdID0gW107XG4gIHRoaXMuX2V2ZW50c1tldmVudF0ucHVzaChjYWxsYmFjayk7XG4gIHJldHVybiB0aGlzLl9ldmVudHNbZXZlbnRdLmxlbmd0aCAtIDE7XG59O1xuIFxuRXZlbnRlci5wcm90b3R5cGUub2ZmID0gZnVuY3Rpb24gKGV2ZW50LCBpZCkge1xuICBpZiAoZXZlbnQgJiYgaWQpIHtcbiAgICBpZiAodGhpcy5fZXZlbnRzW2V2ZW50XVtpZF0pIHRoaXMuX2V2ZW50c1tldmVudF1baWRdID0gbnVsbDtcbiAgfSBlbHNlIGlmIChldmVudCkge1xuICAgIGlmICh0aGlzLl9ldmVudHNbZXZlbnRdKSB0aGlzLl9ldmVudHNbZXZlbnRdID0gbnVsbDtcbiAgfSBlbHNlIHtcbiAgICB0aGlzLl9ldmVudHMgPSB7fTtcbiAgfVxufTtcbiBcbkV2ZW50ZXIucHJvdG90eXBlLnRyaWdnZXIgPSBmdW5jdGlvbiAoZXZlbnQsIGFyZ3MpIHtcbiAgaWYgKHR5cGVvZiBhcmdzICE9PSAnb2JqZWN0JykgYXJncyA9IFthcmdzXTsgXG4gIGZvciAodmFyIGkgaW4gdGhpcy5fZXZlbnRzW2V2ZW50XSkge1xuICAgIHZhciBlID0gdGhpcy5fZXZlbnRzW2V2ZW50XVtpXTtcbiAgICBpZiAodGhpcy5fZXZlbnRzW2V2ZW50XS5oYXNPd25Qcm9wZXJ0eShpKSAmJiB0eXBlb2YgZSA9PT0gJ2Z1bmN0aW9uJykgZS5hcHBseSh0aGlzLCBhcmdzKTtcbiAgfVxufTtcbiBcbm1vZHVsZS5leHBvcnRzID0gRXZlbnRlcjsiLCIvKlxuICBBIGNvbGxlY3Rpb24gb2YgcG9seWZpbGxzIGZvciBJRThcbiovXG5cbm1vZHVsZS5leHBvcnRzLmdldENvbXB1dGVkU3R5bGUgPSBmdW5jdGlvbiAoKSB7XG4gIGlmICghd2luZG93LmdldENvbXB1dGVkU3R5bGUpIHtcbiAgICB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSA9IGZ1bmN0aW9uKGVsLCBwc2V1ZG8pIHtcbiAgICAgIHRoaXMuZWwgPSBlbDtcbiAgICAgIHRoaXMuZ2V0UHJvcGVydHlWYWx1ZSA9IGZ1bmN0aW9uKHByb3ApIHtcbiAgICAgICAgdmFyIHJlID0gLyhcXC0oW2Etel0pezF9KS9nO1xuICAgICAgICBpZiAocHJvcCA9PSAnZmxvYXQnKSBwcm9wID0gJ3N0eWxlRmxvYXQnO1xuICAgICAgICBpZiAocmUudGVzdChwcm9wKSkge1xuICAgICAgICAgIHByb3AgPSBwcm9wLnJlcGxhY2UocmUsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBhcmd1bWVudHNbMl0udG9VcHBlckNhc2UoKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZWwuY3VycmVudFN0eWxlW3Byb3BdID8gZWwuY3VycmVudFN0eWxlW3Byb3BdIDogbnVsbDtcbiAgICAgIH07XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuICB9XG59O1xuXG5tb2R1bGUuZXhwb3J0cy5vYmplY3RLZXlzID0gZnVuY3Rpb24gKCkge1xuICAvLyBGcm9tIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0phdmFTY3JpcHQvUmVmZXJlbmNlL0dsb2JhbF9PYmplY3RzL09iamVjdC9rZXlzXG4gIGlmICghT2JqZWN0LmtleXMpIHtcbiAgICBPYmplY3Qua2V5cyA9IChmdW5jdGlvbigpIHtcbiAgICAgICd1c2Ugc3RyaWN0JztcbiAgICAgIHZhciBoYXNPd25Qcm9wZXJ0eSA9IE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHksXG4gICAgICAgICAgaGFzRG9udEVudW1CdWcgPSAhKHsgdG9TdHJpbmc6IG51bGwgfSkucHJvcGVydHlJc0VudW1lcmFibGUoJ3RvU3RyaW5nJyksXG4gICAgICAgICAgZG9udEVudW1zID0gW1xuICAgICAgICAgICAgJ3RvU3RyaW5nJyxcbiAgICAgICAgICAgICd0b0xvY2FsZVN0cmluZycsXG4gICAgICAgICAgICAndmFsdWVPZicsXG4gICAgICAgICAgICAnaGFzT3duUHJvcGVydHknLFxuICAgICAgICAgICAgJ2lzUHJvdG90eXBlT2YnLFxuICAgICAgICAgICAgJ3Byb3BlcnR5SXNFbnVtZXJhYmxlJyxcbiAgICAgICAgICAgICdjb25zdHJ1Y3RvcidcbiAgICAgICAgICBdLFxuICAgICAgICAgIGRvbnRFbnVtc0xlbmd0aCA9IGRvbnRFbnVtcy5sZW5ndGg7XG4gIFxuICAgICAgcmV0dXJuIGZ1bmN0aW9uKG9iaikge1xuICAgICAgICBpZiAodHlwZW9mIG9iaiAhPT0gJ29iamVjdCcgJiYgKHR5cGVvZiBvYmogIT09ICdmdW5jdGlvbicgfHwgb2JqID09PSBudWxsKSkge1xuICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ09iamVjdC5rZXlzIGNhbGxlZCBvbiBub24tb2JqZWN0Jyk7XG4gICAgICAgIH1cbiAgXG4gICAgICAgIHZhciByZXN1bHQgPSBbXSwgcHJvcCwgaTtcbiAgXG4gICAgICAgIGZvciAocHJvcCBpbiBvYmopIHtcbiAgICAgICAgICBpZiAoaGFzT3duUHJvcGVydHkuY2FsbChvYmosIHByb3ApKSB7XG4gICAgICAgICAgICByZXN1bHQucHVzaChwcm9wKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgXG4gICAgICAgIGlmIChoYXNEb250RW51bUJ1Zykge1xuICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCBkb250RW51bXNMZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgaWYgKGhhc093blByb3BlcnR5LmNhbGwob2JqLCBkb250RW51bXNbaV0pKSB7XG4gICAgICAgICAgICAgIHJlc3VsdC5wdXNoKGRvbnRFbnVtc1tpXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICB9O1xuICAgIH0oKSk7XG4gIH1cbn07IiwiQmFubmVyID0ge307XG5cbnZhciAkYmFubmVyID0gJCgnW2RhdGEtYmFubmVyXScpO1xuXG5CYW5uZXIuaW5pdCA9IGZ1bmN0aW9uICgpIHtcbiAgaWYgKCRiYW5uZXIubGVuZ3RoID4gMCkge1xuICAgIEJhbm5lci5hZGRfZXZlbnRfaGFuZGxlcnMoKTtcbiAgfVxufTtcblxuQmFubmVyLmFkZF9ldmVudF9oYW5kbGVycyA9IGZ1bmN0aW9uICgpIHtcbiAgLy8gVGhpcyBldmVudCBmaXJlcyBpbW1lZGlhdGVseSB3aGVuIHRoZSBzbGlkZSBpbnN0YW5jZSBtZXRob2QgaXMgaW52b2tlZC5cbiAgJGJhbm5lci5vbignc2xpZGUuYnMuY2Fyb3VzZWwnLCBmdW5jdGlvbiAoZSkge1xuICAgIHZhciAkcmVsYXRlZF90YXJnZXQgPSAkKGUucmVsYXRlZFRhcmdldCk7XG4gICAgLy8gU2V0IHRoZSBkYXRhLWJhbm5lciBhdHRyIHRvIHRoZSBjdXJyZW50IHNsaWRlcyBpbmRleCBzbyB0aGF0IHdlIGNhbiBkbyBhd2Vzb21lIHNjc3Mgc3R1ZmZzXG4gICAgJGJhbm5lci5hdHRyKCdkYXRhLWJhbm5lcicsICRyZWxhdGVkX3RhcmdldC5kYXRhKCdzbGlkZScpKTtcbiAgfSk7XG4gIFxuICAvLyBUaGlzIGV2ZW50IGlzIGZpcmVkIHdoZW4gdGhlIGNhcm91c2VsIGhhcyBjb21wbGV0ZWQgaXRzIHNsaWRlIHRyYW5zaXRpb24uXG4gICRiYW5uZXIub24oJ3NsaWQuYnMuY2Fyb3VzZWwnLCBmdW5jdGlvbiAoKSB7XG4gIH0pO1xufTtcbiAgICBcbm1vZHVsZS5leHBvcnRzID0gQmFubmVyOyIsInZhciBDYXJ0SlMgPSByZXF1aXJlKFwiLi8uLi8uLi9ib3dlcl9jb21wb25lbnRzL3Nob3BpZnktY2FydGpzL2Rpc3QvY2FydC5qc1wiKTtcblxudmFyIENhcnQgPSB7fTtcbnZhciBtZXNzYWdlX2NvdW50ID0gMDtcblxuLy8gQ2FydCB2YXJzXG52YXIgJGNhcnRfZGlzcGxheV9lbGUgPSAkKCdbZGF0YS1jYXJ0LWRpc3BsYXldJyk7XG52YXIgJGNhcnRfdG90YWxfZWxlID0gJCgnW2RhdGEtY2FydC10b3RhbF0nKTtcbnZhciAkY2FydF9mb3JtX2VsZSA9ICQoQnNpZnkuc2VsZWN0b3JzLmNhcnQuZm9ybV9zZWxlY3Rvcik7XG52YXIgJGNhcnRfbWVzc2FnZV9lbGUgPSAkKEJzaWZ5LnNlbGVjdG9ycy5jYXJ0Lm1lc3NhZ2Vfc2VsZWN0b3IpO1xuXG4vLyBwcm9kdWN0IHZhcnNcbmlmIChCc2lmeS5wcm9kdWN0KSB7XG4gIHZhciAkcHJvZHVjdF9mb3JtX2VsZSA9ICQoQnNpZnkuc2VsZWN0b3JzLnByb2R1Y3QuZm9ybV9zZWxlY3Rvcik7XG4gIHZhciAkcHJvZHVjdF9mb3JtX2J1dHRvbiA9ICRwcm9kdWN0X2Zvcm1fZWxlLmZpbmQoJ2lucHV0W3R5cGU9c3VibWl0XScpO1xuICB2YXIgJHByb2R1Y3RfZm9ybV9tZXNzYWdlX2VsZSA9ICQoQnNpZnkuc2VsZWN0b3JzLnByb2R1Y3QuZm9ybV9tZXNzYWdlX3NlbGVjdG9yKTtcbn1cblxuLy8gU2V0IHVwIGNhcnQgZXZlbnQgaGFuZGxlcnNcbkNhcnQuaW5pdCA9IGZ1bmN0aW9uICgpIHtcbiAgXG4gIC8vIGZpcmVkIHdoZW4gdGhlIENhcnRKUyBvYmplY3QgaGFzIGZpbmlzaGVkIHVwZGF0aW5nIHRoZSBjYXJ0XG4gICQoZG9jdW1lbnQpLm9uKCdjYXJ0LnJlcXVlc3RDb21wbGV0ZScsIGZ1bmN0aW9uKGV2ZW50LCBjYXJ0KSB7XG4gICAgLy8gdXBkYXRlIHRoZSBjYXJ0IG5vdGUgaW4gdGhlIG5hdmJhclxuICAgIENhcnQudXBkYXRlX2NhcnRfZGlzcGxheSgpO1xuICAgIENhcnQudXBkYXRlX2NhcnRfdGFibGUoKTtcbiAgfSk7XG4gIFxuICAvLyBBamF4IGFkZCB0byBjYXJ0IGZyb20gcHJvZHVjdCB0ZW1wbGF0ZVxuICBpZiAoQnNpZnkucHJvZHVjdCkge1xuICAgIC8vIENhcHR1cmUgdGhlIGZvcm0gc3VibWl0XG4gICAgJChkb2N1bWVudCkub24oJ3N1Ym1pdCcsIEJzaWZ5LnNlbGVjdG9ycy5wcm9kdWN0LmZvcm1fc2VsZWN0b3IsIGZ1bmN0aW9uIChlKSB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICB2YXIgJGN1cnJlbnRfdGFyZ2V0ID0gJChlLmN1cnJlbnRUYXJnZXQpO1xuICAgICAgQ2FydC5hZGRfaXRlbV90b19jYXJ0KCRjdXJyZW50X3RhcmdldCk7XG4gICAgfSk7XG4gIH1cbiAgXG4gIC8vIHJlbW92ZSBpdGVtIGZyb20gY2FydFxuICAkKGRvY3VtZW50KS5vbignY2xpY2snLCAnW2RhdGEtcmVtb3ZlLWl0ZW1dJywgZnVuY3Rpb24gKGUpIHtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgdmFyICRjdXJyZW50X3RhcmdldCA9ICQoZS5jdXJyZW50VGFyZ2V0KTtcbiAgICBDYXJ0LnJlbW92ZV9pdGVtX2Zyb21fY2FydCgkY3VycmVudF90YXJnZXQpO1xuICB9KTtcbn07XG5cbi8qXG4gIENhcnQgbWV0aG9kc1xuKi9cblxuQ2FydC5hZGRfaXRlbV90b19jYXJ0ID0gZnVuY3Rpb24gKCRjdXJyZW50X3RhcmdldCkge1xuICB2YXIgdmFsdWVzID0gQ2FydC5mb3JtX3ZhbHVlcygkY3VycmVudF90YXJnZXQuc2VyaWFsaXplQXJyYXkoKSk7XG4gIHZhciBwcm9wZXJ0aWVzID0ge307IC8vIFRPRE86IGRlYWwgd2l0aCBpdGVtIHByb3BlcnRpZXMgd2hlbiBhZGRpbmcgdG8gY2FydFxuICBcbiAgdmFyIHZhcmlhbnQgPSBCc2lmeS5nZXRfdmFyaWFudF9ieV9pZCh2YWx1ZXMuaWQpO1xuICB2YXIgaXRlbV90aXRsZSA9IEJzaWZ5LnByb2R1Y3QudGl0bGUgKyBCc2lmeS50cmFuc2xhdGlvbnMucHJvZHVjdC5pdGVtX3RpdGxlX3NlcGVyYXRvciArIHZhcmlhbnQudGl0bGU7XG4gIFxuICAvLyB1cGRhdGUgdGhlIHVzZXIgdGhhdCB3ZSBhcmUgd29ya2luZyBvbiBpdFxuICAkcHJvZHVjdF9mb3JtX2J1dHRvbi52YWwoQnNpZnkudHJhbnNsYXRpb25zLnByb2R1Y3QuYWRkaW5nX3RvX2NhcnRfYnV0dG9uX3RleHQpO1xuICBcbiAgLy8gYWRkIHRoZSBpdGVtIHRvIHRoZSBjYXJ0XG4gIENhcnRKUy5hZGRJdGVtKHZhbHVlcy5pZCwgdmFsdWVzLnF1YW50aXR5LCBwcm9wZXJ0aWVzLCB7XG4gICAgXCJzdWNjZXNzXCIgOiBmdW5jdGlvbiAoZGF0YSwgdGV4dF9zdGF0dXMsIGpxWEhSKSB7XG4gICAgICBcbiAgICAgIC8vIGNyZWF0ZSBhbmQgZGlzcGxheSBjb21wbGV0ZWQgbWVzc2FnZVxuICAgICAgdmFyIG1lc3NhZ2UgPSBCc2lmeS50cmFuc2xhdGlvbnMucHJvZHVjdC5hZnRlcl9wcm9kdWN0X2FkZGVkX21lc3NhZ2VfaHRtbC5yZXBsYWNlKCdbaXRlbV90aXRsZV0nLCBpdGVtX3RpdGxlKTtcbiAgICAgIENhcnQuc2hvd19tZXNzYWdlKCRwcm9kdWN0X2Zvcm1fbWVzc2FnZV9lbGUsICdzdWNjZXNzJywgbWVzc2FnZSk7XG4gICAgICBcbiAgICAgIC8vIHVwZGF0ZSBhZGQgdG8gY2FydCBidXR0b24gdGV4dFxuICAgICAgJHByb2R1Y3RfZm9ybV9idXR0b24udmFsKEJzaWZ5LnRyYW5zbGF0aW9ucy5wcm9kdWN0LmFkZGVkX3RvX2NhcnRfYnV0dG9uX3RleHQpO1xuICAgICAgXG4gICAgfSxcbiAgICBcImVycm9yXCI6IGZ1bmN0aW9uKGpxWEhSLCB0ZXh0X3N0YXR1cywgZXJyb3JfdGhyb3duKSB7XG4gICAgICBjb25zb2xlLmxvZygnW0VSUk9SXSAtIEFkZCB0byBjYXJ0OicsIGpxWEhSLCB0ZXh0X3N0YXR1cywgZXJyb3JfdGhyb3duKTtcbiAgICAgIFxuICAgICAgLy8gY3JlYXRlIGFuZCBkaXNwbGF5IGVycm9yIG1lc3NhZ2VcbiAgICAgIHZhciBtZXNzYWdlID0gQnNpZnkudHJhbnNsYXRpb25zLnByb2R1Y3QuYWZ0ZXJfcHJvZHVjdF9hZGRlZF9lcnJvcl9tZXNzYWdlX2h0bWwucmVwbGFjZSgnW2l0ZW1fdGl0bGVdJywgaXRlbV90aXRsZSkucmVwbGFjZSgnW2Vycm9yX21lc3NhZ2VdJywgZXJyb3JfdGhyb3duKTtcbiAgICAgIENhcnQuc2hvd19tZXNzYWdlKCRwcm9kdWN0X2Zvcm1fbWVzc2FnZV9lbGUsICdlcnJvcicsIG1lc3NhZ2UpO1xuICAgICAgXG4gICAgICAvLyB1cGRhdGUgYWRkIHRvIGNhcnQgYnV0dG9uIHRleHRcbiAgICAgICRwcm9kdWN0X2Zvcm1fYnV0dG9uLnZhbChCc2lmeS50cmFuc2xhdGlvbnMucHJvZHVjdC51bmF2YWlsYWJsZV9idXR0b25fdGV4dCk7XG4gICAgfVxuICB9KTtcbn07XG5cbkNhcnQucmVtb3ZlX2l0ZW1fZnJvbV9jYXJ0ID0gZnVuY3Rpb24gKCRjdXJyZW50X3RhcmdldCkge1xuICB2YXIgJGNhcnRfaXRlbV9lbGUgPSAkY3VycmVudF90YXJnZXQuY2xvc2VzdChCc2lmeS5zZWxlY3RvcnMuY2FydC5pdGVtX3NlbGVjdG9yKTtcbiAgXG4gIHZhciBpdGVtID0gQ2FydC5nZXRfaXRlbV9ieV9pZCgkY2FydF9pdGVtX2VsZS5kYXRhKCdjYXJ0LWl0ZW0nKSk7XG4gIHZhciBpdGVtX3RpdGxlID0gaXRlbS5wcm9kdWN0X3RpdGxlICsgQnNpZnkudHJhbnNsYXRpb25zLnByb2R1Y3QuaXRlbV90aXRsZV9zZXBlcmF0b3IgKyBpdGVtLnZhcmlhbnRfdGl0bGU7XG4gIFxuICBDYXJ0SlMucmVtb3ZlSXRlbSgkY3VycmVudF90YXJnZXQuZGF0YSgncmVtb3ZlLWl0ZW0nKSwge1xuICAgIFwic3VjY2Vzc1wiOiBmdW5jdGlvbiAoZGF0YSwgdGV4dF9zdGF0dXMsIGpxWEhSKSB7XG4gICAgICAvLyBoaWRlIGl0ZW0gcm93XG4gICAgICAkY2FydF9pdGVtX2VsZS5oaWRlKCk7XG4gICAgICBcbiAgICAgIC8vIFNob3cgdXNlciBhIG5pY2UgbWVzc2FnZVxuICAgICAgdmFyIG1lc3NhZ2UgPSBCc2lmeS50cmFuc2xhdGlvbnMuY2FydC5yZW1vdmVfaXRlbV9tZXNzYWdlLnJlcGxhY2UoJ1tpdGVtX3RpdGxlXScsIGl0ZW1fdGl0bGUpO1xuICAgICAgQ2FydC5zaG93X21lc3NhZ2UoJGNhcnRfbWVzc2FnZV9lbGUsICdzdWNjZXNzJywgbWVzc2FnZSk7XG4gICAgICBcbiAgICB9LFxuICAgIFwiZXJyb3JcIjogZnVuY3Rpb24gKGpxWEhSLCB0ZXh0X3N0YXR1cywgZXJyb3JfdGhyb3duKSB7XG4gICAgICBjb25zb2xlLmxvZygnW0VSUk9SXSAtIFJlbW92ZSBpdGVtIGZyb20gY2FydDonLCBqcVhIUiwgdGV4dF9zdGF0dXMsIGVycm9yX3Rocm93bik7XG4gICAgICBcbiAgICAgIC8vIFNob3cgdXNlciBhIG5pY2UgbWVzc2FnZVxuICAgICAgdmFyIG1lc3NhZ2UgPSBCc2lmeS50cmFuc2xhdGlvbnMuY2FydC5yZW1vdmVfaXRlbV9lcnJvcl9tZXNzYWdlLnJlcGxhY2UoJ1tpdGVtX3RpdGxlXScsIGl0ZW1fdGl0bGUpLnJlcGxhY2UoJ1tlcnJvcl9tZXNzYWdlXScsIGVycm9yX3Rocm93bik7XG4gICAgICBDYXJ0LnNob3dfbWVzc2FnZSgkY2FydF9tZXNzYWdlX2VsZSwgJ3N1Y2Nlc3MnLCBtZXNzYWdlKTtcbiAgICB9IFxuICB9KTtcbn07XG5cbi8qXG4gIERpc3BsYXkgbWV0aG9kc1xuKi9cblxuLy8gVXBkYXRlIGNhcnQgZGlzcGxheSB3aXRoIHRoZSBjdXJyZW50IGNhcnQgZGV0YWlsc1xuQ2FydC51cGRhdGVfY2FydF9kaXNwbGF5ID0gZnVuY3Rpb24gKCkge1xuICB2YXIgY2FydF90b3RhbF9wcmljZSA9IFNob3BpZnkuZm9ybWF0TW9uZXkoQ2FydEpTLmNhcnQudG90YWxfcHJpY2UsIEJzaWZ5Lm1vbmV5X2Zvcm1hdHMubW9uZXlGb3JtYXQpO1xuICB2YXIgY2FydF90b3RhbF9wcmljZV93aXRoX2N1cnJlbmN5ID0gU2hvcGlmeS5mb3JtYXRNb25leShDYXJ0SlMuY2FydC50b3RhbF9wcmljZSwgQnNpZnkubW9uZXlfZm9ybWF0cy5tb25leVdpdGhDdXJyZW5jeUZvcm1hdCk7XG4gIFxuICB2YXIgY2FydF9kaXNwbGF5X3RleHQgPSBCc2lmeS50cmFuc2xhdGlvbnMuY2FydC5jYXJ0X2Rpc3BsYXlfdGV4dC5yZXBsYWNlKCdbaXRlbV9jb3VudF0nLCBDYXJ0SlMuY2FydC5pdGVtX2NvdW50KS5yZXBsYWNlKCdbY2FydF90b3RhbF9wcmljZV0nLCBjYXJ0X3RvdGFsX3ByaWNlKS5yZXBsYWNlKCdbY2FydF90b3RhbF9wcmljZV93aXRoX2N1cnJlbmN5XScsIGNhcnRfdG90YWxfcHJpY2Vfd2l0aF9jdXJyZW5jeSk7XG4gICRjYXJ0X2Rpc3BsYXlfZWxlLmh0bWwoY2FydF9kaXNwbGF5X3RleHQpO1xuICBcbiAgdmFyIGNhcnRfdG90YWxfdGV4dCA9IEJzaWZ5LnRyYW5zbGF0aW9ucy5jYXJ0LmNhcnRfdG90YWwucmVwbGFjZSgnW2NhcnRfdG90YWxfcHJpY2VdJywgY2FydF90b3RhbF9wcmljZSkucmVwbGFjZSgnW2NhcnRfdG90YWxfcHJpY2Vfd2l0aF9jdXJyZW5jeV0nLCBjYXJ0X3RvdGFsX3ByaWNlX3dpdGhfY3VycmVuY3kpO1xuICAkY2FydF90b3RhbF9lbGUuaHRtbChjYXJ0X3RvdGFsX3RleHQpO1xufTtcblxuLy8gaGlkZSB0aGUgY2FydCB0YWJsZSBpZiB0aGUgY2FydCBpcyBlbXB0eVxuQ2FydC51cGRhdGVfY2FydF90YWJsZSA9IGZ1bmN0aW9uICgpIHtcbiAgaWYgKENhcnRKUy5jYXJ0Lml0ZW1fY291bnQgPT09IDApIHtcbiAgICAkY2FydF9mb3JtX2VsZS5oaWRlKCk7XG4gICAgJGNhcnRfbWVzc2FnZV9lbGUucmVtb3ZlQ2xhc3MoJ2hpZGRlbicpLmh0bWwoQnNpZnkudHJhbnNsYXRpb25zLmNhcnQuZW1wdHlfY2FydF90ZXh0KTtcbiAgfVxufTtcblxuLy8gc2hvdyBhbmQgaGlkZSBmZWVkYmFjayBtZXNhZ2VzIGZvciBjYXJ0IGFjdGlvbnNcbkNhcnQuc2hvd19tZXNzYWdlID0gZnVuY3Rpb24gKCRtZXNzYWdlX2VsZSwgbWVzc2FnZV9jbGFzcywgbWVzc2FnZSkge1xuICBtZXNzYWdlX2NvdW50Kys7XG4gICRtZXNzYWdlX2VsZS5yZW1vdmVDbGFzcygnaGlkZGVuJykuaHRtbCgnPGRpdiBjbGFzcz1cIm5vdGUgJyttZXNzYWdlX2NsYXNzKycgbWVzc2FnZScrbWVzc2FnZV9jb3VudCsnXCI+JyttZXNzYWdlKyc8L2Rpdj4nKTtcbiAgQ2FydC5yZW1vdmVfbWVzc2FnZShtZXNzYWdlX2NvdW50KTtcbn07XG5cbkNhcnQucmVtb3ZlX21lc3NhZ2UgPSBmdW5jdGlvbiAobWVzc2FnZV9pZCkge1xuICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAkKCcubWVzc2FnZScrbWVzc2FnZV9pZCkuZmFkZU91dChmdW5jdGlvbiAoKSB7XG4gICAgICAkKHRoaXMpLnJlbW92ZSgpO1xuICAgIH0pO1xuICB9LCBCc2lmeS5tZXNzYWdlX3RpbWVvdXQpO1xufTtcblxuLy8gY29udmVydCBqUXVlcnkgc2VyaWFsaXplQXJyYXkgcmVzdWx0cyBpbnRvIHNvbWV0aGluZyB1c2VmdWwgXG5DYXJ0LmZvcm1fdmFsdWVzID0gZnVuY3Rpb24gKGFycikge1xuICB2YXIgdmFscyA9IHt9O1xuICBmb3IgKHZhciBpID0gMDsgaSA8IGFyci5sZW5ndGg7IGkrKykge1xuICAgIHZhciBpdGVtID0gYXJyW2ldO1xuICAgIHZhbHNbaXRlbS5uYW1lXSA9IGl0ZW0udmFsdWU7XG4gIH1cbiAgcmV0dXJuIHZhbHM7XG59O1xuXG4vKlxuICBDYXJ0IHV0aWxpdHkgZnVuY3Rpb25zXG4qL1xuXG4vLyBHZXQgaXRlbSBmcm9tIENhcnRKUyBieSB2YXJpYW50IGlkXG5DYXJ0LmdldF9pdGVtX2J5X2lkID0gZnVuY3Rpb24gKHZhcmlhbnRfaWQpIHtcbiAgaWYgKHR5cGVvZiB2YXJpYW50X2lkID09PSAnc3RyaW5nJykgdmFyaWFudF9pZCA9IHBhcnNlSW50KHZhcmlhbnRfaWQpO1xuICB2YXIgbGluZV9pdGVtO1xuICBpZiAoQ2FydEpTKSB7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBDYXJ0SlMuY2FydC5pdGVtcy5sZW5ndGg7IGkrKykge1xuICAgICAgdmFyIGl0ZW0gPSBDYXJ0SlMuY2FydC5pdGVtc1tpXTtcbiAgICAgIGlmIChpdGVtLnZhcmlhbnRfaWQgPT09IHZhcmlhbnRfaWQpIHtcbiAgICAgICAgbGluZV9pdGVtID0gaXRlbTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgcmV0dXJuIGxpbmVfaXRlbTtcbn07XG5cbi8vIENoZWNrIGNhcnQgZm9yIHZhcmlhbnRcbkNhcnQuaGFzX3ZhcmlhbnQgPSBmdW5jdGlvbiAodmFyaWFudF9pZCkge1xuICBpZiAodHlwZW9mIHZhcmlhbnRfaWQgPT09ICdzdHJpbmcnKSB2YXJpYW50X2lkID0gcGFyc2VJbnQodmFyaWFudF9pZCk7XG4gIHZhciBoYXNfdmFyaWFudCA9IGZhbHNlO1xuICBpZiAoQ2FydEpTKSB7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBDYXJ0SlMuY2FydC5pdGVtcy5sZW5ndGg7IGkrKykge1xuICAgICAgdmFyIGl0ZW0gPSBDYXJ0SlMuY2FydC5pdGVtc1tpXTtcbiAgICAgIGlmIChpdGVtLnZhcmlhbnRfaWQgPT09IHZhcmlhbnRfaWQpIHtcbiAgICAgICAgaGFzX3ZhcmlhbnQgPSB0cnVlO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICByZXR1cm4gaGFzX3ZhcmlhbnQ7XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IENhcnQ7IiwidmFyIEltYWdlU3dpdGNoZXIgPSB7fTtcblxuLy8gTk9URTogaG93IHdpbGwgdGhpcyBhbGwgd29yayB3aXRoIHNyY3NldCA/PyEhXG4vLyBUT0RPOiBzd2lwZSBiZXR3ZWVuIGltYWdlcyBvbiBtb2JpbGVcblxuLy8gUHJlbG9hZCBpbWFnZXMgZm9yIGdhbGxlcnlcbi8vIFVzZWQgdGhlIHNpemVkIHNyY1xuSW1hZ2VTd2l0Y2hlci5wcmVsb2FkX3Byb2R1Y3RfdGh1bWJzID0gZnVuY3Rpb24oKXtcbiAgdmFyICR0aHVtYnMgPSAkKCdbZGF0YS1nYWxsZXJ5LW1haW5dJyk7XG4gIGlmICgkdGh1bWJzLmxlbmd0aCA+IDApIHtcbiAgICB2YXIgbWFpbl9pbWFnZV9lbGVtZW50ID0gJCgkdGh1bWJzLmRhdGEoJ2dhbGxlcnktbWFpbicpKVswXTtcbiAgICB2YXIgbWFpbl9pbWFnZV9zaXplID0gU2hvcGlmeS5JbWFnZS5pbWFnZVNpemUobWFpbl9pbWFnZV9lbGVtZW50LnNyYyk7XG4gICAgXG4gICAgaWYoJHRodW1icy5sZW5ndGggPiAwKXtcbiAgICAgICR0aHVtYnMuZWFjaChmdW5jdGlvbigpe1xuICAgICAgICB2YXIgaW1hZ2UgPSBuZXcgSW1hZ2UoKTtcbiAgICAgICAgdmFyIHNyYyA9ICQodGhpcykuYXR0cignaHJlZicpO1xuICAgICAgICB2YXIgc2l6ZWRfc3JjID0gU2hvcGlmeS5JbWFnZS5nZXRTaXplZEltYWdlVXJsKHNyYywgbWFpbl9pbWFnZV9zaXplKTtcbiAgICAgICAgaW1hZ2Uuc3JjID0gc2l6ZWRfc3JjO1xuICAgICAgfSk7XG4gICAgfVxuICB9XG59O1xuXG4vLyBJbml0aWFsaXNlIHRoZSBpbWFnZSBzd2l0Y2hlciBmb3IgZ2FsbGVyeSB0aHVtYnNcbkltYWdlU3dpdGNoZXIuaW1hZ2Vfc3d0aWNoZXIgPSBmdW5jdGlvbiAoKSB7XG4gICQoZG9jdW1lbnQpLm9uKCdjbGljaycsICdbZGF0YS1nYWxsZXJ5LW1haW5dJywgZnVuY3Rpb24gKGUpIHtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgdmFyICRjdXJyZW50X3RhcmdldCA9ICQoZS5jdXJyZW50VGFyZ2V0KTtcbiAgICB2YXIgbWFpbl9pbWFnZV9lbGVtZW50ID0gJCgkY3VycmVudF90YXJnZXQuZGF0YSgnZ2FsbGVyeS1tYWluJykpWzBdO1xuICAgIHZhciBpbWFnZV9zcmMgPSAkY3VycmVudF90YXJnZXQuYXR0cignaHJlZicpO1xuICAgIEltYWdlU3dpdGNoZXIuc3dpdGNoX2ltYWdlKG1haW5faW1hZ2VfZWxlbWVudCwgaW1hZ2Vfc3JjKTtcbiAgfSk7XG59O1xuXG4vLyBTd2l0Y2ggaW1hZ2Vcbi8vIC0gdGFrZXMgdGhlIG1haW4gaW1hZ2UgZWxlbWVudCB0aGF0IHdpbGwgaGF2ZSBpdCdzIHNyYyBjaGFuZ2VkXG4vLyAtIGFuZCB0aGUgbmV3IHNyYyB0byBjaGFuZ2UgaXQgdG9cbkltYWdlU3dpdGNoZXIuc3dpdGNoX2ltYWdlID0gZnVuY3Rpb24gKG1haW5faW1hZ2VfZWxlbWVudCwgaW1hZ2Vfc3JjKSB7XG4gIGlmICghbWFpbl9pbWFnZV9lbGVtZW50IHx8ICFpbWFnZV9zcmMpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgLy8gZ2V0IHRoZSBuZXcgaW1hZ2Ugc3JjIGF0IHRoZSBjb3JyZWN0IHNpemVcbiAgdmFyIG1haW5faW1hZ2Vfc2l6ZSA9IFNob3BpZnkuSW1hZ2UuaW1hZ2VTaXplKG1haW5faW1hZ2VfZWxlbWVudC5zcmMpO1xuICB2YXIgbmV3X2ltYWdlX3NyYyA9IFNob3BpZnkuSW1hZ2UuZ2V0U2l6ZWRJbWFnZVVybChpbWFnZV9zcmMsIG1haW5faW1hZ2Vfc2l6ZSk7XG4gIC8vIHN3aXRjaCB0aGUgbWFpbiBpbWFnZSB0byB0aGUgbmV3IHNyY1xuICBpZiAobWFpbl9pbWFnZV9lbGVtZW50LnNyYyAhPT0gbmV3X2ltYWdlX3NyYykge1xuICAgIG1haW5faW1hZ2VfZWxlbWVudC5zcmMgPSBuZXdfaW1hZ2Vfc3JjO1xuICB9XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IEltYWdlU3dpdGNoZXI7IiwiLy8gQ29sbGVjdCB0aGUgQnNpZnkgb2JqZWN0IGZyb20gdGhlIHdpbmRvdyB3aXRoIG91ciB0cmFuc2xhdGlvbnMgYW5kIGxpcXVpZCB2YXJpYWJsZXMgYWxsIHNldCB1cFxudmFyIEJzaWZ5ID0gd2luZG93LkJzaWZ5IHx8IHt9O1xuXG4vKlxuICBCb290c3RyYXBpZnkgdXRpbGl0eSBtZXRob2RzXG4qL1xuXG5Cc2lmeS5nZXRfdmFyaWFudF9ieV9pZCA9IGZ1bmN0aW9uICh2YXJpYW50X2lkKSB7XG4gIHZhciBzZWxlY3RlZF92YXJpYW50O1xuICBpZiAodHlwZW9mIHZhcmlhbnRfaWQgPT09ICdzdHJpbmcnKSB2YXJpYW50X2lkID0gcGFyc2VJbnQodmFyaWFudF9pZCk7XG4gIFxuICBmb3IgKHZhciBpID0gMDsgaSA8IEJzaWZ5LnByb2R1Y3QudmFyaWFudHMubGVuZ3RoOyBpKyspIHtcbiAgICB2YXIgdmFyaWFudCA9IEJzaWZ5LnByb2R1Y3QudmFyaWFudHNbaV07XG4gICAgaWYgKHZhcmlhbnQuaWQgPT09IHZhcmlhbnRfaWQpIHtcbiAgICAgIHNlbGVjdGVkX3ZhcmlhbnQgPSB2YXJpYW50O1xuICAgIH1cbiAgfVxuICByZXR1cm4gc2VsZWN0ZWRfdmFyaWFudDtcbn07XG5cbi8vIGFkZCBic2lmeSBjbGFzc2VzIHRvIHRoZSBCc2lmeSBvYmplY3RcbkJzaWZ5LkNhcnQgPSByZXF1aXJlKCcuL2JzaWZ5LmNhcnQuanMnKTtcbkJzaWZ5LkltYWdlU3dpdGNoZXIgPSByZXF1aXJlKCcuL2JzaWZ5LmltYWdlX3N3aXRjaGVyLmpzJyk7XG5Cc2lmeS5WYXJpYW50T3B0aW9uU3dpdGNoZXIgPSByZXF1aXJlKCcuL2JzaWZ5LnZhcmlhbnRfb3B0aW9uX3N3aXRjaGVyLmpzJyk7XG5Cc2lmeS5MaW5rZWRQcm9kdWN0T3B0aW9ucyA9IHJlcXVpcmUoJy4vYnNpZnkubGlua2VkX3Byb2R1Y3Rfb3B0aW9ucy5qcycpO1xuQnNpZnkuQmFubmVyID0gcmVxdWlyZSgnLi9ic2lmeS5iYW5uZXIuanMnKTtcbkJzaWZ5LlRodW1ibmFpbHMgPSByZXF1aXJlKCcuL2JzaWZ5LnRodW1ibmFpbHMuanMnKTtcbkJzaWZ5LlNvY2lhbEZlZWRzID0gcmVxdWlyZSgnLi9ic2lmeS5zb2NpYWxfZmVlZHMuanMnKTtcblxubW9kdWxlLmV4cG9ydHMgPSBCc2lmeTsiLCIvLyAoYykgQ29weXJpZ2h0IDIwMTQgQ2Fyb2xpbmUgU2NobmFwcC4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4gQ29udGFjdDogbWxsZWdlb3JnZXNhbmRAZ21haWwuY29tXG4vLyBTZWUgaHR0cDovL2RvY3Muc2hvcGlmeS5jb20vbWFudWFsL2NvbmZpZ3VyYXRpb24vc3RvcmUtY3VzdG9taXphdGlvbi9hZHZhbmNlZC1uYXZpZ2F0aW9uL2xpbmtlZC1wcm9kdWN0LW9wdGlvbnNcbi8vIE1vZGlmaWVkIGZvciB1c2Ugd2l0aCBCb290c3RyYXBpZnk0IGJ5IEx1Y2lkIC0gMDMvMjAxNVxuXG52YXIgTGlua2VkUHJvZHVjdE9wdGlvbnMgPSB7fTtcbkxpbmtlZFByb2R1Y3RPcHRpb25zLm9wdGlvbnNNYXAgPSB7fTtcblxuTGlua2VkUHJvZHVjdE9wdGlvbnMudXBkYXRlT3B0aW9uc0luU2VsZWN0b3IgPSBmdW5jdGlvbihzZWxlY3RvckluZGV4KSB7XG4gIHZhciBrZXksIHNlbGVjdG9yO1xuICAgIFxuICBzd2l0Y2ggKHNlbGVjdG9ySW5kZXgpIHtcbiAgICBjYXNlIDA6XG4gICAgICBrZXkgPSAncm9vdCc7XG4gICAgICBzZWxlY3RvciA9IGpRdWVyeSgnLnNpbmdsZS1vcHRpb24tc2VsZWN0b3I6ZXEoMCknKTtcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgMTpcbiAgICAgIGtleSA9IGpRdWVyeSgnLnNpbmdsZS1vcHRpb24tc2VsZWN0b3I6ZXEoMCknKS52YWwoKTtcbiAgICAgIHNlbGVjdG9yID0galF1ZXJ5KCcuc2luZ2xlLW9wdGlvbi1zZWxlY3RvcjplcSgxKScpO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSAyOlxuICAgICAga2V5ID0galF1ZXJ5KCcuc2luZ2xlLW9wdGlvbi1zZWxlY3RvcjplcSgwKScpLnZhbCgpOyAgXG4gICAgICBrZXkgKz0gJyAvICcgKyBqUXVlcnkoJy5zaW5nbGUtb3B0aW9uLXNlbGVjdG9yOmVxKDEpJykudmFsKCk7XG4gICAgICBzZWxlY3RvciA9IGpRdWVyeSgnLnNpbmdsZS1vcHRpb24tc2VsZWN0b3I6ZXEoMiknKTtcbiAgfVxuICBcbiAgdmFyIGluaXRpYWxWYWx1ZSA9IHNlbGVjdG9yLnZhbCgpO1xuICBzZWxlY3Rvci5lbXB0eSgpOyAgICBcbiAgdmFyIGF2YWlsYWJsZU9wdGlvbnMgPSBMaW5rZWRQcm9kdWN0T3B0aW9ucy5vcHRpb25zTWFwW2tleV07XG4gIGlmIChhdmFpbGFibGVPcHRpb25zICE9PSB1bmRlZmluZWQpIHtcbiAgICBmb3IgKHZhciBpPTA7IGk8YXZhaWxhYmxlT3B0aW9ucy5sZW5ndGg7IGkrKykge1xuICAgICAgdmFyIG9wdGlvbiA9IGF2YWlsYWJsZU9wdGlvbnNbaV07XG4gICAgICB2YXIgbmV3T3B0aW9uID0galF1ZXJ5KCc8b3B0aW9uPjwvb3B0aW9uPicpLnZhbChvcHRpb24pLmh0bWwob3B0aW9uKTtcbiAgICAgIHNlbGVjdG9yLmFwcGVuZChuZXdPcHRpb24pO1xuICAgIH1cbiAgICBqUXVlcnkoJy5zd2F0Y2hbZGF0YS1vcHRpb24taW5kZXg9XCInICsgc2VsZWN0b3JJbmRleCArICdcIl0gLnN3YXRjaC1lbGVtZW50JykuZWFjaChmdW5jdGlvbigpIHtcbiAgICAgIGlmIChqUXVlcnkuaW5BcnJheSgkKHRoaXMpLmF0dHIoJ2RhdGEtdmFsdWUnKSwgYXZhaWxhYmxlT3B0aW9ucykgIT09IC0xKSB7XG4gICAgICAgICQodGhpcykucmVtb3ZlQ2xhc3MoJ3NvbGRvdXQnKS5zaG93KCkuZmluZCgnOnJhZGlvJykucmVtb3ZlQXR0cignZGlzYWJsZWQnLCdkaXNhYmxlZCcpLnJlbW92ZUF0dHIoJ2NoZWNrZWQnKTtcbiAgICAgIH1cbiAgICAgIGVsc2Uge1xuICAgICAgICAkKHRoaXMpLmFkZENsYXNzKCdzb2xkb3V0JykuaGlkZSgpLmZpbmQoJzpyYWRpbycpLnJlbW92ZUF0dHIoJ2NoZWNrZWQnKS5hdHRyKCdkaXNhYmxlZCcsJ2Rpc2FibGVkJyk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgaWYgKGpRdWVyeS5pbkFycmF5KGluaXRpYWxWYWx1ZSwgYXZhaWxhYmxlT3B0aW9ucykgIT09IC0xKSB7XG4gICAgICBzZWxlY3Rvci52YWwoaW5pdGlhbFZhbHVlKTtcbiAgICB9XG4gICAgc2VsZWN0b3IudHJpZ2dlcignY2hhbmdlJyk7XG4gIH1cbn07XG5cbkxpbmtlZFByb2R1Y3RPcHRpb25zLmxpbmtPcHRpb25TZWxlY3RvcnMgPSBmdW5jdGlvbihwcm9kdWN0KSB7XG4gIC8vIEJ1aWxkaW5nIG91ciBtYXBwaW5nIG9iamVjdC5cbiAgZm9yICh2YXIgaT0wOyBpPHByb2R1Y3QudmFyaWFudHMubGVuZ3RoOyBpKyspIHtcbiAgICB2YXIgdmFyaWFudCA9IHByb2R1Y3QudmFyaWFudHNbaV07XG4gICAgaWYgKHZhcmlhbnQuYXZhaWxhYmxlKSB7XG4gICAgICB2YXIga2V5O1xuICAgICAgLy8gR2F0aGVyaW5nIHZhbHVlcyBmb3IgdGhlIDFzdCBkcm9wLWRvd24uXG4gICAgICBMaW5rZWRQcm9kdWN0T3B0aW9ucy5vcHRpb25zTWFwLnJvb3QgPSBMaW5rZWRQcm9kdWN0T3B0aW9ucy5vcHRpb25zTWFwLnJvb3QgfHwgW107XG4gICAgICBMaW5rZWRQcm9kdWN0T3B0aW9ucy5vcHRpb25zTWFwLnJvb3QucHVzaCh2YXJpYW50Lm9wdGlvbjEpO1xuICAgICAgTGlua2VkUHJvZHVjdE9wdGlvbnMub3B0aW9uc01hcC5yb290ID0gU2hvcGlmeS51bmlxKExpbmtlZFByb2R1Y3RPcHRpb25zLm9wdGlvbnNNYXAucm9vdCk7XG4gICAgICAvLyBHYXRoZXJpbmcgdmFsdWVzIGZvciB0aGUgMm5kIGRyb3AtZG93bi5cbiAgICAgIGlmIChwcm9kdWN0Lm9wdGlvbnMubGVuZ3RoID4gMSkge1xuICAgICAgICBrZXkgPSB2YXJpYW50Lm9wdGlvbjE7XG4gICAgICAgIExpbmtlZFByb2R1Y3RPcHRpb25zLm9wdGlvbnNNYXBba2V5XSA9IExpbmtlZFByb2R1Y3RPcHRpb25zLm9wdGlvbnNNYXBba2V5XSB8fCBbXTtcbiAgICAgICAgTGlua2VkUHJvZHVjdE9wdGlvbnMub3B0aW9uc01hcFtrZXldLnB1c2godmFyaWFudC5vcHRpb24yKTtcbiAgICAgICAgTGlua2VkUHJvZHVjdE9wdGlvbnMub3B0aW9uc01hcFtrZXldID0gU2hvcGlmeS51bmlxKExpbmtlZFByb2R1Y3RPcHRpb25zLm9wdGlvbnNNYXBba2V5XSk7XG4gICAgICB9XG4gICAgICAvLyBHYXRoZXJpbmcgdmFsdWVzIGZvciB0aGUgM3JkIGRyb3AtZG93bi5cbiAgICAgIGlmIChwcm9kdWN0Lm9wdGlvbnMubGVuZ3RoID09PSAzKSB7XG4gICAgICAgIGtleSA9IHZhcmlhbnQub3B0aW9uMSArICcgLyAnICsgdmFyaWFudC5vcHRpb24yO1xuICAgICAgICBMaW5rZWRQcm9kdWN0T3B0aW9ucy5vcHRpb25zTWFwW2tleV0gPSBMaW5rZWRQcm9kdWN0T3B0aW9ucy5vcHRpb25zTWFwW2tleV0gfHwgW107XG4gICAgICAgIExpbmtlZFByb2R1Y3RPcHRpb25zLm9wdGlvbnNNYXBba2V5XS5wdXNoKHZhcmlhbnQub3B0aW9uMyk7XG4gICAgICAgIExpbmtlZFByb2R1Y3RPcHRpb25zLm9wdGlvbnNNYXBba2V5XSA9IFNob3BpZnkudW5pcShMaW5rZWRQcm9kdWN0T3B0aW9ucy5vcHRpb25zTWFwW2tleV0pO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICAvLyBVcGRhdGUgb3B0aW9ucyByaWdodCBhd2F5LlxuICBMaW5rZWRQcm9kdWN0T3B0aW9ucy51cGRhdGVPcHRpb25zSW5TZWxlY3RvcigwKTtcbiAgaWYgKHByb2R1Y3Qub3B0aW9ucy5sZW5ndGggPiAxKSBMaW5rZWRQcm9kdWN0T3B0aW9ucy51cGRhdGVPcHRpb25zSW5TZWxlY3RvcigxKTtcbiAgaWYgKHByb2R1Y3Qub3B0aW9ucy5sZW5ndGggPT09IDMpIExpbmtlZFByb2R1Y3RPcHRpb25zLnVwZGF0ZU9wdGlvbnNJblNlbGVjdG9yKDIpO1xuICAvLyBXaGVuIHRoZXJlIGlzIGFuIHVwZGF0ZSBpbiB0aGUgZmlyc3QgZHJvcGRvd24uXG4gIGpRdWVyeShcIi5zaW5nbGUtb3B0aW9uLXNlbGVjdG9yOmVxKDApXCIpLmNoYW5nZShmdW5jdGlvbigpIHtcbiAgICBMaW5rZWRQcm9kdWN0T3B0aW9ucy51cGRhdGVPcHRpb25zSW5TZWxlY3RvcigxKTtcbiAgICBpZiAocHJvZHVjdC5vcHRpb25zLmxlbmd0aCA9PT0gMykgTGlua2VkUHJvZHVjdE9wdGlvbnMudXBkYXRlT3B0aW9uc0luU2VsZWN0b3IoMik7XG4gICAgcmV0dXJuIHRydWU7XG4gIH0pO1xuICAvLyBXaGVuIHRoZXJlIGlzIGFuIHVwZGF0ZSBpbiB0aGUgc2Vjb25kIGRyb3Bkb3duLlxuICBqUXVlcnkoXCIuc2luZ2xlLW9wdGlvbi1zZWxlY3RvcjplcSgxKVwiKS5jaGFuZ2UoZnVuY3Rpb24oKSB7XG4gICAgaWYgKHByb2R1Y3Qub3B0aW9ucy5sZW5ndGggPT09IDMpIExpbmtlZFByb2R1Y3RPcHRpb25zLnVwZGF0ZU9wdGlvbnNJblNlbGVjdG9yKDIpO1xuICAgIHJldHVybiB0cnVlO1xuICB9KTtcbiAgXG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IExpbmtlZFByb2R1Y3RPcHRpb25zOyIsInZhciBpbWdsICAgID0gcmVxdWlyZSgnaW1hZ2VzbG9hZGVkJyk7XG52YXIgbXEgICAgICA9IHJlcXVpcmUoJy4vYnNpZnkubWVkaWFfcXVlcmllcy5qcycpO1xucmVxdWlyZSgnLi9ic2lmeS50b3VjaC5qcycpO1xuXG4vKiBMb2FkZXIgKi9cbnZhciBHYWxsZXJ5TG9hZGVyID0gZnVuY3Rpb24gKGVsZSwgcGFyZW50X2VsZSkge1xuICB0aGlzLmVsZSA9IGVsZTtcbiAgdGhpcy5wYXJlbnRfZWxlID0gcGFyZW50X2VsZTtcbiAgdGhpcy5vbkxvYWRlZCA9IGZ1bmN0aW9uKCl7fTtcbn07XG5cbkdhbGxlcnlMb2FkZXIucHJvdG90eXBlLmluaXQgPSBmdW5jdGlvbigpe1xuICB0aGlzLiRlbGUgPSAkKHRoaXMuZWxlKTtcbiAgdGhpcy5jYXJvdXNlbF93aWR0aCA9IDA7XG4gIHRoaXMuaW1nTG9hZCA9IG5ldyBpbWdsKHRoaXMuZWxlKTtcbiAgXG4gIHZhciBfdGhpcyA9IHRoaXM7XG4gIHRoaXMuaW1nTG9hZC5vbigncHJvZ3Jlc3MnLCBmdW5jdGlvbihpbnN0YW5jZSwgaW1hZ2Upe1xuICAgIF90aGlzLl9jb2xsZWN0X2ltYWdlX3dpZHRoKGltYWdlKTtcbiAgfSkub24oJ2RvbmUnLCBmdW5jdGlvbigpe1xuICAgIF90aGlzLl9zZXRfY2Fyb3VzZWxfd2lkdGgoKTtcbiAgICBfdGhpcy5vbkxvYWRlZC5hcHBseShfdGhpcyk7XG4gIH0pO1xufTtcblxuLy8gUHJpdmF0ZVxuR2FsbGVyeUxvYWRlci5wcm90b3R5cGUuX2NvbGxlY3RfaW1hZ2Vfd2lkdGggPSBmdW5jdGlvbihpbWFnZSl7XG4gIGlmKGltYWdlLmlzTG9hZGVkKXtcbiAgICB2YXIgJGltZyA9ICQoaW1hZ2UuaW1nKTtcbiAgICB2YXIgJHBhcmVudCA9ICRpbWcuY2xvc2VzdCh0aGlzLnBhcmVudF9lbGUpO1xuICAgIHRoaXMuY2Fyb3VzZWxfd2lkdGggKz0gdGhpcy5faW1hZ2VfcGFyZW50c193aWR0aCgkcGFyZW50KTtcbiAgfSBlbHNlIHtcbiAgICAkKGltYWdlLmltZykuaGlkZSgpO1xuICB9XG59O1xuXG5HYWxsZXJ5TG9hZGVyLnByb3RvdHlwZS5faW1hZ2VfcGFyZW50c193aWR0aCA9IGZ1bmN0aW9uKCRpbWFnZV9wYXJlbnQpe1xuICAvLyBwbHVzIG9uZSBiZWN1YXNlIGpzIGlzIHJvdW5kaW5nIGFjdHVhbCB3aWR0aCB3aGVyZSBhcyBicm93c2VyIGlzIG5vdFxuICByZXR1cm4gJGltYWdlX3BhcmVudC53aWR0aCgpICsgdGhpcy5fcGFkZGluZ190b19udW0oJGltYWdlX3BhcmVudCwgJ3BhZGRpbmdMZWZ0JykgKyB0aGlzLl9wYWRkaW5nX3RvX251bSgkaW1hZ2VfcGFyZW50LCAncGFkZGluZ1JpZ2h0JykgKyAxO1xufTtcblxuR2FsbGVyeUxvYWRlci5wcm90b3R5cGUuX3BhZGRpbmdfdG9fbnVtID0gZnVuY3Rpb24oJGltYWdlX3BhcmVudCwgcGFkZGluZyl7XG4gIHJldHVybiBwYXJzZUludCgkaW1hZ2VfcGFyZW50LmNzcyhwYWRkaW5nKS5yZXBsYWNlKCdweCcsICcnKSk7XG59O1xuXG5HYWxsZXJ5TG9hZGVyLnByb3RvdHlwZS5fc2V0X2Nhcm91c2VsX3dpZHRoID0gZnVuY3Rpb24oKXtcbiAgdGhpcy4kZWxlLndpZHRoKHRoaXMuY2Fyb3VzZWxfd2lkdGgpO1xufTtcblxuLyogTWFpbiAqL1xudmFyIEdhbGxlcnkgPSBmdW5jdGlvbihvcHRpb25zKXtcbiAgdGhpcy5vcHRpb25zID0gb3B0aW9ucztcbiAgXG4gIHRoaXMuZWxlID0gdGhpcy5vcHRpb25zLmdhbGxlcnlfd3JhcHBlcjtcbiAgdGhpcy5pdGVtX3dyYXBwZXIgPSB0aGlzLm9wdGlvbnMuaXRlbV93cmFwcGVyO1xuICB0aGlzLmNvbnRyb2xzX3dyYXBwZXIgPSB0aGlzLm9wdGlvbnMuY29udHJvbHNfd3JhcHBlcjtcbiAgdGhpcy5sb2FkZXIgPSBuZXcgR2FsbGVyeUxvYWRlcih0aGlzLmVsZSwgdGhpcy5vcHRpb25zLml0ZW1fd3JhcHBlcik7XG4gIHRoaXMub25fbG9hZGVkID0gZmFsc2U7XG4gIFxuICB0aGlzLl9pbml0KCk7XG59O1xuXG5HYWxsZXJ5LnByb3RvdHlwZS51cGRhdGUgPSBmdW5jdGlvbiAoKSB7XG4gIHRoaXMuJGVsZS5wYXJlbnQoKS5hbmltYXRlKHtvcGFjaXR5OiAwfSwgJ3Nsb3cnKTtcbiAgdGhpcy5fcmVtb3ZlX2V2ZW50X2hhbmRsZXJzKCk7XG4gIHRoaXMuX2luaXQoKTtcbn07XG5cbkdhbGxlcnkucHJvdG90eXBlLl9pbml0ID0gZnVuY3Rpb24oKXtcbiAgdGhpcy4kZWxlID0gJCh0aGlzLmVsZSk7XG5cbiAgaWYodGhpcy4kZWxlLmxlbmd0aCA+IDApe1xuICAgIHRoaXMuX2FkZF9ldmVudF9oYW5kbGVycygpO1xuICAgIHRoaXMubG9hZGVyLmluaXQoKTtcbiAgICB0aGlzLl9zZXRfY3VycmVudF9pbWFnZSgpO1xuICB9XG59O1xuXG5HYWxsZXJ5LnByb3RvdHlwZS5fYWRkX2V2ZW50X2hhbmRsZXJzID0gZnVuY3Rpb24oKXtcbiAgdmFyIF90aGlzID0gdGhpcztcbiAgdGhpcy5sb2FkZXIub25Mb2FkZWQgPSBmdW5jdGlvbigpe1xuICAgIF90aGlzLiRlbGUucGFyZW50KCkuYW5pbWF0ZSh7b3BhY2l0eTogMX0sICdzbG93Jyk7XG4gICAgaWYgKF90aGlzLm9uX2xvYWRlZCkgX3RoaXMub25fbG9hZGVkLmFwcGx5KF90aGlzKTtcbiAgfTtcbiAgXG4gICQoZG9jdW1lbnQpLm9uKCdzd2lwZUxlZnQnLCB0aGlzLmNvbnRyb2xzX3dyYXBwZXIsIGZ1bmN0aW9uIChlKSB7XG4gICAgX3RoaXMuX25leHRfaW1nKCk7XG4gIH0pO1xuICBcbiAgJChkb2N1bWVudCkub24oJ3N3aXBlUmlnaHQnLCB0aGlzLmNvbnRyb2xzX3dyYXBwZXIsIGZ1bmN0aW9uIChlKSB7XG4gICAgX3RoaXMuX3ByZXZfaW1nKCk7XG4gIH0pO1xuICBcbiAgJChkb2N1bWVudCkub24oJ2NsaWNrJywgJ1tkYXRhLWdhbGxlcnktZGlyZWN0aW9uXScsIGZ1bmN0aW9uIChldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgdmFyICRjdXJyZW50X3RhcmdldCA9ICQoZXZlbnQuY3VycmVudFRhcmdldCk7XG4gICAgaWYgKCRjdXJyZW50X3RhcmdldC5kYXRhKCdnYWxsZXJ5LWRpcmVjdGlvbicpID09PSAnbGVmdCcpIHtcbiAgICAgIF90aGlzLl9wcmV2X2ltZygpO1xuICAgIH0gZWxzZSB7XG4gICAgICBfdGhpcy5fbmV4dF9pbWcoKTtcbiAgICB9XG4gIH0pO1xufTtcblxuR2FsbGVyeS5wcm90b3R5cGUuX3JlbW92ZV9ldmVudF9oYW5kbGVycyA9IGZ1bmN0aW9uKCl7XG4gIHRoaXMubG9hZGVyLm9uTG9hZGVkID0gZmFsc2U7XG4gIFxuICAkKGRvY3VtZW50KS5vZmYoJ3N3aXBlTGVmdCcsIHRoaXMuY29udHJvbHNfd3JhcHBlcik7XG4gICQoZG9jdW1lbnQpLm9mZignc3dpcGVSaWdodCcsIHRoaXMuY29udHJvbHNfd3JhcHBlcik7XG4gICQoZG9jdW1lbnQpLm9mZignY2xpY2snLCAnW2RhdGEtZ2FsbGVyeS1kaXJlY3Rpb25dJyk7XG59O1xuXG5HYWxsZXJ5LnByb3RvdHlwZS5fc2V0X2N1cnJlbnRfaW1hZ2UgPSBmdW5jdGlvbigpe1xuICB2YXIgJGN1cnJlbnQgPSB0aGlzLiRlbGUuZmluZCh0aGlzLml0ZW1fd3JhcHBlcisnLmlzX2N1cnJlbnQnKTtcbiAgaWYgKCRjdXJyZW50Lmxlbmd0aCA+IDApIHtcbiAgIHRoaXMuJGN1cnJlbnRfaW1hZ2UgPSAkY3VycmVudC5maXJzdCgpO1xuICB9IGVsc2Uge1xuICAgdGhpcy4kY3VycmVudF9pbWFnZSA9IHRoaXMuJGVsZS5maW5kKHRoaXMuaXRlbV93cmFwcGVyKS5maXJzdCgpO1xuICB9XG4gIHRoaXMuJGN1cnJlbnRfaW1hZ2UuYWRkQ2xhc3MoJ2lzX2N1cnJlbnQnKTtcbiAgdGhpcy5fY2hlY2tfZm9yX2VuZCgpO1xufTtcblxuR2FsbGVyeS5wcm90b3R5cGUuX3ByZXZfaW1nID0gZnVuY3Rpb24oKXtcbiAgdmFyIHByZXYgPSB0aGlzLiRjdXJyZW50X2ltYWdlLnByZXYoKTtcbiAgaWYgKHByZXYubGVuZ3RoID4gMCkge1xuICAgIHByZXYuY3NzKHsgbWFyZ2luTGVmdDogJzAnIH0pLmFkZENsYXNzKCdpc19jdXJyZW50Jyk7XG4gICAgdGhpcy4kY3VycmVudF9pbWFnZS5yZW1vdmVDbGFzcygnaXNfY3VycmVudCcpO1xuICAgIHRoaXMuJGN1cnJlbnRfaW1hZ2UgPSBwcmV2O1xuICAgIHRoaXMuX2NoZWNrX2Zvcl9lbmQoKTtcbiAgfVxufTtcblxuR2FsbGVyeS5wcm90b3R5cGUuX25leHRfaW1nID0gZnVuY3Rpb24oKXtcbiAgdmFyIG5leHQgPSB0aGlzLiRjdXJyZW50X2ltYWdlLm5leHQoKTtcbiAgaWYgKG5leHQubGVuZ3RoID4gMCkge1xuICAgIHZhciB3aWR0aCA9IHRoaXMubG9hZGVyLl9pbWFnZV9wYXJlbnRzX3dpZHRoKHRoaXMuJGN1cnJlbnRfaW1hZ2UpO1xuICAgIHRoaXMuJGN1cnJlbnRfaW1hZ2UuY3NzKHsgbWFyZ2luTGVmdDogKHdpZHRoICogLTEpIH0pLnJlbW92ZUNsYXNzKCdpc19jdXJyZW50Jyk7XG4gICAgbmV4dC5hZGRDbGFzcygnaXNfY3VycmVudCcpO1xuICAgIHRoaXMuJGN1cnJlbnRfaW1hZ2UgPSBuZXh0O1xuICAgIHRoaXMuX2NoZWNrX2Zvcl9lbmQoKTtcbiAgfVxufTtcblxuR2FsbGVyeS5wcm90b3R5cGUuX2NoZWNrX2Zvcl9lbmQgPSBmdW5jdGlvbiAoKSB7XG4gICQoJ1tkYXRhLWdhbGxlcnktZGlyZWN0aW9uXScpLnJlbW92ZUNsYXNzKCdkaXNhYmxlZCcpO1xuICBpZiAodGhpcy4kY3VycmVudF9pbWFnZS5wcmV2KCkubGVuZ3RoID09PSAwKSB7XG4gICAgJCgnW2RhdGEtZ2FsbGVyeS1kaXJlY3Rpb249XCJsZWZ0XCJdJykuYWRkQ2xhc3MoJ2Rpc2FibGVkJyk7XG4gIH0gZWxzZSBpZiAodGhpcy4kY3VycmVudF9pbWFnZS5uZXh0KCkubGVuZ3RoID09PSAwKSB7XG4gICAgJCgnW2RhdGEtZ2FsbGVyeS1kaXJlY3Rpb249XCJyaWdodFwiXScpLmFkZENsYXNzKCdkaXNhYmxlZCcpO1xuICB9XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IEdhbGxlcnk7IiwicmVxdWlyZSgnLi9fcG9seWZpbGxzLmpzJykuZ2V0Q29tcHV0ZWRTdHlsZSgpO1xuXG5tb2R1bGUuZXhwb3J0cy5zaXplID0gZnVuY3Rpb24gKCkge1xuICByZXR1cm4gd2luZG93LmdldENvbXB1dGVkU3R5bGUoZG9jdW1lbnQuYm9keSwnOmFmdGVyJykuZ2V0UHJvcGVydHlWYWx1ZSgnY29udGVudCcpLnJlcGxhY2UoL1snXCJdL2csIFwiXCIpO1xufTsiLCIvKmpzaGludCBtdWx0aXN0cjogdHJ1ZSAqL1xuXG52YXIgSW5zdGFncmFtRmVlZCA9IGZ1bmN0aW9uIChlbGUpIHtcbiAgdGhpcy5lbGUgPSBlbGU7XG4gIHRoaXMuJGVsZSA9ICQodGhpcy5lbGUpO1xuICB0aGlzLmFwaV91cmwgPSAnaHR0cHM6Ly9hcGkuaW5zdGFncmFtLmNvbS92MSc7XG4gIFxuICB0aGlzLnJlcXVlc3RfcXVldWUgPSBbXTtcbiAgdGhpcy5yZXF1ZXN0aW5nID0gZmFsc2U7XG4gIFxuICB0aGlzLmltYWdlX2NvdW50X2RlZmF1bHQgPSAxMjtcbiAgdGhpcy5pbWFnZV9jb3VudF9idWZmZXIgPSAxMDsgLy8gYWRkIGEgZmV3IGV4dHJhIGluY2FzZSB3ZSBzb21lIGhhdmUgYmVlbiBmaWx0ZXJlZCBvdXQgYnkgaW5zdGFncmFtIG9yIHRoZSBibGFja2xpc3RcbiAgXG4gIHRoaXMuX2dldF9kYXRhKCk7XG4gIHRoaXMuX2xvYWRfZmVlZCgpO1xufTtcblxuSW5zdGFncmFtRmVlZC5wcm90b3R5cGUuX2dldF9kYXRhID0gZnVuY3Rpb24gKCkge1xuICB0aGlzLmNsaWVudF9pZCA9IHRoaXMuJGVsZS5kYXRhKCdjbGllbnQtaWQnKTtcbiAgdGhpcy5pbWFnZV9jb3VudCA9ICggdGhpcy4kZWxlLmRhdGEoJ2ltYWdlLWNvdW50JykgfHwgdGhpcy5pbWFnZV9jb3VudF9kZWZhdWx0ICk7XG4gIHRoaXMuaW1hZ2VfdG90YWwgPSB0aGlzLmltYWdlX2NvdW50ICsgdGhpcy5pbWFnZV9jb3VudF9idWZmZXI7XG4gIFxuICB0aGlzLmhhc2h0YWcgPSB0aGlzLiRlbGUuZGF0YSgnaGFzaHRhZycpO1xuICB0aGlzLnVzZXIgPSB0aGlzLiRlbGUuZGF0YSgndXNlcicpO1xuICB0aGlzLl9nZXRfdXNlcl9pZCgpO1xufTtcblxuSW5zdGFncmFtRmVlZC5wcm90b3R5cGUuX2dldF91c2VyX2lkID0gZnVuY3Rpb24gKCkge1xuICBpZiAodGhpcy51c2VyKSB7XG4gICAgdGhpcy5yZXF1ZXN0X3F1ZXVlLnB1c2goJ3VzZXJfaWQnKTtcbiAgICB0aGlzLl9zdGFydF9yZXF1ZXN0cygpO1xuICB9XG59O1xuXG5JbnN0YWdyYW1GZWVkLnByb3RvdHlwZS5fbG9hZF9mZWVkID0gZnVuY3Rpb24gKCkge1xuICB2YXIgcmVxdWVzdF90eXBlO1xuICBpZiAodGhpcy5oYXNodGFnICE9PSB1bmRlZmluZWQpIHtcbiAgICByZXF1ZXN0X3R5cGUgPSAnaGFzaHRhZyc7XG4gIH0gZWxzZSBpZiAodGhpcy51c2VyICE9PSB1bmRlZmluZWQpIHtcbiAgICByZXF1ZXN0X3R5cGUgPSAndXNlcic7XG4gIH1cbiAgdGhpcy5yZXF1ZXN0X3F1ZXVlLnB1c2gocmVxdWVzdF90eXBlKTtcbiAgdGhpcy5fc3RhcnRfcmVxdWVzdHMoKTtcbn07XG5cbkluc3RhZ3JhbUZlZWQucHJvdG90eXBlLl9idWlsZF9yZXF1ZXN0ID0gZnVuY3Rpb24gKHR5cGUpIHtcbiAgaWYgKHRoaXMuY2xpZW50X2lkID09PSBudWxsKSB0aHJvdyAnW0VSUk9SXSBJbnN0YWdyYW06IFlvdSBtdXN0IHByb3ZpZGUgYSBjbGllbnQgaWQnO1xuICB2YXIgcmVxdWVzdCA9IHt9O1xuICByZXF1ZXN0LmRhdGEgPSB7XG4gICAgY2xpZW50X2lkOiB0aGlzLmNsaWVudF9pZFxuICB9O1xuICBcbiAgc3dpdGNoICh0eXBlKSB7XG4gICAgY2FzZSAndXNlcl9pZCc6XG4gICAgICByZXF1ZXN0LnVybCA9IHRoaXMuYXBpX3VybCArICcvdXNlcnMvc2VhcmNoP3E9JyArIHRoaXMudXNlcjtcbiAgICAgIHJlcXVlc3QuY2FsbGJhY2sgPSBmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICAgdGhpcy51c2VyX2lkID0gcmVzcG9uc2UuZGF0YVswXS5pZDtcbiAgICAgIH07XG4gICAgICBicmVhaztcbiAgICBcbiAgICBjYXNlICd1c2VyJzpcbiAgICAgIHJlcXVlc3QudXJsID0gdGhpcy5hcGlfdXJsICsgJy91c2Vycy8nICsgdGhpcy51c2VyX2lkICsgJy9tZWRpYS9yZWNlbnQnO1xuICAgICAgcmVxdWVzdC5kYXRhID0gJC5leHRlbmQocmVxdWVzdC5kYXRhLCB7XG4gICAgICAgIGNvdW50OiB0aGlzLmltYWdlX3RvdGFsXG4gICAgICB9KTtcbiAgICAgIHJlcXVlc3QuY2FsbGJhY2sgPSBmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICAgdGhpcy5fYnVpbGRfZmVlZChyZXNwb25zZS5kYXRhKTtcbiAgICAgIH07XG4gICAgICBicmVhaztcbiAgICBcbiAgICBjYXNlICdoYXNodGFnJzpcbiAgICAgIHJlcXVlc3QudXJsID0gdGhpcy5hcGlfdXJsICsgJy90YWdzLycgKyB0aGlzLmhhc2h0YWcgKyAnL21lZGlhL3JlY2VudCc7XG4gICAgICByZXF1ZXN0LmRhdGEgPSAkLmV4dGVuZChyZXF1ZXN0LmRhdGEsIHtcbiAgICAgICAgY291bnQ6IHRoaXMuaW1hZ2VfdG90YWxcbiAgICAgIH0pO1xuICAgICAgcmVxdWVzdC5jYWxsYmFjayA9IGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgICB0aGlzLl9idWlsZF9mZWVkKHJlc3BvbnNlLmRhdGEpO1xuICAgICAgfTtcbiAgICAgIGJyZWFrO1xuICB9XG4gIFxuICByZXR1cm4gcmVxdWVzdDtcbn07XG5cbkluc3RhZ3JhbUZlZWQucHJvdG90eXBlLl9zdGFydF9yZXF1ZXN0cyA9IGZ1bmN0aW9uICgpIHtcbiAgaWYgKCF0aGlzLnJlcXVlc3RpbmcpIHtcbiAgICB0aGlzLnJlcXVlc3RpbmcgPSB0cnVlO1xuICAgIHRoaXMuX3JlcXVlc3QoKTtcbiAgfVxufTtcblxuSW5zdGFncmFtRmVlZC5wcm90b3R5cGUuX3JlcXVlc3QgPSBmdW5jdGlvbiAoKSB7XG4gIGlmICh0aGlzLnJlcXVlc3RfcXVldWUubGVuZ3RoID4gMCkge1xuICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgdmFyIHJlcXVlc3RfdHlwZSA9IHRoaXMucmVxdWVzdF9xdWV1ZS5zaGlmdCgpO1xuICAgIHZhciByZXF1ZXN0ID0gdGhpcy5fYnVpbGRfcmVxdWVzdChyZXF1ZXN0X3R5cGUpO1xuICAgIFxuICAgICQuYWpheCh7XG4gICAgICBkYXRhVHlwZTogXCJqc29ucFwiLFxuICAgICAgdXJsOiByZXF1ZXN0LnVybCxcbiAgICAgIGRhdGE6IHJlcXVlc3QuZGF0YVxuICAgIH0pXG4gICAgLmRvbmUoZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICByZXF1ZXN0LmNhbGxiYWNrLmFwcGx5KF90aGlzLCBbcmVzcG9uc2VdKTtcbiAgICAgIF90aGlzLl9yZXF1ZXN0KCk7XG4gICAgfSlcbiAgICAuZmFpbChmdW5jdGlvbiAoYSxiLGMpIHtcbiAgICAgIGNvbnNvbGUubG9nKCdmYWlsJywgYSwgYiwgYyk7XG4gICAgfSk7XG4gICAgXG4gIH0gZWxzZSB7XG4gICAgdGhpcy5yZXF1ZXN0aW5nID0gZmFsc2U7XG4gIH1cbn07XG5cbkluc3RhZ3JhbUZlZWQucHJvdG90eXBlLl9idWlsZF9mZWVkID0gZnVuY3Rpb24gKGRhdGEpIHtcbiAgdmFyIG1hcmt1cCxcbiAgICBmaWx0ZXJlZF9kYXRhID0gdGhpcy5fZmlsdGVyX2RhdGEoZGF0YSk7XG4gICAgXG4gIGlmIChmaWx0ZXJlZF9kYXRhLmxlbmd0aCA+IDApIHtcbiAgICBtYXJrdXAgPSB0aGlzLl9idWlsZF9mZWVkX21hcmt1cChmaWx0ZXJlZF9kYXRhKTtcbiAgICB0aGlzLiRlbGUuYWRkQ2xhc3MoJ2dyb3VwJykuYXR0cignZGF0YS1ncm91cC1zaXplJywgZmlsdGVyZWRfZGF0YS5sZW5ndGgpO1xuICB9IGVsc2Uge1xuICAgIG1hcmt1cCA9IHRoaXMuX2J1aWxkX2Vycm9yX21hcmt1cCgpO1xuICB9XG4gIFxuICB0aGlzLiRlbGUuYXBwZW5kKG1hcmt1cCk7XG59O1xuXG5JbnN0YWdyYW1GZWVkLnByb3RvdHlwZS5fZmlsdGVyX2RhdGEgPSBmdW5jdGlvbiAoZGF0YSkge1xuICAvKiBUT0RPOiByZW1vdmUgYmxhY2tsaXN0ZWQgaW1hZ2VzICovXG4gIHJldHVybiBkYXRhO1xufTtcblxuSW5zdGFncmFtRmVlZC5wcm90b3R5cGUuX2J1aWxkX2ZlZWRfbWFya3VwID0gZnVuY3Rpb24gKGRhdGEpIHtcbiAgdmFyIG1hcmt1cCA9ICcnO1xuICB2YXIgY291bnQgPSAoZGF0YS5sZW5ndGggPCB0aGlzLmltYWdlX2NvdW50KT8gZGF0YS5sZW5ndGggOiB0aGlzLmltYWdlX2NvdW50O1xuICBcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBjb3VudDsgaSsrKSB7XG4gICAgdmFyIGl0ZW0gPSBkYXRhW2ldO1xuICAgIGlmIChpdGVtKSB7XG4gICAgICBtYXJrdXAgKz0gdGhpcy5fYnVpbGRfaXRlbV9tYXJrdXAoaXRlbSk7XG4gICAgfVxuICB9XG4gIHJldHVybiBtYXJrdXA7XG59O1xuICBcbkluc3RhZ3JhbUZlZWQucHJvdG90eXBlLl9idWlsZF9pdGVtX21hcmt1cCA9IGZ1bmN0aW9uIChkYXRhKSB7XG4gIHJldHVybiAnPGRpdiBjbGFzcz1cImdyb3VwLWl0ZW0td3JhcFwiPlxcXG4gICAgPGZpZ3VyZSBjbGFzcz1cImdyb3VwLWl0ZW0gdGh1bWJuYWlsXCI+XFxcbiAgICAgIDxhIGhyZWY9XCInKyBkYXRhLmxpbmsgKydcIj5cXFxuICAgICAgICA8ZGl2IGNsYXNzPVwiZ3JvdXAtaXRlbS1pbWFnZVwiPlxcXG4gICAgICAgICAgPGltZyBzcmM9XCInICsgZGF0YS5pbWFnZXMuc3RhbmRhcmRfcmVzb2x1dGlvbi51cmwgKyAnXCIgYWx0PVwiJyArIGRhdGEuY2FwdGlvbi50ZXh0ICsgJ1wiPlxcXG4gICAgICAgIDwvZGl2PlxcXG4gICAgICAgIDxmaWdjYXB0aW9uIGNsYXNzPVwiZ3JvdXAtaXRlbS1kZXRhaWxzIGNhcHRpb25cIj5cXFxuICAgICAgICAgIDxwPjxzcGFuIGNsYXNzPVwidXNlclwiPicgKyBkYXRhLmNhcHRpb24uZnJvbS51c2VybmFtZSArICc8L3NwYW4+ICcgKyBkYXRhLmNhcHRpb24udGV4dCArICc8L3A+XFxcbiAgICAgICAgPC9maWdjYXB0aW9uPlxcXG4gICAgICA8L2E+XFxcbiAgICA8L2ZpZ3VyZT5cXFxuICA8L2Rpdj4nO1xufTtcblxuSW5zdGFncmFtRmVlZC5wcm90b3R5cGUuX2J1aWxkX2Vycm9yX21hcmt1cCA9IGZ1bmN0aW9uIChkYXRhKSB7XG4gIHJldHVybiAnPHA+JyArIHRoaXMuJGVsZS5kYXRhKCdlbXB0eS1tZXNzYWdlJykgKyAnPC9wPic7XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IEluc3RhZ3JhbUZlZWQ7IiwidmFyIEluc3RhZ3JhbSA9IHJlcXVpcmUoJy4vYnNpZnkuc29jaWFsX2ZlZWRfaW5zdGFncmFtLmpzJyk7XG5cbnZhciBTb2NpYWxGZWVkcyA9IHt9O1xuXG5Tb2NpYWxGZWVkcy5pbml0ID0gZnVuY3Rpb24gKCkge1xuICBTb2NpYWxGZWVkcy5pbnN0YWdyYW0oKTtcbn07XG5cblNvY2lhbEZlZWRzLmluc3RhZ3JhbSA9IGZ1bmN0aW9uICgpIHtcbiAgdmFyIGVsZXMgPSBTb2NpYWxGZWVkcy5fZ2V0X2VsZW1lbnRzKCdpbnN0YWdyYW0nKTtcbiAgaWYgKGVsZXMubGVuZ3RoID4gMCkge1xuICAgIGVsZXMuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICBuZXcgSW5zdGFncmFtKHRoaXMpO1xuICAgIH0pO1xuICB9XG59O1xuXG5Tb2NpYWxGZWVkcy5fZ2V0X2VsZW1lbnRzID0gZnVuY3Rpb24gKHNlcnZpY2UpIHtcbiAgdmFyIGVsZV9zZWxlY3RvciA9ICdbZGF0YS1zb2NpYWwtZmVlZD1cIicrc2VydmljZSsnXCJdJztcbiAgcmV0dXJuICQoZWxlX3NlbGVjdG9yKTtcbn07XG5cbm1vZHVsZS5leHBvcnRzID0gU29jaWFsRmVlZHM7IiwicmVxdWlyZSgndW5pZm9ybVRodW1ibmFpbHMnKTtcbnJlcXVpcmUoJ2pxdWVyeS1vcmRlcmx5Jyk7XG5cbnZhciBUaHVtYm5haWxzID0ge307XG5cblRodW1ibmFpbHMuaW5pdCA9IGZ1bmN0aW9uICgpIHtcbiAgaWYgKEJzaWZ5LnRodW1ibmFpbF9zZXR0aW5ncy5jb25zdHJhaW5faW1hZ2VzKSB7XG4gICAgXG4gICAgdmFyIG9wdHMgPSB7fTtcbiAgICBvcHRzLmZpdCA9IChCc2lmeS50aHVtYm5haWxfc2V0dGluZ3MuY3JvcF9pbWFnZXMpPyAnY3JvcCcgOiAnc2NhbGUnO1xuICAgIG9wdHMuYWxpZ24gPSBCc2lmeS50aHVtYm5haWxfc2V0dGluZ3MuaW1hZ2VfYWxpZ25tZW50LnRvTG93ZXJDYXNlKCk7XG4gICAgdmFyIHJhdGlvID0gQnNpZnkudGh1bWJuYWlsX3NldHRpbmdzLmltYWdlX3JhdGlvLnRvTG93ZXJDYXNlKCk7XG4gICAgaWYgKHJhdGlvID09PSAnc3F1YXJlJyB8fCByYXRpbyA9PT0gJ2xhbmRzY2FwZScgfHwgcmF0aW8gPT09ICdwb3J0cmFpdCcpIHtcbiAgICAgIG9wdHMuZm9ybWF0ID0gcmF0aW87XG4gICAgfSBlbHNlIHtcbiAgICAgIG9wdHMucmF0aW8gPSByYXRpbztcbiAgICB9XG4gICAgXG4gICAgJChCc2lmeS50aHVtYm5haWxfc2VsZWN0b3JzLmltYWdlX3dyYXBwZXIpLnVuaWZvcm1fdGh1bWJuYWlscyhvcHRzKS5vbigndXRfY29tcGxldGUnLCBmdW5jdGlvbigpe1xuICAgICAgVGh1bWJuYWlscy5vcmRlcmx5KCk7XG4gICAgfSk7XG4gIH0gZWxzZSB7XG4gICAgLy8ganVzdCB1c2Ugb3JkZXJseVxuICAgIFRodW1ibmFpbHMub3JkZXJseSgpO1xuICB9XG59O1xuXG5UaHVtYm5haWxzLm9yZGVybHkgPSBmdW5jdGlvbiAoKSB7XG4gICQoQnNpZnkudGh1bWJuYWlsX3NlbGVjdG9ycy5kZXRhaWxzX3dyYXBwZXIpLm9yZGVybHkoeyBtZXRob2Q6ICdjaGlsZHJlbicgfSk7XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IFRodW1ibmFpbHM7IiwidmFyIFN3aXBlID0gZnVuY3Rpb24gKCkge1xuICB0aGlzLnRocmVzaG9sZCA9IDU7XG4gIHRoaXMueERvd24gPSBudWxsOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gIHRoaXMueURvd24gPSBudWxsO1xuICB0aGlzLmFkZF9ldmVudF9saXN0ZW5lcnMoKTtcbn07XG5cblN3aXBlLnByb3RvdHlwZS5hZGRfZXZlbnRfbGlzdGVuZXJzID0gZnVuY3Rpb24gKCkge1xuICB2YXIgX3RoaXMgPSB0aGlzO1xuICBpZiAoRWxlbWVudC5wcm90b3R5cGUuYWRkRXZlbnRMaXN0ZW5lcikge1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoc3RhcnQnLCBmdW5jdGlvbiAoZXZ0KSB7XG4gICAgICBfdGhpcy5oYW5kbGVUb3VjaFN0YXJ0KGV2dCk7XG4gICAgfSwgZmFsc2UpO1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNobW92ZScsIGZ1bmN0aW9uIChldnQpIHtcbiAgICAgIF90aGlzLmhhbmRsZVRvdWNoTW92ZShldnQpO1xuICAgIH0sIGZhbHNlKTtcbiAgfVxufTtcblxuU3dpcGUucHJvdG90eXBlLmhhbmRsZVRvdWNoU3RhcnQgPSBmdW5jdGlvbiAoZXZ0KSB7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcbiAgdGhpcy54RG93biA9IGV2dC50b3VjaGVzWzBdLmNsaWVudFg7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcbiAgdGhpcy55RG93biA9IGV2dC50b3VjaGVzWzBdLmNsaWVudFk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcbn07ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXG5cblN3aXBlLnByb3RvdHlwZS5oYW5kbGVUb3VjaE1vdmUgPSBmdW5jdGlvbiAoZXZ0KSB7XG4gIGlmICggISB0aGlzLnhEb3duIHx8ICEgdGhpcy55RG93biApIHJldHVybjtcbiAgXG4gIHZhciBjdXJyZW50X3RhcmdldCA9IGV2dC50YXJnZXRUb3VjaGVzWzBdLnRhcmdldDtcbiAgXG4gIHZhciB4VXAgPSBldnQudG91Y2hlc1swXS5jbGllbnRYOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxuICB2YXIgeVVwID0gZXZ0LnRvdWNoZXNbMF0uY2xpZW50WTtcbiAgXG4gIHZhciB4RGlmZiA9IHRoaXMueERvd24gLSB4VXA7XG4gIHZhciB5RGlmZiA9IHRoaXMueURvd24gLSB5VXA7XG4gIFxuICBpZiAoIE1hdGguYWJzKCB4RGlmZiApID4gTWF0aC5hYnMoIHlEaWZmICkgKSB7XG4gICAgaWYgKCB4RGlmZiA+IDAgKSB7XG4gICAgICBpZiAoeERpZmYgPiB0aGlzLnRocmVzaG9sZCkge1xuICAgICAgICAkKGN1cnJlbnRfdGFyZ2V0KS50cmlnZ2VyKCdzd2lwZUxlZnQnKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKHhEaWZmICogLTEgPiB0aGlzLnRocmVzaG9sZCkge1xuICAgICAgICAkKGN1cnJlbnRfdGFyZ2V0KS50cmlnZ2VyKCdzd2lwZVJpZ2h0Jyk7XG4gICAgICB9XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIGlmICggeURpZmYgPiAwICkge1xuICAgICAgaWYgKHlEaWZmID4gdGhpcy50aHJlc2hvbGQpIHtcbiAgICAgICAgJChjdXJyZW50X3RhcmdldCkudHJpZ2dlcignc3dpcGVVcCcpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBpZiAoeURpZmYgKiAtMSA+IHRoaXMudGhyZXNob2xkKSB7XG4gICAgICAgICQoY3VycmVudF90YXJnZXQpLnRyaWdnZXIoJ3N3aXBlRG93bicpO1xuICAgICAgfVxuICAgIH0gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxuICB9XG4gIC8qIHJlc2V0IHZhbHVlcyAqL1xuICB0aGlzLnhEb3duID0gbnVsbDtcbiAgdGhpcy55RG93biA9IG51bGw7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXG59O1xuXG5uZXcgU3dpcGUoKTsiLCJ2YXIgVmFyaWFudE9wdGlvblN3aXRjaGVyID0ge307XG5cbi8vIFN3aXRjaCB0aGUgdmFyaWFudCBpZiB0aGUgZ2FsbGVyeSB0aHVtYiBpcyBsaW5rZWQgdG8gb25lXG5WYXJpYW50T3B0aW9uU3dpdGNoZXIuaW1hZ2VfdmFyaWFudF9zd2l0Y2hlciA9IGZ1bmN0aW9uICgpIHtcbiAgXG4gIHZhciAkcHJvZHVjdF9zZWxlY3RvciA9ICQoQnNpZnkuc2VsZWN0b3JzLnByb2R1Y3Quc2VsZWN0X3NlbGVjdG9yKTtcbiAgXG4gICQoZG9jdW1lbnQpLm9uKCdjbGljaycsICdbZGF0YS12YXJpYW50LWlkXScsIGZ1bmN0aW9uIChlKSB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIHZhciAkY3VycmVudF90YXJnZXQgPSAkKGUuY3VycmVudFRhcmdldCk7XG4gICAgLy8gdXBkYXRlIHRoZSBwcm9kdWN0IHNlbGVjdG9yIHdpdGggdGhlIG5ldyB2YXJpYW50IGlkXG4gICAgJHByb2R1Y3Rfc2VsZWN0b3IudmFsKCRjdXJyZW50X3RhcmdldC5kYXRhKCd2YXJpYW50LWlkJykpO1xuICAgIC8vIHVwZGF0ZSB0aGUgb3B0aW9uIHNlbGVjdG9yc1xuICAgIFZhcmlhbnRPcHRpb25Td2l0Y2hlci51cGRhdGVfcHJvZHVjdF9zZWxlY3Rvcl9vcHRpb25zKCRwcm9kdWN0X3NlbGVjdG9yKTtcbiAgfSk7XG59O1xuXG4vLyBNYWtlIHRoZSBvcmlnaW5hbCB2YXJpYW50IHNlbGVjdG9yIHVwZGF0ZSB0aGUgZ2VuZXJhdGVkIG9wdGlvbiBzZWxlY3RvcnNcbi8vIHdlIGFyZSBub3QgZG9pbmcgdGhpcyBvbiBhIHRyaWdnZXIgZXZlbnQgYmVjYXVzZSBpZiB3ZSBkaWQgd2UnZCBlbmQgdXAgaW4gcmVjdXJzaXZlIGhlbGxcblZhcmlhbnRPcHRpb25Td2l0Y2hlci51cGRhdGVfcHJvZHVjdF9zZWxlY3Rvcl9vcHRpb25zID0gZnVuY3Rpb24gKCRwcm9kdWN0X3NlbGVjdG9yKSB7XG4gIFxuICAvLyBnZXQgdGhlIHNlbGVjdGVkIHZhcmlhbnQgb2JqZWN0XG4gIHZhciB2YXJpYW50X2lkID0gJHByb2R1Y3Rfc2VsZWN0b3IudmFsKCk7XG4gIHZhciB2YXJpYW50ID0gQnNpZnkuZ2V0X3ZhcmlhbnRfYnlfaWQodmFyaWFudF9pZCk7XG4gIFxuICBpZiAodmFyaWFudCkge1xuICAgIC8vIHVwZGF0ZSBlYWNoIG9wdGlvbiBzZWxlY3RvclxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgQnNpZnkucHJvZHVjdC5vcHRpb25zLmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgb3B0aW9uID0gJ29wdGlvbicrKGkrMSk7XG4gICAgICB2YXIgdmFsdWUgPSB2YXJpYW50W29wdGlvbl07XG4gICAgICAkKCcuc2luZ2xlLW9wdGlvbi1zZWxlY3RvcjplcSgnK2krJyknKS52YWwodmFsdWUpLnRyaWdnZXIoJ2NoYW5nZScpO1xuICAgIH1cbiAgfVxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBWYXJpYW50T3B0aW9uU3dpdGNoZXI7IiwiLypcbiAgUEhEIENhcnQgaXMgdGhlIG1haW4gZmlsZSBmb3IgaGFuZGxpbmcgYWxsIHRoZSBkaWZmZXJlbnQgd2F5cyB0aGF0IHRoZSBzaXRlIGNhbiBhZGQgaXRlbXMgdG8gdGhlIGNhcnRcbiovXG5cbnZhciBTaXhQYWNrQnVpbGRlciA9IHJlcXVpcmUoJy4vcGhkLmNhcnQuc2l4cGFjay5qcycpO1xudmFyIE11bHRpU3RlcEJ1aWxkZXIgPSByZXF1aXJlKCcuL3BoZC5jYXJ0Lm11bHRpc3RlcC5qcycpO1xudmFyIFN0YW5kYXJkQ2FydCA9IHJlcXVpcmUoJy4vcGhkLmNhcnQuc3RhbmRhcmQuanMnKTtcblxudmFyIFBoZENhcnQgPSBmdW5jdGlvbiAoKSB7XG4gIHZhciBjYXJ0ID0gbmV3IFN0YW5kYXJkQ2FydCgpO1xuICBcbiAgLy8gVE9ETzogb25seSBsb2FkIHRoZSBhcHByb3ByaWF0ZSBjbGFzc2VzIHRoYXQgYXJlIG5lZWRlZCBmb3IgdGhlIHBhZ2VcbiAgXG4gIG5ldyBTaXhQYWNrQnVpbGRlcihjYXJ0KTtcbiAgbmV3IE11bHRpU3RlcEJ1aWxkZXIoY2FydCk7XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IFBoZENhcnQ7IiwidmFyIE11bHRpU3RlcEJ1aWxkZXIgPSBmdW5jdGlvbiAoc3RhbmRhcmRfY2FydCkge1xuICB0aGlzLnN0YW5kYXJkX2NhcnQgPSBzdGFuZGFyZF9jYXJ0O1xufTtcblxubW9kdWxlLmV4cG9ydHMgPSBNdWx0aVN0ZXBCdWlsZGVyOyIsInZhciBFdmVudGVyID0gcmVxdWlyZSgnLi9fZXZlbnRlci5qcycpO1xudmFyIEl0ZW1zVG90YWwgPSByZXF1aXJlKCcuL3BoZC5jYXJ0LnNpeHBhY2suaG9sZGVyX3RvdGFsLmpzJyk7XG52YXIgSXRlbXNIb2xkZXIgPSByZXF1aXJlKCcuL3BoZC5jYXJ0LnNpeHBhY2suaG9sZGVyX2l0ZW1zLmpzJyk7XG52YXIgSXRlbXNEaXNwbGF5ID0gcmVxdWlyZSgnLi9waGQuY2FydC5zaXhwYWNrLmhvbGRlcl9kaXNwbGF5LmpzJyk7XG52YXIgSXRlbVN1Ym1pdHRlciA9IHJlcXVpcmUoJy4vcGhkLmNhcnQuc2l4cGFjay5ob2xkZXJfc3VibWl0dGVyLmpzJyk7XG5cbnZhciBTaXhQYWNrSG9sZGVyID0gZnVuY3Rpb24gKCRlbGUpIHtcbiAgdGhpcy4kZWxlID0gJGVsZTtcbiAgbmV3IEV2ZW50ZXIodGhpcyk7XG4gIFxuICB2YXIgbGltaXRfbXVsdGlwbGUgPSB0aGlzLiRlbGUuZGF0YSgncGhkLWhvbGRpbmctbGltaXQtbXVsdGlwbGUnKSB8fCA2O1xuICB2YXIgc3Vic2NyaXB0aW9uX2lkID0gdGhpcy4kZWxlLmRhdGEoJ3BoZC1zdWJzY3JpcHRpb24taWQnKTtcbiAgdmFyIHNoaXBwaW5nX2ludGVydmFsX2ZyZXF1ZW5jeSA9IHRoaXMuJGVsZS5kYXRhKCdwaGQtc2hpcHBpbmctaW50ZXJ2YWwtZnJlcXVlbmN5Jyk7XG4gIHZhciBzaGlwcGluZ19pbnRlcnZhbF91bml0X3R5cGUgPSB0aGlzLiRlbGUuZGF0YSgncGhkLXNoaXBwaW5nLWludGVydmFsLXVuaXQtdHlwZScpO1xuICBcbiAgdmFyIGRpc3BsYXlfZWxlbWVudCA9IHRoaXMuJGVsZS5maW5kKCdbZGF0YS1waGQtaG9sZGluZy1pdGVtc10nKTtcbiAgdmFyIHN1Ym1pdHRlcl9lbGVtZW50ID0gdGhpcy4kZWxlLmZpbmQoJ2Zvcm0nKTtcbiAgXG4gIHRoaXMuaXRlbXMgPSBuZXcgSXRlbXNIb2xkZXIoJ3NpeHBhY2sgYnVpbGRlcicsIGxpbWl0X211bHRpcGxlLCBzdWJzY3JpcHRpb25faWQsIHNoaXBwaW5nX2ludGVydmFsX2ZyZXF1ZW5jeSwgc2hpcHBpbmdfaW50ZXJ2YWxfdW5pdF90eXBlKTtcbiAgdGhpcy5pdGVtc19kaXNwbGF5ID0gbmV3IEl0ZW1zRGlzcGxheShkaXNwbGF5X2VsZW1lbnQsIGxpbWl0X211bHRpcGxlLCB0aGlzLml0ZW1zKTtcbiAgdGhpcy50b3RhbF9kaXNwbGF5ID0gbmV3IEl0ZW1zVG90YWwodGhpcy5pdGVtcyk7XG4gIHRoaXMuc3VibWl0dGVyID0gbmV3IEl0ZW1TdWJtaXR0ZXIoc3VibWl0dGVyX2VsZW1lbnQsIHRoaXMuaXRlbXMpO1xuICBcbiAgdGhpcy5fYWRkX2V2ZW50X2xpc3RlbmVycygpO1xufTtcblxuU2l4UGFja0hvbGRlci5wcm90b3R5cGUuYWRkX3RvX2hvbGRpbmcgPSBmdW5jdGlvbiAocHJvZHVjdCkge1xuICB0aGlzLml0ZW1zLmFkZF9pdGVtKHByb2R1Y3QpO1xuICByZXR1cm4gdGhpcy5pdGVtcy5pdGVtX2NvdW50KHByb2R1Y3QuaWQpO1xufTtcblxuU2l4UGFja0hvbGRlci5wcm90b3R5cGUucmVtb3ZlX2Zyb21faG9sZGluZyA9IGZ1bmN0aW9uIChwcm9kdWN0X2lkKSB7XG4gIHRoaXMuaXRlbXMucmVtb3ZlX2l0ZW0ocHJvZHVjdF9pZCk7XG4gIHJldHVybiB0aGlzLml0ZW1zLml0ZW1fY291bnQocHJvZHVjdF9pZCk7XG59O1xuXG5TaXhQYWNrSG9sZGVyLnByb3RvdHlwZS51cGRhdGVfaXRlbV9pbl9ob2xkaW5nID0gZnVuY3Rpb24gKHByb2R1Y3QsIHF0eSkge1xuICB0aGlzLml0ZW1zLnVwZGF0ZV9pdGVtKHByb2R1Y3QsIHF0eSk7XG4gIHJldHVybiB0aGlzLml0ZW1zLml0ZW1fY291bnQocHJvZHVjdC5pZCk7XG59O1xuXG4vLyBQcml2YXRlXG5cblNpeFBhY2tIb2xkZXIucHJvdG90eXBlLl9hZGRfZXZlbnRfbGlzdGVuZXJzID0gZnVuY3Rpb24gKCkge1xuICB2YXIgX3RoaXMgPSB0aGlzO1xuICBcbiAgLy8gcmVtb3ZlIGFuIGl0ZW0gZnJvbSBob2xkaW5nLCBidXQgZnJvbSBpbnNpZGUgaXRzIGRpc3BsYXlcbiAgX3RoaXMuaXRlbXNfZGlzcGxheS5vbignUmVtb3ZlRGlzcGxheUl0ZW0nLCBmdW5jdGlvbiAocHJvZHVjdF9pZCkge1xuICAgIF90aGlzLml0ZW1zLnJlbW92ZV9pdGVtKHByb2R1Y3RfaWQpO1xuICAgIHZhciBhcmdzID0gW1xuICAgICAgcHJvZHVjdF9pZCxcbiAgICAgIHRoaXMuaXRlbXMuaXRlbV9jb3VudChwcm9kdWN0X2lkKVxuICAgIF07XG4gICAgX3RoaXMudHJpZ2dlcignUmVtb3ZlSXRlbScsIGFyZ3MpO1xuICB9KTtcbiAgXG4gIF90aGlzLnN1Ym1pdHRlci5vbignQWRkVG9DYXJ0JywgZnVuY3Rpb24gKHB1cmNoYXNlX3R5cGUpIHtcbiAgICB2YXIgcHJvZHVjdHMgPSBfdGhpcy5fYnVpbGRfcHJvZHVjdHNfZm9yX2NhcnQocHVyY2hhc2VfdHlwZSk7XG4gICAgX3RoaXMudHJpZ2dlcignQWRkVG9DYXJ0JywgW3Byb2R1Y3RzXSk7XG4gIH0pO1xuICBcbiAgLy8gYnViYmxpbmc/Pz9cbiAgX3RoaXMuaXRlbXMub24oJ0l0ZW1zQ2xlYXJlZCcsIGZ1bmN0aW9uICgpIHtcbiAgICBfdGhpcy50cmlnZ2VyKCdJdGVtc0NsZWFyZWQnKTtcbiAgfSk7XG59O1xuXG5TaXhQYWNrSG9sZGVyLnByb3RvdHlwZS5fYnVpbGRfcHJvZHVjdHNfZm9yX2NhcnQgPSBmdW5jdGlvbiAocHVyY2hhc2VfdHlwZSkge1xuICB2YXIgaW5jbHVkZV9zdWJzY3JpcHRpb25fZGV0YWlscyA9IChwdXJjaGFzZV90eXBlID09PSAnc3Vic2NyaXB0aW9uJyk7XG4gIHJldHVybiB0aGlzLml0ZW1zLmFsbF9wcm9kdWN0c19ieV9pZChpbmNsdWRlX3N1YnNjcmlwdGlvbl9kZXRhaWxzKTtcbn07XG5cbm1vZHVsZS5leHBvcnRzID0gU2l4UGFja0hvbGRlcjsiLCIvKmpzaGludCBtdWx0aXN0cjogdHJ1ZSAqL1xuXG52YXIgRXZlbnRlciA9IHJlcXVpcmUoJy4vX2V2ZW50ZXIuanMnKTtcblxudmFyIFNpeFBhY2tIb2xkZXJJdGVtc0Rpc3BsYXkgPSBmdW5jdGlvbiAoJGVsZSwgbGltaXRfbXVsdGlwbGUsIGl0ZW1zKSB7XG4gIHRoaXMuJGVsZSA9ICRlbGU7XG4gIHRoaXMuaXRlbXMgPSBpdGVtcztcbiAgdGhpcy5saW1pdF9tdWx0aXBsZSA9IGxpbWl0X211bHRpcGxlO1xuICB0aGlzLnRvb2x0aXBfc2VsZWN0b3IgPSAnW2RhdGEtdG9nZ2xlPVwidG9vbHRpcFwiXSc7XG4gIHRoaXMuZGVmYXVsdF9jb2xvciA9ICcjRTBGMEQ5JztcbiAgXG4gIG5ldyBFdmVudGVyKHRoaXMpO1xuICBcbiAgdGhpcy5fYWRkX2V2ZW50X2xpc3RlbmVycygpO1xuICB0aGlzLnJlc2V0KCk7XG59O1xuXG5TaXhQYWNrSG9sZGVySXRlbXNEaXNwbGF5LnByb3RvdHlwZS51cGRhdGUgPSBmdW5jdGlvbiAoYWN0aW9uKSB7XG4gIHRoaXMuX2NsZWFyX2Rpc3BsYXlfaXRlbXMoKTtcbiAgdGhpcy5fcmVkcmF3X2Rpc3BsYXlfaXRlbXMoKTtcbiAgdGhpcy5fdXBkYXRlX2Rpc3BsYXlfaXRlbXMoKTtcbiAgdGhpcy5fYWRkX3Rvb2x0aXBzKCk7XG4gIGlmIChhY3Rpb24gJiYgYWN0aW9uID09PSAnYWRkZWQnKSB7XG4gICAgdGhpcy5fc2Nyb2xsX2NvbnRhaW5lcigpO1xuICB9XG59O1xuXG5TaXhQYWNrSG9sZGVySXRlbXNEaXNwbGF5LnByb3RvdHlwZS5yZXNldCA9IGZ1bmN0aW9uICgpIHtcbiAgdGhpcy5fY2xlYXJfZGlzcGxheV9pdGVtcygpO1xuICB0aGlzLl9idWlsZF9lbXB0eV9kaXNwbGF5X2l0ZW1zKCk7XG4gIHRoaXMuX2FkZF90b29sdGlwcygpO1xufTtcblxuLy8gUHJpdmF0ZVxuXG5TaXhQYWNrSG9sZGVySXRlbXNEaXNwbGF5LnByb3RvdHlwZS5fYWRkX2V2ZW50X2xpc3RlbmVycyA9IGZ1bmN0aW9uICgpIHtcbiAgdmFyIF90aGlzID0gdGhpcztcbiAgX3RoaXMuaXRlbXMub24oJ0l0ZW1zVXBkYXRlZCcsIGZ1bmN0aW9uIChwcm9kdWN0X2lkLCBhY3Rpb24pIHtcbiAgICBfdGhpcy51cGRhdGUoYWN0aW9uKTtcbiAgfSk7XG4gIFxuICBfdGhpcy4kZWxlLm9uKCdjbGljaycsICcuaG9sZGluZy1pdGVtJywgZnVuY3Rpb24gKGUpIHtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgX3RoaXMuX3JlbW92ZV9pdGVtKGUpO1xuICB9KTtcbn07XG5cblNpeFBhY2tIb2xkZXJJdGVtc0Rpc3BsYXkucHJvdG90eXBlLl9yZWRyYXdfZGlzcGxheV9pdGVtcyA9IGZ1bmN0aW9uICgpIHtcbiAgdmFyIGl0ZW1zX2NvdW50ID0gdGhpcy5pdGVtcy50b3RhbF9jb3VudCgpO1xuICB2YXIgbGltaXQgPSBNYXRoLmZsb29yKGl0ZW1zX2NvdW50IC8gdGhpcy5saW1pdF9tdWx0aXBsZSkgKyAxO1xuICBmb3IgKHZhciBqID0gMDsgaiA8IGxpbWl0OyBqKyspIHtcbiAgICB0aGlzLl9idWlsZF9lbXB0eV9kaXNwbGF5X2l0ZW1zKCk7XG4gIH1cbn07XG5cblNpeFBhY2tIb2xkZXJJdGVtc0Rpc3BsYXkucHJvdG90eXBlLl9jbGVhcl9kaXNwbGF5X2l0ZW1zID0gZnVuY3Rpb24gKCkge1xuICB0aGlzLl9yZW1vdmVfdG9vbHRpcHMoKTtcbiAgdGhpcy4kZWxlLmh0bWwoJycpO1xufTtcblxuU2l4UGFja0hvbGRlckl0ZW1zRGlzcGxheS5wcm90b3R5cGUuX2J1aWxkX2VtcHR5X2Rpc3BsYXlfaXRlbXMgPSBmdW5jdGlvbiAoKSB7XG4gIHZhciBtYXJrdXAgPSAnJztcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmxpbWl0X211bHRpcGxlOyBpKyspIHtcbiAgICBtYXJrdXAgKz0gdGhpcy5fZW1wdHlfZGlzcGxheV9pdGVtX21hcmt1cCgpO1xuICB9XG4gIHRoaXMuJGVsZS5hcHBlbmQoJzxkaXYgY2xhc3M9XCJob2xkaW5nLWl0ZW0tZ3JvdXBcIj4nK21hcmt1cCsnPC9kaXY+Jyk7XG59O1xuXG5TaXhQYWNrSG9sZGVySXRlbXNEaXNwbGF5LnByb3RvdHlwZS5fZW1wdHlfZGlzcGxheV9pdGVtX21hcmt1cCA9IGZ1bmN0aW9uICgpIHtcbiAgcmV0dXJuICc8YSBjbGFzcz1cImhvbGRpbmctaXRlbSBob2xkaW5nLWl0ZW0tZGlzYWJsZWRcIiBkYXRhLXRvZ2dsZT1cInRvb2x0aXBcIiBkYXRhLXBsYWNlbWVudD1cInJpZ2h0XCIgZGF0YS1waGQtaXRlbS1pZCB0aXRsZT1cIkVtcHR5IGl0ZW0gc2xvdFwiPlxcXG4gICAgPHNwYW4gY2xhc3M9XCJmYSBmYS10aW1lcy1jaXJjbGVcIj48L3NwYW4+XFxcbiAgICA8c3ZnIHZlcnNpb249XCIxLjJcIiBiYXNlcHJvZmlsZT1cInRpbnlcIiBpZD1cIkxheWVyXzFcIiB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgeG1sbnM6eGxpbms9XCJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rXCIgeD1cIjBweFwiIHk9XCIwcHhcIiB2aWV3Ym94PVwiMCAwIDE1MCA0MDBcIiB4bWw6c3BhY2U9XCJwcmVzZXJ2ZVwiPiA8cGF0aCBkPVwiTTY0LjIsOS42Yy00LjcsMC4zLTkuMywwLjYtMTMuOSwxLjljLTMuNiwxLjEtNS42LDMuNy02LDdjLTAuOSw3LjUtMS44LDE1LTEuMywyMi41YzAuMiwyLjIsMS43LDQuMSwxLjcsNi41LGMwLDIuNSwwLjQsNC45LDAuNyw3LjRjMC4xLDEuMi0wLjYsMS42LTEuNiwxLjhjLTEuMywwLjMtMi40LDAuOS0yLjgsMi40Yy0wLjcsMi45LTAuNCwzLjQsMi42LDMuOWMxLjIsMC4yLDEuOCwwLjcsMS44LDIsYy0wLjEsMi43LDAsNS4zLDAsOGMwLDAuOC0wLjEsMS41LTAuOSwyYy04LjQsMy44LTE4LjEsMTUuOC0xOC4xLDE1LjhjLTUuOCw3LjYtOS4zLDE2LjEtMTEuNiwyNS40Yy0xLjEsNC40LTEsOC43LTEuMSwxMy4xLGwtMC4yLDIxMS40Yy0wLjIsMTEuNS0wLjQsMjIuOSwwLjIsMzQuNGMwLjQsOCw0LjgsMTIuNSwxMy41LDE0LjFjNS41LDEsMTEsMS4zLDE2LjUsMS42YzguMSwwLjMsMTguMSwwLjEsMjYuMiwwLjJoMTAuMixjOC4xLDAsMTguMSwwLjIsMjYuMi0wLjJjNS41LTAuMiwxMS0wLjUsMTYuNS0xLjZjOC43LTEuNiwxMy4xLTYuMSwxMy41LTE0LjFjMC42LTExLjUsMC4zLTIyLjksMC4yLTM0LjRsLTAuMi0yMTEuNCxjMC00LjQsMC4xLTguNy0xLjEtMTMuMWMtMi4zLTkuMi01LjktMTcuNy0xMS42LTI1LjRjMCwwLTgtMTEuMy0xOC4xLTE1LjhjLTAuOC0wLjUtMC45LTEuMi0wLjktMmMwLTIuNywwLTUuMywwLTgsYzAtMS4zLDAuNi0xLjgsMS44LTJjMi45LTAuNSwzLjItMSwyLjYtMy45Yy0wLjQtMS41LTEuNS0yLjEtMi44LTIuNGMtMS0wLjItMS43LTAuNy0xLjYtMS44YzAuMi0yLjUsMC42LTQuOSwwLjctNy40LGMwLTIuMywxLjYtNC4yLDEuNy02LjVjMC41LTcuNi0wLjMtMTUuMS0xLjMtMjIuNWMtMC40LTMuMy0yLjQtNS45LTYtN2MtNC42LTEuMy05LjItMS42LTEzLjktMS45Qzc1LjMsOC41LDY0LjIsOS42LDY0LjIsOS42LGMtNC43LDAuMy05LjMsMC42LTEzLjksMS45Yy0zLjYsMS4xLTUuNiwzLjctNiw3Yy0wLjksNy41LTEuOCwxNS0xLjMsMjIuNWMwLjIsMi4yLDEuNyw0LjEsMS43LDYuNWMwLDIuNSwwLjQsNC45LDAuNyw3LjQsYzAuMSwxLjItMC42LDEuNi0xLjYsMS44Yy0xLjMsMC4zLTIuNCwwLjktMi44LDIuNGMtMC43LDIuOS0wLjQsMy40LDIuNiwzLjljMS4yLDAuMiwxLjgsMC43LDEuOCwyYy0wLjEsMi43LDAsNS4zLDAsOCxjMCwwLjgtMC4xLDEuNS0wLjksMlwiPjwvcGF0aD4gPC9zdmc+XFxcbiAgPC9hPic7XG59O1xuXG5TaXhQYWNrSG9sZGVySXRlbXNEaXNwbGF5LnByb3RvdHlwZS5fdXBkYXRlX2Rpc3BsYXlfaXRlbXMgPSBmdW5jdGlvbiAoKSB7XG4gIHZhciBpdGVtc19jb3VudCA9IHRoaXMuaXRlbXMudG90YWxfY291bnQoKTtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBpdGVtc19jb3VudDsgaSsrKSB7XG4gICAgdmFyIGl0ZW0gPSB0aGlzLml0ZW1zLnByb2R1Y3RfYnlfaW5kZXgoaSk7XG4gICAgdmFyICRpdGVtX2VsZSA9IHRoaXMuJGVsZS5maW5kKCcuaG9sZGluZy1pdGVtJykuZXEoaSk7XG4gICAgXG4gICAgJGl0ZW1fZWxlLnJlbW92ZUNsYXNzKCdob2xkaW5nLWl0ZW0tZGlzYWJsZWQnKVxuICAgIC5hdHRyKCd0aXRsZScsICdSZW1vdmUgJytpdGVtLnRpdGxlKVxuICAgIC5hdHRyKCdkYXRhLXBoZC1pdGVtLWlkJywgaXRlbS5pZClcbiAgICAuZGF0YSgncGhkLWl0ZW0taWQnLCBpdGVtLmlkKTtcbiAgICBcbiAgICBpZihpdGVtLmNvbG9yKXtcbiAgICAgICRpdGVtX2VsZS5maW5kKCdwYXRoJykuY3NzKHtcbiAgICAgICAgZmlsbDogKChpdGVtLmNvbG9yWzBdICE9PSAnIycpPyAnIyc6ICcnKStpdGVtLmNvbG9yXG4gICAgICB9KTtcbiAgICB9XG4gIH1cbn07XG5cblNpeFBhY2tIb2xkZXJJdGVtc0Rpc3BsYXkucHJvdG90eXBlLl9zY3JvbGxfY29udGFpbmVyID0gZnVuY3Rpb24gKCkge1xuICB2YXIgJGdyb3VwID0gJCgnLmhvbGRpbmctaXRlbS1ncm91cCcpO1xuICB2YXIgZ3JvdXBfbWFyZ2luID0gcGFyc2VJbnQoJGdyb3VwLmNzcygnbWFyZ2luLWxlZnQnKSkgKyBwYXJzZUludCgkZ3JvdXAuY3NzKCdtYXJnaW4tcmlnaHQnKSk7XG4gIHZhciBncm91cF9jb21iaW5lZF93aWR0aCA9ICgkZ3JvdXAud2lkdGgoKSArIGdyb3VwX21hcmdpbikgKiAkZ3JvdXAubGVuZ3RoO1xuICBcbiAgdmFyICRjb250YWluZXIgPSAkZ3JvdXAucGFyZW50KCk7XG4gIHZhciBvZmZzZXQgPSBncm91cF9jb21iaW5lZF93aWR0aCAtICRjb250YWluZXIud2lkdGgoKTtcbiAgXG4gIHRoaXMuJGVsZS5hbmltYXRlKHtcbiAgICBzY3JvbGxMZWZ0OiBvZmZzZXRcbiAgfSwgMTg2KTtcbn07XG5cblNpeFBhY2tIb2xkZXJJdGVtc0Rpc3BsYXkucHJvdG90eXBlLl9hZGRfdG9vbHRpcHMgPSBmdW5jdGlvbiAoKSB7XG4gICQodGhpcy50b29sdGlwX3NlbGVjdG9yKS50b29sdGlwKCk7XG59O1xuXG5TaXhQYWNrSG9sZGVySXRlbXNEaXNwbGF5LnByb3RvdHlwZS5fcmVtb3ZlX3Rvb2x0aXBzID0gZnVuY3Rpb24gKCkge1xuICAkKHRoaXMudG9vbHRpcF9zZWxlY3RvcikudG9vbHRpcCgnZGVzdHJveScpO1xufTtcblxuU2l4UGFja0hvbGRlckl0ZW1zRGlzcGxheS5wcm90b3R5cGUuX3JlbW92ZV9pdGVtID0gZnVuY3Rpb24gKGUpIHsgIFxuICB2YXIgJGN1cnJlbnRUYXJnZXQgPSAkKGUuY3VycmVudFRhcmdldCk7XG4gIGlmICghJGN1cnJlbnRUYXJnZXQuaGFzQ2xhc3MoJ2hvbGRpbmctaXRlbS1kaXNhYmxlZCcpKSB7XG4gICAgdmFyIGFyZ3MgPSBbXG4gICAgICAkY3VycmVudFRhcmdldC5kYXRhKCdwaGQtaXRlbS1pZCcpXG4gICAgXTtcbiAgICB0aGlzLnRyaWdnZXIoJ1JlbW92ZURpc3BsYXlJdGVtJywgYXJncyk7XG4gIH1cbn07XG5cbm1vZHVsZS5leHBvcnRzID0gU2l4UGFja0hvbGRlckl0ZW1zRGlzcGxheTsiLCJ2YXIgRXZlbnRlciA9IHJlcXVpcmUoJy4vX2V2ZW50ZXIuanMnKTtcblxudmFyIFNpeFBhY2tIb2xkZXJJdGVtcyA9IGZ1bmN0aW9uIChpZCwgbGltaXRfbXVsdGlwbGUsIHN1YnNjcmlwdGlvbl9pZCwgc2hpcHBpbmdfaW50ZXJ2YWxfZnJlcXVlbmN5LCBzaGlwcGluZ19pbnRlcnZhbF91bml0X3R5cGUpIHtcbiAgbmV3IEV2ZW50ZXIodGhpcyk7XG4gIFxuICB0aGlzLmlkID0gaWQ7XG4gIHRoaXMucHJvZHVjdHMgPSBbXTtcbiAgdGhpcy5wcm9kdWN0c19hcmVfYWRkYWJsZSA9IGZhbHNlO1xuICB0aGlzLmxpbWl0X211bHRpcGxlID0gbGltaXRfbXVsdGlwbGU7XG4gIHRoaXMuc3Vic2NyaXB0aW9uX2lkID0gc3Vic2NyaXB0aW9uX2lkO1xuICB0aGlzLnNoaXBwaW5nX2ludGVydmFsX2ZyZXF1ZW5jeSA9IHNoaXBwaW5nX2ludGVydmFsX2ZyZXF1ZW5jeTtcbiAgdGhpcy5zaGlwcGluZ19pbnRlcnZhbF91bml0X3R5cGUgPSBzaGlwcGluZ19pbnRlcnZhbF91bml0X3R5cGU7XG59O1xuXG5TaXhQYWNrSG9sZGVySXRlbXMucHJvdG90eXBlLmFkZF9pdGVtID0gZnVuY3Rpb24gKHByb2R1Y3QpIHtcbiAgdGhpcy5wcm9kdWN0cy5wdXNoKHByb2R1Y3QpO1xuICB0aGlzLl91cGRhdGVfaXNfYWRkYWJsZV9hbmRfdHJpZ2dlcignSXRlbUFkZGVkJywgW3Byb2R1Y3QuaWQsICdhZGRlZCddKTtcbn07XG5cblNpeFBhY2tIb2xkZXJJdGVtcy5wcm90b3R5cGUucmVtb3ZlX2l0ZW0gPSBmdW5jdGlvbiAocHJvZHVjdF9pZCkge1xuICB2YXIgdG90YWxfY291bnQgPSB0aGlzLnRvdGFsX2NvdW50KCk7XG4gIGZvciAodmFyIGkgPSB0b3RhbF9jb3VudCAtIDE7IGkgPiAtMTsgaS0tKSB7IC8vIGxvb3AgYmFja3dhcmRzIHRvIHJlbW92ZSB0aGUgbGFzdCBhZGRlZCBpdGVtXG4gICAgdmFyIHJlbW92ZWQgPSB0aGlzLl9yZW1vdmVfcHJvZHVjdF9mcm9tX3N0YWNrKHByb2R1Y3RfaWQsIGkpO1xuICAgIGlmIChyZW1vdmVkKSB7XG4gICAgICBicmVhaztcbiAgICB9XG4gIH1cbiAgdGhpcy5fdXBkYXRlX2lzX2FkZGFibGVfYW5kX3RyaWdnZXIoJ0l0ZW1SZW1vdmVkJywgW3Byb2R1Y3RfaWQsICdyZW1vdmVkJ10pO1xufTtcblxuU2l4UGFja0hvbGRlckl0ZW1zLnByb3RvdHlwZS51cGRhdGVfaXRlbSA9IGZ1bmN0aW9uIChwcm9kdWN0LCBxdHkpIHtcbiAgdmFyIGl0ZW1fY291bnQgPSB0aGlzLml0ZW1fY291bnQocHJvZHVjdC5pZCk7XG4gIC8vIHJlbW92ZSBhbGwgaXRlbXMgZm9yIGEgY2xlYW4gc2xhdGVcbiAgdmFyIHRvdGFsX2NvdW50ID0gdGhpcy50b3RhbF9jb3VudCgpO1xuICBmb3IgKHZhciBpID0gdG90YWxfY291bnQgLSAxOyBpID4gLTE7IGktLSkgeyAvLyBsb29wIGJhY2t3YXJkcyB0byByZW1vdmUgdGhlIGxhc3QgYWRkZWQgaXRlbVxuICAgIHRoaXMuX3JlbW92ZV9wcm9kdWN0X2Zyb21fc3RhY2socHJvZHVjdC5pZCwgaSk7XG4gIH1cbiAgLy8gcmUgYWRkIHRoZSBwcm9kdWN0cyBpZiB3ZSBoYXZlIHRoZW1cbiAgaWYgKHF0eSA+IDApIHtcbiAgICBmb3IgKHZhciBqID0gMDsgaiA8IHF0eTsgaisrKSB7XG4gICAgICB0aGlzLnByb2R1Y3RzLnB1c2gocHJvZHVjdCk7XG4gICAgfVxuICB9XG4gIHZhciBhY3Rpb24gPSAoaXRlbV9jb3VudCA+IHF0eSkgPyAncmVtb3ZlZCcgOiAnYWRkZWQnO1xuICB0aGlzLl91cGRhdGVfaXNfYWRkYWJsZV9hbmRfdHJpZ2dlcignSXRlbVVwZGF0ZWQnLCBbcHJvZHVjdC5pZCwgYWN0aW9uXSk7XG59O1xuXG5TaXhQYWNrSG9sZGVySXRlbXMucHJvdG90eXBlLmNsZWFyID0gZnVuY3Rpb24gKCkge1xuICAvLyBjbGVhciB0aGUgZW50aXJlIGxvdFxuICB2YXIgcHJvZHVjdHMgPSB0aGlzLmFsbF9wcm9kdWN0c19ieV9pZCgpO1xuICBmb3IgKHZhciBrZXkgaW4gcHJvZHVjdHMpIHtcbiAgICBpZiAocHJvZHVjdHMuaGFzT3duUHJvcGVydHkoa2V5KSkge1xuICAgICAgdmFyIHByb2R1Y3QgPSBwcm9kdWN0c1trZXldO1xuICAgICAgdGhpcy51cGRhdGVfaXRlbShwcm9kdWN0LCAwKTtcbiAgICB9XG4gIH1cbiAgdGhpcy50cmlnZ2VyKCdJdGVtc0NsZWFyZWQnKTtcbn07XG5cblNpeFBhY2tIb2xkZXJJdGVtcy5wcm90b3R5cGUuaXRlbV9jb3VudCA9IGZ1bmN0aW9uIChwcm9kdWN0X2lkKSB7XG4gIHZhciBjb3VudCA9IDA7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5wcm9kdWN0cy5sZW5ndGg7IGkrKykge1xuICAgIGlmICh0aGlzLnByb2R1Y3RzW2ldLmlkID09PSBwcm9kdWN0X2lkKSB7XG4gICAgICBjb3VudCsrO1xuICAgIH1cbiAgfVxuICByZXR1cm4gY291bnQ7XG59O1xuXG5TaXhQYWNrSG9sZGVySXRlbXMucHJvdG90eXBlLnRvdGFsX2NvdW50ID0gZnVuY3Rpb24gKCkge1xuICByZXR1cm4gdGhpcy5wcm9kdWN0cy5sZW5ndGg7XG59O1xuXG5TaXhQYWNrSG9sZGVySXRlbXMucHJvdG90eXBlLnRvdGFsX3ByaWNlID0gZnVuY3Rpb24gKCkge1xuICB2YXIgdG90YWxfcHJpY2UgPSAwO1xuICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMucHJvZHVjdHMubGVuZ3RoOyBpKyspIHtcbiAgICB2YXIgcHJvZHVjdCA9IHRoaXMucHJvZHVjdHNbaV07XG4gICAgdG90YWxfcHJpY2UgKz0gcHJvZHVjdC5wcmljZTtcbiAgfVxuICByZXR1cm4gU2hvcGlmeS5mb3JtYXRNb25leSh0b3RhbF9wcmljZSwgQnNpZnkubW9uZXlfZm9ybWF0cy5tb25leUZvcm1hdCk7XG59O1xuXG5TaXhQYWNrSG9sZGVySXRlbXMucHJvdG90eXBlLnByb2R1Y3RfYnlfaW5kZXggPSBmdW5jdGlvbiAoaW5kZXgpIHtcbiAgcmV0dXJuIHRoaXMucHJvZHVjdHNbaW5kZXhdO1xufTtcblxuU2l4UGFja0hvbGRlckl0ZW1zLnByb3RvdHlwZS5hbGxfcHJvZHVjdHNfYnlfaWQgPSBmdW5jdGlvbiAoaW5jbHVkZV9zdWJzY3JpcHRpb25fZGV0YWlscykge1xuICB2YXIgcHJvZHVjdHMgPSB7fTtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLnByb2R1Y3RzLmxlbmd0aDsgaSsrKSB7XG4gICAgdmFyIHByb2R1Y3QgPSB0aGlzLnByb2R1Y3RzW2ldO1xuICAgIGlmIChwcm9kdWN0c1twcm9kdWN0LmlkXSkge1xuICAgICAgcHJvZHVjdHNbcHJvZHVjdC5pZF0ucXR5Kys7XG4gICAgfSBlbHNlIHtcbiAgICAgIHByb2R1Y3RzW3Byb2R1Y3QuaWRdID0ge1xuICAgICAgICBpZDogcHJvZHVjdC5pZCxcbiAgICAgICAgdGl0bGU6IHByb2R1Y3QudGl0bGUsXG4gICAgICAgIHByaWNlOiBwcm9kdWN0LnByaWNlLFxuICAgICAgICBxdHk6IDEsXG4gICAgICAgIHByb3BlcnRpZXM6IHtcbiAgICAgICAgICBhZGRlZF9ieTogdGhpcy5pZFxuICAgICAgICB9XG4gICAgICB9O1xuICAgICAgaWYgKGluY2x1ZGVfc3Vic2NyaXB0aW9uX2RldGFpbHMpIHtcbiAgICAgICAgcHJvZHVjdHNbcHJvZHVjdC5pZF0ucHJvcGVydGllcy5zaGlwcGluZ19pbnRlcnZhbF9mcmVxdWVuY3kgPSB0aGlzLnNoaXBwaW5nX2ludGVydmFsX2ZyZXF1ZW5jeTtcbiAgICAgICAgcHJvZHVjdHNbcHJvZHVjdC5pZF0ucHJvcGVydGllcy5zaGlwcGluZ19pbnRlcnZhbF91bml0X3R5cGUgPSB0aGlzLnNoaXBwaW5nX2ludGVydmFsX3VuaXRfdHlwZTtcbiAgICAgICAgcHJvZHVjdHNbcHJvZHVjdC5pZF0ucHJvcGVydGllcy5zdWJzY3JpcHRpb25faWQgPSB0aGlzLnN1YnNjcmlwdGlvbl9pZDtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgcmV0dXJuIHByb2R1Y3RzO1xufTtcblxuLy8gUHJpdmF0ZVxuXG5TaXhQYWNrSG9sZGVySXRlbXMucHJvdG90eXBlLl9yZW1vdmVfcHJvZHVjdF9mcm9tX3N0YWNrID0gZnVuY3Rpb24gKHByb2R1Y3RfaWQsIGkpIHtcbiAgdmFyIHJlbW92ZWQgPSBbXTtcbiAgaWYgKHRoaXMucHJvZHVjdHNbaV0uaWQgPT09IHByb2R1Y3RfaWQpIHtcbiAgICByZW1vdmVkID0gdGhpcy5wcm9kdWN0cy5zcGxpY2UoaSwgMSk7XG4gIH1cbiAgcmV0dXJuIHJlbW92ZWQubGVuZ3RoID4gMDtcbn07XG5cblNpeFBhY2tIb2xkZXJJdGVtcy5wcm90b3R5cGUuX3VwZGF0ZV9pc19hZGRhYmxlX2FuZF90cmlnZ2VyID0gZnVuY3Rpb24gKGN1c3RvbV9ldmVudCwgY3VzdG9tX2V2ZW50X2FyZ3MpIHtcbiAgdGhpcy5wcm9kdWN0c19hcmVfYWRkYWJsZSA9IHRoaXMuX2lzX2FkZGFibGUoKTtcbiAgdGhpcy50cmlnZ2VyKGN1c3RvbV9ldmVudCwgY3VzdG9tX2V2ZW50X2FyZ3MpO1xuICB0aGlzLnRyaWdnZXIoJ0l0ZW1zVXBkYXRlZCcsIGN1c3RvbV9ldmVudF9hcmdzKTtcbn07XG5cblNpeFBhY2tIb2xkZXJJdGVtcy5wcm90b3R5cGUuX2lzX2FkZGFibGUgPSBmdW5jdGlvbiAoKSB7XG4gIHZhciB0b3RhbF9jb3VudCA9IHRoaXMudG90YWxfY291bnQoKTtcbiAgdmFyIHByb2R1Y3RzX21vZCA9IHRvdGFsX2NvdW50ICUgdGhpcy5saW1pdF9tdWx0aXBsZTtcbiAgcmV0dXJuIHRvdGFsX2NvdW50ID4gMCAmJiBwcm9kdWN0c19tb2QgPT09IDA7XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IFNpeFBhY2tIb2xkZXJJdGVtczsiLCIvKmpzaGludCBtdWx0aXN0cjogdHJ1ZSAqL1xuXG52YXIgRXZlbnRlciA9IHJlcXVpcmUoJy4vX2V2ZW50ZXIuanMnKTtcbnZhciBNb2RhbCA9IHJlcXVpcmUoJy4vcGhkLm1vZGFsLmpzJyk7XG5cbnZhciBTaXhQYWNrSG9sZGVySXRlbVN1Ym1pdHRlciA9IGZ1bmN0aW9uICgkZWxlLCBpdGVtcykge1xuICBuZXcgRXZlbnRlcih0aGlzKTtcbiAgdGhpcy4kZWxlID0gJGVsZTtcbiAgdGhpcy5pdGVtcyA9IGl0ZW1zO1xuICB0aGlzLiRzdWJtaXQgPSAkZWxlLmZpbmQoJ1t0eXBlPVwic3VibWl0XCJdJyk7XG4gIHRoaXMubW9kYWwgPSBuZXcgTW9kYWwoKTtcbiAgXG4gIHRoaXMuX2FkZF9ldmVudF9saXN0ZW5lcnMoKTtcbn07XG5cblNpeFBhY2tIb2xkZXJJdGVtU3VibWl0dGVyLnByb3RvdHlwZS5fYWRkX2V2ZW50X2xpc3RlbmVycyA9IGZ1bmN0aW9uICgpIHtcbiAgdmFyIF90aGlzID0gdGhpcztcbiAgXG4gIF90aGlzLiRlbGUub24oJ3N1Ym1pdCcsIGZ1bmN0aW9uIChlKSB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIF90aGlzLl9vcGVuX21vZGFsKCk7XG4gIH0pO1xuICBcbiAgJChkb2N1bWVudCkub24oJ2NsaWNrJywgJ1tkYXRhLXBoZC1hZGQtdG8tY2FydC1hc10nLCBmdW5jdGlvbiAoZSkge1xuICAgIHZhciAkY3VycmVudF90YXJnZXQgPSAkKGUuY3VycmVudFRhcmdldCk7XG4gICAgdmFyIHB1cmNoYXNlX3R5cGUgPSAkY3VycmVudF90YXJnZXQuZGF0YSgncGhkLWFkZC10by1jYXJ0LWFzJyk7XG4gICAgXG4gICAgX3RoaXMudHJpZ2dlcignQWRkVG9DYXJ0JywgW3B1cmNoYXNlX3R5cGVdKTtcbiAgICBcbiAgICAvL190aGlzLm1vZGFsLmNvbnRlbnQgPSBfdGhpcy5fY29tcGxldGVkX21vZGFsX21hcmt1cChwdXJjaGFzZV90eXBlKTsgPC0tIHVwZGF0ZSBtb2RhbCBjb250ZW50XG4gICAgX3RoaXMubW9kYWwuY2xvc2UoKTtcbiAgfSk7XG4gIFxuICBfdGhpcy5pdGVtcy5vbignSXRlbXNVcGRhdGVkJywgZnVuY3Rpb24gKCkge1xuICAgIF90aGlzLl90b2dnbGVfc3VibWl0YWJsaXR5KCk7XG4gIH0pO1xufTtcblxuU2l4UGFja0hvbGRlckl0ZW1TdWJtaXR0ZXIucHJvdG90eXBlLl90b2dnbGVfc3VibWl0YWJsaXR5ID0gZnVuY3Rpb24gKCkge1xuICBpZiAodGhpcy5pdGVtcy5wcm9kdWN0c19hcmVfYWRkYWJsZSkge1xuICAgIHRoaXMuJHN1Ym1pdC5wcm9wKCdkaXNhYmxlZCcsIGZhbHNlKTtcbiAgfSBlbHNlIHtcbiAgICB0aGlzLiRzdWJtaXQucHJvcCgnZGlzYWJsZWQnLCB0cnVlKTtcbiAgfVxufTtcblxuU2l4UGFja0hvbGRlckl0ZW1TdWJtaXR0ZXIucHJvdG90eXBlLl9vcGVuX21vZGFsID0gZnVuY3Rpb24gKCkgeyAgXG4gIHRoaXMubW9kYWwuY29udGVudCA9IHRoaXMuX2FkZF90b19jYXJ0X21vZGFsX21hcmt1cCgpO1xuICB0aGlzLm1vZGFsLm9wZW4oKTtcbn07XG5cbi8vIFRPRE86IERvbid0IGhhdmUgdGhpcyBtYXJrdXAgaW4gaGVyZVxuU2l4UGFja0hvbGRlckl0ZW1TdWJtaXR0ZXIucHJvdG90eXBlLl9hZGRfdG9fY2FydF9tb2RhbF9tYXJrdXAgPSBmdW5jdGlvbiAoKSB7XG4gIHJldHVybiAnPGRpdiBjbGFzcz1cIm1vZGFsLWhlYWRlclwiPlxcXG4gICAgPGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCJjbG9zZVwiIGRhdGEtZGlzbWlzcz1cIm1vZGFsXCIgYXJpYS1sYWJlbD1cIkNsb3NlXCI+PHNwYW4gY2xhc3M9XCJmYSBmYS10aW1lc1wiIGFyaWEtaGlkZGVuPVwidHJ1ZVwiPjwvc3Bhbj48L2J1dHRvbj5cXFxuICAgIDxoMT5Ib3cgZG8geW91IHdhbnQgdG8gZ2V0IHlvdXIgb3JkZXI/PC9oMT5cXFxuICA8L2Rpdj5cXFxuICA8ZGl2IGNsYXNzPVwibW9kYWwtYm9keVwiPlxcXG4gICAgPGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCJidG4gYnRuLWRlZmF1bHQgYnRuLWxnXCIgZGF0YS1waGQtYWRkLXRvLWNhcnQtYXM9XCJzaW5nbGVcIj48c3Ryb25nPkFkZCB0byBjYXJ0PC9zdHJvbmc+IGFzIGEgb25lIG9mZiBwdXJjYWhzZTwvYnV0dG9uPlxcXG4gICAgPGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCJidG4gYnRuLXByaW1hcnkgYnRuLWxnXCIgZGF0YS1waGQtYWRkLXRvLWNhcnQtYXM9XCJzdWJzY3JpcHRpb25cIj5HZXQgJDEwIG9mZiB5b3VyIG9yZGVyIGlmIHlvdSA8c3Ryb25nPlN1YnNjcmliZSBub3chPC9zdHJvbmc+PC9idXR0b24+XFxcbiAgPC9kaXY+Jztcbn07XG5cblNpeFBhY2tIb2xkZXJJdGVtU3VibWl0dGVyLnByb3RvdHlwZS5fY29tcGxldGVkX21vZGFsX21hcmt1cCA9IGZ1bmN0aW9uIChwdXJjaGFzZV90eXBlKSB7XG4gIHJldHVybiAnPGRpdiBjbGFzcz1cIm1vZGFsLWhlYWRlclwiPlxcXG4gICAgPGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCJjbG9zZVwiIGRhdGEtZGlzbWlzcz1cIm1vZGFsXCIgYXJpYS1sYWJlbD1cIkNsb3NlXCI+PHNwYW4gY2xhc3M9XCJmYSBmYS10aW1lc1wiIGFyaWEtaGlkZGVuPVwidHJ1ZVwiPjwvc3Bhbj48L2J1dHRvbj5cXFxuICAgIDxoMT5UaGFua3MsIHlvdXIgb3JkZXIgaXMgYmVpbmcgYWRkZWQgdG8gdGhlIGNhcnQ8L2gxPlxcXG4gIDwvZGl2PlxcXG4gIDxkaXYgY2xhc3M9XCJtb2RhbC1ib2R5XCI+XFxcbiAgICA8cD4nK3B1cmNoYXNlX3R5cGUrJzwvcD5cXFxuICA8L2Rpdj4nO1xufTtcblxubW9kdWxlLmV4cG9ydHMgPSBTaXhQYWNrSG9sZGVySXRlbVN1Ym1pdHRlcjsiLCJ2YXIgRGF0YU1vZGVsID0gcmVxdWlyZSgnLi9fZGF0YV9tb2RlbC5qcycpO1xuXG52YXIgU2l4UGFja0hvbGRlclRvdGFsID0gZnVuY3Rpb24gKGl0ZW1zKSB7XG4gIHRoaXMuaXRlbXMgPSBpdGVtcztcbiAgXG4gIG5ldyBEYXRhTW9kZWwodGhpcywge1xuICAgIGxpbWl0OiAnW2RhdGEtcGhkLWhvbGRpbmctaXRlbXMtbGltaXRdJyxcbiAgICB0b3RhbF9pdGVtczogJ1tkYXRhLXBoZC1ob2xkaW5nLXRvdGFsLWl0ZW1zXScsXG4gICAgdG90YWxfcHJpY2U6ICdbZGF0YS1waGQtaG9sZGluZy10b3RhbC1wcmljZV0nXG4gIH0pO1xuICBcbiAgdGhpcy5fYWRkX2V2ZW50X2xpc3RlbmVycygpO1xuICB0aGlzLnVwZGF0ZSgpO1xufTtcblxuU2l4UGFja0hvbGRlclRvdGFsLnByb3RvdHlwZS51cGRhdGUgPSBmdW5jdGlvbiAoKSB7XG4gIHRoaXMudG90YWxfaXRlbXMgPSB0aGlzLml0ZW1zLnRvdGFsX2NvdW50KCk7XG4gIHRoaXMudG90YWxfcHJpY2UgPSB0aGlzLml0ZW1zLnRvdGFsX3ByaWNlKCk7XG4gIFxuICAvLyB0b3RhbCBvZiBsaW1pdFxuICB2YXIgbGltaXQgPSB0aGlzLml0ZW1zLmxpbWl0X211bHRpcGxlICogKE1hdGguY2VpbCh0aGlzLnRvdGFsX2l0ZW1zIC8gdGhpcy5pdGVtcy5saW1pdF9tdWx0aXBsZSkpO1xuICB0aGlzLmxpbWl0ID0gKGxpbWl0ID4gMCk/IGxpbWl0IDogdGhpcy5pdGVtcy5saW1pdF9tdWx0aXBsZTtcbn07XG5cbi8vIFByaXZhdGVcblxuU2l4UGFja0hvbGRlclRvdGFsLnByb3RvdHlwZS5fYWRkX2V2ZW50X2xpc3RlbmVycyA9IGZ1bmN0aW9uICgpIHtcbiAgdmFyIF90aGlzID0gdGhpcztcbiAgX3RoaXMuaXRlbXMub24oJ0l0ZW1zVXBkYXRlZCcsIGZ1bmN0aW9uICgpIHtcbiAgICBfdGhpcy51cGRhdGUoKTtcbiAgfSk7XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IFNpeFBhY2tIb2xkZXJUb3RhbDsiLCJ2YXIgRXZlbnRlciA9IHJlcXVpcmUoJy4vX2V2ZW50ZXIuanMnKTtcbnZhciBEYXRhTW9kZWwgPSByZXF1aXJlKCcuL19kYXRhX21vZGVsLmpzJyk7XG52YXIgTW9kYWwgPSByZXF1aXJlKCcuL3BoZC5tb2RhbC5qcycpO1xuXG52YXIgU2l4UGFja0l0ZW0gPSBmdW5jdGlvbiAoJGVsZSwgaWQpIHtcbiAgdGhpcy4kZWxlID0gJGVsZTtcbiAgdGhpcy5pZCA9IGlkO1xuICBcbiAgbmV3IEV2ZW50ZXIodGhpcyk7XG4gIG5ldyBEYXRhTW9kZWwodGhpcywge1xuICAgIGNvdW50OiAnW2RhdGEtcGhkLWl0ZW0tJyt0aGlzLmlkKyctY291bnRdJ1xuICB9KTtcbiAgXG4gIHRoaXMubW9kYWwgPSBuZXcgTW9kYWwoKTtcbiAgXG4gIHRoaXMudmFyaWFudF9pZCA9IHRoaXMuJGVsZS5kYXRhKCdwaGQtdmFyaWFudC1pZCcpO1xuICB0aGlzLnByb2R1Y3RfdGl0bGUgPSB0aGlzLiRlbGUuZGF0YSgncGhkLXByb2R1Y3QtdGl0bGUnKTtcbiAgdGhpcy5wcm9kdWN0X3ByaWNlID0gdGhpcy4kZWxlLmRhdGEoJ3BoZC1wcm9kdWN0LXByaWNlJyk7XG4gIHRoaXMucHJvZHVjdF9jb2xvciA9IHRoaXMuJGVsZS5kYXRhKCdwaGQtcHJvZHVjdC1jb2xvcicpO1xuICBcbiAgdGhpcy5wcm9kdWN0ID0ge1xuICAgIGlkOiB0aGlzLnZhcmlhbnRfaWQsXG4gICAgdGl0bGU6IHRoaXMucHJvZHVjdF90aXRsZSxcbiAgICBwcmljZTogdGhpcy5wcm9kdWN0X3ByaWNlLFxuICAgIGNvbG9yOiB0aGlzLnByb2R1Y3RfY29sb3JcbiAgfTtcbiAgXG4gIHRoaXMuX2FkZF9ldmVudF9saXN0ZW5lcnMoKTtcbn07XG5cbi8vIFByaXZhdGVcblxuU2l4UGFja0l0ZW0ucHJvdG90eXBlLl9hZGRfZXZlbnRfbGlzdGVuZXJzID0gZnVuY3Rpb24gKCkge1xuICB2YXIgX3RoaXMgPSB0aGlzO1xuICBfdGhpcy4kZWxlLm9uKCdjbGljaycsICdbZGF0YS1waGQtYWRkLWl0ZW1dJywgZnVuY3Rpb24gKGUpIHtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgZS5jdXJyZW50VGFyZ2V0LmJsdXIoKTtcbiAgICBfdGhpcy5fdHJpZ2dlcl9hZGRfdG8oKTtcbiAgfSk7XG4gIFxuICBfdGhpcy4kZWxlLm9uKCdjbGljaycsICdbZGF0YS1waGQtcmVtb3ZlLWl0ZW1dJywgZnVuY3Rpb24gKGUpIHtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgZS5jdXJyZW50VGFyZ2V0LmJsdXIoKTtcbiAgICBfdGhpcy5fdHJpZ2dlcl9yZW1vdmVfZnJvbSgpO1xuICB9KTtcbiAgXG4gIF90aGlzLiRlbGUub24oJ2JsdXInLCAnW2RhdGEtcGhkLWVkaXQtaXRlbV0nLCBmdW5jdGlvbiAoZSkge1xuICAgIHZhciBxdHkgPSBwYXJzZUludChlLmN1cnJlbnRUYXJnZXQudmFsdWUpO1xuICAgIF90aGlzLl90cmlnZ2VyX3VwZGF0ZV9ob2xkaW5nKHF0eSk7XG4gIH0pO1xuICBcbiAgX3RoaXMuJGVsZS5vbigna2V5dXAnLCAnW2RhdGEtcGhkLWVkaXQtaXRlbV0nLCBmdW5jdGlvbiAoZSkge1xuICAgIGlmIChlLmtleUNvZGUgPT09IDEzKXtcbiAgICAgIHZhciBxdHkgPSBwYXJzZUludChlLmN1cnJlbnRUYXJnZXQudmFsdWUpO1xuICAgICAgX3RoaXMuX3RyaWdnZXJfdXBkYXRlX2hvbGRpbmcocXR5KTtcbiAgICB9XG4gIH0pO1xuICBcbiAgX3RoaXMuJGVsZS5vbignY2xpY2snLCAnW2RhdGEtcGhkLW1vZGFsXScsIGZ1bmN0aW9uIChlKSB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIHZhciAkY3VycmVudF90YXJnZXQgPSAkKGUuY3VycmVudFRhcmdldCk7XG4gICAgdmFyIGNvbnRlbnRfdXJsID0gJGN1cnJlbnRfdGFyZ2V0LmF0dHIoJ2hyZWYnKTtcbiAgICBfdGhpcy5tb2RhbC5vcGVuKCk7XG4gICAgJC5hamF4KGNvbnRlbnRfdXJsKS5kb25lKGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICBfdGhpcy5tb2RhbC5jb250ZW50ID0gZGF0YTtcbiAgICB9KTtcbiAgfSk7XG59O1xuXG5TaXhQYWNrSXRlbS5wcm90b3R5cGUuX3RyaWdnZXJfYWRkX3RvID0gZnVuY3Rpb24gKCkge1xuICB2YXIgYXJncyA9IFtcbiAgICB0aGlzLnByb2R1Y3RcbiAgXTtcbiAgdGhpcy50cmlnZ2VyKCdBZGRUb0hvbGRpbmcnLCBhcmdzKTtcbn07XG5cblNpeFBhY2tJdGVtLnByb3RvdHlwZS5fdHJpZ2dlcl9yZW1vdmVfZnJvbSA9IGZ1bmN0aW9uICgpIHtcbiAgdmFyIGFyZ3MgPSBbXG4gICAgdGhpcy52YXJpYW50X2lkXG4gIF07XG4gIHRoaXMudHJpZ2dlcignUmVtb3ZlRnJvbUhvbGRpbmcnLCBhcmdzKTtcbn07XG5cblNpeFBhY2tJdGVtLnByb3RvdHlwZS5fdHJpZ2dlcl91cGRhdGVfaG9sZGluZyA9IGZ1bmN0aW9uIChxdHkpIHtcbiAgdmFyIGFyZ3MgPSBbXG4gICAgdGhpcy5wcm9kdWN0LFxuICAgIHF0eVxuICBdO1xuICB0aGlzLnRyaWdnZXIoJ1VwZGF0ZUhvbGRpbmcnLCBhcmdzKTtcbn07XG5cbm1vZHVsZS5leHBvcnRzID0gU2l4UGFja0l0ZW07IiwidmFyIFByb2R1Y3RJdGVtID0gcmVxdWlyZSgnLi9waGQuY2FydC5zaXhwYWNrLml0ZW0uanMnKTtcbnZhciBQcm9kdWN0SG9sZGVyID0gcmVxdWlyZSgnLi9waGQuY2FydC5zaXhwYWNrLmhvbGRlci5qcycpO1xuXG52YXIgU2l4UGFja0J1aWxkZXIgPSBmdW5jdGlvbiAoY2FydCkge1xuICB0aGlzLmNhcnQgPSBjYXJ0O1xuICB0aGlzLmhvbGRpbmdfZWxlX3NlbGVjdG9yID0gJ1tkYXRhLXBoZC1zaXgtcGFjaz1cImhvbGRpbmdcIl0nO1xuICB0aGlzLml0ZW1fZWxlX3NlbGVjdG9yID0gJ1tkYXRhLXBoZC1zaXgtcGFjaz1cIml0ZW1cIl0nO1xuICB0aGlzLml0ZW1zID0ge307XG4gIFxuICB0aGlzLl9pbml0X2hvbGRlcigpO1xuICB0aGlzLl9pbml0X2l0ZW1zKCk7XG59O1xuXG5TaXhQYWNrQnVpbGRlci5wcm90b3R5cGUuX2luaXRfaG9sZGVyID0gZnVuY3Rpb24gKCkge1xuICB2YXIgX3RoaXMgPSB0aGlzO1xuICB2YXIgJGhvbGRpbmdfZWxlbWVudCA9ICQodGhpcy5ob2xkaW5nX2VsZV9zZWxlY3Rvcik7XG4gIF90aGlzLnByb2R1Y3RfaG9sZGVyID0gbmV3IFByb2R1Y3RIb2xkZXIoJGhvbGRpbmdfZWxlbWVudCk7XG4gIF90aGlzLnByb2R1Y3RfaG9sZGVyLm9uKCdBZGRUb0NhcnQnLCBmdW5jdGlvbiAocHJvZHVjdHMpIHtcbiAgICBfdGhpcy5jYXJ0LmFkZF9wcm9kdWN0cyhwcm9kdWN0cyk7XG4gICAgX3RoaXMucHJvZHVjdF9ob2xkZXIuaXRlbXMuY2xlYXIoKTtcbiAgfSk7XG4gIFxuICAvLyB1cGRhdGUgYW4gaXRlbSBpZiBpdCB3YXMgcmVtb3ZlZCBmcm9tIGluc2lkZSB0aGUgaG9sZGVyXG4gIF90aGlzLnByb2R1Y3RfaG9sZGVyLm9uKCdSZW1vdmVJdGVtJywgZnVuY3Rpb24gKHByb2R1Y3RfaWQsIHByb2R1Y3RfY291bnQpIHtcbiAgICBfdGhpcy5pdGVtc1twcm9kdWN0X2lkXS5ob2xkaW5nX2NvdW50ID0gcHJvZHVjdF9jb3VudDtcbiAgfSk7XG4gIFxuICBfdGhpcy5wcm9kdWN0X2hvbGRlci5vbignSXRlbXNDbGVhcmVkJywgZnVuY3Rpb24gKCkge1xuICAgIGZvciAodmFyIGkgaW4gX3RoaXMuaXRlbXMpIHtcbiAgICAgIHZhciBpdGVtID0gX3RoaXMuaXRlbXNbaV07XG4gICAgICBpdGVtLmNvdW50ID0gJyc7XG4gICAgfVxuICB9KTtcbn07XG5cblNpeFBhY2tCdWlsZGVyLnByb3RvdHlwZS5faW5pdF9pdGVtcyA9IGZ1bmN0aW9uICgpIHtcbiAgdmFyIF90aGlzID0gdGhpcztcbiAgdmFyICRpdGVtX2VsZW1lbnRzID0gJCh0aGlzLml0ZW1fZWxlX3NlbGVjdG9yKTtcbiAgJGl0ZW1fZWxlbWVudHMuZWFjaChmdW5jdGlvbiAoaSwgaXRlbV9lbGUpIHtcbiAgICB2YXIgJGl0ZW0gPSAkKGl0ZW1fZWxlKTtcbiAgICB2YXIgaXRlbSA9IG5ldyBQcm9kdWN0SXRlbSgkaXRlbSwgaSk7XG4gICAgXG4gICAgLy8gc3RvcmUgaXRlbXMgYnkgdmFyaWFudCBpZCBmb3IgZWFzeSBhY2Nlc3MgbGF0ZXJcbiAgICBfdGhpcy5pdGVtc1tpdGVtLnZhcmlhbnRfaWRdID0gaXRlbTtcbiAgICBcbiAgICBpdGVtLm9uKCdBZGRUb0hvbGRpbmcnLCBmdW5jdGlvbiAocHJvZHVjdCkge1xuICAgICAgdmFyIHByb2R1Y3RfY291bnQgPSBfdGhpcy5wcm9kdWN0X2hvbGRlci5hZGRfdG9faG9sZGluZyhwcm9kdWN0KTtcbiAgICAgIGl0ZW0uY291bnQgPSBwcm9kdWN0X2NvdW50O1xuICAgIH0pO1xuICAgIFxuICAgIGl0ZW0ub24oJ1JlbW92ZUZyb21Ib2xkaW5nJywgZnVuY3Rpb24gKHByb2R1Y3RfaWQpIHtcbiAgICAgIHZhciBwcm9kdWN0X2NvdW50ID0gX3RoaXMucHJvZHVjdF9ob2xkZXIucmVtb3ZlX2Zyb21faG9sZGluZyhwcm9kdWN0X2lkKTtcbiAgICAgIGl0ZW0uY291bnQgPSAocHJvZHVjdF9jb3VudCA+IDApID8gcHJvZHVjdF9jb3VudCA6ICcnO1xuICAgIH0pO1xuICAgIFxuICAgIGl0ZW0ub24oJ1VwZGF0ZUhvbGRpbmcnLCBmdW5jdGlvbiAocHJvZHVjdCwgcXR5KSB7XG4gICAgICB2YXIgcHJvZHVjdF9jb3VudCA9IF90aGlzLnByb2R1Y3RfaG9sZGVyLnVwZGF0ZV9pdGVtX2luX2hvbGRpbmcocHJvZHVjdCwgcXR5KTtcbiAgICAgIGl0ZW0uY291bnQgPSAocHJvZHVjdF9jb3VudCA+IDApID8gcHJvZHVjdF9jb3VudCA6ICcnO1xuICAgIH0pO1xuICB9KTtcbn07XG5cbm1vZHVsZS5leHBvcnRzID0gU2l4UGFja0J1aWxkZXI7IiwidmFyIENhcnRKUyA9IHJlcXVpcmUoXCIuLy4uLy4uL2Jvd2VyX2NvbXBvbmVudHMvc2hvcGlmeS1jYXJ0anMvZGlzdC9jYXJ0LmpzXCIpO1xudmFyIENhcnREaXNwbGF5ID0gcmVxdWlyZSgnLi9waGQuY2FydC5zdGFuZGFyZF9kaXNwbGF5LmpzJyk7XG52YXIgQ2FydE9mZkNhbnZhcyA9IHJlcXVpcmUoJy4vcGhkLmNhcnQuc3RhbmRhcmRfb2ZmY2FudmFzLmpzJyk7XG5cbnZhciBTdGFuZGFyZENhcnQgPSBmdW5jdGlvbiAoKSB7XG4gIHZhciBjYXJ0X2FjdGlvbl9zZWxlY3RvciA9ICdhW2hyZWY9XCIvY2FydFwiXSc7XG4gIHRoaXMub2ZmX2NhbnZhcyA9IG5ldyBDYXJ0T2ZmQ2FudmFzKGNhcnRfYWN0aW9uX3NlbGVjdG9yKTtcbiAgdGhpcy5kaXNwbGF5ID0gbmV3IENhcnREaXNwbGF5KCk7XG4gIFxuICB0aGlzLl9hZGRfZXZlbnRfbGlzdGVuZXJzKCk7XG59O1xuXG5TdGFuZGFyZENhcnQucHJvdG90eXBlLmFkZF9wcm9kdWN0cyA9IGZ1bmN0aW9uIChwcm9kdWN0cykge1xuICAvLyBwcm9kdWN0cyBpcyBhbiBhcnJheSBmdWxsIG9mIHByb2R1Y3RzIHRoYXQgYXJlIHJlYWR5IHRvIGdvXG4gIGZvciAodmFyIGtleSBpbiBwcm9kdWN0cykge1xuICAgIGlmIChwcm9kdWN0cy5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XG4gICAgICB2YXIgcHJvZHVjdCA9IHByb2R1Y3RzW2tleV07XG4gICAgICB0aGlzLmFkZF9wcm9kdWN0KHByb2R1Y3QpO1xuICAgIH1cbiAgfVxufTtcblxuU3RhbmRhcmRDYXJ0LnByb3RvdHlwZS5hZGRfcHJvZHVjdCA9IGZ1bmN0aW9uIChwcm9kdWN0KSB7XG4gIHZhciBfdGhpcyA9IHRoaXM7XG4gIFxuICAvLyBxdWljayBkaXNwbGF5IHVwZGF0ZVxuICAvLyBUT0RPOiBGVVRVUkUgU1RFV0FSVCEhISEgUVVJQ0sgQUREIElTIE5PVCBRVUlDSyBBRERJTkcgXG4gIF90aGlzLmRpc3BsYXkudXBkYXRlX2NhcnRfaXRlbShwcm9kdWN0KTtcbiAgXG4gIFxuICAvLyBhY3R1YWxseSBhZGQgdG8gY2FydFxuICBDYXJ0SlMuYWRkSXRlbShwcm9kdWN0LmlkLCBwcm9kdWN0LnF0eSwgcHJvZHVjdC5wcm9wZXJ0aWVzLCB7XG4gICAgc3VjY2VzczogZnVuY3Rpb24gKGRhdGEsIHRleHRTdGF0dXMsIGpxWEhSKSB7XG4gICAgICBfdGhpcy5faXRlbV9hZGRlZF9zdWNjZXNzKGRhdGEsIHRleHRTdGF0dXMsIGpxWEhSKTtcbiAgICB9LFxuICAgIGVycm9yOiBmdW5jdGlvbiAoanFYSFIsIHRleHRTdGF0dXMsIGVycm9yVGhyb3duKSB7XG4gICAgICBfdGhpcy5faXRlbV9hZGRlZF9lcnJvcihqcVhIUiwgdGV4dFN0YXR1cywgZXJyb3JUaHJvd24pO1xuICAgIH1cbiAgfSk7XG59O1xuXG4vLyBQcml2YXRlXG5cblN0YW5kYXJkQ2FydC5wcm90b3R5cGUuX2FkZF9ldmVudF9saXN0ZW5lcnMgPSBmdW5jdGlvbiAoKSB7XG4gIHZhciBfdGhpcyA9IHRoaXM7XG4gICQoZG9jdW1lbnQpLm9uKCdjYXJ0LnJlcXVlc3RDb21wbGV0ZScsIGZ1bmN0aW9uKGUsIGNhcnQpIHtcbiAgICBjb25zb2xlLmxvZygnY2FydC5yZXF1ZXN0Q29tcGxldGUnLCBlLCBjYXJ0KTtcbiAgICBfdGhpcy5kaXNwbGF5LnVwZGF0ZShjYXJ0KTtcbiAgfSk7XG59O1xuXG5TdGFuZGFyZENhcnQucHJvdG90eXBlLl9pdGVtX2FkZGVkX3N1Y2Nlc3MgPSBmdW5jdGlvbiAoZGF0YSwgdGV4dFN0YXR1cywganFYSFIpIHtcbiAgLy8gY29sbGVjdCBsYXN0IGFkZGVkIGl0ZW1zIGZvciBzdWNjZXMgbWVzc2FnZVxuICAvLyBjb25zb2xlLmxvZygnSXRlbSBhZGRlZDogc3VjY2VzcycsIGRhdGEsIHRleHRTdGF0dXMsIGpxWEhSKTtcbn07XG5cblN0YW5kYXJkQ2FydC5wcm90b3R5cGUuX2l0ZW1fYWRkZWRfZXJyb3IgPSBmdW5jdGlvbiAoanFYSFIsIHRleHRTdGF0dXMsIGVycm9yVGhyb3duKSB7XG4gIC8vIGRpc3BsYXkgZXJyb3JcbiAgY29uc29sZS5sb2coJ0l0ZW0gYWRkZWQ6IGVycm9yJywganFYSFIsIHRleHRTdGF0dXMsIGVycm9yVGhyb3duKTtcbn07XG5cbm1vZHVsZS5leHBvcnRzID0gU3RhbmRhcmRDYXJ0O1xud2luZG93LkNhcnRKUyA9IENhcnRKUzsiLCJ2YXIgRGF0YU1vZGVsID0gcmVxdWlyZSgnLi9fZGF0YV9tb2RlbC5qcycpO1xudmFyIENhcnRJdGVtcyA9IHJlcXVpcmUoJy4vcGhkLmNhcnQuc3RhbmRhcmRfZGlzcGxheV9pdGVtcy5qcycpO1xuXG52YXIgU3RhbmRhcmRDYXJ0RGlzcGxheSA9IGZ1bmN0aW9uICgpIHtcbiAgdGhpcy4kZGV0YWlscyA9ICQoJy5zaWRlLWNhcnQtZGV0YWlscycpO1xuICB0aGlzLiRlbXB0eV9tZXNzYWdlID0gJCgnLnNpZGUtY2FydC1lbXB0eScpO1xuICB0aGlzLnNlY3Rpb25fZW1wdHlfbWVzc2FnZV9zZWxlY3RvciA9ICcuc2lkZS1jYXJ0LXNlY3Rpb24tZW1wdHknO1xuICBcbiAgdmFyIGl0ZW1fdGVtcGxhdGUgPSAnLnBoZC1zaWRlLWNhcnQtaXRlbS10ZW1wbGF0ZSc7XG4gIHZhciBpdGVtX3NlbGVjdG9yID0gJ1tkYXRhLXBoZC1zaWRlLWNhcnQtaXRlbV0nO1xuICB2YXIgc3Vic2NyaXB0aW9uX2l0ZW1zX3dyYXBwZXJfc2VsZWN0b3IgPSAnW2RhdGEtcGhkLXNpZGUtY2FydC1pdGVtcy1zdWJzY3JpcHRpb25dJztcbiAgdmFyIG9uZV9vZmZfaXRlbXNfd3JhcHBlcl9zZWxlY3RvciA9ICdbZGF0YS1waGQtc2lkZS1jYXJ0LWl0ZW1zLW9uZS1vZmZdJztcbiAgXG4gIHRoaXMuc3Vic2NyaXB0aW9uX2l0ZW1zID0gbmV3IENhcnRJdGVtcyhzdWJzY3JpcHRpb25faXRlbXNfd3JhcHBlcl9zZWxlY3RvciwgaXRlbV9zZWxlY3RvciwgaXRlbV90ZW1wbGF0ZSk7XG4gIHRoaXMub25lX29mZl9pdGVtcyA9IG5ldyBDYXJ0SXRlbXMob25lX29mZl9pdGVtc193cmFwcGVyX3NlbGVjdG9yLCBpdGVtX3NlbGVjdG9yLCBpdGVtX3RlbXBsYXRlKTtcbiAgXG4gIHRoaXMuaXRlbV9ncm91cHMgPSBbXG4gICAgdGhpcy5zdWJzY3JpcHRpb25faXRlbXMsXG4gICAgdGhpcy5vbmVfb2ZmX2l0ZW1zXG4gIF07XG59O1xuXG5TdGFuZGFyZENhcnREaXNwbGF5LnByb3RvdHlwZS51cGRhdGUgPSBmdW5jdGlvbiAoY2FydCkge1xuICAvLyBwcmV0dHkgYnJ1dGFsIGJ1dCB3ZSB3aXBlIHRoZSBjYXJ0IGl0ZW1zIGJlZm9yZSB3ZSByZWRyYXcgdGhlbSB3aXRoIHRoZSB1cGRhdGVkIGNvbnRlbnRcbiAgdGhpcy5jbGVhcigpO1xuXG4gIC8vIGFkZCB0aGUgdXBkYXRlZCBjb250ZW50XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgY2FydC5pdGVtcy5sZW5ndGg7IGkrKykge1xuICAgIHZhciBpdGVtID0gY2FydC5pdGVtc1tpXTtcbiAgICB0aGlzLnVwZGF0ZV9jYXJ0X2l0ZW0oaXRlbSk7XG4gIH1cbiAgXG4gIC8vIHVwZGF0ZSB0aGUgZW1wdHkgZGlzcGxheSBtZXNzYWdlIHN0YXRlc1xuICB0aGlzLl91cGRhdGVfY2FydF9lbXB0eV9zdGF0ZSgpO1xufTtcblxuU3RhbmRhcmRDYXJ0RGlzcGxheS5wcm90b3R5cGUudXBkYXRlX2NhcnRfaXRlbSA9IGZ1bmN0aW9uIChpdGVtKSB7XG4gIFxuICBjb25zb2xlLmxvZygndXBkYXRlX2NhcnRfaXRlbScsIGl0ZW0pO1xuICBcbiAgXG4gIGlmIChpdGVtLnByb3BlcnRpZXMuc3Vic2NyaXB0aW9uX2lkICE9PSB1bmRlZmluZWQpIHtcbiAgICB0aGlzLnN1YnNjcmlwdGlvbl9pdGVtcy51cGRhdGVfY2FydF9pdGVtKGl0ZW0pO1xuICB9IGVsc2Uge1xuICAgIHRoaXMub25lX29mZl9pdGVtcy51cGRhdGVfY2FydF9pdGVtKGl0ZW0pO1xuICB9XG59O1xuXG5TdGFuZGFyZENhcnREaXNwbGF5LnByb3RvdHlwZS5jbGVhciA9IGZ1bmN0aW9uICgpIHtcbiAgdGhpcy5fZWFjaChmdW5jdGlvbiAoaSwgaXRlbV9ncm91cCkge1xuICAgIGl0ZW1fZ3JvdXAuY2xlYXJfaXRlbXMoKTtcbiAgfSk7XG59O1xuXG4vLyBQcml2YXRlXG5cblN0YW5kYXJkQ2FydERpc3BsYXkucHJvdG90eXBlLl91cGRhdGVfY2FydF9lbXB0eV9zdGF0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgdmFyIHRvdGFsX2l0ZW1zID0gMDtcbiAgXG4gIC8vIGhpZGUvc2hvdyB0aGUgc2VjdGlvbnMgZW1wdHkgbWVzc2FnZVxuICB0aGlzLl9lYWNoKGZ1bmN0aW9uIChpLCBpdGVtX2dyb3VwKSB7XG4gICAgdmFyIGl0ZW1fZ3JvdXBfY291bnQgPSBpdGVtX2dyb3VwLmNvdW50KCk7XG4gICAgaWYgKGl0ZW1fZ3JvdXBfY291bnQgPiAwKSB7XG4gICAgICBpdGVtX2dyb3VwLiRpdGVtc193cmFwcGVyLm5leHQodGhpcy5zZWN0aW9uX2VtcHR5X21lc3NhZ2Vfc2VsZWN0b3IpLmhpZGUoKTtcbiAgICAgIHRvdGFsX2l0ZW1zICs9IGl0ZW1fZ3JvdXBfY291bnQ7XG4gICAgfSBlbHNlIHtcbiAgICAgIGl0ZW1fZ3JvdXAuJGl0ZW1zX3dyYXBwZXIubmV4dCh0aGlzLnNlY3Rpb25fZW1wdHlfbWVzc2FnZV9zZWxlY3Rvcikuc2hvdygpO1xuICAgIH1cbiAgfSk7XG4gIFxuICAvLyBoaWRlL3Nob3cgZ2xvYmFsIHNlY3Rpb25zIGVtcHR5IG1lc3NhZ2VcbiAgaWYgKHRvdGFsX2l0ZW1zID4gMCkge1xuICAgIHRoaXMuJGVtcHR5X21lc3NhZ2UuaGlkZSgpO1xuICAgIHRoaXMuJGRldGFpbHMuc2hvdygpO1xuICB9IGVsc2Uge1xuICAgIHRoaXMuJGVtcHR5X21lc3NhZ2Uuc2hvdygpO1xuICAgIHRoaXMuJGRldGFpbHMuaGlkZSgpO1xuICB9XG59O1xuXG5TdGFuZGFyZENhcnREaXNwbGF5LnByb3RvdHlwZS5fZWFjaCA9IGZ1bmN0aW9uIChjYWxsYmFjaykge1xuICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuaXRlbV9ncm91cHMubGVuZ3RoOyBpKyspIHtcbiAgICB2YXIgaXRlbV9ncm91cCA9IHRoaXMuaXRlbV9ncm91cHNbaV07XG4gICAgY2FsbGJhY2soaSwgaXRlbV9ncm91cCk7XG4gIH1cbn07XG5cbm1vZHVsZS5leHBvcnRzID0gU3RhbmRhcmRDYXJ0RGlzcGxheTsiLCJ2YXIgRGF0YU1vZGVsID0gcmVxdWlyZSgnLi9fZGF0YV9tb2RlbC5qcycpO1xuXG52YXIgU3RhbmRhcmRDYXJ0RGlzcGxheUl0ZW0gPSBmdW5jdGlvbiAoaXRlbXNfd3JhcHBlcl9zZWxlY3RvciwgaXRlbV9zZWxlY3RvciwgaXRlbV9pZCkge1xuICB0aGlzLmlkID0gaXRlbV9pZDtcbiAgdGhpcy5pdGVtX3NlbGVjdG9yID0gaXRlbV9zZWxlY3Rvci5yZXBsYWNlKCddJywgJz1cIicrdGhpcy5pZCsnXCJdJyk7XG4gIHRoaXMuaXRlbXNfd3JhcHBlcl9zZWxlY3RvciA9IGl0ZW1zX3dyYXBwZXJfc2VsZWN0b3I7XG4gIHRoaXMuc2VsZWN0b3IgPSB0aGlzLml0ZW1zX3dyYXBwZXJfc2VsZWN0b3IrJyAnK3RoaXMuaXRlbV9zZWxlY3RvcjtcbiAgXG4gIHRoaXMuJGVsZSA9ICQodGhpcy5pdGVtX3NlbGVjdG9yKTtcbiAgXG4gIHRoaXMucHJpY2VfdGVtcGF0ZSA9IHRoaXMuJGVsZS5maW5kKCcucGhkLXNpZGUtY2FydC1pdGVtLXByaWNlLXRlbXBsYXRlJykuaHRtbCgpO1xuICBcbiAgbmV3IERhdGFNb2RlbCh0aGlzLCB7XG4gICAgdGl0bGU6IHRoaXMuc2VsZWN0b3IrJyBbZGF0YS1waGQtc2lkZS1jYXJ0LWl0ZW0tdGl0bGVdJyxcbiAgICBxdWFudGl0eTogdGhpcy5zZWxlY3RvcisnIFtkYXRhLXBoZC1zaWRlLWNhcnQtaXRlbS1xdHldJyxcbiAgICBwcmljZTogdGhpcy5zZWxlY3RvcisnIFtkYXRhLXBoZC1zaWRlLWNhcnQtaXRlbS1wcmljZV0nLFxuICAgIGxpbmVfcHJpY2U6IHRoaXMuc2VsZWN0b3IrJyBbZGF0YS1waGQtc2lkZS1jYXJ0LWl0ZW0tbGluZS1wcmljZV0nXG4gIH0pO1xufTtcblxuU3RhbmRhcmRDYXJ0RGlzcGxheUl0ZW0ucHJvdG90eXBlLnVwZGF0ZSA9IGZ1bmN0aW9uIChpdGVtKSB7XG4gIHRoaXMucXVhbnRpdHkgPSBpdGVtLnF1YW50aXR5O1xuICB0aGlzLnByaWNlID0gdGhpcy5fcHJpY2VfbWFya3VwKGl0ZW0ucHJpY2UpO1xuICB0aGlzLmxpbmVfcHJpY2UgPSB0aGlzLl9wcmljZV9tYXJrdXAoaXRlbS5saW5lX3ByaWNlKTtcbiAgaWYgKHRoaXMudGl0bGUgPT09IHVuZGVmaW5lZCkge1xuICAgIHRoaXMudGl0bGUgPSBpdGVtLnRpdGxlO1xuICB9XG59O1xuXG4vLyBQcml2YXRlXG5cblN0YW5kYXJkQ2FydERpc3BsYXlJdGVtLnByb3RvdHlwZS5fcHJpY2VfbWFya3VwID0gZnVuY3Rpb24gKGl0ZW1fcHJpY2UpIHtcbiAgdmFyIGl0ZW1fcHJpY2VfZm9ybWF0ZWQgPSBTaG9waWZ5LmZvcm1hdE1vbmV5KGl0ZW1fcHJpY2UsIEJzaWZ5Lm1vbmV5X2Zvcm1hdHMubW9uZXlGb3JtYXQpO1xuICB2YXIgaXRlbV9wcmljZV93aXRoX2N1cnJlbmN5X2Zvcm1hdGVkID0gU2hvcGlmeS5mb3JtYXRNb25leShpdGVtX3ByaWNlLCBCc2lmeS5tb25leV9mb3JtYXRzLm1vbmV5V2l0aEN1cnJlbmN5Rm9ybWF0KTtcbiAgcmV0dXJuIHRoaXMucHJpY2VfdGVtcGF0ZVxuICAgIC5yZXBsYWNlKCdbSVRFTV9QUklDRV9EQVRBXScsIGl0ZW1fcHJpY2UpXG4gICAgLnJlcGxhY2UoJ1tJVEVNX1BSSUNFXScsIGl0ZW1fcHJpY2VfZm9ybWF0ZWQpXG4gICAgLnJlcGxhY2UoJ1tJVEVNX1BSSUNFX1dJVEhfQ1VSUkVOQ1ldJywgaXRlbV9wcmljZV93aXRoX2N1cnJlbmN5X2Zvcm1hdGVkKTtcbn07XG5cbm1vZHVsZS5leHBvcnRzID0gU3RhbmRhcmRDYXJ0RGlzcGxheUl0ZW07IiwicmVxdWlyZSgnLi9fcG9seWZpbGxzLmpzJykub2JqZWN0S2V5cygpO1xudmFyIENhcnRJdGVtID0gcmVxdWlyZSgnLi9waGQuY2FydC5zdGFuZGFyZF9kaXNwbGF5X2l0ZW0uanMnKTtcblxudmFyIFN0YW5kYXJkQ2FydERpc3BsYXlJdGVtcyA9IGZ1bmN0aW9uIChpdGVtc193cmFwcGVyX3NlbGVjdG9yLCBpdGVtX3NlbGVjdG9yLCBpdGVtX3RlbXBsYXRlKSB7XG4gIHRoaXMuaXRlbXMgPSB7fTtcbiAgdGhpcy5pdGVtX3NlbGVjdG9yID0gaXRlbV9zZWxlY3RvcjtcbiAgdGhpcy5pdGVtc193cmFwcGVyX3NlbGVjdG9yID0gaXRlbXNfd3JhcHBlcl9zZWxlY3RvcjtcbiAgdGhpcy4kaXRlbXMgPSAkKGl0ZW1fc2VsZWN0b3IpO1xuICB0aGlzLiRpdGVtc193cmFwcGVyID0gJChpdGVtc193cmFwcGVyX3NlbGVjdG9yKTtcbiAgdGhpcy4kaXRlbV90ZW1wbGF0ZSA9ICQoaXRlbV90ZW1wbGF0ZSk7XG4gIC8vIHJlbW92ZSBkYXRhIHBhcnRzIGZyb20gc2VsZWN0b3Igc3RyaW5nIHNvIHdlIGNhbiBhY2Nlc3Mgd2l0aCAuZGF0YSgpICYgLmF0dHIoKVxuICB0aGlzLml0ZW1faWRfZGF0YV9hdHRyID0gaXRlbV9zZWxlY3Rvci5yZXBsYWNlKC9cXFt8XFxdL2csICcnKTtcbiAgdGhpcy5pdGVtX2lkX2RhdGEgPSB0aGlzLml0ZW1faWRfZGF0YV9hdHRyLnJlcGxhY2UoJ2RhdGEtJywgJycpO1xuICBcbiAgdGhpcy5fY29sbGVjdF9pdGVtc19mcm9tX2RvbSgpO1xufTtcblxuU3RhbmRhcmRDYXJ0RGlzcGxheUl0ZW1zLnByb3RvdHlwZS51cGRhdGVfY2FydF9pdGVtID0gZnVuY3Rpb24gKGl0ZW0pIHtcbiAgaWYgKHRoaXMuaGFzX2l0ZW0oaXRlbS5pZCkpIHtcbiAgICB0aGlzLml0ZW1zW2l0ZW0uaWRdLnVwZGF0ZShpdGVtKTtcbiAgfSBlbHNlIHtcbiAgICB0aGlzLl9idWlsZF9uZXdfaXRlbShpdGVtKTtcbiAgfVxufTtcblxuU3RhbmRhcmRDYXJ0RGlzcGxheUl0ZW1zLnByb3RvdHlwZS5oYXNfaXRlbSA9IGZ1bmN0aW9uIChpdGVtX2lkKSB7XG4gIHZhciBoYXNfaXRlbSA9IGZhbHNlO1xuICBmb3IgKHZhciBpIGluIHRoaXMuaXRlbXMpIHtcbiAgICBpZiAoaSA9PT0gaXRlbV9pZC50b1N0cmluZygpKSB7XG4gICAgICBoYXNfaXRlbSA9IHRydWU7XG4gICAgICBicmVhaztcbiAgICB9XG4gIH1cbiAgcmV0dXJuIGhhc19pdGVtO1xufTtcblxuU3RhbmRhcmRDYXJ0RGlzcGxheUl0ZW1zLnByb3RvdHlwZS5jb3VudCA9IGZ1bmN0aW9uICgpIHtcbiAgcmV0dXJuIE9iamVjdC5rZXlzKHRoaXMuaXRlbXMpLmxlbmd0aDtcbn07XG5cblN0YW5kYXJkQ2FydERpc3BsYXlJdGVtcy5wcm90b3R5cGUuY2xlYXJfaXRlbXMgPSBmdW5jdGlvbiAoKSB7XG4gIHRoaXMuaXRlbXMgPSB7fTtcbiAgdGhpcy4kaXRlbXNfd3JhcHBlci5odG1sKCcnKTtcbn07XG5cbi8vIFByaXZhdGVcblxuU3RhbmRhcmRDYXJ0RGlzcGxheUl0ZW1zLnByb3RvdHlwZS5fYWRkX25ld19pdGVtID0gZnVuY3Rpb24gKGl0ZW1faWQpIHtcbiAgdGhpcy5pdGVtc1tpdGVtX2lkXSA9IG5ldyBDYXJ0SXRlbSh0aGlzLml0ZW1zX3dyYXBwZXJfc2VsZWN0b3IsIHRoaXMuaXRlbV9zZWxlY3RvciwgaXRlbV9pZCk7XG59O1xuXG5TdGFuZGFyZENhcnREaXNwbGF5SXRlbXMucHJvdG90eXBlLl9jb2xsZWN0X2l0ZW1zX2Zyb21fZG9tID0gZnVuY3Rpb24gKCkge1xuICB2YXIgX3RoaXMgPSB0aGlzO1xuICB0aGlzLiRpdGVtcy5lYWNoKGZ1bmN0aW9uIChpLCBpdGVtKSB7XG4gICAgdmFyICRpdGVtID0gJChpdGVtKTtcbiAgICB2YXIgaXRlbV9pZCA9ICRpdGVtLmRhdGEoX3RoaXMuaXRlbV9pZF9kYXRhKTtcbiAgICBpZiAoIV90aGlzLmhhc19pdGVtKGl0ZW1faWQpKSB7XG4gICAgICBfdGhpcy5fYWRkX25ld19pdGVtKGl0ZW1faWQpO1xuICAgIH1cbiAgfSk7XG59O1xuXG5TdGFuZGFyZENhcnREaXNwbGF5SXRlbXMucHJvdG90eXBlLl9idWlsZF9uZXdfaXRlbSA9IGZ1bmN0aW9uIChpdGVtKSB7XG4gIHZhciAkaXRlbV9tYXJrdXAgPSAkKHRoaXMuJGl0ZW1fdGVtcGxhdGUuaHRtbCgpKTtcbiAgJGl0ZW1fbWFya3VwLmRhdGEodGhpcy5pdGVtX2lkX2RhdGEsIGl0ZW0uaWQpLmF0dHIodGhpcy5pdGVtX2lkX2RhdGFfYXR0ciwgaXRlbS5pZCk7XG4gIHRoaXMuJGl0ZW1zX3dyYXBwZXIuYXBwZW5kKCRpdGVtX21hcmt1cCk7XG4gIFxuICB0aGlzLl9hZGRfbmV3X2l0ZW0oaXRlbS5pZCk7XG4gIHRoaXMuaXRlbXNbaXRlbS5pZF0udXBkYXRlKGl0ZW0pO1xufTtcblxubW9kdWxlLmV4cG9ydHMgPSBTdGFuZGFyZENhcnREaXNwbGF5SXRlbXM7IiwidmFyIENvb2tpZXMgPSByZXF1aXJlKCcuL19jb29raWVzLmpzJyk7XG5cbnZhciBTdGFuZGFyZENhcnRPZmZDYW52YXMgPSBmdW5jdGlvbiAoY2FydF9hY3Rpb25fc2VsZWN0b3IpIHtcbiAgdGhpcy5jYXJ0X2FjdGlvbl9zZWxlY3RvciA9IGNhcnRfYWN0aW9uX3NlbGVjdG9yO1xuICB0aGlzLm9mZmNhbmF2c19jbGFzcyA9ICdvZmZjYW52YXMtb3Blbic7XG4gIHRoaXMuJGJvZHkgPSAkKCdib2R5Jyk7XG4gIFxuICB0aGlzLl9hZGRfZXZlbnRfbGlzdGVudGVycygpO1xuICBcbiAgaWYgKENvb2tpZXMuaGFzSXRlbSgnY2FydF9zdGF0ZScpKSB7XG4gICAgdmFyIGFjdGlvbiA9IENvb2tpZXMuZ2V0SXRlbSgnY2FydF9zdGF0ZScpO1xuICAgIHRoaXMudG9nZ2xlX2RyYXcoYWN0aW9uKTtcbiAgfVxufTtcblxuU3RhbmRhcmRDYXJ0T2ZmQ2FudmFzLnByb3RvdHlwZS50b2dnbGVfZHJhdyA9IGZ1bmN0aW9uIChhY3Rpb24pIHtcbiAgLy8gYWN0aW9uczogb3BlbiAvIGNsb3NlXG4gIGlmIChhY3Rpb24gIT09IHVuZGVmaW5lZCAmJiB0aGlzW2FjdGlvbisnX2RyYXcnXSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgdGhpc1thY3Rpb24rJ19kcmF3J10uYXBwbHkodGhpcyk7XG4gIH0gZWxzZSB7XG4gICAgaWYgKHRoaXMuJGJvZHkuaGFzQ2xhc3ModGhpcy5vZmZjYW5hdnNfY2xhc3MpKSB7XG4gICAgICB0aGlzLmNsb3NlX2RyYXcoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5vcGVuX2RyYXcoKTtcbiAgICB9XG4gIH1cbn07XG5cblN0YW5kYXJkQ2FydE9mZkNhbnZhcy5wcm90b3R5cGUub3Blbl9kcmF3ID0gZnVuY3Rpb24gKCkge1xuICB0aGlzLiRib2R5LmFkZENsYXNzKHRoaXMub2ZmY2FuYXZzX2NsYXNzKTtcbiAgQ29va2llcy5zZXRJdGVtKCdjYXJ0X3N0YXRlJywgJ29wZW4nKTtcbiAgJCh3aW5kb3cpLnRyaWdnZXIoJ3Jlc2l6ZScpO1xufTtcblxuU3RhbmRhcmRDYXJ0T2ZmQ2FudmFzLnByb3RvdHlwZS5jbG9zZV9kcmF3ID0gZnVuY3Rpb24gKCkge1xuICB0aGlzLiRib2R5LnJlbW92ZUNsYXNzKHRoaXMub2ZmY2FuYXZzX2NsYXNzKTtcbiAgQ29va2llcy5zZXRJdGVtKCdjYXJ0X3N0YXRlJywgJ2Nsb3NlJyk7XG4gICQod2luZG93KS50cmlnZ2VyKCdyZXNpemUnKTtcbn07XG5cbi8vIFByaXZhdGVcblxuU3RhbmRhcmRDYXJ0T2ZmQ2FudmFzLnByb3RvdHlwZS5fYWRkX2V2ZW50X2xpc3RlbnRlcnMgPSBmdW5jdGlvbiAoKSB7XG4gIHZhciBfdGhpcyA9IHRoaXM7XG4gICQoZG9jdW1lbnQpLm9uKCdjbGljaycsIHRoaXMuY2FydF9hY3Rpb25fc2VsZWN0b3IsIGZ1bmN0aW9uIChlKSB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIF90aGlzLnRvZ2dsZV9kcmF3KCk7XG4gIH0pO1xufTtcblxubW9kdWxlLmV4cG9ydHMgPSBTdGFuZGFyZENhcnRPZmZDYW52YXM7IiwidmFyIFBoZFN0aWNreSA9IHJlcXVpcmUoJy4vcGhkLnN0aWNreS5qcycpO1xudmFyIFBoZENhcnQgPSByZXF1aXJlKCcuL3BoZC5jYXJ0LmpzJyk7XG5cbnZhciBQaGQgPSBmdW5jdGlvbiAoKSB7XG4gIG5ldyBQaGRTdGlja3koKTtcbiAgbmV3IFBoZENhcnQoKTtcbn07XG5cbm1vZHVsZS5leHBvcnRzID0gUGhkOyIsIi8qIFRvRG86IGNoZWNrIHRoZSBtb2RhbCBpc24ndCBhbHJlYWR5IG9wZW4gKi9cbnZhciBEYXRhTW9kZWwgPSByZXF1aXJlKCcuL19kYXRhX21vZGVsLmpzJyk7XG5cbnZhciBQaGRNb2RhbCA9IGZ1bmN0aW9uIChjYWxsYmFja3MsIHNlbGVjdG9yKSB7XG4gIHRoaXMuY2FsbGJhY2tfZXZlbnRzID0gWydvbl9vcGVuJywnb25fY2xvc2UnXTtcbiAgdGhpcy5zZWxlY3RvciA9IHNlbGVjdG9yIHx8ICdbZGF0YS1ic2lmeS1tb2RhbF0nO1xuICB0aGlzLiRlbGUgPSAkKHRoaXMuc2VsZWN0b3IpO1xuICB0aGlzLmlkID0gdGhpcy5faWQoKTtcbiAgXG4gIG5ldyBEYXRhTW9kZWwodGhpcywge1xuICAgIGNvbnRlbnQ6IHRoaXMuc2VsZWN0b3IrJyAubW9kYWwtY29udGVudCdcbiAgfSk7XG4gIFxuICB0aGlzLl9zZXRfY2FsbGJhY2tzKGNhbGxiYWNrcyk7XG4gIHRoaXMuX2FkZF9ldmVudF9saXN0ZW5lcnMoKTtcbn07XG5cblBoZE1vZGFsLnByb3RvdHlwZS5vcGVuID0gZnVuY3Rpb24gKCkge1xuICB0aGlzLiRlbGUubW9kYWwoKTtcbiAgdGhpcy4kZWxlLmRhdGEoJ21vZGFsX2lkJywgdGhpcy5pZCk7XG4gIGlmICh0aGlzLm9uX29wZW4pIHRoaXMub25fb3BlbigpO1xufTtcblxuUGhkTW9kYWwucHJvdG90eXBlLmNsb3NlID0gZnVuY3Rpb24gKCkge1xuICB0aGlzLiRlbGUubW9kYWwoJ2hpZGUnKTtcbiAgdGhpcy5kZXN0cm95KCk7XG59O1xuXG5QaGRNb2RhbC5wcm90b3R5cGUuZGVzdHJveSA9IGZ1bmN0aW9uICgpIHtcbiAgaWYgKHRoaXMub25fY2xvc2UpIHRoaXMub25fY2xvc2UoKTtcbiAgdGhpcy5jb250ZW50ID0gJyc7XG4gIHRoaXMuJGVsZS5kYXRhKCdicy5tb2RhbCcsIG51bGwpO1xuICB0aGlzLiRlbGUuZGF0YSgnbW9kYWxfaWQnLCBudWxsKTtcbn07XG5cbi8vIFByaXZhdGVcblxuUGhkTW9kYWwucHJvdG90eXBlLl9hZGRfZXZlbnRfbGlzdGVuZXJzID0gZnVuY3Rpb24gKCkge1xuICB2YXIgX3RoaXMgPSB0aGlzO1xuICB0aGlzLiRlbGUub24oJ2hpZGRlbi5icy5tb2RhbCcsIGZ1bmN0aW9uICgpIHtcbiAgICAvLyBPbmx5IHRyaWdnZXIgdGhpcyBmb3IgdGhlIG9uZSBvYmplY3QgdGhhdCBpbnZva2VkIHRoZSBtb2RhbFxuICAgIGlmIChfdGhpcy4kZWxlLmRhdGEoJ21vZGFsX2lkJykgPT09IF90aGlzLmlkKSB7XG4gICAgICBfdGhpcy5kZXN0cm95KCk7XG4gICAgfVxuICB9KTtcbn07XG5cblBoZE1vZGFsLnByb3RvdHlwZS5fc2V0X2NhbGxiYWNrcyA9IGZ1bmN0aW9uIChjYWxsYmFja3MpIHtcbiAgaWYgKGNhbGxiYWNrcykge1xuICAgIGZvciAodmFyIGkgaW4gdGhpcy5jYWxsYmFja19ldmVudHMpIHtcbiAgICAgIHZhciBldmVudCA9IHRoaXMuY2FsbGJhY2tfZXZlbnRzW2ldO1xuICAgICAgaWYgKGNhbGxiYWNrc1tldmVudF0pIHtcbiAgICAgICAgdGhpc1tldmVudF0gPSBjYWxsYmFja3NbZXZlbnRdO1xuICAgICAgfVxuICAgIH1cbiAgfVxufTtcblxuUGhkTW9kYWwucHJvdG90eXBlLl9pZCA9IGZ1bmN0aW9uICgpIHtcbiAgLy8gaHR0cHM6Ly9naXN0LmdpdGh1Yi5jb20vZ29yZG9uYnJhbmRlci8yMjMwMzE3XG4gIHJldHVybiAnXycgKyBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zdWJzdHIoMiwgOSk7XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IFBoZE1vZGFsOyIsIi8vIFdoZW4gdGhlIGVsZW1lbnQgaGl0cyB0aGUgdG9wIG9mIHRoZSBwYWdlIG1ha2UgaXQgc3RpY2sgdG8gaXRcbnZhciBQaGRTdGlja3kgPSBmdW5jdGlvbiAoKSB7XG4gIHRoaXMuJGVsZSA9ICQoJ1tkYXRhLXBoZD1cInN0aWNreVwiXScpO1xuICB0aGlzLiRwYXJlbnQgPSB0aGlzLiRlbGUucGFyZW50KCk7XG4gIHRoaXMucGFyZW50X29yaWdfbWFyZ2luX2JvdHRvbSA9IHRoaXMuY3NzX3RvX2ludCh0aGlzLiRwYXJlbnQsICdtYXJnaW4tYm90dG9tJyk7XG4gIFxuICB2YXIgX3RoaXMgPSB0aGlzO1xuICBpZiAoX3RoaXMuJGVsZS5sZW5ndGggPiAwKSB7XG4gICAgLy8gYm9vdHN0cmFwIGFmZml4XG4gICAgX3RoaXMuJGVsZS5hZmZpeCh7XG4gICAgICBvZmZzZXQ6IHtcbiAgICAgICAgdG9wOiBfdGhpcy4kZWxlLm9mZnNldCgpLnRvcCxcbiAgICAgICAgYm90dG9tOiAzMFxuICAgICAgfSxcbiAgICAgIHRhcmdldDogJy5vZmZjYW52YXMtbWFpbidcbiAgICB9KS5vbignYWZmaXhlZC5icy5hZmZpeCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciBtYXJnaW4gPSAoX3RoaXMuJGVsZS5jc3MoJ3Bvc2l0aW9uJykgIT09ICdyZWxhdGl2ZScpID8gKF90aGlzLnBhcmVudF9vcmlnX21hcmdpbl9ib3R0b20gKyBfdGhpcy5lbGVfaGVpZ2h0KCkpIDogX3RoaXMucGFyZW50X29yaWdfbWFyZ2luX2JvdHRvbTtcbiAgICAgIF90aGlzLnNldF9tYXJnaW4obWFyZ2luKTtcbiAgICB9KS5vbignYWZmaXhlZC10b3AuYnMuYWZmaXgnLCBmdW5jdGlvbiAoKSB7XG4gICAgICBfdGhpcy5zZXRfbWFyZ2luKF90aGlzLnBhcmVudF9vcmlnX21hcmdpbl9ib3R0b20pO1xuICAgIH0pO1xuICB9XG59O1xuXG5QaGRTdGlja3kucHJvdG90eXBlLnNldF9tYXJnaW4gPSBmdW5jdGlvbiAobWFyZ2luKSB7XG4gIHRoaXMuJHBhcmVudC5jc3MoeyAnbWFyZ2luLWJvdHRvbSc6IG1hcmdpbiB9KTtcbn07XG5cblBoZFN0aWNreS5wcm90b3R5cGUuZWxlX2hlaWdodCA9IGZ1bmN0aW9uIChtYXJnaW4pIHtcbiAgcmV0dXJuIHRoaXMuJGVsZS5oZWlnaHQoKSArIHRoaXMuY3NzX3RvX2ludCh0aGlzLiRlbGUsICdtYXJnaW4tdG9wJykgKyB0aGlzLmNzc190b19pbnQodGhpcy4kZWxlLCAnbWFyZ2luLWJvdHRvbScpICsgdGhpcy5jc3NfdG9faW50KHRoaXMuJGVsZSwgJ3BhZGRpbmctdG9wJykgKyB0aGlzLmNzc190b19pbnQodGhpcy4kZWxlLCAncGFkZGluZy1ib3R0b20nKTtcbn07XG5cblBoZFN0aWNreS5wcm90b3R5cGUuY3NzX3RvX2ludCA9IGZ1bmN0aW9uICgkZWxlLCBwcm9wKSB7XG4gIHJldHVybiBwYXJzZUludCgkZWxlLmNzcyhwcm9wKSk7XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IFBoZFN0aWNreTsiXX0=
